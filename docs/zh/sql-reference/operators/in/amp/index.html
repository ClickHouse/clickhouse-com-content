










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="zh">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>IN 操作符 | ClickHouse文档</title>
    <link rel="canonical" href="https://clickhouse.com/docs/zh/sql-reference/operators/in/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "IN 操作符 | ClickHouse文档",
"mainEntityOfPage": "https://clickhouse.com/docs/zh/sql-reference/operators/in/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "IN 操作符 | ClickHouse文档",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer,main{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-bottom:1rem}ol,ul{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.lead{font-size:1.375rem;font-weight:400}@media(max-width:1200px){.lead{font-size:calc(1.2625rem+.15vw)}}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}}.table{width:100%;margin-bottom:8px;color:#212529}.table-primary{background-color:#fff1b8}.table-warning{background-color:#ffeeba}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-primary-light{background-color:#fffefb}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-primary{color:#495057;background-color:#fc0;border-color:#fc0}.btn-primary:focus,.btn-primary:hover{color:#495057;background-color:#d9ad00;border-color:#cca300}.btn-primary:focus{box-shadow:0 0 0 0 rgba(228,185,13,.5)}.btn-primary:disabled{color:#495057;background-color:#fc0;border-color:#fc0}.btn-warning{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-warning:focus,.btn-warning:hover{color:#495057;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{box-shadow:0 0 0 0 rgba(228,176,19,.5)}.btn-warning:disabled{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-primary-light{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-primary-light:focus,.btn-primary-light:hover{color:#495057;background-color:#ffedca;border-color:#ffe9bd}.btn-primary-light:focus{box-shadow:0 0 0 0 rgba(228,225,217,.5)}.btn-primary-light:disabled{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-primary{color:#fc0;border-color:#fc0}.btn-outline-primary:hover{color:#495057;background-color:#fc0;border-color:#fc0}.btn-outline-primary:focus{box-shadow:0 0 0 0 rgba(255,204,0,.5)}.btn-outline-primary:disabled{color:#fc0;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 0 rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-primary-light{color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:hover{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:focus{box-shadow:0 0 0 0 rgba(255,250,240,.5)}.btn-outline-primary-light:disabled{color:#fffaf0;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.btn-group{position:relative;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
    <div class="alert alert-primary" role="alert">
      <p class="display-5 mb-2">Help wanted!</p>
      <p class="lead">The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href="/docs/en/sql-reference/operators/in/" class="alert-link">You can also use the original English version as a reference.</a></p>
      <p class="lead">
          <a class="btn btn-lg btn-primary text-white" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/sql-reference/operators/in.md" target="_blank" rel="external nofollow noreferrer">
              Help ClickHouse documentation by editing this page
          </a>
      </p>
    </div>

          <h1 id=select-in-operators>IN 操作符<a class=headerlink href=../amp/#select-in-operators title="Permanent link"> </a></h1> <p>该 <code class=syntax>IN</code>, <code class=syntax>NOT IN</code>, <code class=syntax>GLOBAL IN</code>，和 <code class=syntax>GLOBAL NOT IN</code> 运算符是单独考虑的，因为它们的功能相当丰富。</p> <p>运算符的左侧是单列或元组。</p> <p>例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=mi>123</span><span class=p>,</span><span class=w> </span><span class=mi>456</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>...</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=p>(</span><span class=n>CounterID</span><span class=p>,</span><span class=w> </span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>((</span><span class=mi>34</span><span class=p>,</span><span class=w> </span><span class=mi>123</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=mi>101500</span><span class=p>,</span><span class=w> </span><span class=mi>456</span><span class=p>))</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>...</span><span class=w></span>
</code></pre></div> <p>如果左侧是索引中的单列，而右侧是一组常量，则系统将使用索引处理查询。</p> <p>请不要列举太多具体的常量 (比方说 几百万条)。如果数据集非常大，请把它放在一张临时表里（例如，参考章节<a href=../../../../engines/table-engines/special/external-data/amp/ >用于查询处理的外部数据</a>），然后使用子查询。</p> <p>运算符的右侧可以是一组常量表达式、一组带有常量表达式的元组（如上面的示例所示），或括号中的数据库表或SELECT子查询的名称。</p> <p>如果运算符的右侧是表的名称（例如, <code class=syntax>UserID IN users</code>），这相当于子查询 <code class=syntax>UserID IN (SELECT * FROM users)</code>. 使用与查询一起发送的外部数据时，请使用此选项。 例如，查询可以与一组用户Id一起发送到 ‘users’ 应过滤的临时表。</p> <p>如果运算符的右侧是具有Set引擎的表名（始终位于RAM中的准备好的数据集），则不会为每个查询重新创建数据集。</p> <p>子查询可以指定多个用于筛选元组的列。<br> 示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=p>(</span><span class=n>CounterID</span><span class=p>,</span><span class=w> </span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>CounterID</span><span class=p>,</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>...</span><span class=w></span>
</code></pre></div> <p>IN运算符左侧和右侧的列应具有相同的类型。</p> <p>IN运算符和子查询可能出现在查询的任何部分，包括聚合函数和lambda函数。<br> 示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>EventDate</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>avg</span><span class=p>(</span><span class=n>UserID</span><span class=w> </span><span class=k>IN</span><span class=w></span>
<span class=w>    </span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w></span>
<span class=w>        </span><span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=p>.</span><span class=n>hits</span><span class=w></span>
<span class=w>        </span><span class=k>WHERE</span><span class=w> </span><span class=n>EventDate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=s1>'2014-03-17'</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>ratio</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=p>.</span><span class=n>hits</span><span class=w></span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>EventDate</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>EventDate</span><span class=w> </span><span class=k>ASC</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──EventDate─┬────ratio─┐
│ 2014-03-17 │        1 │
│ 2014-03-18 │ 0.807696 │
│ 2014-03-19 │ 0.755406 │
│ 2014-03-20 │ 0.723218 │
│ 2014-03-21 │ 0.697021 │
│ 2014-03-22 │ 0.647851 │
│ 2014-03-23 │ 0.648416 │
└────────────┴──────────┘
</code></pre></div> <p>对于3月17日后的每一天，计算3月17日访问该网站的用户所做的浏览量百分比。<br> IN子句中的子查询始终只在单个服务器上运行一次。 没有依赖子查询。</p> <h2 id=in-null-processing>空处理<a class=headerlink href=../amp/#in-null-processing title="Permanent link"> </a></h2> <p>在请求处理过程中， <code class=syntax>IN</code> 运算符假定运算的结果 <a href=../../../syntax/amp/#null-literal>NULL</a> 总是等于 <code class=syntax>0</code>，无论是否 <code class=syntax>NULL</code> 位于操作员的右侧或左侧。 <code class=syntax>NULL</code> 值不包含在任何数据集中，彼此不对应，并且在以下情况下无法进行比较 <a href=../../../../operations/settings/settings/amp/#transform_null_in>transform_null_in=0</a>.</p> <p>下面是一个例子 <code class=syntax>t_null</code> 表:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┬────y─┐
│ 1 │ ᴺᵁᴸᴸ │
│ 2 │    3 │
└───┴──────┘
</code></pre></div> <p>运行查询 <code class=syntax>SELECT x FROM t_null WHERE y IN (NULL,3)</code> 为您提供以下结果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┐
│ 2 │
└───┘
</code></pre></div> <p>你可以看到，在其中的行 <code class=syntax>y = NULL</code> 被抛出的查询结果。 这是因为ClickHouse无法决定是否 <code class=syntax>NULL</code> 包含在 <code class=syntax>(NULL,3)</code> 设置，返回 <code class=syntax>0</code> 作为操作的结果，和 <code class=syntax>SELECT</code> 从最终输出中排除此行。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>t_null</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─in(y, tuple(NULL, 3))─┐
│                     0 │
│                     1 │
└───────────────────────┘
</code></pre></div> <h2 id=select-distributed-subqueries>分布式子查询<a class=headerlink href=../amp/#select-distributed-subqueries title="Permanent link"> </a></h2> <p>带子查询的IN-s有两个选项（类似于连接）：normal <code class=syntax>IN</code> / <code class=syntax>JOIN</code> 和 <code class=syntax>GLOBAL IN</code> / <code class=syntax>GLOBAL JOIN</code>. 它们在分布式查询处理的运行方式上有所不同。</p> <div class="admonition attention alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">注意</p> <p>请记住，下面描述的算法可能会有不同的工作方式取决于 <a href=../../../../operations/settings/settings/amp/ class=alert-link>设置</a> <code class=syntax>distributed_product_mode</code> 设置。</p> </div> <p>当使用常规IN时，查询被发送到远程服务器，并且它们中的每个服务器都在运行子查询 <code class=syntax>IN</code> 或 <code class=syntax>JOIN</code> 条款</p> <p>使用时 <code class=syntax>GLOBAL IN</code> / <code class=syntax>GLOBAL JOINs</code>，首先所有的子查询都运行 <code class=syntax>GLOBAL IN</code> / <code class=syntax>GLOBAL JOINs</code>，并将结果收集在临时表中。 然后将临时表发送到每个远程服务器，其中使用此临时数据运行查询。</p> <p>对于非分布式查询，请使用常规 <code class=syntax>IN</code> / <code class=syntax>JOIN</code>.</p> <p>在使用子查询时要小心 <code class=syntax>IN</code> / <code class=syntax>JOIN</code> 用于分布式查询处理的子句。</p> <p>让我们来看看一些例子。 假设集群中的每个服务器都有一个正常的 <strong>local_table</strong>. 每个服务器还具有 <strong>distributed_table</strong> 表与 <strong>分布</strong> 类型，它查看群集中的所有服务器。</p> <p>对于查询 <strong>distributed_table</strong>，查询将被发送到所有远程服务器，并使用以下命令在其上运行 <strong>local_table</strong>.</p> <p>例如，查询</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w></span>
</code></pre></div> <p>将被发送到所有远程服务器</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>local_table</span><span class=w></span>
</code></pre></div> <p>并且并行运行它们中的每一个，直到达到可以结合中间结果的阶段。 然后将中间结果返回给请求者服务器并在其上合并，并将最终结果发送给客户端。</p> <p>现在让我们检查一个查询IN:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>101500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>local_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34</span><span class=p>)</span><span class=w></span>
</code></pre></div> <ul> <li>计算两个网站的受众的交集。</li> </ul> <p>此查询将以下列方式发送到所有远程服务器</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>local_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>101500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>local_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>换句话说，IN子句中的数据集将在每台服务器上独立收集，仅在每台服务器上本地存储的数据中收集。</p> <p>如果您已经为此情况做好准备，并且已经将数据分散到群集服务器上，以便单个用户Id的数据完全驻留在单个服务器上，则这将正常和最佳地工作。 在这种情况下，所有必要的数据将在每台服务器上本地提供。 否则，结果将是不准确的。 我们将查询的这种变体称为 “local IN”.</p> <p>若要更正数据在群集服务器上随机传播时查询的工作方式，可以指定 <strong>distributed_table</strong> 在子查询中。 查询如下所示:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>101500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>此查询将以下列方式发送到所有远程服务器</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>local_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>101500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>子查询将开始在每个远程服务器上运行。 由于子查询使用分布式表，因此每个远程服务器上的子查询将重新发送到每个远程服务器</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>local_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34</span><span class=w></span>
</code></pre></div> <p>例如，如果您有100台服务器的集群，则执行整个查询将需要10,000个基本请求，这通常被认为是不可接受的。</p> <p>在这种情况下，应始终使用GLOBAL IN而不是IN。 让我们来看看它是如何工作的查询</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>101500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>请求者服务器将运行子查询</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>distributed_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34</span><span class=w></span>
</code></pre></div> <p>结果将被放在RAM中的临时表中。 然后请求将被发送到每个远程服务器</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniq</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>local_table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CounterID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>101500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=n>_data1</span><span class=w></span>
</code></pre></div> <p>和临时表 <code class=syntax>_data1</code> 将通过查询发送到每个远程服务器（临时表的名称是实现定义的）。</p> <p>这比使用正常IN更优化。 但是，请记住以下几点:</p> <ol> <li>创建临时表时，数据不是唯一的。 要减少通过网络传输的数据量，请在子查询中指定DISTINCT。 （你不需要为正常人做这个。)</li> <li>临时表将被发送到所有远程服务器。 传输不考虑网络拓扑。 例如，如果10个远程服务器驻留在与请求者服务器非常远程的数据中心中，则数据将通过通道发送10次到远程数据中心。 使用GLOBAL IN时尽量避免使用大型数据集。</li> <li>将数据传输到远程服务器时，无法配置网络带宽限制。 您可能会使网络过载。</li> <li>尝试跨服务器分发数据，以便您不需要定期使用GLOBAL IN。</li> <li>如果您需要经常使用GLOBAL IN，请规划ClickHouse集群的位置，以便单个副本组驻留在不超过一个数据中心中，并且它们之间具有快速网络，以便可以完全在单个数据中心内处理查询。</li> </ol> <p>这也是有意义的，在指定一个本地表 <code class=syntax>GLOBAL IN</code> 子句，以防此本地表仅在请求者服务器上可用，并且您希望在远程服务器上使用来自它的数据。</p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/c60fd44c5b70c56ff0f9c7fc538e58c6c8186aea" rel="external nofollow noreferrer" target="_blank" class="text-reset">c60fd44c</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/zh/sql-reference/operators/in/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

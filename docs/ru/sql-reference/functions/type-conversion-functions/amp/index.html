










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ru">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Функции преобразования типов | Документация ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.com/docs/ru/sql-reference/functions/type-conversion-functions/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Функции преобразования типов | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.com/docs/ru/sql-reference/functions/type-conversion-functions/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Функции преобразования типов | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-bottom:1rem}ol,ul{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}b,strong{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-primary{color:#495057;background-color:#fc0;border-color:#fc0}.btn-primary:focus,.btn-primary:hover{color:#495057;background-color:#d9ad00;border-color:#cca300}.btn-primary:focus{box-shadow:0 0 0 0 rgba(228,185,13,.5)}.btn-primary:disabled{color:#495057;background-color:#fc0;border-color:#fc0}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:focus,.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info:focus{box-shadow:0 0 0 0 rgba(58,176,195,.5)}.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-primary-light{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-primary-light:focus,.btn-primary-light:hover{color:#495057;background-color:#ffedca;border-color:#ffe9bd}.btn-primary-light:focus{box-shadow:0 0 0 0 rgba(228,225,217,.5)}.btn-primary-light:disabled{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-primary{color:#fc0;border-color:#fc0}.btn-outline-primary:hover{color:#495057;background-color:#fc0;border-color:#fc0}.btn-outline-primary:focus{box-shadow:0 0 0 0 rgba(255,204,0,.5)}.btn-outline-primary:disabled{color:#fc0;background-color:transparent}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:focus{box-shadow:0 0 0 0 rgba(23,162,184,.5)}.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-primary-light{color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:hover{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:focus{box-shadow:0 0 0 0 rgba(255,250,240,.5)}.btn-outline-primary-light:disabled{color:#fffaf0;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/docs/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/docs/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=type-conversion-functions>Функции преобразования типов<a class=headerlink href=../amp/#type-conversion-functions title="Permanent link"> </a></h1> <h2 id=numeric-conversion-issues>Общие проблемы преобразования чисел<a class=headerlink href=../amp/#numeric-conversion-issues title="Permanent link"> </a></h2> <p>При преобразовании значения из одного типа в другой необходимо помнить, что в общем случае это небезопасная операция, которая может привести к потере данных. Потеря данных может произойти при попытке сконвертировать тип данных значения от большего к меньшему или при конвертировании между различными классами типов данных.</p> <p>Поведение ClickHouse при конвертировании похоже на <a href=https://en.cppreference.com/w/cpp/language/implicit_conversion rel="external nofollow noreferrer" target=_blank>поведение C++ программ</a>.</p> <h2 id=toint8163264>toInt(8|16|32|64|128|256)<a class=headerlink href=../amp/#toint8163264 title="Permanent link"> </a></h2> <p>Преобразует входное значение к типу <a href=.././amp/ >Int</a>. Семейство функций включает:</p> <ul> <li><code class=syntax>toInt8(expr)</code> — возвращает значение типа <code class=syntax>Int8</code>.</li> <li><code class=syntax>toInt16(expr)</code> — возвращает значение типа <code class=syntax>Int16</code>.</li> <li><code class=syntax>toInt32(expr)</code> — возвращает значение типа <code class=syntax>Int32</code>.</li> <li><code class=syntax>toInt64(expr)</code> — возвращает значение типа <code class=syntax>Int64</code>.</li> <li><code class=syntax>toInt128(expr)</code> — возвращает значение типа <code class=syntax>Int128</code>.</li> <li><code class=syntax>toInt256(expr)</code> — возвращает значение типа <code class=syntax>Int256</code>.</li> </ul> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>выражение</a> возвращающее число или строку с десятичным представление числа. Бинарное, восьмеричное и шестнадцатеричное представление числа не поддержаны. Ведущие нули обрезаются.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Целое число типа <code class=syntax>Int8</code>, <code class=syntax>Int16</code>, <code class=syntax>Int32</code>, <code class=syntax>Int64</code>, <code class=syntax>Int128</code> или <code class=syntax>Int256</code>.</p> <p>Функции используют <a href=https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero rel="external nofollow noreferrer" target=_blank>округление к нулю</a>, т.е. обрезают дробную часть числа.</p> <p>Поведение функций для аргументов <a href=.././amp/#data_type-float-nan-inf>NaN и Inf</a> не определено. При использовании функций помните о возможных проблемах при <a href=../amp/#numeric-conversion-issues>преобразовании чисел</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toInt64</span><span class=p>(</span><span class=n>nan</span><span class=p>),</span><span class=w> </span><span class=n>toInt32</span><span class=p>(</span><span class=mi>32</span><span class=p>),</span><span class=w> </span><span class=n>toInt16</span><span class=p>(</span><span class=s1>'16'</span><span class=p>),</span><span class=w> </span><span class=n>toInt8</span><span class=p>(</span><span class=mi>8</span><span class=p>.</span><span class=mi>8</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─────────toInt64(nan)─┬─toInt32(32)─┬─toInt16('16')─┬─toInt8(8.8)─┐
│ -9223372036854775808 │          32 │            16 │           8 │
└──────────────────────┴─────────────┴───────────────┴─────────────┘
</code></pre></div> <h2 id=toint8163264orzero>toInt(8|16|32|64|128|256)OrZero<a class=headerlink href=../amp/#toint8163264orzero title="Permanent link"> </a></h2> <p>Принимает аргумент типа String и пытается его распарсить в Int(8|16|32|64|128|256). Если не удалось - возвращает 0.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toInt64OrZero</span><span class=p>(</span><span class=s1>'123123'</span><span class=p>),</span><span class=w> </span><span class=n>toInt8OrZero</span><span class=p>(</span><span class=s1>'123qwe123'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toInt64OrZero('123123')─┬─toInt8OrZero('123qwe123')─┐
│                  123123 │                         0 │
└─────────────────────────┴───────────────────────────┘
</code></pre></div> <h2 id=toint8163264ornull>toInt(8|16|32|64|128|256)OrNull<a class=headerlink href=../amp/#toint8163264ornull title="Permanent link"> </a></h2> <p>Принимает аргумент типа String и пытается его распарсить в Int(8|16|32|64|128|256). Если не удалось - возвращает NULL.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toInt64OrNull</span><span class=p>(</span><span class=s1>'123123'</span><span class=p>),</span><span class=w> </span><span class=n>toInt8OrNull</span><span class=p>(</span><span class=s1>'123qwe123'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toInt64OrNull('123123')─┬─toInt8OrNull('123qwe123')─┐
│                  123123 │                      ᴺᵁᴸᴸ │
└─────────────────────────┴───────────────────────────┘
</code></pre></div> <h2 id=toint8163264128256orDefault>toInt(8|16|32|64|128|256)OrDefault<a class=headerlink href=../amp/#toint8163264128256orDefault title="Permanent link"> </a></h2> <p>Принимает аргумент типа String и пытается его распарсить в Int(8|16|32|64|128|256). Если не удалось — возвращает значение по умолчанию.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toInt64OrDefault</span><span class=p>(</span><span class=s1>'123123'</span><span class=p>,</span><span class=w> </span><span class=k>cast</span><span class=p>(</span><span class=s1>'-1'</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Int64</span><span class=p>)),</span><span class=w> </span><span class=n>toInt8OrDefault</span><span class=p>(</span><span class=s1>'123qwe123'</span><span class=p>,</span><span class=w> </span><span class=k>cast</span><span class=p>(</span><span class=s1>'-1'</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>Int8</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toInt64OrDefault('123123', CAST('-1', 'Int64'))─┬─toInt8OrDefault('123qwe123', CAST('-1', 'Int8'))─┐
│                                          123123 │                                               -1 │
└─────────────────────────────────────────────────┴──────────────────────────────────────────────────┘
</code></pre></div> <h2 id=touint8163264>toUInt(8|16|32|64|256)<a class=headerlink href=../amp/#touint8163264 title="Permanent link"> </a></h2> <p>Преобраует входное значение к типу <a href=.././amp/ >UInt</a>. Семейство функций включает:</p> <ul> <li><code class=syntax>toUInt8(expr)</code> — возвращает значение типа <code class=syntax>UInt8</code>.</li> <li><code class=syntax>toUInt16(expr)</code> — возвращает значение типа <code class=syntax>UInt16</code>.</li> <li><code class=syntax>toUInt32(expr)</code> — возвращает значение типа <code class=syntax>UInt32</code>.</li> <li><code class=syntax>toUInt64(expr)</code> — возвращает значение типа <code class=syntax>UInt64</code>.</li> <li><code class=syntax>toUInt256(expr)</code> — возвращает значение типа <code class=syntax>UInt256</code>.</li> </ul> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>выражение</a> возвращающее число или строку с десятичным представление числа. Бинарное, восьмеричное и шестнадцатеричное представление числа не поддержаны. Ведущие нули обрезаются.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Целое число типа <code class=syntax>UInt8</code>, <code class=syntax>UInt16</code>, <code class=syntax>UInt32</code>, <code class=syntax>UInt64</code> или <code class=syntax>UInt256</code>.</p> <p>Функции используют <a href=https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero rel="external nofollow noreferrer" target=_blank>округление к нулю</a>, т.е. обрезают дробную часть числа.</p> <p>Поведение функций для аргументов <a href=.././amp/#data_type-float-nan-inf>NaN и Inf</a> не определено. Если передать строку, содержащую отрицательное число, например <code class=syntax>'-32'</code>, ClickHouse генерирует исключение. При использовании функций помните о возможных проблемах при <a href=../amp/#numeric-conversion-issues>преобразовании чисел</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toUInt64</span><span class=p>(</span><span class=n>nan</span><span class=p>),</span><span class=w> </span><span class=n>toUInt32</span><span class=p>(</span><span class=o>-</span><span class=mi>32</span><span class=p>),</span><span class=w> </span><span class=n>toUInt16</span><span class=p>(</span><span class=s1>'16'</span><span class=p>),</span><span class=w> </span><span class=n>toUInt8</span><span class=p>(</span><span class=mi>8</span><span class=p>.</span><span class=mi>8</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌───────toUInt64(nan)─┬─toUInt32(-32)─┬─toUInt16('16')─┬─toUInt8(8.8)─┐
│ 9223372036854775808 │    4294967264 │             16 │            8 │
└─────────────────────┴───────────────┴────────────────┴──────────────┘
</code></pre></div> <h2 id=touint8163264orzero>toUInt(8|16|32|64|256)OrZero<a class=headerlink href=../amp/#touint8163264orzero title="Permanent link"> </a></h2> <h2 id=touint8163264ornull>toUInt(8|16|32|64|256)OrNull<a class=headerlink href=../amp/#touint8163264ornull title="Permanent link"> </a></h2> <h2 id=touint8163264256ordefault>toUInt(8|16|32|64|256)OrDefault<a class=headerlink href=../amp/#touint8163264256ordefault title="Permanent link"> </a></h2> <h2 id=tofloat3264>toFloat(32|64)<a class=headerlink href=../amp/#tofloat3264 title="Permanent link"> </a></h2> <h2 id=tofloat3264orzero>toFloat(32|64)OrZero<a class=headerlink href=../amp/#tofloat3264orzero title="Permanent link"> </a></h2> <h2 id=tofloat3264ornull>toFloat(32|64)OrNull<a class=headerlink href=../amp/#tofloat3264ornull title="Permanent link"> </a></h2> <h2 id=tofloat3264ordefault>toFloat(32|64)OrDefault<a class=headerlink href=../amp/#tofloat3264ordefault title="Permanent link"> </a></h2> <h2 id=todate>toDate<a class=headerlink href=../amp/#todate title="Permanent link"> </a></h2> <p>Cиноним: <code class=syntax>DATE</code>.</p> <h2 id=todateorzero>toDateOrZero<a class=headerlink href=../amp/#todateorzero title="Permanent link"> </a></h2> <h2 id=todateornull>toDateOrNull<a class=headerlink href=../amp/#todateornull title="Permanent link"> </a></h2> <h2 id=todateordefault>toDateOrDefault<a class=headerlink href=../amp/#todateordefault title="Permanent link"> </a></h2> <h2 id=todatetime>toDateTime<a class=headerlink href=../amp/#todatetime title="Permanent link"> </a></h2> <h2 id=todatetimeorzero>toDateTimeOrZero<a class=headerlink href=../amp/#todatetimeorzero title="Permanent link"> </a></h2> <h2 id=todatetimeornull>toDateTimeOrNull<a class=headerlink href=../amp/#todatetimeornull title="Permanent link"> </a></h2> <h2 id=todatetimeordefault>toDateTimeOrDefault<a class=headerlink href=../amp/#todatetimeordefault title="Permanent link"> </a></h2> <h2 id=todate32>toDate32<a class=headerlink href=../amp/#todate32 title="Permanent link"> </a></h2> <p>Конвертирует аргумент в значение типа <a href=../../../data-types/date32/amp/ >Date32</a>. Если значение выходит за границы диапазона, возвращается пограничное значение <code class=syntax>Date32</code>. Если аргумент имеет тип <a href=../../../data-types/date/amp/ >Date</a>, учитываются границы типа <code class=syntax>Date</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toDate32</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — Значение даты. <a href=../../../data-types/string/amp/ >String</a>, <a href=../../../data-types/int-uint/amp/ >UInt32</a> или <a href=../../../data-types/date/amp/ >Date</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Календарная дата.</li> </ul> <p>Тип: <a href=../../../data-types/date32/amp/ >Date32</a>.</p> <p><strong>Пример</strong></p> <ol> <li>Значение находится в границах диапазона:</li> </ol> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDate32</span><span class=p>(</span><span class=s1>'1955-01-01'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>value</span><span class=p>);</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──────value─┬─toTypeName(toDate32('1925-01-01'))─┐
│ 1955-01-01 │ Date32                             │
└────────────┴────────────────────────────────────┘
</code></pre></div> <ol start=2> <li>Значение выходит за границы диапазона:</li> </ol> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDate32</span><span class=p>(</span><span class=s1>'1924-01-01'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>value</span><span class=p>);</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──────value─┬─toTypeName(toDate32('1925-01-01'))─┐
│ 1925-01-01 │ Date32                             │
└────────────┴────────────────────────────────────┘
</code></pre></div> <ol start=3> <li>С аргументом типа <code class=syntax>Date</code>:</li> </ol> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDate32</span><span class=p>(</span><span class=n>toDate</span><span class=p>(</span><span class=s1>'1924-01-01'</span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>value</span><span class=p>);</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──────value─┬─toTypeName(toDate32(toDate('1924-01-01')))─┐
│ 1970-01-01 │ Date32                                     │
└────────────┴────────────────────────────────────────────┘
</code></pre></div> <h2 id=todate32-or-zero>toDate32OrZero<a class=headerlink href=../amp/#todate32-or-zero title="Permanent link"> </a></h2> <p>То же самое, что и <a href=../amp/#todate32>toDate32</a>, но возвращает минимальное значение типа <a href=../../../data-types/date32/amp/ >Date32</a>, если получен недопустимый аргумент.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDate32OrZero</span><span class=p>(</span><span class=s1>'1924-01-01'</span><span class=p>),</span><span class=w> </span><span class=n>toDate32OrZero</span><span class=p>(</span><span class=s1>''</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toDate32OrZero('1924-01-01')─┬─toDate32OrZero('')─┐
│                   1925-01-01 │         1925-01-01 │
└──────────────────────────────┴────────────────────┘
</code></pre></div> <h2 id=todate32-or-null>toDate32OrNull<a class=headerlink href=../amp/#todate32-or-null title="Permanent link"> </a></h2> <p>То же самое, что и <a href=../amp/#todate32>toDate32</a>, но возвращает <code class=syntax>NULL</code>, если получен недопустимый аргумент.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDate32OrNull</span><span class=p>(</span><span class=s1>'1955-01-01'</span><span class=p>),</span><span class=w> </span><span class=n>toDate32OrNull</span><span class=p>(</span><span class=s1>''</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toDate32OrNull('1955-01-01')─┬─toDate32OrNull('')─┐
│                   1955-01-01 │               ᴺᵁᴸᴸ │
└──────────────────────────────┴────────────────────┘
</code></pre></div> <h2 id=todate32-or-default>toDate32OrDefault<a class=headerlink href=../amp/#todate32-or-default title="Permanent link"> </a></h2> <p>Конвертирует аргумент в значение типа <a href=../../../data-types/date32/amp/ >Date32</a>. Если значение выходит за границы диапазона, возвращается нижнее пограничное значение <code class=syntax>Date32</code>. Если аргумент имеет тип <a href=../../../data-types/date/amp/ >Date</a>, учитываются границы типа <code class=syntax>Date</code>. Возвращает значение по умолчанию, если получен недопустимый аргумент.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>toDate32OrDefault</span><span class=p>(</span><span class=s1>'1930-01-01'</span><span class=p>,</span><span class=w> </span><span class=n>toDate32</span><span class=p>(</span><span class=s1>'2020-01-01'</span><span class=p>)),</span><span class=w></span>
<span class=w>    </span><span class=n>toDate32OrDefault</span><span class=p>(</span><span class=s1>'xx1930-01-01'</span><span class=p>,</span><span class=w> </span><span class=n>toDate32</span><span class=p>(</span><span class=s1>'2020-01-01'</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toDate32OrDefault('1930-01-01', toDate32('2020-01-01'))─┬─toDate32OrDefault('xx1930-01-01', toDate32('2020-01-01'))─┐
│                                              1930-01-01 │                                                2020-01-01 │
└─────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=todecimal3264128>toDecimal(32|64|128|256)<a class=headerlink href=../amp/#todecimal3264128 title="Permanent link"> </a></h2> <p>Преобразует <code class=syntax>value</code> к типу данных <a href=.././amp/ >Decimal</a> с точностью <code class=syntax>S</code>. <code class=syntax>value</code> может быть числом или строкой. Параметр <code class=syntax>S</code> (scale) задаёт число десятичных знаков.</p> <ul> <li><code class=syntax>toDecimal32(value, S)</code></li> <li><code class=syntax>toDecimal64(value, S)</code></li> <li><code class=syntax>toDecimal128(value, S)</code></li> <li><code class=syntax>toDecimal256(value, S)</code></li> </ul> <h2 id=todecimal3264128ornull>toDecimal(32|64|128|256)OrNull<a class=headerlink href=../amp/#todecimal3264128ornull title="Permanent link"> </a></h2> <p>Преобразует входную строку в значение с типом данных <a href=.././amp/ >Nullable (Decimal (P, S))</a>. Семейство функций включает в себя:</p> <ul> <li><code class=syntax>toDecimal32OrNull(expr, S)</code> — Возвращает значение типа <code class=syntax>Nullable(Decimal32(S))</code>.</li> <li><code class=syntax>toDecimal64OrNull(expr, S)</code> — Возвращает значение типа <code class=syntax>Nullable(Decimal64(S))</code>.</li> <li><code class=syntax>toDecimal128OrNull(expr, S)</code> — Возвращает значение типа <code class=syntax>Nullable(Decimal128(S))</code>.</li> <li><code class=syntax>toDecimal256OrNull(expr, S)</code> — Возвращает значение типа <code class=syntax>Nullable(Decimal256(S))</code>.</li> </ul> <p>Эти функции следует использовать вместо функций <code class=syntax>toDecimal*()</code>, если при ошибке обработки входного значения вы хотите получать <code class=syntax>NULL</code> вместо исключения.</p> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>выражение</a>, возвращающее значение типа <a href=.././amp/ >String</a>. ClickHouse ожидает текстовое представление десятичного числа. Например, <code class=syntax>'1.111'</code>.</li> <li><code class=syntax>S</code> — количество десятичных знаков в результирующем значении.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Значение типа <code class=syntax>Nullable(Decimal(P,S))</code>. Значение содержит:</p> <ul> <li>Число с <code class=syntax>S</code> десятичными знаками, если ClickHouse распознал число во входной строке.</li> <li><code class=syntax>NULL</code>, если ClickHouse не смог распознать число во входной строке или входное число содержит больше чем <code class=syntax>S</code> десятичных знаков.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDecimal32OrNull</span><span class=p>(</span><span class=n>toString</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>.</span><span class=mi>111</span><span class=p>),</span><span class=w> </span><span class=mi>5</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>val</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌────val─┬─toTypeName(toDecimal32OrNull(toString(-1.111), 5))─┐
│ -1.111 │ Nullable(Decimal(9, 5))                            │
└────────┴────────────────────────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDecimal32OrNull</span><span class=p>(</span><span class=n>toString</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>.</span><span class=mi>111</span><span class=p>),</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>val</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──val─┬─toTypeName(toDecimal32OrNull(toString(-1.111), 2))─┐
│ ᴺᵁᴸᴸ │ Nullable(Decimal(9, 2))                            │
└──────┴────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=todecimal3264128256ordefault>toDecimal(32|64|128|256)OrDefault<a class=headerlink href=../amp/#todecimal3264128256ordefault title="Permanent link"> </a></h2> <p>Преобразует входную строку в значение с типом данных <a href=../../../data-types/decimal/amp/ >Decimal(P,S)</a>. Семейство функций включает в себя:</p> <ul> <li><code class=syntax>toDecimal32OrDefault(expr, S)</code> — возвращает значение типа <code class=syntax>Decimal32(S)</code>.</li> <li><code class=syntax>toDecimal64OrDefault(expr, S)</code> — возвращает значение типа <code class=syntax>Decimal64(S)</code>.</li> <li><code class=syntax>toDecimal128OrDefault(expr, S)</code> — возвращает значение типа <code class=syntax>Decimal128(S)</code>.</li> <li><code class=syntax>toDecimal256OrDefault(expr, S)</code> — возвращает значение типа <code class=syntax>Decimal256(S)</code>.</li> </ul> <p>Эти функции следует использовать вместо функций <code class=syntax>toDecimal*()</code>, если при ошибке обработки входного значения вы хотите получать значение по умолчанию вместо исключения.</p> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>выражение</a>, возвращающее значение типа <a href=.././amp/ >String</a>. ClickHouse ожидает текстовое представление десятичного числа. Например, <code class=syntax>'1.111'</code>.</li> <li><code class=syntax>S</code> — количество десятичных знаков в результирующем значении.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Значение типа <code class=syntax>Decimal(P,S)</code>. Значение содержит:</p> <ul> <li>Число с <code class=syntax>S</code> десятичными знаками, если ClickHouse распознал число во входной строке.</li> <li>Значение по умолчанию типа <code class=syntax>Decimal(P,S)</code>, если ClickHouse не смог распознать число во входной строке или входное число содержит больше чем <code class=syntax>S</code> десятичных знаков.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDecimal32OrDefault</span><span class=p>(</span><span class=n>toString</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>.</span><span class=mi>111</span><span class=p>),</span><span class=w> </span><span class=mi>5</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>val</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌────val─┬─toTypeName(toDecimal32OrDefault(toString(-1.111), 5))─┐
│ -1.111 │ Decimal(9, 5)                                         │
└────────┴───────────────────────────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDecimal32OrDefault</span><span class=p>(</span><span class=n>toString</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>.</span><span class=mi>111</span><span class=p>),</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>val</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─val─┬─toTypeName(toDecimal32OrDefault(toString(-1.111), 2))─┐
│   0 │ Decimal(9, 2)                                         │
└─────┴───────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=todecimal3264128orzero>toDecimal(32|64|128|256)OrZero<a class=headerlink href=../amp/#todecimal3264128orzero title="Permanent link"> </a></h2> <p>Преобразует тип входного значения в <a href=.././amp/ >Decimal (P, S)</a>. Семейство функций включает в себя:</p> <ul> <li><code class=syntax>toDecimal32OrZero( expr, S)</code> — возвращает значение типа <code class=syntax>Decimal32(S)</code>.</li> <li><code class=syntax>toDecimal64OrZero( expr, S)</code> — возвращает значение типа <code class=syntax>Decimal64(S)</code>.</li> <li><code class=syntax>toDecimal128OrZero( expr, S)</code> — возвращает значение типа <code class=syntax>Decimal128(S)</code>.</li> <li><code class=syntax>toDecimal256OrZero( expr, S)</code> — возвращает значение типа <code class=syntax>Decimal256(S)</code>.</li> </ul> <p>Эти функции следует использовать вместо функций <code class=syntax>toDecimal*()</code>, если при ошибке обработки входного значения вы хотите получать <code class=syntax>0</code> вместо исключения.</p> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>выражение</a>, возвращающее значение типа <a href=.././amp/ >String</a>. ClickHouse ожидает текстовое представление десятичного числа. Например, <code class=syntax>'1.111'</code>.</li> <li><code class=syntax>S</code> — количество десятичных знаков в результирующем значении.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Значение типа <code class=syntax>Nullable(Decimal(P,S))</code>. <code class=syntax>P</code> равно числовой части имени функции. Например, для функции <code class=syntax>toDecimal32OrZero</code>, <code class=syntax>P = 32</code>. Значение содержит:</p> <ul> <li>Число с <code class=syntax>S</code> десятичными знаками, если ClickHouse распознал число во входной строке.</li> <li>0 c <code class=syntax>S</code> десятичными знаками, если ClickHouse не смог распознать число во входной строке или входное число содержит больше чем <code class=syntax>S</code> десятичных знаков.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDecimal32OrZero</span><span class=p>(</span><span class=n>toString</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>.</span><span class=mi>111</span><span class=p>),</span><span class=w> </span><span class=mi>5</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>val</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌────val─┬─toTypeName(toDecimal32OrZero(toString(-1.111), 5))─┐
│ -1.111 │ Decimal(9, 5)                                      │
└────────┴────────────────────────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toDecimal32OrZero</span><span class=p>(</span><span class=n>toString</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>.</span><span class=mi>111</span><span class=p>),</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>val</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──val─┬─toTypeName(toDecimal32OrZero(toString(-1.111), 2))─┐
│ 0.00 │ Decimal(9, 2)                                      │
└──────┴────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=_tostring>toString<a class=headerlink href=../amp/#tostring title="Permanent link"> </a></h2> <p>Функции преобразования между числами, строками (но не фиксированными строками), датами и датами-с-временем.<br> Все эти функции принимают один аргумент.</p> <p>При преобразовании в строку или из строки, производится форматирование или парсинг значения по тем же правилам, что и для формата TabSeparated (и почти всех остальных текстовых форматов). Если распарсить строку не удаётся - кидается исключение и выполнение запроса прерывается.</p> <p>При преобразовании даты в число или наоборот, дате соответствует число дней от начала unix эпохи.<br> При преобразовании даты-с-временем в число или наоборот, дате-с-временем соответствует число секунд от начала unix эпохи.</p> <p>Форматы даты и даты-с-временем для функций toDate/toDateTime определены следующим образом:</p> <div class=codehilite><pre><span></span><code class=syntax>YYYY-MM-DD
YYYY-MM-DD hh:mm:ss
</code></pre></div> <p>В качестве исключения, если делается преобразование из числа типа UInt32, Int32, UInt64, Int64 в Date, и если число больше или равно 65536, то число рассматривается как unix timestamp (а не как число дней) и округляется до даты. Это позволяет поддержать распространённый случай, когда пишут toDate(unix_timestamp), что иначе было бы ошибкой и требовало бы написания более громоздкого toDate(toDateTime(unix_timestamp))</p> <p>Преобразование между датой и датой-с-временем производится естественным образом: добавлением нулевого времени или отбрасыванием времени.</p> <p>Преобразование между числовыми типами производится по тем же правилам, что и присваивание между разными числовыми типами в C++.</p> <p>Дополнительно, функция toString от аргумента типа DateTime может принимать второй аргумент String - имя тайм-зоны. Пример: <code class=syntax>Asia/Yekaterinburg</code> В этом случае, форматирование времени производится согласно указанной тайм-зоне.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>now</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>now_local</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>toString</span><span class=p>(</span><span class=n>now</span><span class=p>(),</span><span class=w> </span><span class=s1>'Asia/Yekaterinburg'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>now_yekat</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌───────────now_local─┬─now_yekat───────────┐
│ 2016-06-15 00:11:21 │ 2016-06-15 02:11:21 │
└─────────────────────┴─────────────────────┘
</code></pre></div> <p>Также смотрите функцию <code class=syntax>toUnixTimestamp</code>.</p> <h2 id=tofixedstrings-n>toFixedString(s, N)<a class=headerlink href=../amp/#tofixedstrings-n title="Permanent link"> </a></h2> <p>Преобразует аргумент типа String в тип FixedString(N) (строку фиксированной длины N). N должно быть константой.<br> Если строка имеет меньше байт, чем N, то она дополняется нулевыми байтами справа. Если строка имеет больше байт, чем N - кидается исключение.</p> <h2 id=tostringcuttozeros>toStringCutToZero(s)<a class=headerlink href=../amp/#tostringcuttozeros title="Permanent link"> </a></h2> <p>Принимает аргумент типа String или FixedString. Возвращает String, вырезая содержимое строки до первого найденного нулевого байта.</p> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toFixedString</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=n>toStringCutToZero</span><span class=p>(</span><span class=n>s</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s_cut</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─s─────────────┬─s_cut─┐
│ foo\0\0\0\0\0 │ foo   │
└───────────────┴───────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toFixedString</span><span class=p>(</span><span class=s1>'foo\0bar'</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=n>toStringCutToZero</span><span class=p>(</span><span class=n>s</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s_cut</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─s──────────┬─s_cut─┐
│ foo\0bar\0 │ foo   │
└────────────┴───────┘
</code></pre></div> <h2 id=reinterpretasuint8163264>reinterpretAsUInt(8|16|32|64)<a class=headerlink href=../amp/#reinterpretasuint8163264 title="Permanent link"> </a></h2> <h2 id=reinterpretasint8163264>reinterpretAsInt(8|16|32|64)<a class=headerlink href=../amp/#reinterpretasint8163264 title="Permanent link"> </a></h2> <h2 id=reinterpretasfloat3264>reinterpretAsFloat(32|64)<a class=headerlink href=../amp/#reinterpretasfloat3264 title="Permanent link"> </a></h2> <h2 id=reinterpretasdate>reinterpretAsDate<a class=headerlink href=../amp/#reinterpretasdate title="Permanent link"> </a></h2> <h2 id=reinterpretasdatetime>reinterpretAsDateTime<a class=headerlink href=../amp/#reinterpretasdatetime title="Permanent link"> </a></h2> <p>Функции принимают строку и интерпретируют байты, расположенные в начале строки, как число в host order (little endian). Если строка имеет недостаточную длину, то функции работают так, как будто строка дополнена необходимым количеством нулевых байт. Если строка длиннее, чем нужно, то лишние байты игнорируются. Дата интерпретируется, как число дней с начала unix-эпохи, а дата-с-временем - как число секунд с начала unix-эпохи.</p> <h2 id=type_conversion_functions-reinterpretAsString>reinterpretAsString<a class=headerlink href=../amp/#type_conversion_functions-reinterpretAsString title="Permanent link"> </a></h2> <p>Функция принимает число или дату или дату-с-временем и возвращает строку, содержащую байты, представляющие соответствующее значение в host order (little endian). При этом, отбрасываются нулевые байты с конца. Например, значение 255 типа UInt32 будет строкой длины 1 байт.</p> <h2 id=reinterpretasuuid>reinterpretAsUUID<a class=headerlink href=../amp/#reinterpretasuuid title="Permanent link"> </a></h2> <p>Функция принимает строку из 16 байт и интерпретирует ее байты в порядок от старшего к младшему. Если строка имеет недостаточную длину, то функция работает так, как будто строка дополнена необходимым количеством нулевых байтов с конца. Если строка длиннее, чем 16 байтов, то лишние байты с конца игнорируются.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>reinterpretAsUUID</span><span class=p>(</span><span class=n>fixed_string</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>fixed_string</code> — cтрока с big-endian порядком байтов. <a href=../../../data-types/fixedstring/amp/#fixedstring>FixedString</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение типа <a href=../../../data-types/uuid/amp/#uuid-data-type>UUID</a>.</li> </ul> <p><strong>Примеры</strong></p> <p>Интерпретация строки как UUID.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>reinterpretAsUUID</span><span class=p>(</span><span class=n>reverse</span><span class=p>(</span><span class=n>unhex</span><span class=p>(</span><span class=s1>'000102030405060708090a0b0c0d0e0f'</span><span class=p>)));</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─reinterpretAsUUID(reverse(unhex('000102030405060708090a0b0c0d0e0f')))─┐
│                                  08090a0b-0c0d-0e0f-0001-020304050607 │
└───────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p>Переход в UUID и обратно.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w></span>
<span class=w>    </span><span class=n>generateUUIDv4</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>uuid</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>identity</span><span class=p>(</span><span class=k>lower</span><span class=p>(</span><span class=n>hex</span><span class=p>(</span><span class=n>reverse</span><span class=p>(</span><span class=n>reinterpretAsString</span><span class=p>(</span><span class=n>uuid</span><span class=p>)))))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>str</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>reinterpretAsUUID</span><span class=p>(</span><span class=n>reverse</span><span class=p>(</span><span class=n>unhex</span><span class=p>(</span><span class=n>str</span><span class=p>)))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>uuid2</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>uuid2</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─equals(uuid, uuid2)─┐
│                   1 │
└─────────────────────┘
</code></pre></div> <h2 id=type_conversion_function-reinterpret>reinterpret(x, T)<a class=headerlink href=../amp/#type_conversion_function-reinterpret title="Permanent link"> </a></h2> <p>Использует ту же самую исходную последовательность байтов в памяти для значения <code class=syntax>x</code> и интерпретирует ее как конечный тип данных <code class=syntax>T</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>reinterpret</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=k>type</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — любой тип данных.</li> <li><code class=syntax>type</code> — конечный тип данных. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение конечного типа данных.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>reinterpret</span><span class=p>(</span><span class=n>toInt8</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>),</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>int_to_uint</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>reinterpret</span><span class=p>(</span><span class=n>toInt8</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span><span class=w> </span><span class=s1>'Float32'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>int_to_float</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>reinterpret</span><span class=p>(</span><span class=s1>'1'</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt32'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>string_to_int</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─int_to_uint─┬─int_to_float─┬─string_to_int─┐
│         255 │        1e-45 │            49 │
└─────────────┴──────────────┴───────────────┘
</code></pre></div> <h2 id=type_conversion_function-cast>CAST(x, T)<a class=headerlink href=../amp/#type_conversion_function-cast title="Permanent link"> </a></h2> <p>Преобразует входное значение к указанному типу данных. В отличие от функции <a href=../amp/#type_conversion_function-reinterpret>reinterpret</a> <code class=syntax>CAST</code> пытается представить то же самое значение в новом типе данных. Если преобразование невозможно, то возникает исключение.<br> Поддерживается несколько вариантов синтаксиса.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CAST</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=p>)</span><span class=w></span>
<span class=k>CAST</span><span class=p>(</span><span class=n>x</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>t</span><span class=p>)</span><span class=w></span>
<span class=n>x</span><span class=p>::</span><span class=n>t</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — значение, которое нужно преобразовать. Может быть любого типа.</li> <li><code class=syntax>T</code> — имя типа данных. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>t</code> — тип данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Преобразованное значение.</li> </ul> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Примечание</p> <p>Если входное значение выходит за границы нового типа, то результат переполняется. Например, <code class=syntax>CAST(-1, 'UInt8')</code> возвращает <code class=syntax>255</code>.</p> </div> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=k>CAST</span><span class=p>(</span><span class=n>toInt8</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>),</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>cast_int_to_uint</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>CAST</span><span class=p>(</span><span class=mi>1</span><span class=p>.</span><span class=mi>5</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=nb>Decimal</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>2</span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>cast_float_to_decimal</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s1>'1'</span><span class=p>::</span><span class=n>Int32</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>cast_string_to_int</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─cast_int_to_uint─┬─cast_float_to_decimal─┬─cast_string_to_int─┐
│              255 │                  1.50 │                  1 │
└──────────────────┴───────────────────────┴────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=s1>'2016-06-15 23:00:00'</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>timestamp</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>CAST</span><span class=p>(</span><span class=k>timestamp</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>DateTime</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>datetime</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>CAST</span><span class=p>(</span><span class=k>timestamp</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=nb>Date</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=nb>date</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>CAST</span><span class=p>(</span><span class=k>timestamp</span><span class=p>,</span><span class=w> </span><span class=s1>'String'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>string</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>CAST</span><span class=p>(</span><span class=k>timestamp</span><span class=p>,</span><span class=w> </span><span class=s1>'FixedString(22)'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>fixed_string</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─timestamp───────────┬────────────datetime─┬───────date─┬─string──────────────┬─fixed_string──────────────┐
│ 2016-06-15 23:00:00 │ 2016-06-15 23:00:00 │ 2016-06-15 │ 2016-06-15 23:00:00 │ 2016-06-15 23:00:00\0\0\0 │
└─────────────────────┴─────────────────────┴────────────┴─────────────────────┴───────────────────────────┘
</code></pre></div> <p>Преобразование в FixedString(N) работает только для аргументов типа <a href=../../../data-types/string/amp/ >String</a> или <a href=../../../data-types/fixedstring/amp/ >FixedString</a>.</p> <p>Поддерживается преобразование к типу <a href=../../../data-types/nullable/amp/ >Nullable</a> и обратно.</p> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>t_null</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toTypeName(x)─┐
│ Int8          │
│ Int8          │
└───────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=s1>'Nullable(UInt16)'</span><span class=p>))</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>t_null</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toTypeName(CAST(x, 'Nullable(UInt16)'))─┐
│ Nullable(UInt16)                        │
│ Nullable(UInt16)                        │
└─────────────────────────────────────────┘
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li>Настройка <a href=../../../../operations/settings/settings/amp/#cast_keep_nullable>cast_keep_nullable</a></li> </ul> <h2 id=type_conversion_function-accurate-cast>accurateCast(x, T)<a class=headerlink href=../amp/#type_conversion_function-accurate-cast title="Permanent link"> </a></h2> <p>Преобразует входное значение <code class=syntax>x</code> в указанный тип данных <code class=syntax>T</code>.</p> <p>В отличие от функции <a href=../amp/#type_conversion_function-cast>cast(x, T)</a>, <code class=syntax>accurateCast</code> не допускает переполнения при преобразовании числовых типов. Например, <code class=syntax>accurateCast(-1, 'UInt8')</code> вызовет исключение.</p> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>cast</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>uint8</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─uint8─┐
│   255 │
└───────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>accurateCast</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>uint8</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>Code: 70. DB::Exception: Received from localhost:9000. DB::Exception: Value in column Int8 cannot be safely converted into type UInt8: While processing accurateCast(-1, 'UInt8') AS uint8.
</code></pre></div> <h2 id=type_conversion_function-accurate-cast_or_null>accurateCastOrNull(x, T)<a class=headerlink href=../amp/#type_conversion_function-accurate-cast_or_null title="Permanent link"> </a></h2> <p>Преобразует входное значение <code class=syntax>x</code> в указанный тип данных <code class=syntax>T</code>.</p> <p>Всегда возвращает тип <a href=../../../data-types/nullable/amp/ >Nullable</a>. Если исходное значение не может быть преобразовано к целевому типу, возвращает <a href=../../../syntax/amp/#null-literal>NULL</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>accurateCastOrNull</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — входное значение.</li> <li><code class=syntax>T</code> — имя возвращаемого типа данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение, преобразованное в указанный тип <code class=syntax>T</code>.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>accurateCastOrNull</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toTypeName(accurateCastOrNull(5, 'UInt8'))─┐
│ Nullable(UInt8)                            │
└────────────────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrNull</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>uint8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrNull</span><span class=p>(</span><span class=mi>128</span><span class=p>,</span><span class=w> </span><span class=s1>'Int8'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>int8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrNull</span><span class=p>(</span><span class=s1>'Test'</span><span class=p>,</span><span class=w> </span><span class=s1>'FixedString(2)'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>fixed_string</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─uint8─┬─int8─┬─fixed_string─┐
│  ᴺᵁᴸᴸ │ ᴺᵁᴸᴸ │ ᴺᵁᴸᴸ         │
└───────┴──────┴──────────────┘
</code></pre></div> <h2 id=type_conversion_function-accurate-cast_or_default>accurateCastOrDefault(x, T[, default_value])<a class=headerlink href=../amp/#type_conversion_function-accurate-cast_or_default title="Permanent link"> </a></h2> <p>Преобразует входное значение <code class=syntax>x</code> в указанный тип данных <code class=syntax>T</code>. Если исходное значение не может быть преобразовано к целевому типу, возвращает значение по умолчанию или <code class=syntax>default_value</code>, если оно указано.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — входное значение.</li> <li><code class=syntax>T</code> — имя возвращаемого типа данных.</li> <li><code class=syntax>default_value</code> — значение по умолчанию возвращаемого типа данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение, преобразованное в указанный тип <code class=syntax>T</code>.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toTypeName(accurateCastOrDefault(5, 'UInt8'))─┐
│ UInt8                                         │
└───────────────────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>uint8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>'UInt8'</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>uint8_default</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=mi>128</span><span class=p>,</span><span class=w> </span><span class=s1>'Int8'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>int8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=mi>128</span><span class=p>,</span><span class=w> </span><span class=s1>'Int8'</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>int8_default</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=s1>'Test'</span><span class=p>,</span><span class=w> </span><span class=s1>'FixedString(2)'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>fixed_string</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>accurateCastOrDefault</span><span class=p>(</span><span class=s1>'Test'</span><span class=p>,</span><span class=w> </span><span class=s1>'FixedString(2)'</span><span class=p>,</span><span class=w> </span><span class=s1>'Te'</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>fixed_string_default</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─uint8─┬─uint8_default─┬─int8─┬─int8_default─┬─fixed_string─┬─fixed_string_default─┐
│     0 │             5 │    0 │            5 │              │ Te                   │
└───────┴───────────────┴──────┴──────────────┴──────────────┴──────────────────────┘
</code></pre></div> <h2 id=function-tointerval>toInterval(Year|Quarter|Month|Week|Day|Hour|Minute|Second)<a class=headerlink href=../amp/#function-tointerval title="Permanent link"> </a></h2> <p>Приводит аргумент из числового типа данных к типу данных <a href=../../../data-types/special-data-types/interval/amp/ >IntervalType</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toIntervalSecond</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
<span class=n>toIntervalMinute</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
<span class=n>toIntervalHour</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
<span class=n>toIntervalDay</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
<span class=n>toIntervalWeek</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
<span class=n>toIntervalMonth</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
<span class=n>toIntervalQuarter</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
<span class=n>toIntervalYear</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>number</code> — длительность интервала. Положительное целое число.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Значение с типом данных <code class=syntax>Interval</code>.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w></span>
<span class=w>    </span><span class=n>toDate</span><span class=p>(</span><span class=s1>'2019-01-01'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=nb>date</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nb>INTERVAL</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=n>WEEK</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>interval_week</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>toIntervalWeek</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>interval_to_week</span><span class=w></span>
<span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=nb>date</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>interval_week</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nb>date</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>interval_to_week</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─plus(date, interval_week)─┬─plus(date, interval_to_week)─┐
│                2019-01-08 │                   2019-01-08 │
└───────────────────────────┴──────────────────────────────┘
</code></pre></div> <h2 id=parsedatetimebesteffort>parseDateTimeBestEffort<a class=headerlink href=../amp/#parsedatetimebesteffort title="Permanent link"> </a></h2> <h2 id=parsedatetime32besteffort>parseDateTime32BestEffort<a class=headerlink href=../amp/#parsedatetime32besteffort title="Permanent link"> </a></h2> <p>Преобразует дату и время в <a href=.././amp/ >строковом</a> представлении к типу данных <a href=.././amp/#data_type-datetime>DateTime</a>.</p> <p>Функция распознаёт форматы <a href=https://en.wikipedia.org/wiki/ISO_8601 rel="external nofollow noreferrer" target=_blank>ISO 8601</a>, <a href=https://tools.ietf.org/html/rfc1123#page-55 rel="external nofollow noreferrer" target=_blank>RFC 1123 - 5.2.14 RFC-822 Date and Time Specification</a>, формат даты времени ClickHouse’s а также некоторые другие форматы.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>parseDateTimeBestEffort</span><span class=p>(</span><span class=n>time_string</span><span class=p>[,</span><span class=w> </span><span class=n>time_zone</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>time_string</code> — строка, содержащая дату и время для преобразования. <a href=.././amp/ >String</a>.</li> <li><code class=syntax>time_zone</code> — часовой пояс. Функция анализирует <code class=syntax>time_string</code> в соответствии с заданным часовым поясом. <a href=.././amp/ >String</a>.</li> </ul> <p><strong>Поддерживаемые нестандартные форматы</strong></p> <ul> <li><a href=https://ru.wikipedia.org/wiki/Unix-время rel="external nofollow noreferrer" target=_blank>Unix timestamp</a> в строковом представлении. 9 или 10 символов.</li> <li>Строка с датой и временем: <code class=syntax>YYYYMMDDhhmmss</code>, <code class=syntax>DD/MM/YYYY hh:mm:ss</code>, <code class=syntax>DD-MM-YY hh:mm</code>, <code class=syntax>YYYY-MM-DD hh:mm:ss</code>, etc.</li> <li>Строка с датой, но без времени: <code class=syntax>YYYY</code>, <code class=syntax>YYYYMM</code>, <code class=syntax>YYYY*MM</code>, <code class=syntax>DD/MM/YYYY</code>, <code class=syntax>DD-MM-YY</code> и т.д.</li> <li>Строка с временем, и с днём: <code class=syntax>DD</code>, <code class=syntax>DD hh</code>, <code class=syntax>DD hh:mm</code>. В этом случае <code class=syntax>YYYY-MM</code> принимается равным <code class=syntax>2000-01</code>.</li> <li>Строка, содержащая дату и время вместе с информацией о часовом поясе: <code class=syntax>YYYY-MM-DD hh:mm:ss ±h:mm</code>, и т.д. Например, <code class=syntax>2020-12-12 17:36:00 -5:00</code>.</li> </ul> <p>Для всех форматов с разделителями функция распознаёт названия месяцев, выраженных в виде полного англоязычного имени месяца или в виде первых трёх символов имени месяца. Примеры: <code class=syntax>24/DEC/18</code>, <code class=syntax>24-Dec-18</code>, <code class=syntax>01-September-2018</code>.</p> <p><strong>Возвращаемое значение</strong></p> <ul> <li><code class=syntax>time_string</code> преобразованная к типу данных <code class=syntax>DateTime</code>.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>(</span><span class=s1>'12/12/2020 12:12:57'</span><span class=p>)</span><span class=w></span>
<span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffort─┐
│     2020-12-12 12:12:57 │
└─────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>(</span><span class=s1>'Sat, 18 Aug 2018 07:22:16 GMT'</span><span class=p>,</span><span class=w> </span><span class=s1>'Europe/Moscow'</span><span class=p>)</span><span class=w></span>
<span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffort─┐
│     2018-08-18 10:22:16 │
└─────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>(</span><span class=s1>'1284101485'</span><span class=p>)</span><span class=w></span>
<span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffort─┐
│     2015-07-07 12:04:41 │
└─────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>(</span><span class=s1>'2018-12-12 10:12:12'</span><span class=p>)</span><span class=w></span>
<span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffort─┐
│     2018-12-12 10:12:12 │
└─────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffort</span><span class=p>(</span><span class=s1>'10 20:19'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffort('10 20:19')─┐
│                 2000-01-10 20:19:00 │
└─────────────────────────────────────┘
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li><a href=https://xkcd.com/1179/ rel="external nofollow noreferrer" target=_blank>Информация о формате ISO 8601 от @xkcd</a></li> <li><a href=https://tools.ietf.org/html/rfc1123 rel="external nofollow noreferrer" target=_blank>RFC 1123</a></li> <li><a href=../amp/#todate>toDate</a></li> <li><a href=../amp/#todatetime>toDateTime</a></li> </ul> <h2 id=parsedatetimebesteffortUS>parseDateTimeBestEffortUS<a class=headerlink href=../amp/#parsedatetimebesteffortUS title="Permanent link"> </a></h2> <p>Эта функция похожа на <a href=../amp/#parsedatetimebesteffort>‘parseDateTimeBestEffort’</a>, но разница состоит в том, что в она предполагает американский формат даты (<code class=syntax>MM/DD/YYYY</code> etc.) в случае неоднозначности.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>parseDateTimeBestEffortUS</span><span class=p>(</span><span class=n>time_string</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=n>time_zone</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>time_string</code> — строка, содержащая дату и время для преобразования. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>time_zone</code> — часовой пояс. Функция анализирует <code class=syntax>time_string</code> в соответствии с часовым поясом. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Поддерживаемые нестандартные форматы</strong></p> <ul> <li>Строка, содержащая 9-10 цифр <a href=https://en.wikipedia.org/wiki/Unix_time rel="external nofollow noreferrer" target=_blank>unix timestamp</a>.</li> <li>Строка, содержащая дату и время: <code class=syntax>YYYYMMDDhhmmss</code>, <code class=syntax>MM/DD/YYYY hh:mm:ss</code>, <code class=syntax>MM-DD-YY hh:mm</code>, <code class=syntax>YYYY-MM-DD hh:mm:ss</code>, etc.</li> <li>Строка с датой, но без времени: <code class=syntax>YYYY</code>, <code class=syntax>YYYYMM</code>, <code class=syntax>YYYY*MM</code>, <code class=syntax>MM/DD/YYYY</code>, <code class=syntax>MM-DD-YY</code> etc.</li> <li>Строка, содержащая день и время: <code class=syntax>DD</code>, <code class=syntax>DD hh</code>, <code class=syntax>DD hh:mm</code>. В этом случае <code class=syntax>YYYY-MM</code> заменяется на <code class=syntax>2000-01</code>.</li> <li>Строка, содержащая дату и время, а также информацию о часовом поясе: <code class=syntax>YYYY-MM-DD hh:mm:ss ±h:mm</code> и т.д. Например, <code class=syntax>2020-12-12 17:36:00 -5:00</code>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li><code class=syntax>time_string</code> преобразован в тип данных <code class=syntax>DateTime</code>.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUS</span><span class=p>(</span><span class=s1>'09/12/2020 12:12:57'</span><span class=p>)</span><span class=w></span>
<span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUS</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUS─┐
│     2020-09-12 12:12:57   │
└─────────────────────────——┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUS</span><span class=p>(</span><span class=s1>'09-12-2020 12:12:57'</span><span class=p>)</span><span class=w></span>
<span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUS</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUS─┐
│     2020-09-12 12:12:57   │
└─────────────────────────——┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUS</span><span class=p>(</span><span class=s1>'09.12.2020 12:12:57'</span><span class=p>)</span><span class=w></span>
<span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUS</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUS─┐
│     2020-09-12 12:12:57   │
└─────────────────────────——┘
</code></pre></div> <h2 id=parsedatetimebesteffortornull>parseDateTimeBestEffortOrNull<a class=headerlink href=../amp/#parsedatetimebesteffortornull title="Permanent link"> </a></h2> <h2 id=parsedatetime32besteffortornull>parseDateTime32BestEffortOrNull<a class=headerlink href=../amp/#parsedatetime32besteffortornull title="Permanent link"> </a></h2> <p>Работает также как <a href=../amp/#parsedatetimebesteffort>parseDateTimeBestEffort</a>, но возвращает <code class=syntax>NULL</code> когда получает формат даты который не может быть обработан.</p> <h2 id=parsedatetimebesteffortorzero>parseDateTimeBestEffortOrZero<a class=headerlink href=../amp/#parsedatetimebesteffortorzero title="Permanent link"> </a></h2> <h2 id=parsedatetime32besteffortorzero>parseDateTime32BestEffortOrZero<a class=headerlink href=../amp/#parsedatetime32besteffortorzero title="Permanent link"> </a></h2> <p>Работает аналогично функции <a href=../amp/#parsedatetimebesteffort>parseDateTimeBestEffort</a>, но возвращает нулевое значение, если формат даты не может быть обработан.</p> <h2 id=parsedatetimebesteffortusornull>parseDateTimeBestEffortUSOrNull<a class=headerlink href=../amp/#parsedatetimebesteffortusornull title="Permanent link"> </a></h2> <p>Работает аналогично функции <a href=../amp/#parsedatetimebesteffortUS>parseDateTimeBestEffortUS</a>, но в отличие от нее возвращает <code class=syntax>NULL</code>, если входная строка не может быть преобразована в тип данных <a href=../../../data-types/datetime/amp/ >DateTime</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>(</span><span class=n>time_string</span><span class=p>[,</span><span class=w> </span><span class=n>time_zone</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>time_string</code> — строка, содержащая дату или дату со временем для преобразования. Дата должна быть в американском формате (<code class=syntax>MM/DD/YYYY</code> и т.д.). <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>time_zone</code> — <a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-timezone>часовой пояс</a>. Функция анализирует <code class=syntax>time_string</code> в соответствии с заданным часовым поясом. Опциональный параметр. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Поддерживаемые нестандартные форматы</strong></p> <ul> <li>Строка в формате <a href=https://en.wikipedia.org/wiki/Unix_time rel="external nofollow noreferrer" target=_blank>unix timestamp</a>, содержащая 9-10 цифр.</li> <li>Строка, содержащая дату и время: <code class=syntax>YYYYMMDDhhmmss</code>, <code class=syntax>MM/DD/YYYY hh:mm:ss</code>, <code class=syntax>MM-DD-YY hh:mm</code>, <code class=syntax>YYYY-MM-DD hh:mm:ss</code> и т.д.</li> <li>Строка, содержащая дату без времени: <code class=syntax>YYYY</code>, <code class=syntax>YYYYMM</code>, <code class=syntax>YYYY*MM</code>, <code class=syntax>MM/DD/YYYY</code>, <code class=syntax>MM-DD-YY</code> и т.д.</li> <li>Строка, содержащая день и время: <code class=syntax>DD</code>, <code class=syntax>DD hh</code>, <code class=syntax>DD hh:mm</code>. В этом случае <code class=syntax>YYYY-MM</code> заменяется на <code class=syntax>2000-01</code>.</li> <li>Строка, содержащая дату и время, а также информацию о часовом поясе: <code class=syntax>YYYY-MM-DD hh:mm:ss ±h:mm</code> и т.д. Например, <code class=syntax>2020-12-12 17:36:00 -5:00</code>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>time_string</code>, преобразованная в тип данных <code class=syntax>DateTime</code>.</li> <li><code class=syntax>NULL</code>, если входная строка не может быть преобразована в тип данных <code class=syntax>DateTime</code>.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>(</span><span class=s1>'02/10/2021 21:12:57'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrNull─┐
│             2021-02-10 21:12:57 │
└─────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>(</span><span class=s1>'02-10-2021 21:12:57 GMT'</span><span class=p>,</span><span class=w> </span><span class=s1>'Europe/Moscow'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrNull─┐
│             2021-02-11 00:12:57 │
└─────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>(</span><span class=s1>'02.10.2021'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrNull─┐
│             2021-02-10 00:00:00 │
└─────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>(</span><span class=s1>'10.2021'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrNull</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrNull─┐
│                            ᴺᵁᴸᴸ │
└─────────────────────────────────┘
</code></pre></div> <h2 id=parsedatetimebesteffortusorzero>parseDateTimeBestEffortUSOrZero<a class=headerlink href=../amp/#parsedatetimebesteffortusorzero title="Permanent link"> </a></h2> <p>Работает аналогично функции <a href=../amp/#parsedatetimebesteffortUS>parseDateTimeBestEffortUS</a>, но в отличие от нее возвращает нулевую дату (<code class=syntax>1970-01-01</code>) или нулевую дату со временем (<code class=syntax>1970-01-01 00:00:00</code>), если входная строка не может быть преобразована в тип данных <a href=../../../data-types/datetime/amp/ >DateTime</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>(</span><span class=n>time_string</span><span class=p>[,</span><span class=w> </span><span class=n>time_zone</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>time_string</code> — строка, содержащая дату или дату со временем для преобразования. Дата должна быть в американском формате (<code class=syntax>MM/DD/YYYY</code> и т.д.). <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>time_zone</code> — <a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-timezone>часовой пояс</a>. Функция анализирует <code class=syntax>time_string</code> в соответствии с заданным часовым поясом. Опциональный параметр. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Поддерживаемые нестандартные форматы</strong></p> <ul> <li>Строка в формате <a href=https://en.wikipedia.org/wiki/Unix_time rel="external nofollow noreferrer" target=_blank>unix timestamp</a>, содержащая 9-10 цифр.</li> <li>Строка, содержащая дату и время: <code class=syntax>YYYYMMDDhhmmss</code>, <code class=syntax>MM/DD/YYYY hh:mm:ss</code>, <code class=syntax>MM-DD-YY hh:mm</code>, <code class=syntax>YYYY-MM-DD hh:mm:ss</code> и т.д.</li> <li>Строка, содержащая дату без времени: <code class=syntax>YYYY</code>, <code class=syntax>YYYYMM</code>, <code class=syntax>YYYY*MM</code>, <code class=syntax>MM/DD/YYYY</code>, <code class=syntax>MM-DD-YY</code> и т.д.</li> <li>Строка, содержащая день и время: <code class=syntax>DD</code>, <code class=syntax>DD hh</code>, <code class=syntax>DD hh:mm</code>. В этом случае <code class=syntax>YYYY-MM</code> заменяется на <code class=syntax>2000-01</code>.</li> <li>Строка, содержащая дату и время, а также информацию о часовом поясе: <code class=syntax>YYYY-MM-DD hh:mm:ss ±h:mm</code> и т.д. Например, <code class=syntax>2020-12-12 17:36:00 -5:00</code>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>time_string</code>, преобразованная в тип данных <code class=syntax>DateTime</code>.</li> <li>Нулевая дата или нулевая дата со временем, если входная строка не может быть преобразована в тип данных <code class=syntax>DateTime</code>.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>(</span><span class=s1>'02/10/2021 21:12:57'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrZero─┐
│             2021-02-10 21:12:57 │
└─────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>(</span><span class=s1>'02-10-2021 21:12:57 GMT'</span><span class=p>,</span><span class=w> </span><span class=s1>'Europe/Moscow'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrZero─┐
│             2021-02-11 00:12:57 │
└─────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>(</span><span class=s1>'02.10.2021'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrZero─┐
│             2021-02-10 00:00:00 │
└─────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>(</span><span class=s1>'02.2021'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>parseDateTimeBestEffortUSOrZero</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─parseDateTimeBestEffortUSOrZero─┐
│             1970-01-01 00:00:00 │
└─────────────────────────────────┘
</code></pre></div> <h2 id=parsedatetime64besteffort>parseDateTime64BestEffort<a class=headerlink href=../amp/#parsedatetime64besteffort title="Permanent link"> </a></h2> <p>Работает аналогично функции <a href=../amp/#parsedatetimebesteffort>parseDateTimeBestEffort</a>, но также принимает миллисекунды и микросекунды. Возвращает тип данных <a href=.././amp/#data_type-datetime>DateTime</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>parseDateTime64BestEffort</span><span class=p>(</span><span class=n>time_string</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=k>precision</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=n>time_zone</span><span class=p>]])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>time_string</code> — строка, содержащая дату или дату со временем, которые нужно преобразовать. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>precision</code> — требуемая точность: <code class=syntax>3</code> — для миллисекунд, <code class=syntax>6</code> — для микросекунд. По умолчанию — <code class=syntax>3</code>. Необязательный. <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> <li><code class=syntax>time_zone</code> — <a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-timezone>Timezone</a>. Разбирает значение <code class=syntax>time_string</code> в зависимости от часового пояса. Необязательный. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li><code class=syntax>time_string</code>, преобразованная в тип данных <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTime64BestEffort</span><span class=p>(</span><span class=s1>'2021-01-01'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>t</span><span class=w></span>
<span class=k>UNION</span><span class=w> </span><span class=k>ALL</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTime64BestEffort</span><span class=p>(</span><span class=s1>'2021-01-01 01:01:00.12346'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>t</span><span class=w></span>
<span class=k>UNION</span><span class=w> </span><span class=k>ALL</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTime64BestEffort</span><span class=p>(</span><span class=s1>'2021-01-01 01:01:00.12346'</span><span class=p>,</span><span class=mi>6</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>t</span><span class=w></span>
<span class=k>UNION</span><span class=w> </span><span class=k>ALL</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>parseDateTime64BestEffort</span><span class=p>(</span><span class=s1>'2021-01-01 01:01:00.12346'</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=s1>'Europe/Moscow'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>t</span><span class=w></span>
<span class=n>FORMAT</span><span class=w> </span><span class=n>PrettyCompactMonoBlock</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────────────────────a─┬─t──────────────────────────────┐
│ 2021-01-01 01:01:00.123000 │ DateTime64(3)                  │
│ 2021-01-01 00:00:00.000000 │ DateTime64(3)                  │
│ 2021-01-01 01:01:00.123460 │ DateTime64(6)                  │
│ 2020-12-31 22:01:00.123000 │ DateTime64(3, 'Europe/Moscow') │
└────────────────────────────┴────────────────────────────────┘
</code></pre></div> <h2 id=parsedatetime32besteffortornull>parseDateTime64BestEffortOrNull<a class=headerlink href=../amp/#parsedatetime32besteffortornull title="Permanent link"> </a></h2> <p>Работает аналогично функции <a href=../amp/#parsedatetime64besteffort>parseDateTime64BestEffort</a>, но возвращает <code class=syntax>NULL</code>, если формат даты не может быть обработан.</p> <h2 id=parsedatetime64besteffortorzero>parseDateTime64BestEffortOrZero<a class=headerlink href=../amp/#parsedatetime64besteffortorzero title="Permanent link"> </a></h2> <p>Работает аналогично функции <a href=../amp/#parsedatetimebesteffort>parseDateTime64BestEffort</a>, но возвращает нулевую дату и время, если формат даты не может быть обработан.</p> <h2 id=tolowcardinality>toLowCardinality<a class=headerlink href=../amp/#tolowcardinality title="Permanent link"> </a></h2> <p>Преобразует входные данные в версию <a href=../../../data-types/lowcardinality/amp/ >LowCardianlity</a> того же типа данных.</p> <p>Чтобы преобразовать данные из типа <code class=syntax>LowCardinality</code>, используйте функцию <a href=../amp/#type_conversion_function-cast>CAST</a>. Например, <code class=syntax>CAST(x as String)</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toLowCardinality</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>выражение</a>, которое в результате преобразуется в один из <a href=../../../data-types/amp/#data_types>поддерживаемых типов данных</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Результат преобразования <code class=syntax>expr</code>.</li> </ul> <p>Тип: <code class=syntax>LowCardinality(expr_result_type)</code></p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toLowCardinality</span><span class=p>(</span><span class=s1>'1'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toLowCardinality('1')─┐
│ 1                     │
└───────────────────────┘
</code></pre></div> <h2 id=tounixtimestamp64milli>toUnixTimestamp64Milli<a class=headerlink href=../amp/#tounixtimestamp64milli title="Permanent link"> </a></h2> <h2 id=tounixtimestamp64micro>toUnixTimestamp64Micro<a class=headerlink href=../amp/#tounixtimestamp64micro title="Permanent link"> </a></h2> <h2 id=tounixtimestamp64nano>toUnixTimestamp64Nano<a class=headerlink href=../amp/#tounixtimestamp64nano title="Permanent link"> </a></h2> <p>Преобразует значение <code class=syntax>DateTime64</code> в значение <code class=syntax>Int64</code> с фиксированной точностью менее одной секунды.<br> Входное значение округляется соответствующим образом вверх или вниз в зависимости от его точности.</p> <div class="admonition info alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Примечание</p> <p>Возвращаемое значение — это временная метка в UTC, а не в часовом поясе <code class=syntax>DateTime64</code>.</p> </div> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toUnixTimestamp64Milli</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение <code class=syntax>DateTime64</code> с любой точностью.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение <code class=syntax>value</code>, преобразованное в тип данных <code class=syntax>Int64</code>.</li> </ul> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=n>toDateTime64</span><span class=p>(</span><span class=s1>'2019-09-16 19:20:12.345678910'</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>dt64</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>toUnixTimestamp64Milli</span><span class=p>(</span><span class=n>dt64</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toUnixTimestamp64Milli(dt64)─┐
│                1568650812345 │
└──────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=n>toDateTime64</span><span class=p>(</span><span class=s1>'2019-09-16 19:20:12.345678910'</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>dt64</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>toUnixTimestamp64Nano</span><span class=p>(</span><span class=n>dt64</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─toUnixTimestamp64Nano(dt64)─┐
│         1568650812345678000 │
└─────────────────────────────┘
</code></pre></div> <h2 id=fromunixtimestamp64milli>fromUnixTimestamp64Milli<a class=headerlink href=../amp/#fromunixtimestamp64milli title="Permanent link"> </a></h2> <h2 id=fromunixtimestamp64micro>fromUnixTimestamp64Micro<a class=headerlink href=../amp/#fromunixtimestamp64micro title="Permanent link"> </a></h2> <h2 id=fromunixtimestamp64nano>fromUnixTimestamp64Nano<a class=headerlink href=../amp/#fromunixtimestamp64nano title="Permanent link"> </a></h2> <p>Преобразует значение <code class=syntax>Int64</code> в значение <code class=syntax>DateTime64</code> с фиксированной точностью менее одной секунды и дополнительным часовым поясом. Входное значение округляется соответствующим образом вверх или вниз в зависимости от его точности. Обратите внимание, что входное значение обрабатывается как метка времени UTC, а не метка времени в заданном (или неявном) часовом поясе.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>fromUnixTimestamp64Milli</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=n>ti</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение типы <code class=syntax>Int64</code> с любой точностью.</li> <li><code class=syntax>timezone</code> — (не обязательный параметр) часовой пояс в формате <code class=syntax>String</code> для возвращаемого результата.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение <code class=syntax>value</code>, преобразованное в тип данных <code class=syntax>DateTime64</code>.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=k>CAST</span><span class=p>(</span><span class=mi>1234567891011</span><span class=p>,</span><span class=w> </span><span class=s1>'Int64'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>i64</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>fromUnixTimestamp64Milli</span><span class=p>(</span><span class=n>i64</span><span class=p>,</span><span class=w> </span><span class=s1>'UTC'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─fromUnixTimestamp64Milli(i64, 'UTC')─┐
│              2009-02-13 23:31:31.011 │
└──────────────────────────────────────┘
</code></pre></div> <h2 id=formatrow>formatRow<a class=headerlink href=../amp/#formatrow title="Permanent link"> </a></h2> <p>Преобразует произвольные выражения в строку заданного формата.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>formatRow</span><span class=p>(</span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>format</code> — текстовый формат. Например, <a href=../../../../interfaces/formats/amp/#csv>CSV</a>, <a href=../../../../interfaces/formats/amp/#tabseparated>TSV</a>.</li> <li><code class=syntax>x</code>,<code class=syntax>y</code>, ... — выражения.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Отформатированная строка (в текстовых форматах обычно с завершающим переводом строки).</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>formatRow</span><span class=p>(</span><span class=s1>'CSV'</span><span class=p>,</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=w> </span><span class=s1>'good'</span><span class=p>)</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─formatRow('CSV', number, 'good')─┐
│ 0,"good"
                         │
│ 1,"good"
                         │
│ 2,"good"
                         │
└──────────────────────────────────┘
</code></pre></div> <h2 id=formatrownonewline>formatRowNoNewline<a class=headerlink href=../amp/#formatrownonewline title="Permanent link"> </a></h2> <p>Преобразует произвольные выражения в строку заданного формата. При этом удаляет лишние переводы строк <code class=syntax>\n</code>, если они появились.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>formatRowNoNewline</span><span class=p>(</span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>format</code> — текстовый формат. Например, <a href=../../../../interfaces/formats/amp/#csv>CSV</a>, <a href=../../../../interfaces/formats/amp/#tabseparated>TSV</a>.</li> <li><code class=syntax>x</code>,<code class=syntax>y</code>, ... — выражения.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Отформатированная строка (в текстовых форматах без завершающего перевода строки).</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>formatRowNoNewline</span><span class=p>(</span><span class=s1>'CSV'</span><span class=p>,</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=w> </span><span class=s1>'good'</span><span class=p>)</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─formatRowNoNewline('CSV', number, 'good')─┐
│ 0,"good"                                  │
│ 1,"good"                                  │
│ 2,"good"                                  │
└───────────────────────────────────────────┘
</code></pre></div> <h2 id=snowflaketodatetime>snowflakeToDateTime<a class=headerlink href=../amp/#snowflaketodatetime title="Permanent link"> </a></h2> <p>Извлекает время из <a href=https://en.wikipedia.org/wiki/Snowflake_ID rel="external nofollow noreferrer" target=_blank>Snowflake ID</a> в формате <a href=../../../data-types/datetime/amp/ >DateTime</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>snowflakeToDateTime</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=n>time_zone</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — Snowflake ID. <a href=../../../data-types/int-uint/amp/ >Int64</a>.</li> <li><code class=syntax>time_zone</code> — <a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-timezone>временная зона сервера</a>. Функция распознает <code class=syntax>time_string</code> в соответствии с часовым поясом. Необязательный. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение, преобразованное в фомат <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>snowflakeToDateTime</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'1426860702823350272'</span><span class=p>,</span><span class=w> </span><span class=s1>'Int64'</span><span class=p>),</span><span class=w> </span><span class=s1>'UTC'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─snowflakeToDateTime(CAST('1426860702823350272', 'Int64'), 'UTC')─┐
│                                              2021-08-15 10:57:56 │
└──────────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=snowflaketodatetime64>snowflakeToDateTime64<a class=headerlink href=../amp/#snowflaketodatetime64 title="Permanent link"> </a></h2> <p>Извлекает время из <a href=https://en.wikipedia.org/wiki/Snowflake_ID rel="external nofollow noreferrer" target=_blank>Snowflake ID</a> в формате <a href=../../../data-types/datetime64/amp/ >DateTime64</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>snowflakeToDateTime64</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=n>time_zone</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — Snowflake ID. <a href=../../../data-types/int-uint/amp/ >Int64</a>.</li> <li><code class=syntax>time_zone</code> — <a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-timezone>временная зона сервера</a>. Функция распознает <code class=syntax>time_string</code> в соответствии с часовым поясом. Необязательный. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение, преобразованное в фомат <a href=../../../data-types/datetime64/amp/ >DateTime64</a>.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>snowflakeToDateTime64</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'1426860802823350272'</span><span class=p>,</span><span class=w> </span><span class=s1>'Int64'</span><span class=p>),</span><span class=w> </span><span class=s1>'UTC'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─snowflakeToDateTime64(CAST('1426860802823350272', 'Int64'), 'UTC')─┐
│                                            2021-08-15 10:58:19.841 │
└────────────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=datetimetosnowflake>dateTimeToSnowflake<a class=headerlink href=../amp/#datetimetosnowflake title="Permanent link"> </a></h2> <p>Преобразует значение <a href=../../../data-types/datetime/amp/ >DateTime</a> в первый идентификатор <a href=https://en.wikipedia.org/wiki/Snowflake_ID rel="external nofollow noreferrer" target=_blank>Snowflake ID</a> на текущий момент.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dateTimeToSnowflake</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — дата и время. <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение, преобразованное в <a href=../../../data-types/int-uint/amp/ >Int64</a>, как первый идентификатор Snowflake ID в момент выполнения.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=n>toDateTime</span><span class=p>(</span><span class=s1>'2021-08-15 18:57:56'</span><span class=p>,</span><span class=w> </span><span class=s1>'Asia/Shanghai'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>dt</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>dateTimeToSnowflake</span><span class=p>(</span><span class=n>dt</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─dateTimeToSnowflake(dt)─┐
│     1426860702823350272 │
└─────────────────────────┘
</code></pre></div> <h2 id=datetime64tosnowflake>dateTime64ToSnowflake<a class=headerlink href=../amp/#datetime64tosnowflake title="Permanent link"> </a></h2> <p>Преобразует значение <a href=../../../data-types/datetime64/amp/ >DateTime64</a> в первый идентификатор <a href=https://en.wikipedia.org/wiki/Snowflake_ID rel="external nofollow noreferrer" target=_blank>Snowflake ID</a> на текущий момент.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dateTime64ToSnowflake</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — дата и время. <a href=../../../data-types/datetime64/amp/ >DateTime64</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение, преобразованное в <a href=../../../data-types/int-uint/amp/ >Int64</a>, как первый идентификатор Snowflake ID в момент выполнения.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=n>toDateTime64</span><span class=p>(</span><span class=s1>'2021-08-15 18:57:56.492'</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>'Asia/Shanghai'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>dt64</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>dateTime64ToSnowflake</span><span class=p>(</span><span class=n>dt64</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─dateTime64ToSnowflake(dt64)─┐
│         1426860704886947840 │
└─────────────────────────────┘
</code></pre></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/38993f215f9186c1ac3505b1e09697cd9a468b5d" rel="external nofollow noreferrer" target="_blank" class="text-reset">38993f21</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/ru/sql-reference/functions/type-conversion-functions/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

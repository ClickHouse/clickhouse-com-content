"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[88008],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=u(n),d=i,f=m["".concat(s,".").concat(d)]||m[d]||c[d]||r;return n?a.createElement(f,l(l({ref:t},p),{},{components:n})):a.createElement(f,l({ref:t},p))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},66151:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return o},metadata:function(){return u},toc:function(){return c}});var a=n(87462),i=n(63366),r=(n(67294),n(3905)),l=["components"],o={sidebar_position:54,sidebar_label:"URLs"},s="Functions for Working with URLs",u={unversionedId:"en/sql-reference/functions/url-functions",id:"en/sql-reference/functions/url-functions",title:"Functions for Working with URLs",description:"functions-for-working-with-urls}",source:"@site/docs/en/sql-reference/functions/url-functions.md",sourceDirName:"en/sql-reference/functions",slug:"/en/sql-reference/functions/url-functions",permalink:"/docs/staging1/docs/en/sql-reference/functions/url-functions",tags:[],version:"current",sidebarPosition:54,frontMatter:{sidebar_position:54,sidebar_label:"URLs"},sidebar:"tutorialSidebar",previous:{title:"UUID",permalink:"/docs/staging1/docs/en/sql-reference/functions/uuid-functions"},next:{title:"IP Addresses",permalink:"/docs/staging1/docs/en/sql-reference/functions/ip-address-functions"}},p={},c=[{value:"Functions that Extract Parts of a URL",id:"functions-that-extract-parts-of-a-url",level:2},{value:"protocol",id:"protocol",level:3},{value:"domain",id:"domain",level:3},{value:"domainWithoutWWW",id:"domainwithoutwww",level:3},{value:"topLevelDomain",id:"topleveldomain",level:3},{value:"firstSignificantSubdomain",id:"firstsignificantsubdomain",level:3},{value:"cutToFirstSignificantSubdomain",id:"cuttofirstsignificantsubdomain",level:3},{value:"cutToFirstSignificantSubdomainWithWWW",id:"cuttofirstsignificantsubdomainwithwww",level:3},{value:"cutToFirstSignificantSubdomainCustom",id:"cuttofirstsignificantsubdomaincustom",level:3},{value:"cutToFirstSignificantSubdomainCustomWithWWW",id:"cuttofirstsignificantsubdomaincustomwithwww",level:3},{value:"firstSignificantSubdomainCustom",id:"firstsignificantsubdomaincustom",level:3},{value:"port(URL[, default_port = 0])",id:"port",level:3},{value:"path",id:"path",level:3},{value:"pathFull",id:"pathfull",level:3},{value:"queryString",id:"querystring",level:3},{value:"fragment",id:"fragment",level:3},{value:"queryStringAndFragment",id:"querystringandfragment",level:3},{value:"extractURLParameter(URL, name)",id:"extracturlparameterurl-name",level:3},{value:"extractURLParameters(URL)",id:"extracturlparametersurl",level:3},{value:"extractURLParameterNames(URL)",id:"extracturlparameternamesurl",level:3},{value:"URLHierarchy(URL)",id:"urlhierarchyurl",level:3},{value:"URLPathHierarchy(URL)",id:"urlpathhierarchyurl",level:3},{value:"encodeURLComponent(URL)",id:"encodeurlcomponenturl",level:3},{value:"decodeURLComponent(URL)",id:"decodeurlcomponenturl",level:3},{value:"encodeURLFormComponent(URL)",id:"encodeurlformcomponenturl",level:3},{value:"decodeURLFormComponent(URL)",id:"decodeurlformcomponenturl",level:3},{value:"netloc",id:"netloc",level:3},{value:"Functions that Remove Part of a URL",id:"functions-that-remove-part-of-a-url",level:2},{value:"cutWWW",id:"cutwww",level:3},{value:"cutQueryString",id:"cutquerystring",level:3},{value:"cutFragment",id:"cutfragment",level:3},{value:"cutQueryStringAndFragment",id:"cutquerystringandfragment",level:3},{value:"cutURLParameter(URL, name)",id:"cuturlparameterurl-name",level:3}],m={toc:c};function d(e){var t=e.components,n=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"functions-for-working-with-urls"},"Functions for Working with URLs"),(0,r.kt)("p",null,"All these functions do not follow the RFC. They are maximally simplified for improved performance."),(0,r.kt)("h2",{id:"functions-that-extract-parts-of-a-url"},"Functions that Extract Parts of a URL"),(0,r.kt)("p",null,"If the relevant part isn\u2019t present in a URL, an empty string is returned."),(0,r.kt)("h3",{id:"protocol"},"protocol"),(0,r.kt)("p",null,"Extracts the protocol from a URL."),(0,r.kt)("p",null,"Examples of typical returned values: http, https, ftp, mailto, tel, magnet\u2026"),(0,r.kt)("h3",{id:"domain"},"domain"),(0,r.kt)("p",null,"Extracts the hostname from a URL."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"domain(url)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"url")," \u2014 URL. Type: ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),".")),(0,r.kt)("p",null,"The URL can be specified with or without a scheme. Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"svn+ssh://some.svn-hosting.com:80/repo/trunk\nsome.svn-hosting.com:80/repo/trunk\nhttps://clickhouse.com/time/\n")),(0,r.kt)("p",null,"For these examples, the ",(0,r.kt)("inlineCode",{parentName:"p"},"domain")," function returns the following results:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"some.svn-hosting.com\nsome.svn-hosting.com\nclickhouse.com\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned values")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Host name. If ClickHouse can parse the input string as a URL."),(0,r.kt)("li",{parentName:"ul"},"Empty string. If ClickHouse can\u2019t parse the input string as a URL.")),(0,r.kt)("p",null,"Type: ",(0,r.kt)("inlineCode",{parentName:"p"},"String"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT domain('svn+ssh://some.svn-hosting.com:80/repo/trunk');\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500domain('svn+ssh://some.svn-hosting.com:80/repo/trunk')\u2500\u2510\n\u2502 some.svn-hosting.com                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h3",{id:"domainwithoutwww"},"domainWithoutWWW"),(0,r.kt)("p",null,"Returns the domain and removes no more than one \u2018www.\u2019 from the beginning of it, if present."),(0,r.kt)("h3",{id:"topleveldomain"},"topLevelDomain"),(0,r.kt)("p",null,"Extracts the the top-level domain from a URL."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"topLevelDomain(url)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"url")," \u2014 URL. Type: ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),".")),(0,r.kt)("p",null,"The URL can be specified with or without a scheme. Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"svn+ssh://some.svn-hosting.com:80/repo/trunk\nsome.svn-hosting.com:80/repo/trunk\nhttps://clickhouse.com/time/\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned values")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Domain name. If ClickHouse can parse the input string as a URL."),(0,r.kt)("li",{parentName:"ul"},"Empty string. If ClickHouse cannot parse the input string as a URL.")),(0,r.kt)("p",null,"Type: ",(0,r.kt)("inlineCode",{parentName:"p"},"String"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT topLevelDomain('svn+ssh://www.some.svn-hosting.com:80/repo/trunk');\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500topLevelDomain('svn+ssh://www.some.svn-hosting.com:80/repo/trunk')\u2500\u2510\n\u2502 com                                                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h3",{id:"firstsignificantsubdomain"},"firstSignificantSubdomain"),(0,r.kt)("p",null,"Returns the \u201cfirst significant subdomain\u201d. The first significant subdomain is a second-level domain if it is \u2018com\u2019, \u2018net\u2019, \u2018org\u2019, or \u2018co\u2019. Otherwise, it is a third-level domain. For example, ",(0,r.kt)("inlineCode",{parentName:"p"},"firstSignificantSubdomain (\u2018https://news.clickhouse.com/\u2019) = \u2018clickhouse\u2019, firstSignificantSubdomain (\u2018https://news.clickhouse.com.tr/\u2019) = \u2018clickhouse\u2019"),". The list of \u201cinsignificant\u201d second-level domains and other implementation details may change in the future."),(0,r.kt)("h3",{id:"cuttofirstsignificantsubdomain"},"cutToFirstSignificantSubdomain"),(0,r.kt)("p",null,"Returns the part of the domain that includes top-level subdomains up to the \u201cfirst significant subdomain\u201d (see the explanation above)."),(0,r.kt)("p",null,"For example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cutToFirstSignificantSubdomain('https://news.clickhouse.com.tr/') = 'clickhouse.com.tr'"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cutToFirstSignificantSubdomain('www.tr') = 'tr'"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cutToFirstSignificantSubdomain('tr') = ''"),".")),(0,r.kt)("h3",{id:"cuttofirstsignificantsubdomainwithwww"},"cutToFirstSignificantSubdomainWithWWW"),(0,r.kt)("p",null,'Returns the part of the domain that includes top-level subdomains up to the \u201cfirst significant subdomain\u201d, without stripping "www".'),(0,r.kt)("p",null,"For example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cutToFirstSignificantSubdomain('https://news.clickhouse.com.tr/') = 'clickhouse.com.tr'"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cutToFirstSignificantSubdomain('www.tr') = 'www.tr'"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cutToFirstSignificantSubdomain('tr') = ''"),".")),(0,r.kt)("h3",{id:"cuttofirstsignificantsubdomaincustom"},"cutToFirstSignificantSubdomainCustom"),(0,r.kt)("p",null,"Returns the part of the domain that includes top-level subdomains up to the first significant subdomain. Accepts custom ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/List_of_Internet_top-level_domains"},"TLD list")," name."),(0,r.kt)("p",null,"Can be useful if you need fresh TLD list or you have custom."),(0,r.kt)("p",null,"Configuration example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- <top_level_domains_path>/var/lib/clickhouse/top_level_domains/</top_level_domains_path> --\x3e\n<top_level_domains_lists>\n    \x3c!-- https://publicsuffix.org/list/public_suffix_list.dat --\x3e\n    <public_suffix_list>public_suffix_list.dat</public_suffix_list>\n    \x3c!-- NOTE: path is under top_level_domains_path --\x3e\n</top_level_domains_lists>\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Syntax")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"cutToFirstSignificantSubdomain(URL, TLD)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"URL")," \u2014 URL. ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TLD")," \u2014 Custom TLD list name. ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned value")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Part of the domain that includes top-level subdomains up to the first significant subdomain.")),(0,r.kt)("p",null,"Type: ",(0,r.kt)("a",{parentName:"p",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example")),(0,r.kt)("p",null,"Query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT cutToFirstSignificantSubdomainCustom('bar.foo.there-is-no-such-domain', 'public_suffix_list');\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500cutToFirstSignificantSubdomainCustom('bar.foo.there-is-no-such-domain', 'public_suffix_list')\u2500\u2510\n\u2502 foo.there-is-no-such-domain                                                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"See Also")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#firstsignificantsubdomain"},"firstSignificantSubdomain"),".")),(0,r.kt)("h3",{id:"cuttofirstsignificantsubdomaincustomwithwww"},"cutToFirstSignificantSubdomainCustomWithWWW"),(0,r.kt)("p",null,"Returns the part of the domain that includes top-level subdomains up to the first significant subdomain without stripping ",(0,r.kt)("inlineCode",{parentName:"p"},"www"),". Accepts custom TLD list name."),(0,r.kt)("p",null,"Can be useful if you need fresh TLD list or you have custom."),(0,r.kt)("p",null,"Configuration example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- <top_level_domains_path>/var/lib/clickhouse/top_level_domains/</top_level_domains_path> --\x3e\n<top_level_domains_lists>\n    \x3c!-- https://publicsuffix.org/list/public_suffix_list.dat --\x3e\n    <public_suffix_list>public_suffix_list.dat</public_suffix_list>\n    \x3c!-- NOTE: path is under top_level_domains_path --\x3e\n</top_level_domains_lists>\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Syntax")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"cutToFirstSignificantSubdomainCustomWithWWW(URL, TLD)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"URL")," \u2014 URL. ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TLD")," \u2014 Custom TLD list name. ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned value")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Part of the domain that includes top-level subdomains up to the first significant subdomain without stripping ",(0,r.kt)("inlineCode",{parentName:"li"},"www"),".")),(0,r.kt)("p",null,"Type: ",(0,r.kt)("a",{parentName:"p",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example")),(0,r.kt)("p",null,"Query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT cutToFirstSignificantSubdomainCustomWithWWW('www.foo', 'public_suffix_list');\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500cutToFirstSignificantSubdomainCustomWithWWW('www.foo', 'public_suffix_list')\u2500\u2510\n\u2502 www.foo                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"See Also")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#firstsignificantsubdomain"},"firstSignificantSubdomain"),".")),(0,r.kt)("h3",{id:"firstsignificantsubdomaincustom"},"firstSignificantSubdomainCustom"),(0,r.kt)("p",null,"Returns the first significant subdomain. Accepts customs TLD list name."),(0,r.kt)("p",null,"Can be useful if you need fresh TLD list or you have custom."),(0,r.kt)("p",null,"Configuration example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- <top_level_domains_path>/var/lib/clickhouse/top_level_domains/</top_level_domains_path> --\x3e\n<top_level_domains_lists>\n    \x3c!-- https://publicsuffix.org/list/public_suffix_list.dat --\x3e\n    <public_suffix_list>public_suffix_list.dat</public_suffix_list>\n    \x3c!-- NOTE: path is under top_level_domains_path --\x3e\n</top_level_domains_lists>\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Syntax")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"firstSignificantSubdomainCustom(URL, TLD)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"URL")," \u2014 URL. ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TLD")," \u2014 Custom TLD list name. ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned value")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"First significant subdomain.")),(0,r.kt)("p",null,"Type: ",(0,r.kt)("a",{parentName:"p",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example")),(0,r.kt)("p",null,"Query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT firstSignificantSubdomainCustom('bar.foo.there-is-no-such-domain', 'public_suffix_list');\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500firstSignificantSubdomainCustom('bar.foo.there-is-no-such-domain', 'public_suffix_list')\u2500\u2510\n\u2502 foo                                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"See Also")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#firstsignificantsubdomain"},"firstSignificantSubdomain"),".")),(0,r.kt)("h3",{id:"port"},"port(URL","[",", default_port = 0","]",")"),(0,r.kt)("p",null,"Returns the port or ",(0,r.kt)("inlineCode",{parentName:"p"},"default_port")," if there is no port in the URL (or in case of validation error)."),(0,r.kt)("h3",{id:"path"},"path"),(0,r.kt)("p",null,"Returns the path. Example: ",(0,r.kt)("inlineCode",{parentName:"p"},"/top/news.html")," The path does not include the query string."),(0,r.kt)("h3",{id:"pathfull"},"pathFull"),(0,r.kt)("p",null,"The same as above, but including query string and fragment. Example: /top/news.html?page=2#comments"),(0,r.kt)("h3",{id:"querystring"},"queryString"),(0,r.kt)("p",null,"Returns the query string. Example: page=1&lr=213. query-string does not include the initial question mark, as well as # and everything after #."),(0,r.kt)("h3",{id:"fragment"},"fragment"),(0,r.kt)("p",null,"Returns the fragment identifier. fragment does not include the initial hash symbol."),(0,r.kt)("h3",{id:"querystringandfragment"},"queryStringAndFragment"),(0,r.kt)("p",null,"Returns the query string and fragment identifier. Example: page=1#29390."),(0,r.kt)("h3",{id:"extracturlparameterurl-name"},"extractURLParameter(URL, name)"),(0,r.kt)("p",null,"Returns the value of the \u2018name\u2019 parameter in the URL, if present. Otherwise, an empty string. If there are many parameters with this name, it returns the first occurrence. This function works under the assumption that the parameter name is encoded in the URL exactly the same way as in the passed argument."),(0,r.kt)("h3",{id:"extracturlparametersurl"},"extractURLParameters(URL)"),(0,r.kt)("p",null,"Returns an array of name=value strings corresponding to the URL parameters. The values are not decoded in any way."),(0,r.kt)("h3",{id:"extracturlparameternamesurl"},"extractURLParameterNames(URL)"),(0,r.kt)("p",null,"Returns an array of name strings corresponding to the names of URL parameters. The values are not decoded in any way."),(0,r.kt)("h3",{id:"urlhierarchyurl"},"URLHierarchy(URL)"),(0,r.kt)("p",null,"Returns an array containing the URL, truncated at the end by the symbols /,? in the path and query-string. Consecutive separator characters are counted as one. The cut is made in the position after all the consecutive separator characters."),(0,r.kt)("h3",{id:"urlpathhierarchyurl"},"URLPathHierarchy(URL)"),(0,r.kt)("p",null,"The same as above, but without the protocol and host in the result. The / element (root) is not included."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"URLPathHierarchy('https://example.com/browse/CONV-6788') =\n[\n    '/browse/',\n    '/browse/CONV-6788'\n]\n")),(0,r.kt)("h3",{id:"encodeurlcomponenturl"},"encodeURLComponent(URL)"),(0,r.kt)("p",null,"Returns the encoded URL.\nExample:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT encodeURLComponent('http://127.0.0.1:8123/?query=SELECT 1;') AS EncodedURL;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500EncodedURL\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 http%3A%2F%2F127.0.0.1%3A8123%2F%3Fquery%3DSELECT%201%3B \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h3",{id:"decodeurlcomponenturl"},"decodeURLComponent(URL)"),(0,r.kt)("p",null,"Returns the decoded URL.\nExample:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT decodeURLComponent('http://127.0.0.1:8123/?query=SELECT%201%3B') AS DecodedURL;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500DecodedURL\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 http://127.0.0.1:8123/?query=SELECT 1; \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h3",{id:"encodeurlformcomponenturl"},"encodeURLFormComponent(URL)"),(0,r.kt)("p",null,"Returns the encoded URL. Follows rfc-1866, space(",(0,r.kt)("inlineCode",{parentName:"p"}," "),") is encoded as plus(",(0,r.kt)("inlineCode",{parentName:"p"},"+"),").\nExample:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT encodeURLFormComponent('http://127.0.0.1:8123/?query=SELECT 1 2+3') AS EncodedURL;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500EncodedURL\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 http%3A%2F%2F127.0.0.1%3A8123%2F%3Fquery%3DSELECT+1+2%2B3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h3",{id:"decodeurlformcomponenturl"},"decodeURLFormComponent(URL)"),(0,r.kt)("p",null,"Returns the decoded URL. Follows rfc-1866, plain plus(",(0,r.kt)("inlineCode",{parentName:"p"},"+"),") is decoded as space(",(0,r.kt)("inlineCode",{parentName:"p"}," "),").\nExample:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT decodeURLFormComponent('http://127.0.0.1:8123/?query=SELECT%201+2%2B3') AS DecodedURL;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500DecodedURL\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 http://127.0.0.1:8123/?query=SELECT 1 2+3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h3",{id:"netloc"},"netloc"),(0,r.kt)("p",null,"Extracts network locality (",(0,r.kt)("inlineCode",{parentName:"p"},"username:password@host:port"),") from a URL."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Syntax")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"netloc(URL)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"url")," \u2014 URL. ",(0,r.kt)("a",{parentName:"li",href:"/docs/staging1/docs/en/sql-reference/data-types/string"},"String"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned value")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"username:password@host:port"),".")),(0,r.kt)("p",null,"Type: ",(0,r.kt)("inlineCode",{parentName:"p"},"String"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example")),(0,r.kt)("p",null,"Query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT netloc('http://paul@www.example.com:80/');\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500netloc('http://paul@www.example.com:80/')\u2500\u2510\n\u2502 paul@www.example.com:80                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"functions-that-remove-part-of-a-url"},"Functions that Remove Part of a URL"),(0,r.kt)("p",null,"If the URL does not have anything similar, the URL remains unchanged."),(0,r.kt)("h3",{id:"cutwww"},"cutWWW"),(0,r.kt)("p",null,"Removes no more than one \u2018www.\u2019 from the beginning of the URL\u2019s domain, if present."),(0,r.kt)("h3",{id:"cutquerystring"},"cutQueryString"),(0,r.kt)("p",null,"Removes query string. The question mark is also removed."),(0,r.kt)("h3",{id:"cutfragment"},"cutFragment"),(0,r.kt)("p",null,"Removes the fragment identifier. The number sign is also removed."),(0,r.kt)("h3",{id:"cutquerystringandfragment"},"cutQueryStringAndFragment"),(0,r.kt)("p",null,"Removes the query string and fragment identifier. The question mark and number sign are also removed."),(0,r.kt)("h3",{id:"cuturlparameterurl-name"},"cutURLParameter(URL, name)"),(0,r.kt)("p",null,"Removes the \u2018name\u2019 URL parameter, if present. This function works under the assumption that the parameter name is encoded in the URL exactly the same way as in the passed argument."))}d.isMDXComponent=!0}}]);











    



    



    



    
    






    <!doctype html>
<html ⚡ lang="en">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>MaterializedMySQL | ClickHouse Documentation</title>
    <link rel="canonical" href="https://clickhouse.com/docs/en/engines/database-engines/materialized-mysql/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "MaterializedMySQL | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.com/docs/en/engines/database-engines/materialized-mysql/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "MaterializedMySQL | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ul{margin-bottom:1rem}ul{margin-top:0}ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}th{text-align:inherit}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.mark,mark{padding:.2em;background-color:#fcf8e3}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}}.table{width:100%;margin-bottom:8px;color:#212529}.table td,.table th{padding:.75rem;vertical-align:top;border-top:1px solid #d6dbdf}.table thead th{vertical-align:bottom;border-bottom:2px solid #d6dbdf}.table tbody+tbody{border-top:2px solid #d6dbdf}.table-primary,.table-primary>td,.table-primary>th{background-color:#fff1b8}.table-primary tbody+tbody,.table-primary td,.table-primary th,.table-primary thead th{border-color:#ffe47a}.table-warning,.table-warning>td,.table-warning>th{background-color:#ffeeba}.table-warning tbody+tbody,.table-warning td,.table-warning th,.table-warning thead th{border-color:#ffdf7e}.table-light,.table-light>td,.table-light>th{background-color:#fbfcfd}.table-light tbody+tbody,.table-light td,.table-light th,.table-light thead th{border-color:#f8fafc}.table-dark,.table-dark>td,.table-dark>th{background-color:#ccced0}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#a0a4a8}.table-primary-light,.table-primary-light>td,.table-primary-light>th{background-color:#fffefb}.table-primary-light tbody+tbody,.table-primary-light td,.table-primary-light th,.table-primary-light thead th{border-color:#fffcf7}.table-white,.table-white>td,.table-white>th{background-color:#fff}.table-white tbody+tbody,.table-white td,.table-white th,.table-white thead th{border-color:#fff}.table-black,.table-black>td,.table-black>th{background-color:#c1c2c3}.table-black tbody+tbody,.table-black td,.table-black th,.table-black thead th{border-color:#8c8e90}.table-orange,.table-orange>td,.table-orange>th{background-color:#ffdfb8}.table-orange tbody+tbody,.table-orange td,.table-orange th,.table-orange thead th{border-color:#ffc37a}.table-light-orange,.table-light-orange>td,.table-light-orange>th{background-color:#fff7ea}.table-light-orange tbody+tbody,.table-light-orange td,.table-light-orange th,.table-light-orange thead th{border-color:#fff1d9}.table .thead-dark th{color:#fff;background-color:#343a40;border-color:#454d55}.table .thead-light th{color:#6c757d;background-color:#e9ecef;border-color:#d6dbdf}.table-dark{color:#fff;background-color:#343a40}.table-dark td,.table-dark th,.table-dark thead th{border-color:#454d55}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn.disabled,.btn:disabled{opacity:.65}a.btn.disabled{pointer-events:none}.btn-primary{color:#495057;background-color:#fc0;border-color:#fc0}.btn-primary:focus,.btn-primary:hover{color:#495057;background-color:#d9ad00;border-color:#cca300}.btn-primary:focus{box-shadow:0 0 0 0 rgba(228,185,13,.5)}.btn-primary.disabled,.btn-primary:disabled{color:#495057;background-color:#fc0;border-color:#fc0}.btn-primary:not(:disabled):not(.disabled):active{color:#495057;background-color:#cca300;border-color:#bf9900}.btn-primary:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(228,185,13,.5)}.btn-warning{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-warning:focus,.btn-warning:hover{color:#495057;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{box-shadow:0 0 0 0 rgba(228,176,19,.5)}.btn-warning.disabled,.btn-warning:disabled{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-warning:not(:disabled):not(.disabled):active{color:#495057;background-color:#d39e00;border-color:#c69500}.btn-warning:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(228,176,19,.5)}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light.disabled,.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:not(:disabled):not(.disabled):active{color:#495057;background-color:#cddfea;border-color:#c4d9e6}.btn-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark.disabled,.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#32373b;border-color:#2c3034}.btn-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-primary-light{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-primary-light:focus,.btn-primary-light:hover{color:#495057;background-color:#ffedca;border-color:#ffe9bd}.btn-primary-light:focus{box-shadow:0 0 0 0 rgba(228,225,217,.5)}.btn-primary-light.disabled,.btn-primary-light:disabled{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-primary-light:not(:disabled):not(.disabled):active{color:#495057;background-color:#ffe9bd;border-color:#ffe5b0}.btn-primary-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(228,225,217,.5)}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white.disabled,.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-white:not(:disabled):not(.disabled):active{color:#495057;background-color:#e6e6e6;border-color:#dfdfdf}.btn-white:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black.disabled,.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-black:not(:disabled):not(.disabled):active{color:#fff;background-color:#0a0c0d;border-color:#050506}.btn-black:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange.disabled,.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:not(:disabled):not(.disabled):active{color:#fff;background-color:#cc7000;border-color:#bf6900}.btn-orange:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange.disabled,.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:not(:disabled):not(.disabled):active{color:#495057;background-color:#ffd182;border-color:#ffcd75}.btn-light-orange:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-outline-primary{color:#fc0;border-color:#fc0}.btn-outline-primary:hover{color:#495057;background-color:#fc0;border-color:#fc0}.btn-outline-primary:focus{box-shadow:0 0 0 0 rgba(255,204,0,.5)}.btn-outline-primary.disabled,.btn-outline-primary:disabled{color:#fc0;background-color:transparent}.btn-outline-primary:not(:disabled):not(.disabled):active{color:#495057;background-color:#fc0;border-color:#fc0}.btn-outline-primary:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(255,204,0,.5)}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 0 rgba(255,193,7,.5)}.btn-outline-warning.disabled,.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-warning:not(:disabled):not(.disabled):active{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(255,193,7,.5)}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light.disabled,.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-light:not(:disabled):not(.disabled):active{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark.disabled,.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-primary-light{color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:hover{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:focus{box-shadow:0 0 0 0 rgba(255,250,240,.5)}.btn-outline-primary-light.disabled,.btn-outline-primary-light:disabled{color:#fffaf0;background-color:transparent}.btn-outline-primary-light:not(:disabled):not(.disabled):active{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(255,250,240,.5)}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white.disabled,.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-white:not(:disabled):not(.disabled):active{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black.disabled,.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-black:not(:disabled):not(.disabled):active{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange.disabled,.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-orange:not(:disabled):not(.disabled):active{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange.disabled,.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-outline-light-orange:not(:disabled):not(.disabled):active{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link.disabled,.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.btn-group{position:relative;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#fc0;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#fff0b3}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#fc0;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#fff0b3}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#fc0;border:0;border-radius:1rem;-ms-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#fff0b3}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower,.custom-range::-ms-fill-upper{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px}.custom-range:disabled::-webkit-slider-thumb{background-color:#d6dbdf}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#d6dbdf}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#d6dbdf}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}.table{border-collapse:collapse}.table td,.table th{background-color:#fff}.table-dark{color:inherit}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#d6dbdf}.table .thead-dark th{color:inherit;border-color:#d6dbdf}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/docs/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/docs/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=materialized-mysql>[experimental] MaterializedMySQL<a class=headerlink href=../amp/#materialized-mysql title="Permanent link"> </a></h1> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Warning</p> <p>This is an experimental feature that should not be used in production.</p> </div> <p>Creates ClickHouse database with all the tables existing in MySQL, and all the data in those tables.</p> <p>ClickHouse server works as MySQL replica. It reads binlog and performs DDL and DML queries.</p> <h2 id=creating-a-database>Creating a Database<a class=headerlink href=../amp/#creating-a-database title="Permanent link"> </a></h2> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=n>db_name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=k>cluster</span><span class=p>]</span><span class=w></span>
<span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MaterializedMySQL</span><span class=p>(</span><span class=s1>'host:port'</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=s1>'database'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>database</span><span class=p>],</span><span class=w> </span><span class=s1>'user'</span><span class=p>,</span><span class=w> </span><span class=s1>'password'</span><span class=p>)</span><span class=w> </span><span class=p>[</span><span class=n>SETTINGS</span><span class=w> </span><span class=p>...]</span><span class=w></span>
<span class=p>[</span><span class=k>TABLE</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w> </span><span class=n>table1</span><span class=w> </span><span class=p>(...),</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w> </span><span class=n>table2</span><span class=w> </span><span class=p>(...)]</span><span class=w></span>
</code></pre></div> <p><strong>Engine Parameters</strong></p> <ul> <li><code class=syntax>host:port</code> — MySQL server endpoint.</li> <li><code class=syntax>database</code> — MySQL database name.</li> <li><code class=syntax>user</code> — MySQL user.</li> <li><code class=syntax>password</code> — User password.</li> </ul> <p><strong>Engine Settings</strong></p> <ul> <li><code class=syntax>max_rows_in_buffer</code> — Maximum number of rows that data is allowed to cache in memory (for single table and the cache data unable to query). When this number is exceeded, the data will be materialized. Default: <code class=syntax>65 505</code>.</li> <li><code class=syntax>max_bytes_in_buffer</code> — Maximum number of bytes that data is allowed to cache in memory (for single table and the cache data unable to query). When this number is exceeded, the data will be materialized. Default: <code class=syntax>1 048 576</code>.</li> <li><code class=syntax>max_rows_in_buffers</code> — Maximum number of rows that data is allowed to cache in memory (for database and the cache data unable to query). When this number is exceeded, the data will be materialized. Default: <code class=syntax>65 505</code>.</li> <li><code class=syntax>max_bytes_in_buffers</code> — Maximum number of bytes that data is allowed to cache in memory (for database and the cache data unable to query). When this number is exceeded, the data will be materialized. Default: <code class=syntax>1 048 576</code>.</li> <li><code class=syntax>max_flush_data_time</code> — Maximum number of milliseconds that data is allowed to cache in memory (for database and the cache data unable to query). When this time is exceeded, the data will be materialized. Default: <code class=syntax>1000</code>.</li> <li><code class=syntax>max_wait_time_when_mysql_unavailable</code> — Retry interval when MySQL is not available (milliseconds). Negative value disables retry. Default: <code class=syntax>1000</code>.</li> <li><code class=syntax>allows_query_when_mysql_lost</code> — Allows to query a materialized table when MySQL is lost. Default: <code class=syntax>0</code> (<code class=syntax>false</code>).</li> <li><code class=syntax>materialized_mysql_tables_list</code> — a comma-separated list of mysql database tables, which will be replicated by MaterializedMySQL database engine. Default value: empty list — means whole tables will be replicated.</li> </ul> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>mysql</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MaterializedMySQL</span><span class=p>(</span><span class=s1>'localhost:3306'</span><span class=p>,</span><span class=w> </span><span class=s1>'db'</span><span class=p>,</span><span class=w> </span><span class=s1>'user'</span><span class=p>,</span><span class=w> </span><span class=s1>'***'</span><span class=p>)</span><span class=w></span>
<span class=w>     </span><span class=n>SETTINGS</span><span class=w></span>
<span class=w>        </span><span class=n>allows_query_when_mysql_lost</span><span class=o>=</span><span class=k>true</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>max_wait_time_when_mysql_unavailable</span><span class=o>=</span><span class=mi>10000</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>Settings on MySQL-server Side</strong></p> <p>For the correct work of <code class=syntax>MaterializedMySQL</code>, there are few mandatory <code class=syntax>MySQL</code>-side configuration settings that must be set:</p> <ul> <li><code class=syntax>default_authentication_plugin = mysql_native_password</code> since <code class=syntax>MaterializedMySQL</code> can only authorize with this method.</li> <li><code class=syntax>gtid_mode = on</code> since GTID based logging is a mandatory for providing correct <code class=syntax>MaterializedMySQL</code> replication.</li> </ul> <div class="admonition attention alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Attention</p> <p>While turning on <code class=syntax>gtid_mode</code> you should also specify <code class=syntax>enforce_gtid_consistency = on</code>.</p> </div> <h2 id=virtual-columns>Virtual Columns<a class=headerlink href=../amp/#virtual-columns title="Permanent link"> </a></h2> <p>When working with the <code class=syntax>MaterializedMySQL</code> database engine, <a href=../../../table-engines/mergetree-family/replacingmergetree/amp/ >ReplacingMergeTree</a> tables are used with virtual <code class=syntax>_sign</code> and <code class=syntax>_version</code> columns.</p> <ul> <li><code class=syntax>_version</code> — Transaction counter. Type <a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>.</li> <li><code class=syntax>_sign</code> — Deletion mark. Type <a href=../../../../sql-reference/data-types/int-uint/amp/ >Int8</a>. Possible values:<ul> <li><code class=syntax>1</code> — Row is not deleted,</li> <li><code class=syntax>-1</code> — Row is deleted.</li> </ul> </li> </ul> <h2 id=data_types-support>Data Types Support<a class=headerlink href=../amp/#data_types-support title="Permanent link"> </a></h2> <table> <thead> <tr> <th>MySQL</th> <th>ClickHouse</th> </tr> </thead> <tbody> <tr> <td>TINY</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >Int8</a></td> </tr> <tr> <td>SHORT</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >Int16</a></td> </tr> <tr> <td>INT24</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >Int32</a></td> </tr> <tr> <td>LONG</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt32</a></td> </tr> <tr> <td>LONGLONG</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt64</a></td> </tr> <tr> <td>FLOAT</td> <td><a href=../../../../sql-reference/data-types/float/amp/ >Float32</a></td> </tr> <tr> <td>DOUBLE</td> <td><a href=../../../../sql-reference/data-types/float/amp/ >Float64</a></td> </tr> <tr> <td>DECIMAL, NEWDECIMAL</td> <td><a href=../../../../sql-reference/data-types/decimal/amp/ >Decimal</a></td> </tr> <tr> <td>DATE, NEWDATE</td> <td><a href=../../../../sql-reference/data-types/date32/amp/ >Date32</a></td> </tr> <tr> <td>DATETIME, TIMESTAMP</td> <td><a href=../../../../sql-reference/data-types/datetime/amp/ >DateTime</a></td> </tr> <tr> <td>DATETIME2, TIMESTAMP2</td> <td><a href=../../../../sql-reference/data-types/datetime64/amp/ >DateTime64</a></td> </tr> <tr> <td>YEAR</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt16</a></td> </tr> <tr> <td>TIME</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >Int64</a></td> </tr> <tr> <td>ENUM</td> <td><a href=../../../../sql-reference/data-types/enum/amp/ >Enum</a></td> </tr> <tr> <td>STRING</td> <td><a href=../../../../sql-reference/data-types/string/amp/ >String</a></td> </tr> <tr> <td>VARCHAR, VAR_STRING</td> <td><a href=../../../../sql-reference/data-types/string/amp/ >String</a></td> </tr> <tr> <td>BLOB</td> <td><a href=../../../../sql-reference/data-types/string/amp/ >String</a></td> </tr> <tr> <td>GEOMETRY</td> <td><a href=../../../../sql-reference/data-types/string/amp/ >String</a></td> </tr> <tr> <td>BINARY</td> <td><a href=../../../../sql-reference/data-types/fixedstring/amp/ >FixedString</a></td> </tr> <tr> <td>BIT</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt64</a></td> </tr> <tr> <td>SET</td> <td><a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt64</a></td> </tr> </tbody> </table> <p><a href=../../../../sql-reference/data-types/nullable/amp/ >Nullable</a> is supported.</p> <p>The data of TIME type in MySQL is converted to microseconds in ClickHouse.</p> <p>Other types are not supported. If MySQL table contains a column of such type, ClickHouse throws exception "Unhandled data type" and stops replication.</p> <h2 id=specifics-and-recommendations>Specifics and Recommendations<a class=headerlink href=../amp/#specifics-and-recommendations title="Permanent link"> </a></h2> <h3 id=compatibility-restrictions>Compatibility Restrictions<a class=headerlink href=../amp/#compatibility-restrictions title="Permanent link"> </a></h3> <p>Apart of the data types limitations there are few restrictions comparing to <code class=syntax>MySQL</code> databases, that should be resolved before replication will be possible:</p> <ul> <li> <p>Each table in <code class=syntax>MySQL</code> should contain <code class=syntax>PRIMARY KEY</code>.</p> </li> <li> <p>Replication for tables, those are containing rows with <code class=syntax>ENUM</code> field values out of range (specified in <code class=syntax>ENUM</code> signature) will not work.</p> </li> </ul> <h3 id=ddl-queries>DDL Queries<a class=headerlink href=../amp/#ddl-queries title="Permanent link"> </a></h3> <p>MySQL DDL queries are converted into the corresponding ClickHouse DDL queries (<a href=../../../../sql-reference/statements/alter/amp/ >ALTER</a>, <a href=../../../../sql-reference/statements/create/amp/ >CREATE</a>, <a href=../../../../sql-reference/statements/drop/amp/ >DROP</a>, <a href=../../../../sql-reference/statements/rename/amp/ >RENAME</a>). If ClickHouse cannot parse some DDL query, the query is ignored.</p> <h3 id=data-replication>Data Replication<a class=headerlink href=../amp/#data-replication title="Permanent link"> </a></h3> <p><code class=syntax>MaterializedMySQL</code> does not support direct <code class=syntax>INSERT</code>, <code class=syntax>DELETE</code> and <code class=syntax>UPDATE</code> queries. However, they are supported in terms of data replication:</p> <ul> <li> <p>MySQL <code class=syntax>INSERT</code> query is converted into <code class=syntax>INSERT</code> with <code class=syntax>_sign=1</code>.</p> </li> <li> <p>MySQL <code class=syntax>DELETE</code> query is converted into <code class=syntax>INSERT</code> with <code class=syntax>_sign=-1</code>.</p> </li> <li> <p>MySQL <code class=syntax>UPDATE</code> query is converted into <code class=syntax>INSERT</code> with <code class=syntax>_sign=-1</code> and <code class=syntax>INSERT</code> with <code class=syntax>_sign=1</code> if the primary key has been changed, or<br> <code class=syntax>INSERT</code> with <code class=syntax>_sign=1</code> if not.</p> </li> </ul> <h3 id=select>Selecting from MaterializedMySQL Tables<a class=headerlink href=../amp/#select title="Permanent link"> </a></h3> <p><code class=syntax>SELECT</code> query from <code class=syntax>MaterializedMySQL</code> tables has some specifics:</p> <ul> <li> <p>If <code class=syntax>_version</code> is not specified in the <code class=syntax>SELECT</code> query, the<br> <a href=../../../../sql-reference/statements/select/from/amp/#select-from-final>FINAL</a> modifier is used, so only rows with<br> <code class=syntax>MAX(_version)</code> are returned for each primary key value.</p> </li> <li> <p>If <code class=syntax>_sign</code> is not specified in the <code class=syntax>SELECT</code> query, <code class=syntax>WHERE _sign=1</code> is used by default. So the deleted rows are not<br> included into the result set.</p> </li> <li> <p>The result includes columns comments in case they exist in MySQL database tables.</p> </li> </ul> <h3 id=index-conversion>Index Conversion<a class=headerlink href=../amp/#index-conversion title="Permanent link"> </a></h3> <p>MySQL <code class=syntax>PRIMARY KEY</code> and <code class=syntax>INDEX</code> clauses are converted into <code class=syntax>ORDER BY</code> tuples in ClickHouse tables.</p> <p>ClickHouse has only one physical order, which is determined by <code class=syntax>ORDER BY</code> clause. To create a new physical order, use<br> <a href=../../../../sql-reference/statements/create/view/amp/#materialized>materialized views</a>.</p> <p><strong>Notes</strong></p> <ul> <li>Rows with <code class=syntax>_sign=-1</code> are not deleted physically from the tables.</li> <li>Cascade <code class=syntax>UPDATE/DELETE</code> queries are not supported by the <code class=syntax>MaterializedMySQL</code> engine, as they are not visible in the<br> MySQL binlog.</li> <li>Replication can be easily broken.</li> <li>Manual operations on database and tables are forbidden.</li> <li><code class=syntax>MaterializedMySQL</code> is affected by the <a href=../../../../operations/settings/settings/amp/#optimize-on-insert>optimize_on_insert</a><br> setting. Data is merged in the corresponding table in the <code class=syntax>MaterializedMySQL</code> database when a table in the MySQL<br> server changes.</li> </ul> <h3 id=table-overrides>Table Overrides<a class=headerlink href=../amp/#table-overrides title="Permanent link"> </a></h3> <p>Table overrides can be used to customize the ClickHouse DDL queries, allowing you to make schema optimizations for your<br> application. This is especially useful for controlling partitioning, which is important for the overall performance of<br> MaterializedMySQL.</p> <p>These are the schema conversion manipulations you can do with table overrides for MaterializedMySQL:</p> <ul> <li>Modify column type. Must be compatible with the original type, or replication will fail. For example,<br> you can modify a UInt32 column to UInt64, but you can not modify a String column to Array(String).</li> <li>Modify <a href=../../table-engines/mergetree-family/mergetree/amp/#mergetree-column-ttl>column TTL</a>.</li> <li>Modify <a href=../../../sql-reference/statements/create/table/amp/#codecs>column compression codec</a>.</li> <li>Add <a href=../../../sql-reference/statements/create/table/amp/#alias>ALIAS columns</a>.</li> <li>Add <a href=../../table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-data_skipping-indexes>skipping indexes</a></li> <li>Add <a href=../../table-engines/mergetree-family/mergetree/amp/#projections>projections</a>. Note that projection optimizations are<br> disabled when using <code class=syntax>SELECT ... FINAL</code> (which MaterializedMySQL does by default), so their utility is limited here.<br> <code class=syntax>INDEX ... TYPE hypothesis</code> as [described in the v21.12 blog post]](<a href=https://clickhouse.com/blog/en/2021/clickhouse-v21.12-released/ target=_blank>https://clickhouse.com/blog/en/2021/clickhouse-v21.12-released/</a>)<br> may be more useful in this case.</li> <li>Modify <a href=../../table-engines/mergetree-family/custom-partitioning-key/amp/ >PARTITION BY</a></li> <li>Modify <a href=../../table-engines/mergetree-family/mergetree/amp/#mergetree-query-clauses>ORDER BY</a></li> <li>Modify <a href=../../table-engines/mergetree-family/mergetree/amp/#mergetree-query-clauses>PRIMARY KEY</a></li> <li>Add <a href=../../table-engines/mergetree-family/mergetree/amp/#mergetree-query-clauses>SAMPLE BY</a></li> <li>Add <a href=../../table-engines/mergetree-family/mergetree/amp/#mergetree-query-clauses>table TTL</a></li> </ul> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>db_name</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MaterializedMySQL</span><span class=p>(...)</span><span class=w></span>
<span class=p>[</span><span class=n>SETTINGS</span><span class=w> </span><span class=p>...]</span><span class=w></span>
<span class=p>[</span><span class=k>TABLE</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w> </span><span class=k>table_name</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>COLUMNS</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=p>[</span><span class=n>col_name</span><span class=w> </span><span class=p>[</span><span class=n>datatype</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>ALIAS</span><span class=w> </span><span class=n>expr</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>CODEC</span><span class=p>(...)]</span><span class=w> </span><span class=p>[</span><span class=n>TTL</span><span class=w> </span><span class=n>expr</span><span class=p>],</span><span class=w> </span><span class=p>...]</span><span class=w></span>
<span class=w>        </span><span class=p>[</span><span class=k>INDEX</span><span class=w> </span><span class=n>index_name</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=k>TYPE</span><span class=w> </span><span class=n>indextype</span><span class=p>[(...)]</span><span class=w> </span><span class=n>GRANULARITY</span><span class=w> </span><span class=n>val</span><span class=p>,</span><span class=w> </span><span class=p>...]</span><span class=w></span>
<span class=w>        </span><span class=p>[</span><span class=n>PROJECTION</span><span class=w> </span><span class=n>projection_name</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=o>&lt;</span><span class=k>COLUMN</span><span class=w> </span><span class=n>LIST</span><span class=w> </span><span class=n>EXPR</span><span class=o>&gt;</span><span class=w> </span><span class=p>[</span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=p>]),</span><span class=w> </span><span class=p>...]</span><span class=w></span>
<span class=w>    </span><span class=p>)]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>expr</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>expr</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>expr</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>SAMPLE</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>expr</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>TTL</span><span class=w> </span><span class=n>expr</span><span class=p>]</span><span class=w></span>
<span class=p>),</span><span class=w> </span><span class=p>...]</span><span class=w></span>
</code></pre></div> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>db_name</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MaterializedMySQL</span><span class=p>(...)</span><span class=w></span>
<span class=k>TABLE</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w> </span><span class=n>table1</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>COLUMNS</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=n>userid</span><span class=w> </span><span class=n>UUID</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>category</span><span class=w> </span><span class=n>LowCardinality</span><span class=p>(</span><span class=n>String</span><span class=p>),</span><span class=w></span>
<span class=w>        </span><span class=k>timestamp</span><span class=w> </span><span class=n>DateTime</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=n>Delta</span><span class=p>,</span><span class=w> </span><span class=k>Default</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>toYear</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w></span>
<span class=p>),</span><span class=w></span>
<span class=k>TABLE</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w> </span><span class=n>table2</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>COLUMNS</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=n>client_ip</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>TTL</span><span class=w> </span><span class=n>created</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=mi>72</span><span class=w> </span><span class=n>HOUR</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>SAMPLE</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>ip_hash</span><span class=w></span>
<span class=p>)</span><span class=w></span>
</code></pre></div> <p>The <code class=syntax>COLUMNS</code> list is sparse; existing columns are modified as specified, extra ALIAS columns are added. It is not<br> possible to add ordinary or MATERIALIZED columns. Modified columns with a different type must be assignable from the<br> original type. There is currently no validation of this or similar issues when the <code class=syntax>CREATE DATABASE</code> query executes, so<br> extra care needs to be taken.</p> <p>You may specify overrides for tables that do not exist yet.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Warning</p> <p>It is easy to break replication with table overrides if not used with care. For example:</p> <ul> <li>If an ALIAS column is added with a table override, and a column with the same name is later added to the source<br> MySQL table, the converted ALTER TABLE query in ClickHouse will fail and replication stops.</li> <li>It is currently possible to add overrides that reference nullable columns where not-nullable are required, such as in<br> <code class=syntax>ORDER BY</code> or <code class=syntax>PARTITION BY</code>. This will cause CREATE TABLE queries that will fail, also causing replication to stop.</li> </ul> </div> <h2 id=examples-of-use>Examples of Use<a class=headerlink href=../amp/#examples-of-use title="Permanent link"> </a></h2> <p>Queries in MySQL:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>db</span><span class=p>;</span><span class=w></span>
<span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=n>test</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=nb>INT</span><span class=p>);</span><span class=w></span>
<span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=n>test</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>22</span><span class=p>);</span><span class=w></span>
<span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=n>test</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>a</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=w></span>
<span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=n>test</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>16</span><span class=p>);</span><span class=w></span>
<span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=n>test</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=k>c</span><span class=o>=</span><span class=s1>'Wow!'</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>=</span><span class=mi>222</span><span class=p>;</span><span class=w></span>
<span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=p>;</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a─┬───b─┬─c────┐
│ 2 │ 222 │ Wow! │
└───┴─────┴──────┘
</code></pre></div> <p>Database in ClickHouse, exchanging data with the MySQL server:</p> <p>The database and the table created:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>mysql</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MaterializedMySQL</span><span class=p>(</span><span class=s1>'localhost:3306'</span><span class=p>,</span><span class=w> </span><span class=s1>'db'</span><span class=p>,</span><span class=w> </span><span class=s1>'user'</span><span class=p>,</span><span class=w> </span><span class=s1>'***'</span><span class=p>);</span><span class=w></span>
<span class=k>SHOW</span><span class=w> </span><span class=n>TABLES</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>mysql</span><span class=p>;</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─name─┐
│ test │
└──────┘
</code></pre></div> <p>After inserting data:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>mysql</span><span class=p>.</span><span class=n>test</span><span class=p>;</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a─┬──b─┐
│ 1 │ 11 │
│ 2 │ 22 │
└───┴────┘
</code></pre></div> <p>After deleting data, adding the column and updating:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>mysql</span><span class=p>.</span><span class=n>test</span><span class=p>;</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a─┬───b─┬─c────┐
│ 2 │ 222 │ Wow! │
└───┴─────┴──────┘
</code></pre></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/38993f215f9186c1ac3505b1e09697cd9a468b5d" rel="external nofollow noreferrer" target="_blank" class="text-reset">38993f21</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/en/engines/database-engines/materialized-mysql/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

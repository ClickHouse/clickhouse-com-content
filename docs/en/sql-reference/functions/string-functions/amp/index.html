










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="en">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Strings | ClickHouse Documentation</title>
    <link rel="canonical" href="https://clickhouse.com/docs/en/sql-reference/functions/string-functions/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Strings | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.com/docs/en/sql-reference/functions/string-functions/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Strings | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-bottom:1rem}ol,ul{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.offset-1{margin-left:8.3333333333%}.offset-2{margin-left:16.6666666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.3333333333%}.offset-5{margin-left:41.6666666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.3333333333%}.offset-8{margin-left:66.6666666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.3333333333%}.offset-11{margin-left:91.6666666667%}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.3333333333%}.offset-md-2{margin-left:16.6666666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.3333333333%}.offset-md-5{margin-left:41.6666666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.3333333333%}.offset-md-8{margin-left:66.6666666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.3333333333%}.offset-md-11{margin-left:91.6666666667%}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.3333333333%}.offset-lg-2{margin-left:16.6666666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.3333333333%}.offset-lg-5{margin-left:41.6666666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.3333333333%}.offset-lg-8{margin-left:66.6666666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.3333333333%}.offset-lg-11{margin-left:91.6666666667%}}.table{width:100%;margin-bottom:8px;color:#212529}.table-primary{background-color:#fff1b8}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-primary-light{background-color:#fffefb}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-dark{color:#fff;background-color:#343a40}.form-group{margin-bottom:1rem}.form-text{display:block;margin-top:.25rem}.form-row{display:flex;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.custom-select.is-valid{border-color:#28a745;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3E%3C/svg%3E") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545'%3E%3Ccircle cx='6' cy='6' r='4.5'/%3E%3Cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3E%3Ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3E%3C/svg%3E") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-inline{display:flex;flex-flow:row wrap;align-items:center}@media(min-width:616px){.form-inline .form-group{display:flex;align-items:center;margin-bottom:0}.form-inline .form-group{flex:0 0 auto;flex-flow:row wrap}.form-inline .custom-select,.form-inline .input-group{width:auto}}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-primary{color:#495057;background-color:#fc0;border-color:#fc0}.btn-primary:focus,.btn-primary:hover{color:#495057;background-color:#d9ad00;border-color:#cca300}.btn-primary:focus{box-shadow:0 0 0 0 rgba(228,185,13,.5)}.btn-primary:disabled{color:#495057;background-color:#fc0;border-color:#fc0}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-primary-light{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-primary-light:focus,.btn-primary-light:hover{color:#495057;background-color:#ffedca;border-color:#ffe9bd}.btn-primary-light:focus{box-shadow:0 0 0 0 rgba(228,225,217,.5)}.btn-primary-light:disabled{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-primary{color:#fc0;border-color:#fc0}.btn-outline-primary:hover{color:#495057;background-color:#fc0;border-color:#fc0}.btn-outline-primary:focus{box-shadow:0 0 0 0 rgba(255,204,0,.5)}.btn-outline-primary:disabled{color:#fc0;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-primary-light{color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:hover{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:focus{box-shadow:0 0 0 0 rgba(255,250,240,.5)}.btn-outline-primary-light:disabled{color:#fffaf0;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group{position:relative;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.custom-select{position:relative;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:8px}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.125rem;line-height:1.5;border-radius:8px}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/docs/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/docs/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=functions-for-working-with-strings>Functions for Working with Strings<a class=headerlink href=../amp/#functions-for-working-with-strings title="Permanent link"> </a></h1> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Note</p> <p>Functions for <a href=../../string-search-functions/amp/ class=alert-link>searching</a> and <a href=../../string-replace-functions/amp/ class=alert-link>replacing</a> in strings are described separately.</p> </div> <h2 id=empty>empty<a class=headerlink href=../amp/#empty title="Permanent link"> </a></h2> <p>Checks whether the input string is empty.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>empty</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>A string is considered non-empty if it contains at least one byte, even if this is a space or a null byte.</p> <p>The function also works for <a href=../../array-functions/amp/#function-empty>arrays</a> or <a href=../../uuid-functions/amp/#empty>UUID</a>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — Input value. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Returns <code class=syntax>1</code> for an empty string or <code class=syntax>0</code> for a non-empty string.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>empty</span><span class=p>(</span><span class=s1>''</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─empty('')─┐
│         1 │
└───────────┘
</code></pre></div> <h2 id=notempty>notEmpty<a class=headerlink href=../amp/#notempty title="Permanent link"> </a></h2> <p>Checks whether the input string is non-empty.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>notEmpty</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>A string is considered non-empty if it contains at least one byte, even if this is a space or a null byte.</p> <p>The function also works for <a href=../../array-functions/amp/#function-notempty>arrays</a> or <a href=../../uuid-functions/amp/#notempty>UUID</a>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — Input value. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Returns <code class=syntax>1</code> for a non-empty string or <code class=syntax>0</code> for an empty string string.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>notEmpty</span><span class=p>(</span><span class=s1>'text'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─notEmpty('text')─┐
│                1 │
└──────────────────┘
</code></pre></div> <h2 id=length>length<a class=headerlink href=../amp/#length title="Permanent link"> </a></h2> <p>Returns the length of a string in bytes (not in characters, and not in code points).<br> The result type is UInt64.<br> The function also works for arrays.</p> <h2 id=lengthutf8>lengthUTF8<a class=headerlink href=../amp/#lengthutf8 title="Permanent link"> </a></h2> <p>Returns the length of a string in Unicode code points (not in characters), assuming that the string contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it does not throw an exception).<br> The result type is UInt64.</p> <h2 id=char-length>char_length, CHAR_LENGTH<a class=headerlink href=../amp/#char-length title="Permanent link"> </a></h2> <p>Returns the length of a string in Unicode code points (not in characters), assuming that the string contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it does not throw an exception).<br> The result type is UInt64.</p> <h2 id=character-length>character_length, CHARACTER_LENGTH<a class=headerlink href=../amp/#character-length title="Permanent link"> </a></h2> <p>Returns the length of a string in Unicode code points (not in characters), assuming that the string contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it does not throw an exception).<br> The result type is UInt64.</p> <h2 id=leftpad>leftPad<a class=headerlink href=../amp/#leftpad title="Permanent link"> </a></h2> <p>Pads the current string from the left with spaces or a specified string (multiple times, if needed) until the resulting string reaches the given length. Similarly to the MySQL <code class=syntax>LPAD</code> function.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>leftPad</span><span class=p>(</span><span class=s1>'string'</span><span class=p>,</span><span class=w> </span><span class=s1>'length'</span><span class=p>[,</span><span class=w> </span><span class=s1>'pad_string'</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>string</code> — Input string that needs to be padded. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>length</code> — The length of the resulting string. <a href=../../../data-types/int-uint/amp/ >UInt</a>. If the value is less than the input string length, then the input string is returned as-is.</li> <li><code class=syntax>pad_string</code> — The string to pad the input string with. <a href=../../../data-types/string/amp/ >String</a>. Optional. If not specified, then the input string is padded with spaces.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The resulting string of the given length.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>leftPad</span><span class=p>(</span><span class=s1>'abc'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=s1>'*'</span><span class=p>),</span><span class=w> </span><span class=n>leftPad</span><span class=p>(</span><span class=s1>'def'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─leftPad('abc', 7, '*')─┬─leftPad('def', 7)─┐
│ ****abc                │     def           │
└────────────────────────┴───────────────────┘
</code></pre></div> <h2 id=leftpadutf8>leftPadUTF8<a class=headerlink href=../amp/#leftpadutf8 title="Permanent link"> </a></h2> <p>Pads the current string from the left with spaces or a specified string (multiple times, if needed) until the resulting string reaches the given length. Similarly to the MySQL <code class=syntax>LPAD</code> function. While in the <a href=../amp/#leftpad>leftPad</a> function the length is measured in bytes, here in the <code class=syntax>leftPadUTF8</code> function it is measured in code points.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>leftPadUTF8</span><span class=p>(</span><span class=s1>'string'</span><span class=p>,</span><span class=s1>'length'</span><span class=p>[,</span><span class=w> </span><span class=s1>'pad_string'</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>string</code> — Input string that needs to be padded. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>length</code> — The length of the resulting string. <a href=../../../data-types/int-uint/amp/ >UInt</a>. If the value is less than the input string length, then the input string is returned as-is.</li> <li><code class=syntax>pad_string</code> — The string to pad the input string with. <a href=../../../data-types/string/amp/ >String</a>. Optional. If not specified, then the input string is padded with spaces.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The resulting string of the given length.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>leftPadUTF8</span><span class=p>(</span><span class=s1>'абвг'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=s1>'*'</span><span class=p>),</span><span class=w> </span><span class=n>leftPadUTF8</span><span class=p>(</span><span class=s1>'дежз'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─leftPadUTF8('абвг', 7, '*')─┬─leftPadUTF8('дежз', 7)─┐
│ ***абвг                     │    дежз                │
└─────────────────────────────┴────────────────────────┘
</code></pre></div> <h2 id=rightpad>rightPad<a class=headerlink href=../amp/#rightpad title="Permanent link"> </a></h2> <p>Pads the current string from the right with spaces or a specified string (multiple times, if needed) until the resulting string reaches the given length. Similarly to the MySQL <code class=syntax>RPAD</code> function.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>rightPad</span><span class=p>(</span><span class=s1>'string'</span><span class=p>,</span><span class=w> </span><span class=s1>'length'</span><span class=p>[,</span><span class=w> </span><span class=s1>'pad_string'</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>string</code> — Input string that needs to be padded. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>length</code> — The length of the resulting string. <a href=../../../data-types/int-uint/amp/ >UInt</a>. If the value is less than the input string length, then the input string is returned as-is.</li> <li><code class=syntax>pad_string</code> — The string to pad the input string with. <a href=../../../data-types/string/amp/ >String</a>. Optional. If not specified, then the input string is padded with spaces.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The resulting string of the given length.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>rightPad</span><span class=p>(</span><span class=s1>'abc'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=s1>'*'</span><span class=p>),</span><span class=w> </span><span class=n>rightPad</span><span class=p>(</span><span class=s1>'abc'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─rightPad('abc', 7, '*')─┬─rightPad('abc', 7)─┐
│ abc****                 │ abc                │
└─────────────────────────┴────────────────────┘
</code></pre></div> <h2 id=rightpadutf8>rightPadUTF8<a class=headerlink href=../amp/#rightpadutf8 title="Permanent link"> </a></h2> <p>Pads the current string from the right with spaces or a specified string (multiple times, if needed) until the resulting string reaches the given length. Similarly to the MySQL <code class=syntax>RPAD</code> function. While in the <a href=../amp/#rightpad>rightPad</a> function the length is measured in bytes, here in the <code class=syntax>rightPadUTF8</code> function it is measured in code points.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>rightPadUTF8</span><span class=p>(</span><span class=s1>'string'</span><span class=p>,</span><span class=s1>'length'</span><span class=p>[,</span><span class=w> </span><span class=s1>'pad_string'</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>string</code> — Input string that needs to be padded. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>length</code> — The length of the resulting string. <a href=../../../data-types/int-uint/amp/ >UInt</a>. If the value is less than the input string length, then the input string is returned as-is.</li> <li><code class=syntax>pad_string</code> — The string to pad the input string with. <a href=../../../data-types/string/amp/ >String</a>. Optional. If not specified, then the input string is padded with spaces.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The resulting string of the given length.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>rightPadUTF8</span><span class=p>(</span><span class=s1>'абвг'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=s1>'*'</span><span class=p>),</span><span class=w> </span><span class=n>rightPadUTF8</span><span class=p>(</span><span class=s1>'абвг'</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─rightPadUTF8('абвг', 7, '*')─┬─rightPadUTF8('абвг', 7)─┐
│ абвг***                      │ абвг                    │
└──────────────────────────────┴─────────────────────────┘
</code></pre></div> <h2 id=lower>lower, lcase<a class=headerlink href=../amp/#lower title="Permanent link"> </a></h2> <p>Converts ASCII Latin symbols in a string to lowercase.</p> <h2 id=upper>upper, ucase<a class=headerlink href=../amp/#upper title="Permanent link"> </a></h2> <p>Converts ASCII Latin symbols in a string to uppercase.</p> <h2 id=lowerutf8>lowerUTF8<a class=headerlink href=../amp/#lowerutf8 title="Permanent link"> </a></h2> <p>Converts a string to lowercase, assuming the string contains a set of bytes that make up a UTF-8 encoded text.<br> It does not detect the language. So for Turkish the result might not be exactly correct.<br> If the length of the UTF-8 byte sequence is different for upper and lower case of a code point, the result may be incorrect for this code point.<br> If the string contains a set of bytes that is not UTF-8, then the behavior is undefined.</p> <h2 id=upperutf8>upperUTF8<a class=headerlink href=../amp/#upperutf8 title="Permanent link"> </a></h2> <p>Converts a string to uppercase, assuming the string contains a set of bytes that make up a UTF-8 encoded text.<br> It does not detect the language. So for Turkish the result might not be exactly correct.<br> If the length of the UTF-8 byte sequence is different for upper and lower case of a code point, the result may be incorrect for this code point.<br> If the string contains a set of bytes that is not UTF-8, then the behavior is undefined.</p> <h2 id=isvalidutf8>isValidUTF8<a class=headerlink href=../amp/#isvalidutf8 title="Permanent link"> </a></h2> <p>Returns 1, if the set of bytes is valid UTF-8 encoded, otherwise 0.</p> <h2 id=tovalidutf8>toValidUTF8<a class=headerlink href=../amp/#tovalidutf8 title="Permanent link"> </a></h2> <p>Replaces invalid UTF-8 characters by the <code class=syntax>�</code> (U+FFFD) character. All running in a row invalid characters are collapsed into the one replacement character.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toValidUTF8</span><span class=p>(</span><span class=n>input_string</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>input_string</code> — Any set of bytes represented as the <a href=../../../data-types/string/amp/ >String</a> data type object.</li> </ul> <p>Returned value: Valid UTF-8 string.</p> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toValidUTF8</span><span class=p>(</span><span class=s1>'\x61\xF0\x80\x80\x80b'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─toValidUTF8('a����b')─┐
│ a�b                   │
└───────────────────────┘
</code></pre></div> <h2 id=repeat>repeat<a class=headerlink href=../amp/#repeat title="Permanent link"> </a></h2> <p>Repeats a string as many times as specified and concatenates the replicated values as a single string.</p> <p>Alias: <code class=syntax>REPEAT</code>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>repeat</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=n>n</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>s</code> — The string to repeat. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>n</code> — The number of times to repeat the string. <a href=../../../data-types/int-uint/amp/ >UInt</a>.</li> </ul> <p><strong>Returned value</strong></p> <p>The single string, which contains the string <code class=syntax>s</code> repeated <code class=syntax>n</code> times. If <code class=syntax>n</code> \&lt; 1, the function returns empty string.</p> <p>Type: <code class=syntax>String</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>repeat</span><span class=p>(</span><span class=s1>'abc'</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─repeat('abc', 10)──────────────┐
│ abcabcabcabcabcabcabcabcabcabc │
└────────────────────────────────┘
</code></pre></div> <h2 id=reverse>reverse<a class=headerlink href=../amp/#reverse title="Permanent link"> </a></h2> <p>Reverses the string (as a sequence of bytes).</p> <h2 id=reverseutf8>reverseUTF8<a class=headerlink href=../amp/#reverseutf8 title="Permanent link"> </a></h2> <p>Reverses a sequence of Unicode code points, assuming that the string contains a set of bytes representing a UTF-8 text. Otherwise, it does something else (it does not throw an exception).</p> <h2 id=format>format(pattern, s0, s1, …)<a class=headerlink href=../amp/#format title="Permanent link"> </a></h2> <p>Formatting constant pattern with the string listed in the arguments. <code class=syntax>pattern</code> is a simplified Python format pattern. Format string contains “replacement fields” surrounded by curly braces <code class=syntax>{}</code>. Anything that is not contained in braces is considered literal text, which is copied unchanged to the output. If you need to include a brace character in the literal text, it can be escaped by doubling: <code class=syntax>{{</code> and <code class=syntax>}}</code>. Field names can be numbers (starting from zero) or empty (then they are treated as consequence numbers).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>format</span><span class=p>(</span><span class=s1>'{1} {0} {1}'</span><span class=p>,</span><span class=w> </span><span class=s1>'World'</span><span class=p>,</span><span class=w> </span><span class=s1>'Hello'</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─format('{1} {0} {1}', 'World', 'Hello')─┐
│ Hello World Hello                       │
└─────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>format</span><span class=p>(</span><span class=s1>'{} {}'</span><span class=p>,</span><span class=w> </span><span class=s1>'Hello'</span><span class=p>,</span><span class=w> </span><span class=s1>'World'</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─format('{} {}', 'Hello', 'World')─┐
│ Hello World                       │
└───────────────────────────────────┘
</code></pre></div> <h2 id=concat>concat<a class=headerlink href=../amp/#concat title="Permanent link"> </a></h2> <p>Concatenates the strings listed in the arguments, without a separator.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>concat</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=w> </span><span class=n>s2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <p>Values of type String or FixedString.</p> <p><strong>Returned values</strong></p> <p>Returns the String that results from concatenating the arguments.</p> <p>If any of argument values is <code class=syntax>NULL</code>, <code class=syntax>concat</code> returns <code class=syntax>NULL</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>concat</span><span class=p>(</span><span class=s1>'Hello, '</span><span class=p>,</span><span class=w> </span><span class=s1>'World!'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─concat('Hello, ', 'World!')─┐
│ Hello, World!               │
└─────────────────────────────┘
</code></pre></div> <h2 id=concatassumeinjective>concatAssumeInjective<a class=headerlink href=../amp/#concatassumeinjective title="Permanent link"> </a></h2> <p>Same as <a href=../amp/#concat>concat</a>, the difference is that you need to ensure that <code class=syntax>concat(s1, s2, ...) → sn</code> is injective, it will be used for optimization of GROUP BY.</p> <p>The function is named “injective” if it always returns different result for different values of arguments. In other words: different arguments never yield identical result.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>concatAssumeInjective</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=w> </span><span class=n>s2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <p>Values of type String or FixedString.</p> <p><strong>Returned values</strong></p> <p>Returns the String that results from concatenating the arguments.</p> <p>If any of argument values is <code class=syntax>NULL</code>, <code class=syntax>concatAssumeInjective</code> returns <code class=syntax>NULL</code>.</p> <p><strong>Example</strong></p> <p>Input table:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>key_val</span><span class=p>(</span><span class=o>`</span><span class=n>key1</span><span class=o>`</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>key2</span><span class=o>`</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>value</span><span class=o>`</span><span class=w> </span><span class=n>UInt32</span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>TinyLog</span><span class=p>;</span><span class=w></span>
<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>key_val</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>'Hello, '</span><span class=p>,</span><span class=s1>'World'</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=s1>'Hello, '</span><span class=p>,</span><span class=s1>'World'</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=s1>'Hello, '</span><span class=p>,</span><span class=s1>'World!'</span><span class=p>,</span><span class=mi>3</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=s1>'Hello'</span><span class=p>,</span><span class=s1>', World!'</span><span class=p>,</span><span class=mi>2</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>key_val</span><span class=p>;</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─key1────┬─key2─────┬─value─┐
│ Hello,  │ World    │     1 │
│ Hello,  │ World    │     2 │
│ Hello,  │ World!   │     3 │
│ Hello   │ , World! │     2 │
└─────────┴──────────┴───────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>concat</span><span class=p>(</span><span class=n>key1</span><span class=p>,</span><span class=w> </span><span class=n>key2</span><span class=p>),</span><span class=w> </span><span class=k>sum</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>key_val</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>concatAssumeInjective</span><span class=p>(</span><span class=n>key1</span><span class=p>,</span><span class=w> </span><span class=n>key2</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─concat(key1, key2)─┬─sum(value)─┐
│ Hello, World!      │          3 │
│ Hello, World!      │          2 │
│ Hello, World       │          3 │
└────────────────────┴────────────┘
</code></pre></div> <h2 id=substring>substring(s, offset, length), mid(s, offset, length), substr(s, offset, length)<a class=headerlink href=../amp/#substring title="Permanent link"> </a></h2> <p>Returns a substring starting with the byte from the ‘offset’ index that is ‘length’ bytes long. Character indexing starts from one (as in standard SQL). The ‘offset’ and ‘length’ arguments must be constants.</p> <h2 id=substringutf8>substringUTF8(s, offset, length)<a class=headerlink href=../amp/#substringutf8 title="Permanent link"> </a></h2> <p>The same as ‘substring’, but for Unicode code points. Works under the assumption that the string contains a set of bytes representing a UTF-8 encoded text. If this assumption is not met, it returns some result (it does not throw an exception).</p> <h2 id=appendtrailingcharifabsent>appendTrailingCharIfAbsent(s, c)<a class=headerlink href=../amp/#appendtrailingcharifabsent title="Permanent link"> </a></h2> <p>If the ‘s’ string is non-empty and does not contain the ‘c’ character at the end, it appends the ‘c’ character to the end.</p> <h2 id=convertcharset>convertCharset(s, from, to)<a class=headerlink href=../amp/#convertcharset title="Permanent link"> </a></h2> <p>Returns the string ‘s’ that was converted from the encoding in ‘from’ to the encoding in ‘to’.</p> <h2 id=base64encode>base64Encode(s)<a class=headerlink href=../amp/#base64encode title="Permanent link"> </a></h2> <p>Encodes ‘s’ string into base64</p> <p>Alias: <code class=syntax>TO_BASE64</code>.</p> <h2 id=base64decode>base64Decode(s)<a class=headerlink href=../amp/#base64decode title="Permanent link"> </a></h2> <p>Decode base64-encoded string ‘s’ into original string. In case of failure raises an exception.</p> <p>Alias: <code class=syntax>FROM_BASE64</code>.</p> <h2 id=trybase64decode>tryBase64Decode(s)<a class=headerlink href=../amp/#trybase64decode title="Permanent link"> </a></h2> <p>Similar to base64Decode, but in case of error an empty string would be returned.</p> <h2 id=endswith>endsWith(s, suffix)<a class=headerlink href=../amp/#endswith title="Permanent link"> </a></h2> <p>Returns whether to end with the specified suffix. Returns 1 if the string ends with the specified suffix, otherwise it returns 0.</p> <h2 id=startswith>startsWith(str, prefix)<a class=headerlink href=../amp/#startswith title="Permanent link"> </a></h2> <p>Returns 1 whether string starts with the specified prefix, otherwise it returns 0.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>startsWith</span><span class=p>(</span><span class=s1>'Spider-Man'</span><span class=p>,</span><span class=w> </span><span class=s1>'Spi'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>Returned values</strong></p> <ul> <li>1, if the string starts with the specified prefix.</li> <li>0, if the string does not start with the specified prefix.</li> </ul> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>startsWith</span><span class=p>(</span><span class=s1>'Hello, world!'</span><span class=p>,</span><span class=w> </span><span class=s1>'He'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─startsWith('Hello, world!', 'He')─┐
│                                 1 │
└───────────────────────────────────┘
</code></pre></div> <h2 id=trim>trim<a class=headerlink href=../amp/#trim title="Permanent link"> </a></h2> <p>Removes all specified characters from the start or end of a string.<br> By default removes all consecutive occurrences of common whitespace (ASCII character 32) from both ends of a string.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>trim</span><span class=p>([[</span><span class=k>LEADING</span><span class=o>|</span><span class=k>TRAILING</span><span class=o>|</span><span class=k>BOTH</span><span class=p>]</span><span class=w> </span><span class=n>trim_character</span><span class=w> </span><span class=k>FROM</span><span class=p>]</span><span class=w> </span><span class=n>input_string</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>trim_character</code> — Specified characters for trim. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>input_string</code> — String for trim. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <p>A string without leading and (or) trailing specified characters.</p> <p>Type: <code class=syntax>String</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>trim</span><span class=p>(</span><span class=k>BOTH</span><span class=w> </span><span class=s1>' ()'</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s1>'(   Hello, world!   )'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─trim(BOTH ' ()' FROM '(   Hello, world!   )')─┐
│ Hello, world!                                 │
└───────────────────────────────────────────────┘
</code></pre></div> <h2 id=trimleft>trimLeft<a class=headerlink href=../amp/#trimleft title="Permanent link"> </a></h2> <p>Removes all consecutive occurrences of common whitespace (ASCII character 32) from the beginning of a string. It does not remove other kinds of whitespace characters (tab, no-break space, etc.).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>trimLeft</span><span class=p>(</span><span class=n>input_string</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Alias: <code class=syntax>ltrim(input_string)</code>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>input_string</code> — string to trim. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <p>A string without leading common whitespaces.</p> <p>Type: <code class=syntax>String</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>trimLeft</span><span class=p>(</span><span class=s1>'     Hello, world!     '</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─trimLeft('     Hello, world!     ')─┐
│ Hello, world!                       │
└─────────────────────────────────────┘
</code></pre></div> <h2 id=trimright>trimRight<a class=headerlink href=../amp/#trimright title="Permanent link"> </a></h2> <p>Removes all consecutive occurrences of common whitespace (ASCII character 32) from the end of a string. It does not remove other kinds of whitespace characters (tab, no-break space, etc.).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>trimRight</span><span class=p>(</span><span class=n>input_string</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Alias: <code class=syntax>rtrim(input_string)</code>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>input_string</code> — string to trim. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <p>A string without trailing common whitespaces.</p> <p>Type: <code class=syntax>String</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>trimRight</span><span class=p>(</span><span class=s1>'     Hello, world!     '</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─trimRight('     Hello, world!     ')─┐
│      Hello, world!                   │
└──────────────────────────────────────┘
</code></pre></div> <h2 id=trimboth>trimBoth<a class=headerlink href=../amp/#trimboth title="Permanent link"> </a></h2> <p>Removes all consecutive occurrences of common whitespace (ASCII character 32) from both ends of a string. It does not remove other kinds of whitespace characters (tab, no-break space, etc.).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>trimBoth</span><span class=p>(</span><span class=n>input_string</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Alias: <code class=syntax>trim(input_string)</code>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>input_string</code> — string to trim. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <p>A string without leading and trailing common whitespaces.</p> <p>Type: <code class=syntax>String</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>trimBoth</span><span class=p>(</span><span class=s1>'     Hello, world!     '</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─trimBoth('     Hello, world!     ')─┐
│ Hello, world!                       │
└─────────────────────────────────────┘
</code></pre></div> <h2 id=crc32>CRC32(s)<a class=headerlink href=../amp/#crc32 title="Permanent link"> </a></h2> <p>Returns the CRC32 checksum of a string, using CRC-32-IEEE 802.3 polynomial and initial value <code class=syntax>0xffffffff</code> (zlib implementation).</p> <p>The result type is UInt32.</p> <h2 id=crc32ieee>CRC32IEEE(s)<a class=headerlink href=../amp/#crc32ieee title="Permanent link"> </a></h2> <p>Returns the CRC32 checksum of a string, using CRC-32-IEEE 802.3 polynomial.</p> <p>The result type is UInt32.</p> <h2 id=crc64>CRC64(s)<a class=headerlink href=../amp/#crc64 title="Permanent link"> </a></h2> <p>Returns the CRC64 checksum of a string, using CRC-64-ECMA polynomial.</p> <p>The result type is UInt64.</p> <h2 id=normalized-query>normalizeQuery<a class=headerlink href=../amp/#normalized-query title="Permanent link"> </a></h2> <p>Replaces literals, sequences of literals and complex aliases with placeholders.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>normalizeQuery</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — Sequence of characters. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Sequence of characters with placeholders.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>normalizeQuery</span><span class=p>(</span><span class=s1>'[1, 2, 3, x]'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>query</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─query────┐
│ [?.., x] │
└──────────┘
</code></pre></div> <h2 id=normalized-query-hash>normalizedQueryHash<a class=headerlink href=../amp/#normalized-query-hash title="Permanent link"> </a></h2> <p>Returns identical 64bit hash values without the values of literals for similar queries. It helps to analyze query log.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>normalizedQueryHash</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — Sequence of characters. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Hash value.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/#uint-ranges>UInt64</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>normalizedQueryHash</span><span class=p>(</span><span class=s1>'SELECT 1 AS `xyz`'</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>normalizedQueryHash</span><span class=p>(</span><span class=s1>'SELECT 1 AS `abc`'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>res</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│   1 │
└─────┘
</code></pre></div> <h2 id=normalizeutf8nfc>normalizeUTF8NFC<a class=headerlink href=../amp/#normalizeutf8nfc title="Permanent link"> </a></h2> <p>Converts a string to <a href=https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms rel="external nofollow noreferrer" target=_blank>NFC normalized form</a>, assuming the string contains a set of bytes that make up a UTF-8 encoded text.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>normalizeUTF8NFC</span><span class=p>(</span><span class=n>words</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>words</code> — Input string that contains UTF-8 encoded text. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>String transformed to NFC normalization form.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=s1>'â'</span><span class=p>),</span><span class=w> </span><span class=n>normalizeUTF8NFC</span><span class=p>(</span><span class=s1>'â'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfc</span><span class=p>,</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>nfc</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfc_len</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─length('â')─┬─nfc─┬─nfc_len─┐
│           2 │ â   │       2 │
└─────────────┴─────┴─────────┘
</code></pre></div> <h2 id=normalizeutf8nfd>normalizeUTF8NFD<a class=headerlink href=../amp/#normalizeutf8nfd title="Permanent link"> </a></h2> <p>Converts a string to <a href=https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms rel="external nofollow noreferrer" target=_blank>NFD normalized form</a>, assuming the string contains a set of bytes that make up a UTF-8 encoded text.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>normalizeUTF8NFD</span><span class=p>(</span><span class=n>words</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>words</code> — Input string that contains UTF-8 encoded text. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>String transformed to NFD normalization form.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=s1>'â'</span><span class=p>),</span><span class=w> </span><span class=n>normalizeUTF8NFD</span><span class=p>(</span><span class=s1>'â'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfd</span><span class=p>,</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>nfd</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfd_len</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─length('â')─┬─nfd─┬─nfd_len─┐
│           2 │ â   │       3 │
└─────────────┴─────┴─────────┘
</code></pre></div> <h2 id=normalizeutf8nfkc>normalizeUTF8NFKC<a class=headerlink href=../amp/#normalizeutf8nfkc title="Permanent link"> </a></h2> <p>Converts a string to <a href=https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms rel="external nofollow noreferrer" target=_blank>NFKC normalized form</a>, assuming the string contains a set of bytes that make up a UTF-8 encoded text.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>normalizeUTF8NFKC</span><span class=p>(</span><span class=n>words</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>words</code> — Input string that contains UTF-8 encoded text. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>String transformed to NFKC normalization form.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=s1>'â'</span><span class=p>),</span><span class=w> </span><span class=n>normalizeUTF8NFKC</span><span class=p>(</span><span class=s1>'â'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfkc</span><span class=p>,</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>nfkc</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfkc_len</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─length('â')─┬─nfkc─┬─nfkc_len─┐
│           2 │ â    │        2 │
└─────────────┴──────┴──────────┘
</code></pre></div> <h2 id=normalizeutf8nfkd>normalizeUTF8NFKD<a class=headerlink href=../amp/#normalizeutf8nfkd title="Permanent link"> </a></h2> <p>Converts a string to <a href=https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms rel="external nofollow noreferrer" target=_blank>NFKD normalized form</a>, assuming the string contains a set of bytes that make up a UTF-8 encoded text.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>normalizeUTF8NFKD</span><span class=p>(</span><span class=n>words</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>words</code> — Input string that contains UTF-8 encoded text. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>String transformed to NFKD normalization form.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=s1>'â'</span><span class=p>),</span><span class=w> </span><span class=n>normalizeUTF8NFKD</span><span class=p>(</span><span class=s1>'â'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfkd</span><span class=p>,</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>nfkd</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>nfkd_len</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─length('â')─┬─nfkd─┬─nfkd_len─┐
│           2 │ â    │        3 │
└─────────────┴──────┴──────────┘
</code></pre></div> <h2 id=encode-xml-component>encodeXMLComponent<a class=headerlink href=../amp/#encode-xml-component title="Permanent link"> </a></h2> <p>Escapes characters to place string into XML text node or attribute.</p> <p>The following five XML predefined entities will be replaced: <code class=syntax>&lt;</code>, <code class=syntax>&amp;</code>, <code class=syntax>&gt;</code>, <code class=syntax>"</code>, <code class=syntax>'</code>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>encodeXMLComponent</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — The sequence of characters. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The sequence of characters with escape characters.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>encodeXMLComponent</span><span class=p>(</span><span class=s1>'Hello, "world"!'</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>encodeXMLComponent</span><span class=p>(</span><span class=s1>'&lt;123&gt;'</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>encodeXMLComponent</span><span class=p>(</span><span class=s1>'&amp;clickhouse'</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>encodeXMLComponent</span><span class=p>(</span><span class=s1>'\'</span><span class=n>foo</span><span class=err>\</span><span class=s1>''</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>Hello, &amp;quot;world&amp;quot;!
&amp;lt;123&amp;gt;
&amp;amp;clickhouse
&amp;apos;foo&amp;apos;
</code></pre></div> <h2 id=decode-xml-component>decodeXMLComponent<a class=headerlink href=../amp/#decode-xml-component title="Permanent link"> </a></h2> <p>Replaces XML predefined entities with characters. Predefined entities are <code class=syntax>&amp;quot;</code> <code class=syntax>&amp;amp;</code> <code class=syntax>&amp;apos;</code> <code class=syntax>&amp;gt;</code> <code class=syntax>&amp;lt;</code><br> This function also replaces numeric character references with Unicode characters. Both decimal (like <code class=syntax>&amp;#10003;</code>) and hexadecimal (<code class=syntax>&amp;#x2713;</code>) forms are supported.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>decodeXMLComponent</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — A sequence of characters. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The sequence of characters after replacement.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>decodeXMLComponent</span><span class=p>(</span><span class=s1>'&amp;apos;foo&amp;apos;'</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>decodeXMLComponent</span><span class=p>(</span><span class=s1>'&amp;lt; &amp;#x3A3; &amp;gt;'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>'foo'
&lt; Σ &gt;
</code></pre></div> <p><strong>See Also</strong></p> <ul> <li><a href=https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references rel="external nofollow noreferrer" target=_blank>List of XML and HTML character entity references</a></li> </ul> <h2 id=extracttextfromhtml>extractTextFromHTML<a class=headerlink href=../amp/#extracttextfromhtml title="Permanent link"> </a></h2> <p>A function to extract text from HTML or XHTML.<br> It does not necessarily 100% conform to any of the HTML, XML or XHTML standards, but the implementation is reasonably accurate and it is fast. The rules are the following:</p> <ol> <li>Comments are skipped. Example: <code class=syntax>&lt;!-- test --&gt;</code>. Comment must end with <code class=syntax>--&gt;</code>. Nested comments are not possible.<br> Note: constructions like <code class=syntax>&lt;!--&gt;</code> and <code class=syntax>&lt;!---&gt;</code> are not valid comments in HTML but they are skipped by other rules.</li> <li>CDATA is pasted verbatim. Note: CDATA is XML/XHTML specific. But it is processed for "best-effort" approach.</li> <li><code class=syntax>script</code> and <code class=syntax>style</code> elements are removed with all their content. Note: it is assumed that closing tag cannot appear inside content. For example, in JS string literal has to be escaped like <code class=syntax>"&lt;\/script&gt;"</code>.<br> Note: comments and CDATA are possible inside <code class=syntax>script</code> or <code class=syntax>style</code> - then closing tags are not searched inside CDATA. Example: <code class=syntax>&lt;script&gt;&lt;![CDATA[&lt;/script&gt;]]&gt;&lt;/script&gt;</code>. But they are still searched inside comments. Sometimes it becomes complicated: <code class=syntax>&lt;script&gt;var x = "&lt;!--"; &lt;/script&gt; var y = "--&gt;"; alert(x + y);&lt;/script&gt;</code><br> Note: <code class=syntax>script</code> and <code class=syntax>style</code> can be the names of XML namespaces - then they are not treated like usual <code class=syntax>script</code> or <code class=syntax>style</code> elements. Example: <code class=syntax>&lt;script:a&gt;Hello&lt;/script:a&gt;</code>.<br> Note: whitespaces are possible after closing tag name: <code class=syntax>&lt;/script &gt;</code> but not before: <code class=syntax>&lt; / script&gt;</code>.</li> <li>Other tags or tag-like elements are skipped without inner content. Example: <code class=syntax>&lt;a&gt;.&lt;/a&gt;</code><br> Note: it is expected that this HTML is illegal: <code class=syntax>&lt;a test="&gt;"&gt;&lt;/a&gt;</code><br> Note: it also skips something like tags: <code class=syntax>&lt;&gt;</code>, <code class=syntax>&lt;!----&gt;</code>, etc.<br> Note: tag without end is skipped to the end of input: <code class=syntax>&lt;hello</code></li> <li>HTML and XML entities are not decoded. They must be processed by separate function.</li> <li>Whitespaces in the text are collapsed or inserted by specific rules.<ul> <li>Whitespaces at the beginning and at the end are removed.</li> <li>Consecutive whitespaces are collapsed.</li> <li>But if the text is separated by other elements and there is no whitespace, it is inserted.</li> <li>It may cause unnatural examples: <code class=syntax>Hello&lt;b&gt;world&lt;/b&gt;</code>, <code class=syntax>Hello&lt;!-- --&gt;world</code> - there is no whitespace in HTML, but the function inserts it. Also consider: <code class=syntax>Hello&lt;p&gt;world&lt;/p&gt;</code>, <code class=syntax>Hello&lt;br&gt;world</code>. This behavior is reasonable for data analysis, e.g. to convert HTML to a bag of words.</li> </ul> </li> <li>Also note that correct handling of whitespaces requires the support of <code class=syntax>&lt;pre&gt;&lt;/pre&gt;</code> and CSS <code class=syntax>display</code> and <code class=syntax>white-space</code> properties.</li> </ol> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>extractTextFromHTML</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — input text. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Extracted text.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>The first example contains several tags and a comment and also shows whitespace processing.<br> The second example shows <code class=syntax>CDATA</code> and <code class=syntax>script</code> tag processing.<br> In the third example text is extracted from the full HTML response received by the <a href=../../../table-functions/url/amp/ >url</a> function.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>extractTextFromHTML</span><span class=p>(</span><span class=s1>' &lt;p&gt; A text &lt;i&gt;with&lt;/i&gt;&lt;b&gt;tags&lt;/b&gt;. &lt;!-- comments --&gt; &lt;/p&gt; '</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>extractTextFromHTML</span><span class=p>(</span><span class=s1>'&lt;![CDATA[The content within &lt;b&gt;CDATA&lt;/b&gt;]]&gt; &lt;script&gt;alert("Script");&lt;/script&gt;'</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>extractTextFromHTML</span><span class=p>(</span><span class=n>html</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>url</span><span class=p>(</span><span class=s1>'http://www.donothingfor2minutes.com/'</span><span class=p>,</span><span class=w> </span><span class=n>RawBLOB</span><span class=p>,</span><span class=w> </span><span class=s1>'html String'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>A text with tags .
The content within &lt;b&gt;CDATA&lt;/b&gt;
Do Nothing for 2 Minutes 2:00 &amp;nbsp;
</code></pre></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/38993f215f9186c1ac3505b1e09697cd9a468b5d" rel="external nofollow noreferrer" target="_blank" class="text-reset">38993f21</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/en/sql-reference/functions/string-functions/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

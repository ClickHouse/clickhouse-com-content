










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="en">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Other | ClickHouse Documentation</title>
    <link rel="canonical" href="https://clickhouse.com/docs/en/sql-reference/functions/other-functions/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Other | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.com/docs/en/sql-reference/functions/other-functions/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Other | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer,main,section{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}address{font-style:normal;line-height:inherit}address,ol,ul{margin-bottom:1rem}ol,ul{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}b,strong{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-first{order:-1}.order-last{order:13}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}.offset-1{margin-left:8.3333333333%}.offset-2{margin-left:16.6666666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.3333333333%}.offset-5{margin-left:41.6666666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.3333333333%}.offset-8{margin-left:66.6666666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.3333333333%}.offset-11{margin-left:91.6666666667%}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-first{order:-1}.order-md-last{order:13}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.3333333333%}.offset-md-2{margin-left:16.6666666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.3333333333%}.offset-md-5{margin-left:41.6666666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.3333333333%}.offset-md-8{margin-left:66.6666666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.3333333333%}.offset-md-11{margin-left:91.6666666667%}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-first{order:-1}.order-lg-last{order:13}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.3333333333%}.offset-lg-2{margin-left:16.6666666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.3333333333%}.offset-lg-5{margin-left:41.6666666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.3333333333%}.offset-lg-8{margin-left:66.6666666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.3333333333%}.offset-lg-11{margin-left:91.6666666667%}}.table{width:100%;margin-bottom:8px;color:#212529}.table-info{background-color:#bee5eb}.table-warning{background-color:#ffeeba}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-active{background-color:rgba(33,37,41,.075)}.table-dark{color:#fff;background-color:#343a40}.form-group{margin-bottom:1rem}.form-text{display:block;margin-top:.25rem}.form-row{display:flex;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-check{position:relative;display:block;padding-left:1.25rem}.form-check-input{position:absolute;margin-top:.3rem;margin-left:-1.25rem}.form-check-inline{display:inline-flex;align-items:center;padding-left:0;margin-right:.75rem}.form-check-inline .form-check-input{position:static;margin-top:0;margin-right:.3125rem;margin-left:0}.custom-select.is-valid{border-color:#28a745;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3E%3C/svg%3E") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545'%3E%3Ccircle cx='6' cy='6' r='4.5'/%3E%3Cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3E%3Ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3E%3C/svg%3E") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-inline{display:flex;flex-flow:row wrap;align-items:center}.form-inline .form-check{width:100%}@media(min-width:616px){.form-inline .form-group{display:flex;align-items:center;margin-bottom:0}.form-inline .form-group{flex:0 0 auto;flex-flow:row wrap}.form-inline .custom-select,.form-inline .input-group{width:auto}.form-inline .form-check{display:flex;align-items:center;justify-content:center;width:auto;padding-left:0}.form-inline .form-check-input{position:relative;flex-shrink:0;margin-top:0;margin-right:.25rem;margin-left:0}}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:focus,.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info:focus{box-shadow:0 0 0 0 rgba(58,176,195,.5)}.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-warning{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-warning:focus,.btn-warning:hover{color:#495057;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{box-shadow:0 0 0 0 rgba(228,176,19,.5)}.btn-warning:disabled{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:focus{box-shadow:0 0 0 0 rgba(23,162,184,.5)}.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 0 rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group,.btn-group-vertical{position:relative;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.btn-group-vertical{flex-direction:column;align-items:flex-start;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn-group:not(:last-child)>.btn{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn:not(:first-child){border-top-left-radius:0;border-top-right-radius:0}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.custom-file,.input-group>.custom-select{position:relative;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-file+.custom-file,.input-group>.custom-file+.custom-select,.input-group>.custom-select+.custom-file,.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-file .custom-file-input:focus{z-index:4}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.custom-file{display:flex;align-items:center}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:8px}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.125rem;line-height:1.5;border-radius:8px}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-file{display:inline-block;margin-bottom:0}.custom-file,.custom-file-input{position:relative;width:100%;height:calc(1.5em+.75rem+2px)}.custom-file-input{z-index:2;margin:0;opacity:0}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#fc0;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#fff0b3}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#fc0;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#fff0b3}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#fc0;border:0;border-radius:1rem;-ms-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#fff0b3}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower,.custom-range::-ms-fill-upper{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px}.custom-range:disabled::-webkit-slider-thumb{background-color:#d6dbdf}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#d6dbdf}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#d6dbdf}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.tab-content>.active{display:block}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/docs/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/docs/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=other-functions>Other Functions<a class=headerlink href=../amp/#other-functions title="Permanent link"> </a></h1> <h2 id=hostname>hostName()<a class=headerlink href=../amp/#hostname title="Permanent link"> </a></h2> <p>Returns a string with the name of the host that this function was performed on. For distributed processing, this is the name of the remote server host, if the function is performed on a remote server.<br> If it is executed in the context of a distributed table, then it generates a normal column with values relevant to each shard. Otherwise it produces a constant value.</p> <h2 id=getmacro>getMacro<a class=headerlink href=../amp/#getmacro title="Permanent link"> </a></h2> <p>Gets a named value from the <a href=../../../../operations/server-configuration-parameters/settings/amp/#macros>macros</a> section of the server configuration.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getMacro</span><span class=p>(</span><span class=n>name</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>name</code> — Name to retrieve from the <code class=syntax>macros</code> section. <a href=../../../data-types/string/amp/#string>String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Value of the specified macro.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>The example <code class=syntax>macros</code> section in the server configuration file:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;macros&gt;</span>
    <span class=nt>&lt;test&gt;</span>Value<span class=nt>&lt;/test&gt;</span>
<span class=nt>&lt;/macros&gt;</span>
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>getMacro</span><span class=p>(</span><span class=s1>'test'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─getMacro('test')─┐
│ Value            │
└──────────────────┘
</code></pre></div> <p>An alternative way to get the same value:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>macros</span><span class=w></span>
<span class=k>WHERE</span><span class=w> </span><span class=n>macro</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'test'</span><span class=p>;</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─macro─┬─substitution─┐
│ test  │ Value        │
└───────┴──────────────┘
</code></pre></div> <h2 id=fqdn>FQDN<a class=headerlink href=../amp/#fqdn title="Permanent link"> </a></h2> <p>Returns the fully qualified domain name.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>fqdn</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>This function is case-insensitive.</p> <p><strong>Returned value</strong></p> <ul> <li>String with the fully qualified domain name.</li> </ul> <p>Type: <code class=syntax>String</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>FQDN</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─FQDN()──────────────────────────┐
│ clickhouse.ru-central1.internal │
└─────────────────────────────────┘
</code></pre></div> <h2 id=basename>basename<a class=headerlink href=../amp/#basename title="Permanent link"> </a></h2> <p>Extracts the trailing part of a string after the last slash or backslash. This function if often used to extract the filename from a path.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>basename</span><span class=p>(</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>expr</code> — Expression resulting in a <a href=../../../data-types/string/amp/ >String</a> type value. All the backslashes must be escaped in the resulting value.</li> </ul> <p><strong>Returned Value</strong></p> <p>A string that contains:</p> <ul> <li> <p>The trailing part of a string after the last slash or backslash.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>If</span> <span class=nv>the</span> <span class=nv>input</span> <span class=nv>string</span> <span class=nv>contains</span> <span class=nv>a</span> <span class=nv>path</span> <span class=nv>ending</span> <span class=nv>with</span> <span class=nv>slash</span> <span class=nv>or</span> <span class=nv>backslash</span>, <span class=k>for</span> <span class=nv>example</span>, `<span class=o>/</span>` <span class=nv>or</span> `<span class=nv>c</span>:\`, <span class=nv>the</span> <span class=nv>function</span> <span class=nv>returns</span> <span class=nv>an</span> <span class=nv>empty</span> <span class=nv>string</span>.
</code></pre></div> </li> <li> <p>The original string if there are no slashes or backslashes.</p> </li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=s1>'some/long/path/to/file'</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=s1>'some\\long\\path\\to\\file'</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=s1>'some-file-name'</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────┬─basename('some-file-name')─┐
│ some-file-name │ some-file-name             │
└────────────────┴────────────────────────────┘
</code></pre></div> <h2 id=visiblewidthx>visibleWidth(x)<a class=headerlink href=../amp/#visiblewidthx title="Permanent link"> </a></h2> <p>Calculates the approximate width when outputting values to the console in text format (tab-separated).<br> This function is used by the system for implementing Pretty formats.</p> <p><code class=syntax>NULL</code> is represented as a string corresponding to <code class=syntax>NULL</code> in <code class=syntax>Pretty</code> formats.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>visibleWidth</span><span class=p>(</span><span class=k>NULL</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─visibleWidth(NULL)─┐
│                  4 │
└────────────────────┘
</code></pre></div> <h2 id=totypenamex>toTypeName(x)<a class=headerlink href=../amp/#totypenamex title="Permanent link"> </a></h2> <p>Returns a string containing the type name of the passed argument.</p> <p>If <code class=syntax>NULL</code> is passed to the function as input, then it returns the <code class=syntax>Nullable(Nothing)</code> type, which corresponds to an internal <code class=syntax>NULL</code> representation in ClickHouse.</p> <h2 id=function-blocksize>blockSize()<a class=headerlink href=../amp/#function-blocksize title="Permanent link"> </a></h2> <p>Gets the size of the block.<br> In ClickHouse, queries are always run on blocks (sets of column parts). This function allows getting the size of the block that you called it for.</p> <h2 id=function-bytesize>byteSize<a class=headerlink href=../amp/#function-bytesize title="Permanent link"> </a></h2> <p>Returns estimation of uncompressed byte size of its arguments in memory.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>byteSize</span><span class=p>(</span><span class=n>argument</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=p>...])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>argument</code> — Value.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Estimation of byte size of the arguments in memory.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</p> <p><strong>Examples</strong></p> <p>For <a href=../../../data-types/string/amp/ >String</a> arguments the funtion returns the string length + 9 (terminating zero + length).</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=s1>'string'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─byteSize('string')─┐
│                 15 │
└────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>test</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=k>key</span><span class=o>`</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>u8</span><span class=o>`</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>u16</span><span class=o>`</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>u32</span><span class=o>`</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>u64</span><span class=o>`</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>i8</span><span class=o>`</span><span class=w> </span><span class=nb>Int8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>i16</span><span class=o>`</span><span class=w> </span><span class=n>Int16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>i32</span><span class=o>`</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>i64</span><span class=o>`</span><span class=w> </span><span class=n>Int64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>f32</span><span class=o>`</span><span class=w> </span><span class=n>Float32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=o>`</span><span class=n>f64</span><span class=o>`</span><span class=w> </span><span class=n>Float64</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MergeTree</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>key</span><span class=p>;</span><span class=w></span>

<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>16</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p>,</span><span class=w> </span><span class=mi>64</span><span class=p>,</span><span class=w>  </span><span class=o>-</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>16</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>32</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>64</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p>.</span><span class=mi>32</span><span class=p>,</span><span class=w> </span><span class=mi>64</span><span class=p>.</span><span class=mi>64</span><span class=p>);</span><span class=w></span>

<span class=k>SELECT</span><span class=w> </span><span class=k>key</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>u8</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt8</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>u16</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt16</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>u32</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>u64</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt64</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>i8</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=nb>Int8</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>i16</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int16</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>i32</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>i64</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int64</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>f32</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Float32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=n>f64</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Float64</span><span class=p>)</span><span class=o>`</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=k>ASC</span><span class=w> </span><span class=n>FORMAT</span><span class=w> </span><span class=n>Vertical</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
key:               1
byteSize(UInt8):   1
byteSize(UInt16):  2
byteSize(UInt32):  4
byteSize(UInt64):  8
byteSize(Int8):    1
byteSize(Int16):   2
byteSize(Int32):   4
byteSize(Int64):   8
byteSize(Float32): 4
byteSize(Float64): 8
</code></pre></div> <p>If the function takes multiple arguments, it returns their combined byte size.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>byteSize</span><span class=p>(</span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>''</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─byteSize(NULL, 1, 0.3, '')─┐
│                         19 │
└────────────────────────────┘
</code></pre></div> <h2 id=materializex>materialize(x)<a class=headerlink href=../amp/#materializex title="Permanent link"> </a></h2> <p>Turns a constant into a full column containing just one value.<br> In ClickHouse, full columns and constants are represented differently in memory. Functions work differently for constant arguments and normal arguments (different code is executed), although the result is almost always the same. This function is for debugging this behavior.</p> <h2 id=ignore>ignore(…)<a class=headerlink href=../amp/#ignore title="Permanent link"> </a></h2> <p>Accepts any arguments, including <code class=syntax>NULL</code>. Always returns 0.<br> However, the argument is still evaluated. This can be used for benchmarks.</p> <h2 id=sleepseconds>sleep(seconds)<a class=headerlink href=../amp/#sleepseconds title="Permanent link"> </a></h2> <p>Sleeps ‘seconds’ seconds on each data block. You can specify an integer or a floating-point number.</p> <h2 id=sleepeachrowseconds>sleepEachRow(seconds)<a class=headerlink href=../amp/#sleepeachrowseconds title="Permanent link"> </a></h2> <p>Sleeps ‘seconds’ seconds on each row. You can specify an integer or a floating-point number.</p> <h2 id=currentdatabase>currentDatabase()<a class=headerlink href=../amp/#currentdatabase title="Permanent link"> </a></h2> <p>Returns the name of the current database.<br> You can use this function in table engine parameters in a CREATE TABLE query where you need to specify the database.</p> <h2 id=other-function-currentuser>currentUser()<a class=headerlink href=../amp/#other-function-currentuser title="Permanent link"> </a></h2> <p>Returns the login of current user. Login of user, that initiated query, will be returned in case distibuted query.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>currentUser</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>Alias: <code class=syntax>user()</code>, <code class=syntax>USER()</code>.</p> <p><strong>Returned values</strong></p> <ul> <li>Login of current user.</li> <li>Login of user that initiated query in case of disributed query.</li> </ul> <p>Type: <code class=syntax>String</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>currentUser</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─currentUser()─┐
│ default       │
└───────────────┘
</code></pre></div> <h2 id=is-constant>isConstant<a class=headerlink href=../amp/#is-constant title="Permanent link"> </a></h2> <p>Checks whether the argument is a constant expression.</p> <p>A constant expression means an expression whose resulting value is known at the query analysis (i.e. before execution). For example, expressions over <a href=../../../syntax/amp/#literals>literals</a> are constant expressions.</p> <p>The function is intended for development, debugging and demonstration.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>isConstant</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — Expression to check.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li><code class=syntax>1</code> — <code class=syntax>x</code> is constant.</li> <li><code class=syntax>0</code> — <code class=syntax>x</code> is non-constant.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>isConstant</span><span class=p>(</span><span class=n>x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=mi>43</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(plus(x, 1))─┐
│                      1 │
└────────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=mi>3</span><span class=p>.</span><span class=mi>14</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>pi</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>isConstant</span><span class=p>(</span><span class=n>cos</span><span class=p>(</span><span class=n>pi</span><span class=p>))</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(cos(pi))─┐
│                   1 │
└─────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>isConstant</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(number)─┐
│                  0 │
└────────────────────┘
</code></pre></div> <h2 id=isfinitex>isFinite(x)<a class=headerlink href=../amp/#isfinitex title="Permanent link"> </a></h2> <p>Accepts Float32 and Float64 and returns UInt8 equal to 1 if the argument is not infinite and not a NaN, otherwise 0.</p> <h2 id=isinfinitex>isInfinite(x)<a class=headerlink href=../amp/#isinfinitex title="Permanent link"> </a></h2> <p>Accepts Float32 and Float64 and returns UInt8 equal to 1 if the argument is infinite, otherwise 0. Note that 0 is returned for a NaN.</p> <h2 id=ifnotfinite>ifNotFinite<a class=headerlink href=../amp/#ifnotfinite title="Permanent link"> </a></h2> <p>Checks whether floating point value is finite.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax>ifNotFinite(x,y)
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — Value to be checked for infinity. Type: <a href=../../../data-types/float/amp/ >Float*</a>.</li> <li><code class=syntax>y</code> — Fallback value. Type: <a href=../../../data-types/float/amp/ >Float*</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li><code class=syntax>x</code> if <code class=syntax>x</code> is finite.</li> <li><code class=syntax>y</code> if <code class=syntax>x</code> is not finite.</li> </ul> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax>SELECT 1/0 as infimum, ifNotFinite(infimum,42)
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─infimum─┬─ifNotFinite(divide(1, 0), 42)─┐
│     inf │                            42 │
└─────────┴───────────────────────────────┘
</code></pre></div> <p>You can get similar result by using <a href=../../conditional-functions/amp/#ternary-operator>ternary operator</a>: <code class=syntax>isFinite(x) ? x : y</code>.</p> <h2 id=isnanx>isNaN(x)<a class=headerlink href=../amp/#isnanx title="Permanent link"> </a></h2> <p>Accepts Float32 and Float64 and returns UInt8 equal to 1 if the argument is a NaN, otherwise 0.</p> <h2 id=hascolumnintablehostname-username-password-database-table-column>hasColumnInTable([‘hostname’[, ‘username’[, ‘password’]],] ‘database’, ‘table’, ‘column’)<a class=headerlink href=../amp/#hascolumnintablehostname-username-password-database-table-column title="Permanent link"> </a></h2> <p>Accepts constant strings: database name, table name, and column name. Returns a UInt8 constant expression equal to 1 if there is a column, otherwise 0. If the hostname parameter is set, the test will run on a remote server.<br> The function throws an exception if the table does not exist.<br> For elements in a nested data structure, the function checks for the existence of a column. For the nested data structure itself, the function returns 0.</p> <h2 id=function-bar>bar<a class=headerlink href=../amp/#function-bar title="Permanent link"> </a></h2> <p>Allows building a unicode-art diagram.</p> <p><code class=syntax>bar(x, min, max, width)</code> draws a band with a width proportional to <code class=syntax>(x - min)</code> and equal to <code class=syntax>width</code> characters when <code class=syntax>x = max</code>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — Size to display.</li> <li><code class=syntax>min, max</code> — Integer constants. The value must fit in <code class=syntax>Int64</code>.</li> <li><code class=syntax>width</code> — Constant, positive integer, can be fractional.</li> </ul> <p>The band is drawn with accuracy to one eighth of a symbol.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>toHour</span><span class=p>(</span><span class=n>EventTime</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>h</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>count</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>c</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>bar</span><span class=p>(</span><span class=k>c</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>600000</span><span class=p>,</span><span class=w> </span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>bar</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=p>.</span><span class=n>hits</span><span class=w></span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>h</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=k>ASC</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──h─┬──────c─┬─bar────────────────┐
│  0 │ 292907 │ █████████▋         │
│  1 │ 180563 │ ██████             │
│  2 │ 114861 │ ███▋               │
│  3 │  85069 │ ██▋                │
│  4 │  68543 │ ██▎                │
│  5 │  78116 │ ██▌                │
│  6 │ 113474 │ ███▋               │
│  7 │ 170678 │ █████▋             │
│  8 │ 278380 │ █████████▎         │
│  9 │ 391053 │ █████████████      │
│ 10 │ 457681 │ ███████████████▎   │
│ 11 │ 493667 │ ████████████████▍  │
│ 12 │ 509641 │ ████████████████▊  │
│ 13 │ 522947 │ █████████████████▍ │
│ 14 │ 539954 │ █████████████████▊ │
│ 15 │ 528460 │ █████████████████▌ │
│ 16 │ 539201 │ █████████████████▊ │
│ 17 │ 523539 │ █████████████████▍ │
│ 18 │ 506467 │ ████████████████▊  │
│ 19 │ 520915 │ █████████████████▎ │
│ 20 │ 521665 │ █████████████████▍ │
│ 21 │ 542078 │ ██████████████████ │
│ 22 │ 493642 │ ████████████████▍  │
│ 23 │ 400397 │ █████████████▎     │
└────┴────────┴────────────────────┘
</code></pre></div> <h2 id=transform>transform<a class=headerlink href=../amp/#transform title="Permanent link"> </a></h2> <p>Transforms a value according to the explicitly defined mapping of some elements to other ones.<br> There are two variations of this function:</p> <h3 id=transformx-array-from-array-to-default>transform(x, array_from, array_to, default)<a class=headerlink href=../amp/#transformx-array-from-array-to-default title="Permanent link"> </a></h3> <p><code class=syntax>x</code> – What to transform.</p> <p><code class=syntax>array_from</code> – Constant array of values for converting.</p> <p><code class=syntax>array_to</code> – Constant array of values to convert the values in ‘from’ to.</p> <p><code class=syntax>default</code> – Which value to use if ‘x’ is not equal to any of the values in ‘from’.</p> <p><code class=syntax>array_from</code> and <code class=syntax>array_to</code> – Arrays of the same size.</p> <p>Types:</p> <p><code class=syntax>transform(T, Array(T), Array(U), U) -&gt; U</code></p> <p><code class=syntax>T</code> and <code class=syntax>U</code> can be numeric, string, or Date or DateTime types.<br> Where the same letter is indicated (T or U), for numeric types these might not be matching types, but types that have a common type.<br> For example, the first argument can have the Int64 type, while the second has the Array(UInt16) type.</p> <p>If the ‘x’ value is equal to one of the elements in the ‘array_from’ array, it returns the existing element (that is numbered the same) from the ‘array_to’ array. Otherwise, it returns ‘default’. If there are multiple matching elements in ‘array_from’, it returns one of the matches.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=k>transform</span><span class=p>(</span><span class=n>SearchEngineID</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>],</span><span class=w> </span><span class=p>[</span><span class=s1>'Yandex'</span><span class=p>,</span><span class=w> </span><span class=s1>'Google'</span><span class=p>],</span><span class=w> </span><span class=s1>'Other'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>title</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>count</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>c</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=p>.</span><span class=n>hits</span><span class=w></span>
<span class=k>WHERE</span><span class=w> </span><span class=n>SearchEngineID</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>0</span><span class=w></span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>title</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>DESC</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─title─────┬──────c─┐
│ Yandex    │ 498635 │
│ Google    │ 229872 │
│ Other     │ 104472 │
└───────────┴────────┘
</code></pre></div> <h3 id=transformx-array-from-array-to>transform(x, array_from, array_to)<a class=headerlink href=../amp/#transformx-array-from-array-to title="Permanent link"> </a></h3> <p>Differs from the first variation in that the ‘default’ argument is omitted.<br> If the ‘x’ value is equal to one of the elements in the ‘array_from’ array, it returns the matching element (that is numbered the same) from the ‘array_to’ array. Otherwise, it returns ‘x’.</p> <p>Types:</p> <p><code class=syntax>transform(T, Array(T), Array(T)) -&gt; T</code></p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=k>transform</span><span class=p>(</span><span class=k>domain</span><span class=p>(</span><span class=n>Referer</span><span class=p>),</span><span class=w> </span><span class=p>[</span><span class=s1>'yandex.ru'</span><span class=p>,</span><span class=w> </span><span class=s1>'google.ru'</span><span class=p>,</span><span class=w> </span><span class=s1>'vk.com'</span><span class=p>],</span><span class=w> </span><span class=p>[</span><span class=s1>'www.yandex'</span><span class=p>,</span><span class=w> </span><span class=s1>'example.com'</span><span class=p>])</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>count</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>c</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=p>.</span><span class=n>hits</span><span class=w></span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>domain</span><span class=p>(</span><span class=n>Referer</span><span class=p>)</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>count</span><span class=p>()</span><span class=w> </span><span class=k>DESC</span><span class=w></span>
<span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─s──────────────┬───────c─┐
│                │ 2906259 │
│ www.yandex     │  867767 │
│ ███████.ru     │  313599 │
│ mail.yandex.ru │  107147 │
│ ██████.ru      │  100355 │
│ █████████.ru   │   65040 │
│ news.yandex.ru │   64515 │
│ ██████.net     │   59141 │
│ example.com    │   57316 │
└────────────────┴─────────┘
</code></pre></div> <h2 id=formatreadablesizex>formatReadableSize(x)<a class=headerlink href=../amp/#formatreadablesizex title="Permanent link"> </a></h2> <p>Accepts the size (number of bytes). Returns a rounded size with a suffix (KiB, MiB, etc.) as a string.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>arrayJoin</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1024</span><span class=p>,</span><span class=w> </span><span class=mi>1024</span><span class=o>*</span><span class=mi>1024</span><span class=p>,</span><span class=w> </span><span class=mi>192851925</span><span class=p>])</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>filesize_bytes</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesize_bytes</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>filesize</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─filesize_bytes─┬─filesize───┐
│              1 │ 1.00 B     │
│           1024 │ 1.00 KiB   │
│        1048576 │ 1.00 MiB   │
│      192851925 │ 183.92 MiB │
└────────────────┴────────────┘
</code></pre></div> <h2 id=formatreadablequantityx>formatReadableQuantity(x)<a class=headerlink href=../amp/#formatreadablequantityx title="Permanent link"> </a></h2> <p>Accepts the number. Returns a rounded number with a suffix (thousand, million, billion, etc.) as a string.</p> <p>It is useful for reading big numbers by human.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>arrayJoin</span><span class=p>([</span><span class=mi>1024</span><span class=p>,</span><span class=w> </span><span class=mi>1234</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=mi>4567</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1000</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span><span class=w> </span><span class=mi>98765432101234</span><span class=p>])</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>formatReadableQuantity</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>number_for_humans</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─────────number─┬─number_for_humans─┐
│           1024 │ 1.02 thousand     │
│        1234000 │ 1.23 million      │
│     4567000000 │ 4.57 billion      │
│ 98765432101234 │ 98.77 trillion    │
└────────────────┴───────────────────┘
</code></pre></div> <h2 id=formatreadabletimedelta>formatReadableTimeDelta<a class=headerlink href=../amp/#formatreadabletimedelta title="Permanent link"> </a></h2> <p>Accepts the time delta in seconds. Returns a time delta with (year, month, day, hour, minute, second) as a string.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>formatReadableTimeDelta</span><span class=p>(</span><span class=k>column</span><span class=p>[,</span><span class=w> </span><span class=n>maximum_unit</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>column</code> — A column with numeric time delta.</li> <li><code class=syntax>maximum_unit</code> — Optional. Maximum unit to show. Acceptable values seconds, minutes, hours, days, months, years.</li> </ul> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>arrayJoin</span><span class=p>([</span><span class=mi>100</span><span class=p>,</span><span class=w> </span><span class=mi>12345</span><span class=p>,</span><span class=w> </span><span class=mi>432546534</span><span class=p>])</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>elapsed</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>formatReadableTimeDelta</span><span class=p>(</span><span class=n>elapsed</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>time_delta</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌────elapsed─┬─time_delta ─────────────────────────────────────────────────────┐
│        100 │ 1 minute and 40 seconds                                         │
│      12345 │ 3 hours, 25 minutes and 45 seconds                              │
│  432546534 │ 13 years, 8 months, 17 days, 7 hours, 48 minutes and 54 seconds │
└────────────┴─────────────────────────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>arrayJoin</span><span class=p>([</span><span class=mi>100</span><span class=p>,</span><span class=w> </span><span class=mi>12345</span><span class=p>,</span><span class=w> </span><span class=mi>432546534</span><span class=p>])</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>elapsed</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>formatReadableTimeDelta</span><span class=p>(</span><span class=n>elapsed</span><span class=p>,</span><span class=w> </span><span class=s1>'minutes'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>time_delta</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌────elapsed─┬─time_delta ─────────────────────────────────────────────────────┐
│        100 │ 1 minute and 40 seconds                                         │
│      12345 │ 205 minutes and 45 seconds                                      │
│  432546534 │ 7209108 minutes and 54 seconds                                  │
└────────────┴─────────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=leasta-b>least(a, b)<a class=headerlink href=../amp/#leasta-b title="Permanent link"> </a></h2> <p>Returns the smallest value from a and b.</p> <h2 id=greatesta-b>greatest(a, b)<a class=headerlink href=../amp/#greatesta-b title="Permanent link"> </a></h2> <p>Returns the largest value of a and b.</p> <h2 id=uptime>uptime()<a class=headerlink href=../amp/#uptime title="Permanent link"> </a></h2> <p>Returns the server’s uptime in seconds.<br> If it is executed in the context of a distributed table, then it generates a normal column with values relevant to each shard. Otherwise it produces a constant value.</p> <h2 id=version>version()<a class=headerlink href=../amp/#version title="Permanent link"> </a></h2> <p>Returns the version of the server as a string.<br> If it is executed in the context of a distributed table, then it generates a normal column with values relevant to each shard. Otherwise it produces a constant value.</p> <h2 id=buildid>buildId()<a class=headerlink href=../amp/#buildid title="Permanent link"> </a></h2> <p>Returns the build ID generated by a compiler for the running ClickHouse server binary.<br> If it is executed in the context of a distributed table, then it generates a normal column with values relevant to each shard. Otherwise it produces a constant value.</p> <h2 id=blocknumber>blockNumber<a class=headerlink href=../amp/#blocknumber title="Permanent link"> </a></h2> <p>Returns the sequence number of the data block where the row is located.</p> <h2 id=function-rownumberinblock>rowNumberInBlock<a class=headerlink href=../amp/#function-rownumberinblock title="Permanent link"> </a></h2> <p>Returns the ordinal number of the row in the data block. Different data blocks are always recalculated.</p> <h2 id=rownumberinallblocks>rowNumberInAllBlocks()<a class=headerlink href=../amp/#rownumberinallblocks title="Permanent link"> </a></h2> <p>Returns the ordinal number of the row in the data block. This function only considers the affected data blocks.</p> <h2 id=neighbor>neighbor<a class=headerlink href=../amp/#neighbor title="Permanent link"> </a></h2> <p>The window function that provides access to a row at a specified offset which comes before or after the current row of a given column.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>neighbor</span><span class=p>(</span><span class=k>column</span><span class=p>,</span><span class=w> </span><span class=k>offset</span><span class=p>[,</span><span class=w> </span><span class=n>default_value</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p>The result of the function depends on the affected data blocks and the order of data in the block.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Warning</p> <p>It can reach the neighbor rows only inside the currently processed data block.</p> </div> <p>The rows order used during the calculation of <code class=syntax>neighbor</code> can differ from the order of rows returned to the user.<br> To prevent that you can make a subquery with <a href=../../../statements/select/order-by/amp/ >ORDER BY</a> and call the function from outside the subquery.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>column</code> — A column name or scalar expression.</li> <li><code class=syntax>offset</code> — The number of rows forwards or backwards from the current row of <code class=syntax>column</code>. <a href=../../../data-types/int-uint/amp/ >Int64</a>.</li> <li><code class=syntax>default_value</code> — Optional. The value to be returned if offset goes beyond the scope of the block. Type of data blocks affected.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li>Value for <code class=syntax>column</code> in <code class=syntax>offset</code> distance from current row if <code class=syntax>offset</code> value is not outside block bounds.</li> <li>Default value for <code class=syntax>column</code> if <code class=syntax>offset</code> value is outside block bounds. If <code class=syntax>default_value</code> is given, then it will be used.</li> </ul> <p>Type: type of data blocks affected or default value type.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=w> </span><span class=n>neighbor</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>numbers</span><span class=w> </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─neighbor(number, 2)─┐
│      0 │                   2 │
│      1 │                   3 │
│      2 │                   4 │
│      3 │                   5 │
│      4 │                   6 │
│      5 │                   7 │
│      6 │                   8 │
│      7 │                   9 │
│      8 │                   0 │
│      9 │                   0 │
└────────┴─────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=w> </span><span class=n>neighbor</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>999</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>numbers</span><span class=w> </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─neighbor(number, 2, 999)─┐
│      0 │                        2 │
│      1 │                        3 │
│      2 │                        4 │
│      3 │                        5 │
│      4 │                        6 │
│      5 │                        7 │
│      6 │                        8 │
│      7 │                        9 │
│      8 │                      999 │
│      9 │                      999 │
└────────┴──────────────────────────┘
</code></pre></div> <p>This function can be used to compute year-over-year metric value:</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=s1>'2018-01-01'</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>start_date</span><span class=w></span>
<span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>toStartOfMonth</span><span class=p>(</span><span class=n>start_date</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=nb>number</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>32</span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>month</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>toInt32</span><span class=p>(</span><span class=k>month</span><span class=p>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>money</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>neighbor</span><span class=p>(</span><span class=n>money</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>12</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>prev_year</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>round</span><span class=p>(</span><span class=n>prev_year</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>money</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>year_over_year</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────month─┬─money─┬─prev_year─┬─year_over_year─┐
│ 2018-01-01 │    32 │         0 │              0 │
│ 2018-02-01 │    63 │         0 │              0 │
│ 2018-03-01 │    91 │         0 │              0 │
│ 2018-04-01 │    22 │         0 │              0 │
│ 2018-05-01 │    52 │         0 │              0 │
│ 2018-06-01 │    83 │         0 │              0 │
│ 2018-07-01 │    13 │         0 │              0 │
│ 2018-08-01 │    44 │         0 │              0 │
│ 2018-09-01 │    75 │         0 │              0 │
│ 2018-10-01 │     5 │         0 │              0 │
│ 2018-11-01 │    36 │         0 │              0 │
│ 2018-12-01 │    66 │         0 │              0 │
│ 2019-01-01 │    97 │        32 │           0.33 │
│ 2019-02-01 │    28 │        63 │           2.25 │
│ 2019-03-01 │    56 │        91 │           1.62 │
│ 2019-04-01 │    87 │        22 │           0.25 │
└────────────┴───────┴───────────┴────────────────┘
</code></pre></div> <h2 id=other_functions-runningdifference>runningDifference(x)<a class=headerlink href=../amp/#other_functions-runningdifference title="Permanent link"> </a></h2> <p>Calculates the difference between successive row values ​​in the data block.<br> Returns 0 for the first row and the difference from the previous row for each subsequent row.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Warning</p> <p>It can reach the previous row only inside the currently processed data block.</p> </div> <p>The result of the function depends on the affected data blocks and the order of data in the block.</p> <p>The rows order used during the calculation of <code class=syntax>runningDifference</code> can differ from the order of rows returned to the user.<br> To prevent that you can make a subquery with <a href=../../../statements/select/order-by/amp/ >ORDER BY</a> and call the function from outside the subquery.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>EventID</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>EventTime</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>runningDifference</span><span class=p>(</span><span class=n>EventTime</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>delta</span><span class=w></span>
<span class=k>FROM</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=k>SELECT</span><span class=w></span>
<span class=w>        </span><span class=n>EventID</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>EventTime</span><span class=w></span>
<span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>events</span><span class=w></span>
<span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>EventDate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'2016-11-24'</span><span class=w></span>
<span class=w>    </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>EventTime</span><span class=w> </span><span class=k>ASC</span><span class=w></span>
<span class=w>    </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>5</span><span class=w></span>
<span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─EventID─┬───────────EventTime─┬─delta─┐
│    1106 │ 2016-11-24 00:00:04 │     0 │
│    1107 │ 2016-11-24 00:00:05 │     1 │
│    1108 │ 2016-11-24 00:00:05 │     0 │
│    1109 │ 2016-11-24 00:00:09 │     4 │
│    1110 │ 2016-11-24 00:00:10 │     1 │
└─────────┴─────────────────────┴───────┘
</code></pre></div> <p>Please note - block size affects the result. With each new block, the <code class=syntax>runningDifference</code> state is reset.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=nb>number</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>runningDifference</span><span class=p>(</span><span class=nb>number</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>diff</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>100000</span><span class=p>)</span><span class=w></span>
<span class=k>WHERE</span><span class=w> </span><span class=n>diff</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>1</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
┌─number─┬─diff─┐
│  65536 │    0 │
└────────┴──────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>set</span><span class=w> </span><span class=n>max_block_size</span><span class=o>=</span><span class=mi>100000</span><span class=w> </span><span class=c1>-- default value is 65536!</span>

<span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=nb>number</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>runningDifference</span><span class=p>(</span><span class=nb>number</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>diff</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>100000</span><span class=p>)</span><span class=w></span>
<span class=k>WHERE</span><span class=w> </span><span class=n>diff</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>1</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
</code></pre></div> <h2 id=runningdifferencestartingwithfirstvalue>runningDifferenceStartingWithFirstValue<a class=headerlink href=../amp/#runningdifferencestartingwithfirstvalue title="Permanent link"> </a></h2> <p>Same as for <a href=.././amp/#other_functions-runningdifference>runningDifference</a>, the difference is the value of the first row, returned the value of the first row, and each subsequent row returns the difference from the previous row.</p> <h2 id=runningconcurrency>runningConcurrency<a class=headerlink href=../amp/#runningconcurrency title="Permanent link"> </a></h2> <p>Calculates the number of concurrent events.<br> Each event has a start time and an end time. The start time is included in the event, while the end time is excluded. Columns with a start time and an end time must be of the same data type.<br> The function calculates the total number of active (concurrent) events for each event start time.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Warning</p> <p>Events must be ordered by the start time in ascending order. If this requirement is violated the function raises an exception.<br> Every data block is processed separately. If events from different data blocks overlap then they can not be processed correctly.</p> </div> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>runningConcurrency</span><span class=p>(</span><span class=k>start</span><span class=p>,</span><span class=w> </span><span class=k>end</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>start</code> — A column with the start time of events. <a href=../../../data-types/date/amp/ >Date</a>, <a href=../../../data-types/datetime/amp/ >DateTime</a>, or <a href=../../../data-types/datetime64/amp/ >DateTime64</a>.</li> <li><code class=syntax>end</code> — A column with the end time of events. <a href=../../../data-types/date/amp/ >Date</a>, <a href=../../../data-types/datetime/amp/ >DateTime</a>, or <a href=../../../data-types/datetime64/amp/ >DateTime64</a>.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li>The number of concurrent events at each event start time.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt32</a></p> <p><strong>Example</strong></p> <p>Consider the table:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────start─┬────────end─┐
│ 2021-03-03 │ 2021-03-11 │
│ 2021-03-06 │ 2021-03-12 │
│ 2021-03-07 │ 2021-03-08 │
│ 2021-03-11 │ 2021-03-12 │
└────────────┴────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>start</span><span class=p>,</span><span class=w> </span><span class=n>runningConcurrency</span><span class=p>(</span><span class=k>start</span><span class=p>,</span><span class=w> </span><span class=k>end</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>example_table</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────start─┬─runningConcurrency(start, end)─┐
│ 2021-03-03 │                              1 │
│ 2021-03-06 │                              2 │
│ 2021-03-07 │                              3 │
│ 2021-03-11 │                              2 │
└────────────┴────────────────────────────────┘
</code></pre></div> <h2 id=macnumtostringnum>MACNumToString(num)<a class=headerlink href=../amp/#macnumtostringnum title="Permanent link"> </a></h2> <p>Accepts a UInt64 number. Interprets it as a MAC address in big endian. Returns a string containing the corresponding MAC address in the format AA:BB:CC:DD:EE:FF (colon-separated numbers in hexadecimal form).</p> <h2 id=macstringtonums>MACStringToNum(s)<a class=headerlink href=../amp/#macstringtonums title="Permanent link"> </a></h2> <p>The inverse function of MACNumToString. If the MAC address has an invalid format, it returns 0.</p> <h2 id=macstringtoouis>MACStringToOUI(s)<a class=headerlink href=../amp/#macstringtoouis title="Permanent link"> </a></h2> <p>Accepts a MAC address in the format AA:BB:CC:DD:EE:FF (colon-separated numbers in hexadecimal form). Returns the first three octets as a UInt64 number. If the MAC address has an invalid format, it returns 0.</p> <h2 id=getsizeofenumtype>getSizeOfEnumType<a class=headerlink href=../amp/#getsizeofenumtype title="Permanent link"> </a></h2> <p>Returns the number of fields in <a href=../../../data-types/enum/amp/ >Enum</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getSizeOfEnumType</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments:</strong></p> <ul> <li><code class=syntax>value</code> — Value of type <code class=syntax>Enum</code>.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li>The number of fields with <code class=syntax>Enum</code> input values.</li> <li>An exception is thrown if the type is not <code class=syntax>Enum</code>.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>getSizeOfEnumType</span><span class=p>(</span><span class=w> </span><span class=k>CAST</span><span class=p>(</span><span class=s1>'a'</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>Enum8</span><span class=p>(</span><span class=s1>'a'</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>'b'</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>x</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┐
│ 2 │
└───┘
</code></pre></div> <h2 id=blockserializedsize>blockSerializedSize<a class=headerlink href=../amp/#blockserializedsize title="Permanent link"> </a></h2> <p>Returns size on disk (without taking into account compression).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>blockSerializedSize</span><span class=p>(</span><span class=n>value</span><span class=p>[,</span><span class=w> </span><span class=n>value</span><span class=p>[,</span><span class=w> </span><span class=p>...]])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>value</code> — Any value.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li>The number of bytes that will be written to disk for block of values (without compression).</li> </ul> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>blockSerializedSize</span><span class=p>(</span><span class=n>maxState</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>x</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┐
│ 2 │
└───┘
</code></pre></div> <h2 id=tocolumntypename>toColumnTypeName<a class=headerlink href=../amp/#tocolumntypename title="Permanent link"> </a></h2> <p>Returns the name of the class that represents the data type of the column in RAM.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toColumnTypeName</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments:</strong></p> <ul> <li><code class=syntax>value</code> — Any type of value.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li>A string with the name of the class that is used for representing the <code class=syntax>value</code> data type in RAM.</li> </ul> <p><strong>Example of the difference between<code class=syntax>toTypeName ' and ' toColumnTypeName</code></strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>DateTime</span><span class=p>))</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─toTypeName(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime                                            │
└─────────────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>toColumnTypeName</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>DateTime</span><span class=p>))</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─toColumnTypeName(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ Const(UInt32)                                             │
└───────────────────────────────────────────────────────────┘
</code></pre></div> <p>The example shows that the <code class=syntax>DateTime</code> data type is stored in memory as <code class=syntax>Const(UInt32)</code>.</p> <h2 id=dumpcolumnstructure>dumpColumnStructure<a class=headerlink href=../amp/#dumpcolumnstructure title="Permanent link"> </a></h2> <p>Outputs a detailed description of data structures in RAM</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dumpColumnStructure</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments:</strong></p> <ul> <li><code class=syntax>value</code> — Any type of value.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li>A string describing the structure that is used for representing the <code class=syntax>value</code> data type in RAM.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>dumpColumnStructure</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span><span class=p>,</span><span class=w> </span><span class=s1>'DateTime'</span><span class=p>))</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─dumpColumnStructure(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime, Const(size = 1, UInt32(size = 1))                  │
└──────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=defaultvalueofargumenttype>defaultValueOfArgumentType<a class=headerlink href=../amp/#defaultvalueofargumenttype title="Permanent link"> </a></h2> <p>Outputs the default value for the data type.</p> <p>Does not include default values for custom columns set by the user.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultValueOfArgumentType</span><span class=p>(</span><span class=n>expression</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments:</strong></p> <ul> <li><code class=syntax>expression</code> — Arbitrary type of value or an expression that results in a value of an arbitrary type.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li><code class=syntax>0</code> for numbers.</li> <li>Empty string for strings.</li> <li><code class=syntax>ᴺᵁᴸᴸ</code> for <a href=../../../data-types/nullable/amp/ >Nullable</a>.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>defaultValueOfArgumentType</span><span class=p>(</span><span class=w> </span><span class=k>CAST</span><span class=p>(</span><span class=mi>1</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=nb>Int8</span><span class=p>)</span><span class=w> </span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfArgumentType(CAST(1, 'Int8'))─┐
│                                           0 │
└─────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>defaultValueOfArgumentType</span><span class=p>(</span><span class=w> </span><span class=k>CAST</span><span class=p>(</span><span class=mi>1</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>Nullable</span><span class=p>(</span><span class=nb>Int8</span><span class=p>)</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfArgumentType(CAST(1, 'Nullable(Int8)'))─┐
│                                                  ᴺᵁᴸᴸ │
└───────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=defaultvalueoftypename>defaultValueOfTypeName<a class=headerlink href=../amp/#defaultvalueoftypename title="Permanent link"> </a></h2> <p>Outputs the default value for given type name.</p> <p>Does not include default values for custom columns set by the user.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=k>type</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments:</strong></p> <ul> <li><code class=syntax>type</code> — A string representing a type name.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li><code class=syntax>0</code> for numbers.</li> <li>Empty string for strings.</li> <li><code class=syntax>ᴺᵁᴸᴸ</code> for <a href=../../../data-types/nullable/amp/ >Nullable</a>.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=s1>'Int8'</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfTypeName('Int8')─┐
│                              0 │
└────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=s1>'Nullable(Int8)'</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfTypeName('Nullable(Int8)')─┐
│                                     ᴺᵁᴸᴸ │
└──────────────────────────────────────────┘
</code></pre></div> <h2 id=indexhint>indexHint<a class=headerlink href=../amp/#indexhint title="Permanent link"> </a></h2> <p>The function is intended for debugging and introspection purposes. The function ignores it's argument and always returns 1. Arguments are not even evaluated.</p> <p>But for the purpose of index analysis, the argument of this function is analyzed as if it was present directly without being wrapped inside <code class=syntax>indexHint</code> function. This allows to select data in index ranges by the corresponding condition but without further filtering by this condition. The index in ClickHouse is sparse and using <code class=syntax>indexHint</code> will yield more data than specifying the same condition directly.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>indexHint</span><span class=p>(</span><span class=o>&lt;</span><span class=n>expression</span><span class=o>&gt;</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ol> <li>Type: <a href=https://clickhouse.com/docs/en/data_types/int_uint/#diapazony-uint target=_blank>Uint8</a>.</li> </ol> <p><strong>Example</strong></p> <p>Here is the example of test data from the table <a href=../../../../getting-started/example-datasets/ontime/amp/ >ontime</a>.</p> <p>Input table:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>count</span><span class=p>()</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>ontime</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│ 4276457 │
└─────────┘
</code></pre></div> <p>The table has indexes on the fields <code class=syntax>(FlightDate, (Year, FlightDate))</code>.</p> <p>Create a query, where the index is not used.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>FlightDate</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>k</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>()</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>ontime</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=w></span>
</code></pre></div> <p>ClickHouse processed the entire table (<code class=syntax>Processed 4.28 million rows</code>).</p> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-01-01 │   13970 │
│ 2017-01-02 │   15882 │
........................
│ 2017-09-28 │   16411 │
│ 2017-09-29 │   16384 │
│ 2017-09-30 │   12520 │
└────────────┴─────────┘
</code></pre></div> <p>To apply the index, select a specific date.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>FlightDate</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>k</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>()</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>ontime</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'2017-09-15'</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=w></span>
</code></pre></div> <p>By using the index, ClickHouse processed a significantly smaller number of rows (<code class=syntax>Processed 32.74 thousand rows</code>).</p> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-09-15 │   16428 │
└────────────┴─────────┘
</code></pre></div> <p>Now wrap the expression <code class=syntax>k = '2017-09-15'</code> into <code class=syntax>indexHint</code> function.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=n>FlightDate</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>k</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>count</span><span class=p>()</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>ontime</span><span class=w></span>
<span class=k>WHERE</span><span class=w> </span><span class=n>indexHint</span><span class=p>(</span><span class=n>k</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'2017-09-15'</span><span class=p>)</span><span class=w></span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=k>ASC</span><span class=w></span>
</code></pre></div> <p>ClickHouse used the index in the same way as the previous time (<code class=syntax>Processed 32.74 thousand rows</code>).<br> The expression <code class=syntax>k = '2017-09-15'</code> was not used when generating the result.<br> In examle the <code class=syntax>indexHint</code> function allows to see adjacent dates.</p> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-09-14 │    7071 │
│ 2017-09-15 │   16428 │
│ 2017-09-16 │    1077 │
│ 2017-09-30 │    8167 │
└────────────┴─────────┘
</code></pre></div> <h2 id=other-functions-replicate>replicate<a class=headerlink href=../amp/#other-functions-replicate title="Permanent link"> </a></h2> <p>Creates an array with a single value.</p> <p>Used for internal implementation of <a href=../../array-join/amp/#functions_arrayjoin>arrayJoin</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>replicate</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>arr</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>Arguments:</strong></p> <ul> <li><code class=syntax>arr</code> — Original array. ClickHouse creates a new array of the same length as the original and fills it with the value <code class=syntax>x</code>.</li> <li><code class=syntax>x</code> — The value that the resulting array will be filled with.</li> </ul> <p><strong>Returned value</strong></p> <p>An array filled with the value <code class=syntax>x</code>.</p> <p>Type: <code class=syntax>Array</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>replicate</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=s1>'a'</span><span class=p>,</span><span class=w> </span><span class=s1>'b'</span><span class=p>,</span><span class=w> </span><span class=s1>'c'</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─replicate(1, ['a', 'b', 'c'])─┐
│ [1,1,1]                       │
└───────────────────────────────┘
</code></pre></div> <h2 id=filesystemavailable>filesystemAvailable<a class=headerlink href=../amp/#filesystemavailable title="Permanent link"> </a></h2> <p>Returns amount of remaining space on the filesystem where the files of the databases located. It is always smaller than total free space (<a href=../amp/#filesystemfree>filesystemFree</a>) because some space is reserved for OS.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemAvailable</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>The amount of remaining space available in bytes.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemAvailable</span><span class=p>())</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=ss>"Available space"</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemAvailable</span><span class=p>())</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=ss>"Type"</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Available space─┬─Type───┐
│ 30.75 GiB       │ UInt64 │
└─────────────────┴────────┘
</code></pre></div> <h2 id=filesystemfree>filesystemFree<a class=headerlink href=../amp/#filesystemfree title="Permanent link"> </a></h2> <p>Returns total amount of the free space on the filesystem where the files of the databases located. See also <code class=syntax>filesystemAvailable</code></p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemFree</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>Amount of free space in bytes.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemFree</span><span class=p>())</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=ss>"Free space"</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemFree</span><span class=p>())</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=ss>"Type"</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Free space─┬─Type───┐
│ 32.39 GiB  │ UInt64 │
└────────────┴────────┘
</code></pre></div> <h2 id=filesystemcapacity>filesystemCapacity<a class=headerlink href=../amp/#filesystemcapacity title="Permanent link"> </a></h2> <p>Returns the capacity of the filesystem in bytes. For evaluation, the <a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-path>path</a> to the data directory must be configured.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemCapacity</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>Capacity information of the filesystem in bytes.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemCapacity</span><span class=p>())</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=ss>"Capacity"</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemCapacity</span><span class=p>())</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=ss>"Type"</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Capacity──┬─Type───┐
│ 39.32 GiB │ UInt64 │
└───────────┴────────┘
</code></pre></div> <h2 id=initializeaggregation>initializeAggregation<a class=headerlink href=../amp/#initializeaggregation title="Permanent link"> </a></h2> <p>Calculates result of aggregate function based on single value. It is intended to use this function to initialize aggregate functions with combinator <a href=../../../aggregate-functions/combinators/amp/#agg-functions-combinator-state>-State</a>. You can create states of aggregate functions and insert them to columns of type <a href=../../../data-types/aggregatefunction/amp/#data-type-aggregatefunction>AggregateFunction</a> or use initialized aggregates as default values.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>initializeAggregation</span><span class=w> </span><span class=p>(</span><span class=n>aggregate_function</span><span class=p>,</span><span class=w> </span><span class=n>arg1</span><span class=p>,</span><span class=w> </span><span class=n>arg2</span><span class=p>,</span><span class=w> </span><span class=p>...,</span><span class=w> </span><span class=n>argN</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>aggregate_function</code> — Name of the aggregation function to initialize. <a href=../../../data-types/string/amp/ >String</a>.</li> <li><code class=syntax>arg</code> — Arguments of aggregate function.</li> </ul> <p><strong>Returned value(s)</strong></p> <ul> <li>Result of aggregation for every row passed to the function.</li> </ul> <p>The return type is the same as the return type of function, that <code class=syntax>initializeAgregation</code> takes as first argument.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>uniqMerge</span><span class=p>(</span><span class=k>state</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'uniqState'</span><span class=p>,</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>state</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>10000</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─uniqMerge(state)─┐
│                3 │
└──────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>finalizeAggregation</span><span class=p>(</span><span class=k>state</span><span class=p>),</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=k>state</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>state</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(state)─┬─toTypeName(state)─────────────┐
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
│                          2 │ AggregateFunction(sum, UInt8) │
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
└────────────────────────────┴───────────────────────────────┘
</code></pre></div> <p>Example with <code class=syntax>AggregatingMergeTree</code> table engine and <code class=syntax>AggregateFunction</code> column:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>metrics</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=k>key</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>value</span><span class=w> </span><span class=n>AggregateFunction</span><span class=p>(</span><span class=k>sum</span><span class=p>,</span><span class=w> </span><span class=n>UInt64</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span><span class=w> </span><span class=n>toUInt64</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>AggregatingMergeTree</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>key</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>metrics</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span><span class=w> </span><span class=n>toUInt64</span><span class=p>(</span><span class=mi>42</span><span class=p>)))</span><span class=w></span>
</code></pre></div> <p><strong>See Also</strong><br> - <a href=../../array-functions/amp/#arrayreduce>arrayReduce</a></p> <h2 id=function-finalizeaggregation>finalizeAggregation<a class=headerlink href=../amp/#function-finalizeaggregation title="Permanent link"> </a></h2> <p>Takes state of aggregate function. Returns result of aggregation (or finalized state when using<a href=../../../aggregate-functions/combinators/amp/#agg-functions-combinator-state>-State</a> combinator).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>finalizeAggregation</span><span class=p>(</span><span class=k>state</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>state</code> — State of aggregation. <a href=../../../data-types/aggregatefunction/amp/#data-type-aggregatefunction>AggregateFunction</a>.</li> </ul> <p><strong>Returned value(s)</strong></p> <ul> <li>Value/values that was aggregated.</li> </ul> <p>Type: Value of any types that was aggregated.</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>finalizeAggregation</span><span class=p>((</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>countState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)));</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(_subquery16)─┐
│                               10 │
└──────────────────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>finalizeAggregation</span><span class=p>((</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)));</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(_subquery20)─┐
│                               45 │
└──────────────────────────────────┘
</code></pre></div> <p>Note that <code class=syntax>NULL</code> values are ignored.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>finalizeAggregation</span><span class=p>(</span><span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'anyState'</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>]));</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(arrayReduce('anyState', [NULL, 2, 3]))─┐
│                                                          2 │
└────────────────────────────────────────────────────────────┘
</code></pre></div> <p>Combined example:</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span><span class=w> </span><span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span><span class=w> </span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>one_row_sum_state</span><span class=w></span>
<span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=nb>number</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>finalizeAggregation</span><span class=p>(</span><span class=n>one_row_sum_state</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>one_row_sum</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>runningAccumulate</span><span class=p>(</span><span class=n>one_row_sum_state</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>cumulative_sum</span><span class=w></span>
<span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─one_row_sum─┬─cumulative_sum─┐
│      0 │           0 │              0 │
│      1 │           1 │              1 │
│      2 │           2 │              3 │
│      3 │           3 │              6 │
│      4 │           4 │             10 │
│      5 │           5 │             15 │
│      6 │           6 │             21 │
│      7 │           7 │             28 │
│      8 │           8 │             36 │
│      9 │           9 │             45 │
└────────┴─────────────┴────────────────┘
</code></pre></div> <p><strong>See Also</strong><br> - <a href=../../array-functions/amp/#arrayreduce>arrayReduce</a><br> - <a href=../amp/#initializeaggregation>initializeAggregation</a></p> <h2 id=runningaccumulate>runningAccumulate<a class=headerlink href=../amp/#runningaccumulate title="Permanent link"> </a></h2> <p>Accumulates states of an aggregate function for each row of a data block.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Warning</p> <p>The state is reset for each new data block.</p> </div> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>runningAccumulate</span><span class=p>(</span><span class=n>agg_state</span><span class=p>[,</span><span class=w> </span><span class=k>grouping</span><span class=p>]);</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>agg_state</code> — State of the aggregate function. <a href=../../../data-types/aggregatefunction/amp/#data-type-aggregatefunction>AggregateFunction</a>.</li> <li><code class=syntax>grouping</code> — Grouping key. Optional. The state of the function is reset if the <code class=syntax>grouping</code> value is changed. It can be any of the <a href=../../../data-types/amp/ >supported data types</a> for which the equality operator is defined.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Each resulting row contains a result of the aggregate function, accumulated for all the input rows from 0 to the current position. <code class=syntax>runningAccumulate</code> resets states for each new data block or when the <code class=syntax>grouping</code> value changes.</li> </ul> <p>Type depends on the aggregate function used.</p> <p><strong>Examples</strong></p> <p>Consider how you can use <code class=syntax>runningAccumulate</code> to find the cumulative sum of numbers without and with grouping.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>k</span><span class=p>,</span><span class=w> </span><span class=n>runningAccumulate</span><span class=p>(</span><span class=n>sum_k</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>res</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>k</span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>k</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>sum_k</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>k</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─k─┬─res─┐
│ 0 │   0 │
│ 1 │   1 │
│ 2 │   3 │
│ 3 │   6 │
│ 4 │  10 │
│ 5 │  15 │
│ 6 │  21 │
│ 7 │  28 │
│ 8 │  36 │
│ 9 │  45 │
└───┴─────┘
</code></pre></div> <p>The subquery generates <code class=syntax>sumState</code> for every number from <code class=syntax>0</code> to <code class=syntax>9</code>. <code class=syntax>sumState</code> returns the state of the <a href=../../../aggregate-functions/reference/sum/amp/ >sum</a> function that contains the sum of a single number.</p> <p>The whole query does the following:</p> <ol> <li>For the first row, <code class=syntax>runningAccumulate</code> takes <code class=syntax>sumState(0)</code> and returns <code class=syntax>0</code>.</li> <li>For the second row, the function merges <code class=syntax>sumState(0)</code> and <code class=syntax>sumState(1)</code> resulting in <code class=syntax>sumState(0 + 1)</code>, and returns <code class=syntax>1</code> as a result.</li> <li>For the third row, the function merges <code class=syntax>sumState(0 + 1)</code> and <code class=syntax>sumState(2)</code> resulting in <code class=syntax>sumState(0 + 1 + 2)</code>, and returns <code class=syntax>3</code> as a result.</li> <li>The actions are repeated until the block ends.</li> </ol> <p>The following example shows the <code class=syntax>groupping</code> parameter usage:</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w></span>
<span class=w>    </span><span class=k>grouping</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>item</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>runningAccumulate</span><span class=p>(</span><span class=k>state</span><span class=p>,</span><span class=w> </span><span class=k>grouping</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>res</span><span class=w></span>
<span class=k>FROM</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=k>SELECT</span><span class=w></span>
<span class=w>        </span><span class=n>toInt8</span><span class=p>(</span><span class=nb>number</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>4</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>grouping</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nb>number</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>item</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>sumState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>state</span><span class=w></span>
<span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>15</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>item</span><span class=w></span>
<span class=w>    </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>item</span><span class=w> </span><span class=k>ASC</span><span class=w></span>
<span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─grouping─┬─item─┬─res─┐
│        0 │    0 │   0 │
│        0 │    1 │   1 │
│        0 │    2 │   3 │
│        0 │    3 │   6 │
│        1 │    4 │   4 │
│        1 │    5 │   9 │
│        1 │    6 │  15 │
│        1 │    7 │  22 │
│        2 │    8 │   8 │
│        2 │    9 │  17 │
│        2 │   10 │  27 │
│        2 │   11 │  38 │
│        3 │   12 │  12 │
│        3 │   13 │  25 │
│        3 │   14 │  39 │
└──────────┴──────┴─────┘
</code></pre></div> <p>As you can see, <code class=syntax>runningAccumulate</code> merges states for each group of rows separately.</p> <h2 id=joinget>joinGet<a class=headerlink href=../amp/#joinget title="Permanent link"> </a></h2> <p>The function lets you extract data from the table the same way as from a <a href=../../../dictionaries/amp/ >dictionary</a>.</p> <p>Gets data from <a href=../../../../engines/table-engines/special/join/amp/#creating-a-table>Join</a> tables using the specified join key.</p> <p>Only supports tables created with the <code class=syntax>ENGINE = Join(ANY, LEFT, &lt;join_keys&gt;)</code> statement.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>joinGet</span><span class=p>(</span><span class=n>join_storage_table_name</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>value_column</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=n>join_keys</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>join_storage_table_name</code> — an <a href=../../../syntax/amp/#syntax-identifiers>identifier</a> indicates where search is performed. The identifier is searched in the default database (see parameter <code class=syntax>default_database</code> in the config file). To override the default database, use the <code class=syntax>USE db_name</code> or specify the database and the table through the separator <code class=syntax>db_name.db_table</code>, see the example.</li> <li><code class=syntax>value_column</code> — name of the column of the table that contains required data.</li> <li><code class=syntax>join_keys</code> — list of keys.</li> </ul> <p><strong>Returned value</strong></p> <p>Returns list of values corresponded to list of keys.</p> <p>If certain does not exist in source table then <code class=syntax>0</code> or <code class=syntax>null</code> will be returned based on <a href=../../../../operations/settings/settings/amp/#join_use_nulls>join_use_nulls</a> setting.</p> <p>More info about <code class=syntax>join_use_nulls</code> in <a href=../../../../engines/table-engines/special/join/amp/ >Join operation</a>.</p> <p><strong>Example</strong></p> <p>Input table:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>db_test</span><span class=w></span>
<span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>val</span><span class=o>`</span><span class=w> </span><span class=n>UInt32</span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>Join</span><span class=p>(</span><span class=k>ANY</span><span class=p>,</span><span class=w> </span><span class=k>LEFT</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=n>SETTINGS</span><span class=w> </span><span class=n>join_use_nulls</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w></span>
<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>11</span><span class=p>)(</span><span class=mi>2</span><span class=p>,</span><span class=mi>12</span><span class=p>)(</span><span class=mi>4</span><span class=p>,</span><span class=mi>13</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─id─┬─val─┐
│  4 │  13 │
│  2 │  12 │
│  1 │  11 │
└────┴─────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>joinGet</span><span class=p>(</span><span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span><span class=p>,</span><span class=s1>'val'</span><span class=p>,</span><span class=n>toUInt32</span><span class=p>(</span><span class=nb>number</span><span class=p>))</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span><span class=w> </span><span class=n>SETTINGS</span><span class=w> </span><span class=n>join_use_nulls</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─joinGet(db_test.id_val, 'val', toUInt32(number))─┐
│                                                0 │
│                                               11 │
│                                               12 │
│                                                0 │
└──────────────────────────────────────────────────┘
</code></pre></div> <h2 id=function-modelevaluate>modelEvaluate(model_name, …)<a class=headerlink href=../amp/#function-modelevaluate title="Permanent link"> </a></h2> <p>Evaluate external model.<br> Accepts a model name and model arguments. Returns Float64.</p> <h2 id=throwifx-custom-message>throwIf(x[, custom_message])<a class=headerlink href=../amp/#throwifx-custom-message title="Permanent link"> </a></h2> <p>Throw an exception if the argument is non zero.<br> custom_message - is an optional parameter: a constant string, provides an error message</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>throwIf</span><span class=p>(</span><span class=nb>number</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>'Too many'</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>↙ Progress: 0.00 rows, 0.00 B (0.00 rows/s., 0.00 B/s.) Received exception from server (version 19.14.1):
Code: 395. DB::Exception: Received from localhost:9000. DB::Exception: Too many.
</code></pre></div> <h2 id=identity>identity<a class=headerlink href=../amp/#identity title="Permanent link"> </a></h2> <p>Returns the same value that was used as its argument. Used for debugging and testing, allows to cancel using index, and get the query performance of a full scan. When query is analyzed for possible use of index, the analyzer does not look inside <code class=syntax>identity</code> functions. Also constant folding is not applied too.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>identity</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=k>identity</span><span class=p>(</span><span class=mi>42</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─identity(42)─┐
│           42 │
└──────────────┘
</code></pre></div> <h2 id=randomascii>randomPrintableASCII<a class=headerlink href=../amp/#randomascii title="Permanent link"> </a></h2> <p>Generates a string with a random set of <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer" target=_blank>ASCII</a> printable characters.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomPrintableASCII</span><span class=p>(</span><span class=k>length</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>length</code> — Resulting string length. Positive integer.<div class=codehilite><pre><span></span><code class=syntax><span class=k>If</span> <span class=nv>you</span> <span class=nv>pass</span> `<span class=nv>length</span> <span class=o>&lt;</span> <span class=mi>0</span>`, <span class=nv>behavior</span> <span class=nv>of</span> <span class=nv>the</span> <span class=nv>function</span> <span class=nv>is</span> <span class=nv>undefined</span>.
</code></pre></div> </li> </ul> <p><strong>Returned value</strong></p> <ul> <li>String with a random set of <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer" target=_blank>ASCII</a> printable characters.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a></p> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=w> </span><span class=n>randomPrintableASCII</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>str</span><span class=p>,</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>numbers</span><span class=w> </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>3</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─str────────────────────────────┬─length(randomPrintableASCII(30))─┐
│      0 │ SuiCOSTvC0csfABSw=UcSzp2.`rv8x │                               30 │
│      1 │ 1Ag NlJ &amp;RCN:*&gt;HVPG;PE-nO"SUFD │                               30 │
│      2 │ /"+&lt;"wUTh:=LjJ Vm!c&amp;hI*m#XTfzz │                               30 │
└────────┴────────────────────────────────┴──────────────────────────────────┘
</code></pre></div> <h2 id=randomstring>randomString<a class=headerlink href=../amp/#randomstring title="Permanent link"> </a></h2> <p>Generates a binary string of the specified length filled with random bytes (including zero bytes).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomString</span><span class=p>(</span><span class=k>length</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>length</code> — String length. Positive integer.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>String filled with random bytes.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>randomString</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>str</span><span class=p>,</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>numbers</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=n>FORMAT</span><span class=w> </span><span class=n>Vertical</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
str: 3 G  :   pT ?w тi  k aV f6
len: 30

Row 2:
──────
str: 9 ,]    ^   )  ]??  8
len: 30
</code></pre></div> <p><strong>See Also</strong></p> <ul> <li><a href=../../../table-functions/generate/amp/#generaterandom>generateRandom</a></li> <li><a href=.././amp/#randomascii>randomPrintableASCII</a></li> </ul> <h2 id=randomfixedstring>randomFixedString<a class=headerlink href=../amp/#randomfixedstring title="Permanent link"> </a></h2> <p>Generates a binary string of the specified length filled with random bytes (including zero bytes).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomFixedString</span><span class=p>(</span><span class=k>length</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>length</code> — String length in bytes. <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>Returned value(s)</strong></p> <ul> <li>String filled with random bytes.</li> </ul> <p>Type: <a href=../../../data-types/fixedstring/amp/ >FixedString</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>randomFixedString</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>rnd</span><span class=p>,</span><span class=w> </span><span class=n>toTypeName</span><span class=p>(</span><span class=n>rnd</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─rnd──────┬─toTypeName(randomFixedString(13))─┐
│ j▒h㋖HɨZ'▒ │ FixedString(13)                 │
└──────────┴───────────────────────────────────┘
</code></pre></div> <h2 id=randomstringutf8>randomStringUTF8<a class=headerlink href=../amp/#randomstringutf8 title="Permanent link"> </a></h2> <p>Generates a random string of a specified length. Result string contains valid UTF-8 code points. The value of code points may be outside of the range of assigned Unicode.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomStringUTF8</span><span class=p>(</span><span class=k>length</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>length</code> — Required length of the resulting string in code points. <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>Returned value(s)</strong></p> <ul> <li>UTF-8 random string.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>randomStringUTF8</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─randomStringUTF8(13)─┐
│ 𘤗𙉝д兠庇󡅴󱱎󦐪􂕌𔊹𓰛   │
└──────────────────────┘
</code></pre></div> <h2 id=getSetting>getSetting<a class=headerlink href=../amp/#getSetting title="Permanent link"> </a></h2> <p>Returns the current value of a <a href=../../../../operations/settings/amp/#custom_settings>custom setting</a>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getSetting</span><span class=p>(</span><span class=s1>'custom_setting'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>Parameter</strong></p> <ul> <li><code class=syntax>custom_setting</code> — The setting name. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The setting current value.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span><span class=w> </span><span class=n>custom_a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>123</span><span class=p>;</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>getSetting</span><span class=p>(</span><span class=s1>'custom_a'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>Result</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=mf>123</span><span class=w></span>
</code></pre></div> <p><strong>See Also</strong></p> <ul> <li><a href=../../../../operations/settings/amp/#custom_settings>Custom Settings</a></li> </ul> <h2 id=is-decimal-overflow>isDecimalOverflow<a class=headerlink href=../amp/#is-decimal-overflow title="Permanent link"> </a></h2> <p>Checks whether the <a href=../../../data-types/decimal/amp/ >Decimal</a> value is out of its (or specified) precision.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>d</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=n>p</span><span class=p>])</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>d</code> — value. <a href=../../../data-types/decimal/amp/ >Decimal</a>.</li> <li><code class=syntax>p</code> — precision. Optional. If omitted, the initial precision of the first argument is used. Using of this paratemer could be helpful for data extraction to another DBMS or file. <a href=../../../data-types/int-uint/amp/#uint-ranges>UInt8</a>.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li><code class=syntax>1</code> — Decimal value has more digits then it's precision allow,</li> <li><code class=syntax>0</code> — Decimal value satisfies the specified precision.</li> </ul> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1000000000</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>),</span><span class=w> </span><span class=mi>9</span><span class=p>),</span><span class=w></span>
<span class=w>       </span><span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1000000000</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>)),</span><span class=w></span>
<span class=w>       </span><span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1000000000</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>),</span><span class=w> </span><span class=mi>9</span><span class=p>),</span><span class=w></span>
<span class=w>       </span><span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1000000000</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>1   1   1   1
</code></pre></div> <h2 id=count-digits>countDigits<a class=headerlink href=../amp/#count-digits title="Permanent link"> </a></h2> <p>Returns number of decimal digits you need to represent the value.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>countDigits</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>x</code> — <a href=../../../data-types/int-uint/amp/ >Int</a> or <a href=../../../data-types/decimal/amp/ >Decimal</a> value.</li> </ul> <p><strong>Returned value</strong></p> <p>Number of digits.</p> <p>Type: <a href=../../../data-types/int-uint/amp/#uint-ranges>UInt8</a>.</p> <p>!!! note "Note"<br> For <code class=syntax>Decimal</code> values takes into account their scales: calculates result over underlying integer type which is <code class=syntax>(value * scale)</code>. For example: <code class=syntax>countDigits(42) = 2</code>, <code class=syntax>countDigits(42.000) = 5</code>, <code class=syntax>countDigits(0.04200) = 4</code>. I.e. you may check decimal overflow for <code class=syntax>Decimal64</code> with <code class=syntax>countDecimal(x) &gt; 18</code>. It's a slow variant of <a href=../amp/#is-decimal-overflow>isDecimalOverflow</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>)),</span><span class=w> </span><span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>)),</span><span class=w></span>
<span class=w>       </span><span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>18</span><span class=p>)),</span><span class=w> </span><span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal64</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>18</span><span class=p>)),</span><span class=w></span>
<span class=w>       </span><span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal128</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>38</span><span class=p>)),</span><span class=w> </span><span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal128</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>38</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>10  10  19  19  39  39
</code></pre></div> <h2 id=error-code-to-name>errorCodeToName<a class=headerlink href=../amp/#error-code-to-name title="Permanent link"> </a></h2> <p><strong>Returned value</strong></p> <ul> <li>Variable name for the error code.</li> </ul> <p>Type: <a href=../../../data-types/lowcardinality/amp/ >LowCardinality(String)</a>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>errorCodeToName</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>UNSUPPORTED_METHOD
</code></pre></div> <h2 id=tcpPort>tcpPort<a class=headerlink href=../amp/#tcpPort title="Permanent link"> </a></h2> <p>Returns <a href=../../../../interfaces/tcp/amp/ >native interface</a> TCP port number listened by this server.<br> If it is executed in the context of a distributed table, then it generates a normal column, otherwise it produces a constant value.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>tcpPort</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li>None.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The TCP port number.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt16</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>tcpPort</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─tcpPort()─┐
│      9000 │
└───────────┘
</code></pre></div> <p><strong>See Also</strong></p> <ul> <li><a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-tcp_port>tcp_port</a></li> </ul> <h2 id=current-profiles>currentProfiles<a class=headerlink href=../amp/#current-profiles title="Permanent link"> </a></h2> <p>Returns a list of the current <a href=../../../../operations/access-rights/amp/#settings-profiles-management>settings profiles</a> for the current user. </p> <p>The command <a href=../../../statements/set/amp/#query-set>SET PROFILE</a> could be used to change the current setting profile. If the command <code class=syntax>SET PROFILE</code> was not used the function returns the profiles specified at the current user's definition (see <a href=../../../statements/create/user/amp/#create-user-statement>CREATE USER</a>).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>currentProfiles</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>List of the current user settings profiles. </li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=enabled-profiles>enabledProfiles<a class=headerlink href=../amp/#enabled-profiles title="Permanent link"> </a></h2> <p>Returns settings profiles, assigned to the current user both explicitly and implicitly. Explicitly assigned profiles are the same as returned by the <a href=../amp/#current-profiles>currentProfiles</a> function. Implicitly assigned profiles include parent profiles of other assigned profiles, profiles assigned via granted roles, profiles assigned via their own settings, and the main default profile (see the <code class=syntax>default_profile</code> section in the main server configuration file).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>enabledProfiles</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>List of the enabled settings profiles. </li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=default-profiles>defaultProfiles<a class=headerlink href=../amp/#default-profiles title="Permanent link"> </a></h2> <p>Returns all the profiles specified at the current user's definition (see <a href=../../../statements/create/user/amp/#create-user-statement>CREATE USER</a> statement).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultProfiles</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>List of the default settings profiles. </li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=current-roles>currentRoles<a class=headerlink href=../amp/#current-roles title="Permanent link"> </a></h2> <p>Returns the names of the roles which are current for the current user. The current roles can be changed by the <a href=../../../statements/set-role/amp/#set-role-statement>SET ROLE</a> statement. If the <code class=syntax>SET ROLE</code> statement was not used, the function <code class=syntax>currentRoles</code> returns the same as <code class=syntax>defaultRoles</code>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>currentRoles</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>List of the current roles for the current user. </li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=enabled-roles>enabledRoles<a class=headerlink href=../amp/#enabled-roles title="Permanent link"> </a></h2> <p>Returns the names of the current roles and the roles, granted to some of the current roles.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>enabledRoles</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>List of the enabled roles for the current user. </li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=default-roles>defaultRoles<a class=headerlink href=../amp/#default-roles title="Permanent link"> </a></h2> <p>Returns the names of the roles which are enabled by default for the current user when he logins. Initially these are all roles granted to the current user (see <a href=../../../sql-reference/statements/grant/amp/#grant-select>GRANT</a>), but that can be changed with the <a href=../../../statements/set-role/amp/#set-default-role-statement>SET DEFAULT ROLE</a> statement. </p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultRoles</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>List of the default roles for the current user. </li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=getserverport>getServerPort<a class=headerlink href=../amp/#getserverport title="Permanent link"> </a></h2> <p>Returns the number of the server port. When the port is not used by the server, throws an exception.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getServerPort</span><span class=p>(</span><span class=n>port_name</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li> <p><code class=syntax>port_name</code> — The name of the server port. <a href=../../../data-types/string/amp/#string>String</a>. Possible values:</p> <ul> <li>'tcp_port'</li> <li>'tcp_port_secure'</li> <li>'http_port'</li> <li>'https_port'</li> <li>'interserver_http_port'</li> <li>'interserver_https_port'</li> <li>'mysql_port'</li> <li>'postgresql_port'</li> <li>'grpc_port'</li> <li>'prometheus.port'</li> </ul> </li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The number of the server port.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt16</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>getServerPort</span><span class=p>(</span><span class=s1>'tcp_port'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─getServerPort('tcp_port')─┐
│ 9000                      │
└───────────────────────────┘
</code></pre></div> <h2 id=query-id>queryID<a class=headerlink href=../amp/#query-id title="Permanent link"> </a></h2> <p>Returns the ID of the current query. Other parameters of a query can be extracted from the <a href=../../../../operations/system-tables/query_log/amp/ >system.query_log</a> table via <code class=syntax>query_id</code>.</p> <p>In contrast to <a href=../amp/#initial-query-id>initialQueryID</a> function, <code class=syntax>queryID</code> can return different results on different shards (see example).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>queryID</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>The ID of the current query.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a></p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=p>(</span><span class=n>str</span><span class=w> </span><span class=n>String</span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Log</span><span class=p>;</span><span class=w></span>
<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>'a'</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>t</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>queryID</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>remote</span><span class=p>(</span><span class=s1>'127.0.0.{1..3}'</span><span class=p>,</span><span class=w> </span><span class=n>currentDatabase</span><span class=p>(),</span><span class=w> </span><span class=s1>'tmp'</span><span class=p>)</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>queryID</span><span class=p>());</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│ 3       │
└─────────┘
</code></pre></div> <h2 id=initial-query-id>initialQueryID<a class=headerlink href=../amp/#initial-query-id title="Permanent link"> </a></h2> <p>Returns the ID of the initial current query. Other parameters of a query can be extracted from the <a href=../../../../operations/system-tables/query_log/amp/ >system.query_log</a> table via <code class=syntax>initial_query_id</code>.</p> <p>In contrast to <a href=../amp/#query-id>queryID</a> function, <code class=syntax>initialQueryID</code> returns the same results on different shards (see example).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>initialQueryID</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>The ID of the initial current query.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a></p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=p>(</span><span class=n>str</span><span class=w> </span><span class=n>String</span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Log</span><span class=p>;</span><span class=w></span>
<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>'a'</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>t</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>initialQueryID</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>remote</span><span class=p>(</span><span class=s1>'127.0.0.{1..3}'</span><span class=p>,</span><span class=w> </span><span class=n>currentDatabase</span><span class=p>(),</span><span class=w> </span><span class=s1>'tmp'</span><span class=p>)</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>queryID</span><span class=p>());</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│ 1       │
└─────────┘
</code></pre></div> <h2 id=shard-num>shardNum<a class=headerlink href=../amp/#shard-num title="Permanent link"> </a></h2> <p>Returns the index of a shard which processes a part of data for a distributed query. Indices are started from <code class=syntax>1</code>.<br> If a query is not distributed then constant value <code class=syntax>0</code> is returned.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>shardNum</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>Shard index or constant <code class=syntax>0</code>.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt32</a>.</p> <p><strong>Example</strong></p> <p>In the following example a configuration with two shards is used. The query is executed on the <a href=../../../../operations/system-tables/one/amp/ >system.one</a> table on every shard.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>shard_num_example</span><span class=w> </span><span class=p>(</span><span class=n>dummy</span><span class=w> </span><span class=n>UInt8</span><span class=p>)</span><span class=w> </span>
<span class=w>    </span><span class=n>ENGINE</span><span class=o>=</span><span class=n>Distributed</span><span class=p>(</span><span class=n>test_cluster_two_shards_localhost</span><span class=p>,</span><span class=w> </span><span class=k>system</span><span class=p>,</span><span class=w> </span><span class=n>one</span><span class=p>,</span><span class=w> </span><span class=n>dummy</span><span class=p>);</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=n>dummy</span><span class=p>,</span><span class=w> </span><span class=n>shardNum</span><span class=p>(),</span><span class=w> </span><span class=n>shardCount</span><span class=p>()</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>shard_num_example</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─dummy─┬─shardNum()─┬─shardCount()─┐
│     0 │          2 │            2 │
│     0 │          1 │            2 │
└───────┴────────────┴──────────────┘
</code></pre></div> <p><strong>See Also</strong></p> <ul> <li><a href=../../../../engines/table-engines/special/distributed/amp/ >Distributed Table Engine</a></li> </ul> <h2 id=shard-count>shardCount<a class=headerlink href=../amp/#shard-count title="Permanent link"> </a></h2> <p>Returns the total number of shards for a distributed query.<br> If a query is not distributed then constant value <code class=syntax>0</code> is returned.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>shardCount</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Returned value</strong></p> <ul> <li>Total number of shards or <code class=syntax>0</code>.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt32</a>.</p> <p><strong>See Also</strong></p> <ul> <li><a href=../amp/#shard-num>shardNum()</a> function example also contains <code class=syntax>shardCount()</code> function call.</li> </ul> <h2 id=getoskernelversion>getOSKernelVersion<a class=headerlink href=../amp/#getoskernelversion title="Permanent link"> </a></h2> <p>Returns a string with the current OS kernel version.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getOSKernelVersion</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li>None.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The current OS kernel version.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>getOSKernelVersion</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─getOSKernelVersion()────┐
│ Linux 4.15.0-55-generic │
└─────────────────────────┘
</code></pre></div> <h2 id=zookeepersessionuptime>zookeeperSessionUptime<a class=headerlink href=../amp/#zookeepersessionuptime title="Permanent link"> </a></h2> <p>Returns the uptime of the current ZooKeeper session in seconds.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>zookeeperSessionUptime</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li>None.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Uptime of the current ZooKeeper session in seconds.</li> </ul> <p>Type: <a href=../../../data-types/int-uint/amp/ >UInt32</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>zookeeperSessionUptime</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─zookeeperSessionUptime()─┐
│                      286 │
└──────────────────────────┘
</code></pre></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/38993f215f9186c1ac3505b1e09697cd9a468b5d" rel="external nofollow noreferrer" target="_blank" class="text-reset">38993f21</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/en/sql-reference/functions/other-functions/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

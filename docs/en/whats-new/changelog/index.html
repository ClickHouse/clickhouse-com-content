










    



    



    



    
    






    
        
        
    
    <!DOCTYPE html>
<html lang="en" data-version="master" data-single-page="false">
<head>
    
<meta charset="utf-8" />
<META http-equiv="Content-type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<title>2022 | ClickHouse Documentation</title>

<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/docs/images/logo-180x180.png" />

<meta property="og:title" content="2022 | ClickHouse Documentation"/>
<meta property="og:description" content="Table of Contents ClickHouse release v22.3-lts, 2022-03-17 ClickHouse release v22.2, 2022-02-17 ClickHouse release v22.1" />
<meta property="og:type" content="article" />

<meta property="og:image" content="https://clickhouse.com/docs/images/logo.png" />

<meta property="og:url" content="https://clickhouse.com/docs/en/whats-new/changelog/"/>
<link rel="canonical" href="https://clickhouse.com/docs/en/whats-new/changelog/" />

<link rel="amphtml" href="https://clickhouse.com/docs/en/whats-new/changelog/amp/" />

<link rel="search" href="/opensearch.xml" title="ClickHouse" type="application/opensearchdescription+xml" />

<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "2022 | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.com/docs/en/whats-new/changelog/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "2022 | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>


<meta name="description" content="Table of Contents ClickHouse release v22.3-lts, 2022-03-17 ClickHouse release v22.2, 2022-02-17 ClickHouse release v22.1" />

<meta name="keywords"
      content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics" />




    
    <link rel="alternate" hreflang="en" href="https://clickhouse.com/docs/en/whats-new/changelog/" />
    
    <link rel="alternate" hreflang="zh" href="https://clickhouse.com/docs/zh/whats-new/changelog/" />
    
    <link rel="alternate" hreflang="ru" href="https://clickhouse.com/docs/ru/whats-new/changelog/" />
    
    <link rel="alternate" hreflang="ja" href="https://clickhouse.com/docs/ja/whats-new/changelog/" />
    
    <link rel="alternate" hreflang="x-default" href="https://clickhouse.com/docs/en/whats-new/changelog/" />





    
    <link href="/docs/css/base.css?css_digest" media="all" rel="stylesheet" />


</head>
<body dir="ltr" data-spy="scroll" data-target="#toc" data-offset="80">
    
    
    
    <div class="page">
        
    
        <nav id="top-nav" class="navbar py-1 navbar-dark navbar-expand-md bg-dark-alt text-white fixed-top">
    <div class="container-fluid justify-content-between">
        <a class="d-block navbar-brand mr-3" href="/">
            <img id="docs-logo-icon" src="/docs/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"/>
        </a>
        <div class="w-100 navbar-text text-left d-none d-md-block">
            <h1 class="h3 m-0 p-0 d-inline">
                <a href="#" class="text-white text-decoration-none">
                    
                        2022
                    
                </a>
            </h1>
        </div>

        <div class="d-none d-md-block">
            <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end">
                
                    
                
                
                <li id="edit-wrapper" class="nav-item">
                    <a id="edit-link" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/en/whats-new/changelog/index.md" title="Edit this article" class="nav-link" rel="external nofollow noreferrer" target="_blank"><img src="/docs/images/mkdocs/edit.svg" alt="Edit this article" height="60" /></a>
                </li>
                
                <li class="nav-item">
                     <a class="nav-link" href="https://github.com/ClickHouse/ClickHouse" rel="external nofollow noreferrer">
                        <img src="/docs/images/index/github.svg" alt="GitHub repository" title="Go to GitHub" height="72" />
                    </a>
                </li>
                <li id="languages-wrapper" class="nav-item dropdown mr-3">
                    <div id="languages-dropdown">
                        <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href="#" id="lang-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img src="/docs/images/flags/en.svg" alt="English" title="English" width="60" class="d-inline-block mt-n1" />
                        </a>
                        <div class="dropdown-menu bg-dark" aria-labelledby="lang-dropdown">
                            
                            <a class="dropdown-item disabled"
                               href="/docs/en/whats-new/changelog/">
                                <img src="/docs/images/flags/en.svg" alt="" title="" width="32" class="d-inline-block mr-2" />English
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/zh/whats-new/changelog/">
                                <img src="/docs/images/flags/zh.svg" alt="" title="" width="32" class="d-inline-block mr-2" />中文
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/ru/whats-new/changelog/">
                                <img src="/docs/images/flags/ru.svg" alt="" title="" width="32" class="d-inline-block mr-2" />Русский
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/ja/whats-new/changelog/">
                                <img src="/docs/images/flags/ja.svg" alt="" title="" width="32" class="d-inline-block mr-2" />日本語
                            </a>
                            
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <form id="search-form" class="form-inline m-0">
            <div class="input-group">
                <div class="input-group-prepend w-100">
                    <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id="search-icon">
                        <img src="/docs/images/mkdocs/search.svg" />
                    </span>
                    <input id="docsearch-input" class="form-control bg-secondary-alt text-muted border-0 pl-1" type="search" placeholder="Search" aria-label="Search">
                </div>
            </div>
        </form>

        <button id="navbar-toggler" class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#sidebar" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</nav>
        <div class="docs container-fluid mt-3">
            <div class="row justify-content-end justify-content-xl-center">
                <div id="sidebar" class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto">
    <div class="overflow-auto">
        <div id="single-page-switch" class="btn-group mb-2 float-right" role="group" aria-label="Multi-page or single-page">
            <a href="../.." role="button" class="btn btn-dark active" aria-pressed="true">
                <img src="/docs/images/mkdocs/multi.svg" alt="Multi-page version" title="Multi-page version" />
            </a>
            <a href="../../single/" role="button" class="btn btn-dark-alt active" aria-pressed="true">
                <img src="/docs/images/mkdocs/single.svg" alt="Single-page version" title="Single-page version" />
            </a>
        </div>
        
        <nav id="sidebar-nav" class="nav flex-column mb-5">
            
                
                
                


<a href="#sidebar-sidebar-1" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-1" title="Introduction" class="nav-link text-light dropdown-toggle px-0">Introduction</a>
<div id="sidebar-sidebar-1" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../" title="Overview" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a>


    
        
        
        

    
        
        
        


<a href="../../introduction/distinctive-features/" title="Distinctive Features" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distinctive Features</a>


    
        
        
        


<a href="../../introduction/performance/" title="Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a>


    
        
        
        


<a href="../../introduction/history/" title="History" class="nav-link text-light text-wrap d-inline-block w-100 px-0">History</a>


    
        
        
        


<a href="../../introduction/adopters/" title="Adopters" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-2" title="Getting Started" class="nav-link text-light dropdown-toggle px-0">Getting Started</a>
<div id="sidebar-sidebar-2" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-2-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-2-2" title="Example Datasets" class="nav-link text-light dropdown-toggle px-0">Example Datasets</a>
<div id="sidebar-sidebar-2-2" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../getting-started/example-datasets/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../getting-started/example-datasets/github-events/" title="GitHub Events" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GitHub Events</a>


    
        
        
        


<a href="../../getting-started/example-datasets/metrica/" title="Web Analytics Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Web Analytics Data</a>


    
        
        
        


<a href="../../getting-started/example-datasets/recipes/" title="Recipes Dataset" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Recipes Dataset</a>


    
        
        
        


<a href="../../getting-started/example-datasets/star-schema/" title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a>


    
        
        
        


<a href="../../getting-started/example-datasets/wikistat/" title="WikiStat" class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a>


    
        
        
        


<a href="../../getting-started/example-datasets/criteo/" title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a>


    
        
        
        


<a href="../../getting-started/example-datasets/amplab-benchmark/" title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a>


    
        
        
        


<a href="../../getting-started/example-datasets/brown-benchmark/" title="Brown University Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Brown University Benchmark</a>


    
        
        
        


<a href="../../getting-started/example-datasets/nyc-taxi/" title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a>


    
        
        
        


<a href="../../getting-started/example-datasets/opensky/" title="OpenSky" class="nav-link text-light text-wrap d-inline-block w-100 px-0">OpenSky</a>


    
        
        
        


<a href="../../getting-started/example-datasets/uk-price-paid/" title="UK Property Price Paid" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UK Property Price Paid</a>


    
        
        
        


<a href="../../getting-started/example-datasets/cell-towers/" title="Cell Towers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cell Towers</a>


    
        
        
        


<a href="../../getting-started/example-datasets/menus/" title="Menus" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Menus</a>


    
        
        
        


<a href="../../getting-started/example-datasets/ontime/" title="OnTime" class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../getting-started/install/" title="Installation" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Installation</a>


    
        
        
        


<a href="../../getting-started/tutorial/" title="Tutorial" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a>


    
        
        
        


<a href="../../getting-started/playground/" title="Playground" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-3" title="Interfaces" class="nav-link text-light dropdown-toggle px-0">Interfaces</a>
<div id="sidebar-sidebar-3" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../interfaces/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../interfaces/cli/" title="Command-Line Client" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Command-Line Client</a>


    
        
        
        


<a href="../../interfaces/tcp/" title="Native Interface (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Native Interface (TCP)</a>


    
        
        
        


<a href="../../interfaces/http/" title="HTTP Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP Interface</a>


    
        
        
        


<a href="../../interfaces/grpc/" title="gRPC Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">gRPC Interface</a>


    
        
        
        


<a href="../../interfaces/mysql/" title="MySQL Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL Interface</a>


    
        
        
        


<a href="../../interfaces/formats/" title="Input and Output Formats" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Input and Output Formats</a>


    
        
        
        


<a href="../../interfaces/jdbc/" title="JDBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC Driver</a>


    
        
        
        


<a href="../../interfaces/odbc/" title="ODBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC Driver</a>


    
        
        
        


<a href="../../interfaces/cpp/" title="C++ Client Library" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ Client Library</a>


    
        
        
        


<a href="#sidebar-sidebar-3-11" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-3-11" title="Third-Party" class="nav-link text-light dropdown-toggle px-0">Third-Party</a>
<div id="sidebar-sidebar-3-11" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../interfaces/third-party/" title="Third-Party Interfaces" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party Interfaces</a>


    
        
        
        


<a href="../../interfaces/third-party/client-libraries/" title="Client Libraries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client Libraries</a>


    
        
        
        


<a href="../../interfaces/third-party/integrations/" title="Integrations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a>


    
        
        
        


<a href="../../interfaces/third-party/gui/" title="Visual Interfaces" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Visual Interfaces</a>


    
        
        
        


<a href="../../interfaces/third-party/proxy/" title="Proxies" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxies</a>


    
    </nav>
</div>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-4" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4" title="Engines" class="nav-link text-light dropdown-toggle px-0">Engines</a>
<div id="sidebar-sidebar-4" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-4-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-2" title="Table Engines" class="nav-link text-light dropdown-toggle px-0">Table Engines</a>
<div id="sidebar-sidebar-4-2" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="#sidebar-sidebar-4-2-1" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-2-1" title="Integrations" class="nav-link text-light dropdown-toggle px-0">Integrations</a>
<div id="sidebar-sidebar-4-2-1" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../engines/table-engines/integrations/" title="Table Engines for Integrations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Table Engines for Integrations</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/odbc/" title="ODBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/jdbc/" title="JDBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/hive/" title="Hive" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hive</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/mysql/" title="MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/mongodb/" title="MongoDB" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MongoDB</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/hdfs/" title="HDFS" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/s3/" title="S3" class="nav-link text-light text-wrap d-inline-block w-100 px-0">S3</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/sqlite/" title="SQLite" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SQLite</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/kafka/" title="Kafka" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/embedded-rocksdb/" title="EmbeddedRocksDB" class="nav-link text-light text-wrap d-inline-block w-100 px-0">EmbeddedRocksDB</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/rabbitmq/" title="RabbitMQ" class="nav-link text-light text-wrap d-inline-block w-100 px-0">RabbitMQ</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/postgresql/" title="PostgreSQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">PostgreSQL</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/ExternalDistributed/" title="ExternalDistributed" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ExternalDistributed</a>


    
        
        
        


<a href="../../engines/table-engines/integrations/materialized-postgresql/" title="MaterializedPostgreSQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedPostgreSQL</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../engines/table-engines/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="#sidebar-sidebar-4-2-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-2-3" title="MergeTree Family" class="nav-link text-light dropdown-toggle px-0">MergeTree Family</a>
<div id="sidebar-sidebar-4-2-3" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../engines/table-engines/mergetree-family/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/mergetree/" title="MergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/replication/" title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/custom-partitioning-key/" title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/replacingmergetree/" title="ReplacingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/summingmergetree/" title="SummingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/aggregatingmergetree/" title="AggregatingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/collapsingmergetree/" title="CollapsingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/" title="VersionedCollapsingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a>


    
        
        
        


<a href="../../engines/table-engines/mergetree-family/graphitemergetree/" title="GraphiteMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-4-2-4" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-2-4" title="Log Family" class="nav-link text-light dropdown-toggle px-0">Log Family</a>
<div id="sidebar-sidebar-4-2-4" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../engines/table-engines/log-family/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../engines/table-engines/log-family/stripelog/" title="StripeLog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a>


    
        
        
        


<a href="../../engines/table-engines/log-family/log/" title="Log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a>


    
        
        
        


<a href="../../engines/table-engines/log-family/tinylog/" title="TinyLog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-4-2-5" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-2-5" title="Special" class="nav-link text-light dropdown-toggle px-0">Special</a>
<div id="sidebar-sidebar-4-2-5" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../engines/table-engines/special/" title="Special Table Engines" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special Table Engines</a>


    
        
        
        


<a href="../../engines/table-engines/special/distributed/" title="Distributed" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a>


    
        
        
        


<a href="../../engines/table-engines/special/dictionary/" title="Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a>


    
        
        
        


<a href="../../engines/table-engines/special/merge/" title="Merge" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a>


    
        
        
        


<a href="../../engines/table-engines/special/file/" title="File" class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a>


    
        
        
        


<a href="../../engines/table-engines/special/null/" title="Null" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a>


    
        
        
        


<a href="../../engines/table-engines/special/set/" title="Set" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a>


    
        
        
        


<a href="../../engines/table-engines/special/join/" title="Join" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a>


    
        
        
        


<a href="../../engines/table-engines/special/url/" title="URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a>


    
        
        
        


<a href="../../engines/table-engines/special/view/" title="View" class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a>


    
        
        
        


<a href="../../engines/table-engines/special/materializedview/" title="MaterializedView" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a>


    
        
        
        


<a href="../../engines/table-engines/special/memory/" title="Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a>


    
        
        
        


<a href="../../engines/table-engines/special/buffer/" title="Buffer" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a>


    
        
        
        


<a href="../../engines/table-engines/special/external-data/" title="External Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Data</a>


    
        
        
        


<a href="../../engines/table-engines/special/generate/" title="GenerateRandom" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a>


    
    </nav>
</div>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-4-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-3" title="Database Engines" class="nav-link text-light dropdown-toggle px-0">Database Engines</a>
<div id="sidebar-sidebar-4-3" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../engines/database-engines/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../engines/database-engines/materialized-mysql/" title="MaterializedMySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedMySQL</a>


    
        
        
        


<a href="../../engines/database-engines/materialized-postgresql/" title="MaterializedPostgreSQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedPostgreSQL</a>


    
        
        
        


<a href="../../engines/database-engines/mysql/" title="MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a>


    
        
        
        


<a href="../../engines/database-engines/lazy/" title="Lazy" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a>


    
        
        
        


<a href="../../engines/database-engines/atomic/" title="Atomic" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a>


    
        
        
        


<a href="../../engines/database-engines/sqlite/" title="SQLite" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SQLite</a>


    
        
        
        


<a href="../../engines/database-engines/postgresql/" title="PostgreSQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">PostgreSQL</a>


    
        
        
        


<a href="../../engines/database-engines/replicated/" title="Replicated" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Replicated</a>


    
    </nav>
</div>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-5" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5" title="SQL Reference" class="nav-link text-light dropdown-toggle px-0">SQL Reference</a>
<div id="sidebar-sidebar-5" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-5-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-2" title="Statements" class="nav-link text-light dropdown-toggle px-0">Statements</a>
<div id="sidebar-sidebar-5-2" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-5-2-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-2-2" title="SELECT" class="nav-link text-light dropdown-toggle px-0">SELECT</a>
<div id="sidebar-sidebar-5-2-2" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/statements/select/" title="Overview" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a>


    
        
        
        


<a href="../../sql-reference/statements/select/all/" title="ALL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALL</a>


    
        
        
        


<a href="../../sql-reference/statements/select/array-join/" title="ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN</a>


    
        
        
        


<a href="../../sql-reference/statements/select/distinct/" title="DISTINCT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DISTINCT</a>


    
        
        
        


<a href="../../sql-reference/statements/select/except/" title="EXCEPT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXCEPT</a>


    
        
        
        


<a href="../../sql-reference/statements/select/format/" title="FORMAT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT</a>


    
        
        
        


<a href="../../sql-reference/statements/select/from/" title="FROM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">FROM</a>


    
        
        
        


<a href="../../sql-reference/statements/select/group-by/" title="GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GROUP BY</a>


    
        
        
        


<a href="../../sql-reference/statements/select/having/" title="HAVING" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HAVING</a>


    
        
        
        


<a href="../../sql-reference/statements/select/intersect/" title="INTERSECT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTERSECT</a>


    
        
        
        


<a href="../../sql-reference/statements/select/into-outfile/" title="INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE</a>


    
        
        
        


<a href="../../sql-reference/statements/select/join/" title="JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JOIN</a>


    
        
        
        


<a href="../../sql-reference/statements/select/limit/" title="LIMIT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a>


    
        
        
        


<a href="../../sql-reference/statements/select/limit-by/" title="LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT BY</a>


    
        
        
        


<a href="../../sql-reference/statements/select/offset/" title="OFFSET" class="nav-link text-light text-wrap d-inline-block w-100 px-0">OFFSET</a>


    
        
        
        


<a href="../../sql-reference/statements/select/order-by/" title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a>


    
        
        
        


<a href="../../sql-reference/statements/select/prewhere/" title="PREWHERE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE</a>


    
        
        
        


<a href="../../sql-reference/statements/select/sample/" title="SAMPLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE</a>


    
        
        
        


<a href="../../sql-reference/statements/select/union/" title="UNION" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UNION</a>


    
        
        
        


<a href="../../sql-reference/statements/select/where/" title="WHERE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">WHERE</a>


    
        
        
        


<a href="../../sql-reference/statements/select/with/" title="WITH" class="nav-link text-light text-wrap d-inline-block w-100 px-0">WITH</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/statements/insert-into/" title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a>


    
        
        
        


<a href="#sidebar-sidebar-5-2-4" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-2-4" title="CREATE" class="nav-link text-light dropdown-toggle px-0">CREATE</a>
<div id="sidebar-sidebar-5-2-4" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/statements/create/" title="Overview" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a>


    
        
        
        


<a href="../../sql-reference/statements/create/database/" title="DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DATABASE</a>


    
        
        
        


<a href="../../sql-reference/statements/create/table/" title="TABLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">TABLE</a>


    
        
        
        


<a href="../../sql-reference/statements/create/view/" title="VIEW" class="nav-link text-light text-wrap d-inline-block w-100 px-0">VIEW</a>


    
        
        
        


<a href="../../sql-reference/statements/create/dictionary/" title="DICTIONARY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DICTIONARY</a>


    
        
        
        


<a href="../../sql-reference/statements/create/function/" title="FUNCTION" class="nav-link text-light text-wrap d-inline-block w-100 px-0">FUNCTION</a>


    
        
        
        


<a href="../../sql-reference/statements/create/user/" title="USER" class="nav-link text-light text-wrap d-inline-block w-100 px-0">USER</a>


    
        
        
        


<a href="../../sql-reference/statements/create/role/" title="ROLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROLE</a>


    
        
        
        


<a href="../../sql-reference/statements/create/row-policy/" title="ROW POLICY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROW POLICY</a>


    
        
        
        


<a href="../../sql-reference/statements/create/quota/" title="QUOTA" class="nav-link text-light text-wrap d-inline-block w-100 px-0">QUOTA</a>


    
        
        
        


<a href="../../sql-reference/statements/create/settings-profile/" title="SETTINGS PROFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SETTINGS PROFILE</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-2-5" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-2-5" title="ALTER" class="nav-link text-light dropdown-toggle px-0">ALTER</a>
<div id="sidebar-sidebar-5-2-5" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/statements/alter/" title="ALTER" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/column/" title="COLUMN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">COLUMN</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/partition/" title="PARTITION" class="nav-link text-light text-wrap d-inline-block w-100 px-0">PARTITION</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/setting/" title="SETTING" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SETTING</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/delete/" title="DELETE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DELETE</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/update/" title="UPDATE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UPDATE</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/order-by/" title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/sample-by/" title="SAMPLE BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE BY</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/index/" title="INDEX" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INDEX</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/constraint/" title="CONSTRAINT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CONSTRAINT</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/ttl/" title="TTL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">TTL</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/user/" title="USER" class="nav-link text-light text-wrap d-inline-block w-100 px-0">USER</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/quota/" title="QUOTA" class="nav-link text-light text-wrap d-inline-block w-100 px-0">QUOTA</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/role/" title="ROLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROLE</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/row-policy/" title="ROW POLICY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROW POLICY</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/settings-profile/" title="SETTINGS PROFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SETTINGS PROFILE</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/projection/" title="PROJECTION" class="nav-link text-light text-wrap d-inline-block w-100 px-0">PROJECTION</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/view/" title="VIEW" class="nav-link text-light text-wrap d-inline-block w-100 px-0">VIEW</a>


    
        
        
        


<a href="../../sql-reference/statements/alter/comment/" title="COMMENT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">COMMENT</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/statements/system/" title="SYSTEM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a>


    
        
        
        


<a href="../../sql-reference/statements/show/" title="SHOW" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a>


    
        
        
        


<a href="../../sql-reference/statements/grant/" title="GRANT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRANT</a>


    
        
        
        


<a href="../../sql-reference/statements/explain/" title="EXPLAIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXPLAIN</a>


    
        
        
        


<a href="../../sql-reference/statements/revoke/" title="REVOKE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a>


    
        
        
        


<a href="../../sql-reference/statements/attach/" title="ATTACH" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ATTACH</a>


    
        
        
        


<a href="../../sql-reference/statements/check-table/" title="CHECK" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CHECK</a>


    
        
        
        

    
        
        
        


<a href="../../sql-reference/statements/describe-table/" title="DESCRIBE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DESCRIBE</a>


    
        
        
        


<a href="../../sql-reference/statements/detach/" title="DETACH" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DETACH</a>


    
        
        
        


<a href="../../sql-reference/statements/drop/" title="DROP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DROP</a>


    
        
        
        


<a href="../../sql-reference/statements/exists/" title="EXISTS" class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXISTS</a>


    
        
        
        


<a href="../../sql-reference/statements/kill/" title="KILL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">KILL</a>


    
        
        
        


<a href="../../sql-reference/statements/optimize/" title="OPTIMIZE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">OPTIMIZE</a>


    
        
        
        


<a href="../../sql-reference/statements/rename/" title="RENAME" class="nav-link text-light text-wrap d-inline-block w-100 px-0">RENAME</a>


    
        
        
        


<a href="../../sql-reference/statements/exchange/" title="EXCHANGE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXCHANGE</a>


    
        
        
        


<a href="../../sql-reference/statements/set/" title="SET" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SET</a>


    
        
        
        


<a href="../../sql-reference/statements/set-role/" title="SET ROLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SET ROLE</a>


    
        
        
        


<a href="../../sql-reference/statements/truncate/" title="TRUNCATE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">TRUNCATE</a>


    
        
        
        


<a href="../../sql-reference/statements/use/" title="USE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">USE</a>


    
        
        
        


<a href="../../sql-reference/statements/watch/" title="WATCH" class="nav-link text-light text-wrap d-inline-block w-100 px-0">WATCH</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/syntax/" title="Syntax" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Syntax</a>


    
        
        
        


<a href="../../sql-reference/distributed-ddl/" title="Distributed DDL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed DDL</a>


    
        
        
        


<a href="#sidebar-sidebar-5-5" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-5" title="Functions" class="nav-link text-light dropdown-toggle px-0">Functions</a>
<div id="sidebar-sidebar-5-5" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/functions/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../sql-reference/functions/arithmetic-functions/" title="Arithmetic" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmetic</a>


    
        
        
        


<a href="../../sql-reference/functions/array-functions/" title="Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arrays</a>


    
        
        
        


<a href="../../sql-reference/functions/comparison-functions/" title="Comparison" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparison</a>


    
        
        
        


<a href="../../sql-reference/functions/logical-functions/" title="Logical" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logical</a>


    
        
        
        


<a href="../../sql-reference/functions/type-conversion-functions/" title="Type Conversion" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Type Conversion</a>


    
        
        
        


<a href="../../sql-reference/functions/date-time-functions/" title="Dates and Times" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dates and Times</a>


    
        
        
        


<a href="../../sql-reference/functions/string-functions/" title="Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Strings</a>


    
        
        
        


<a href="../../sql-reference/functions/string-search-functions/" title="For Searching in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Searching in Strings</a>


    
        
        
        


<a href="../../sql-reference/functions/string-replace-functions/" title="For Replacing in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Replacing in Strings</a>


    
        
        
        


<a href="../../sql-reference/functions/conditional-functions/" title="Conditional" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditional</a>


    
        
        
        


<a href="../../sql-reference/functions/files/" title="Files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Files</a>


    
        
        
        


<a href="../../sql-reference/functions/math-functions/" title="Mathematical" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathematical</a>


    
        
        
        


<a href="../../sql-reference/functions/rounding-functions/" title="Rounding" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rounding</a>


    
        
        
        


<a href="../../sql-reference/functions/tuple-map-functions/" title="Working with maps" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with maps</a>


    
        
        
        


<a href="../../sql-reference/functions/splitting-merging-functions/" title="Splitting and Merging Strings and Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Splitting and Merging Strings and Arrays</a>


    
        
        
        


<a href="../../sql-reference/functions/bit-functions/" title="Bit" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a>


    
        
        
        


<a href="../../sql-reference/functions/bitmap-functions/" title="Bitmap" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a>


    
        
        
        


<a href="../../sql-reference/functions/hash-functions/" title="Hash" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a>


    
        
        
        


<a href="../../sql-reference/functions/random-functions/" title="Pseudo-Random Numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Pseudo-Random Numbers</a>


    
        
        
        


<a href="../../sql-reference/functions/encoding-functions/" title="Encoding" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encoding</a>


    
        
        
        


<a href="../../sql-reference/functions/uuid-functions/" title="UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a>


    
        
        
        


<a href="../../sql-reference/functions/url-functions/" title="URLs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">URLs</a>


    
        
        
        


<a href="../../sql-reference/functions/ip-address-functions/" title="IP Addresses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IP Addresses</a>


    
        
        
        


<a href="../../sql-reference/functions/json-functions/" title="JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON</a>


    
        
        
        


<a href="../../sql-reference/functions/ext-dict-functions/" title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a>


    
        
        
        


<a href="../../sql-reference/functions/ym-dict-functions/" title="Embedded Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Embedded Dictionaries</a>


    
        
        
        


<a href="../../sql-reference/functions/in-functions/" title="IN Operator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN Operator</a>


    
        
        
        


<a href="../../sql-reference/functions/array-join/" title="arrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a>


    
        
        
        


<a href="#sidebar-sidebar-5-5-30" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-5-30" title="Geo" class="nav-link text-light dropdown-toggle px-0">Geo</a>
<div id="sidebar-sidebar-5-5-30" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/functions/geo/coordinates/" title="Geographical Coordinates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Geographical Coordinates</a>


    
        
        
        

    
        
        
        


<a href="../../sql-reference/functions/geo/geohash/" title="Geohash" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Geohash</a>


    
        
        
        


<a href="../../sql-reference/functions/geo/h3/" title="H3 Indexes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">H3 Indexes</a>


    
        
        
        


<a href="../../sql-reference/functions/geo/s2/" title="S2 Geometry" class="nav-link text-light text-wrap d-inline-block w-100 px-0">S2 Geometry</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/functions/functions-for-nulls/" title="Nullable" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a>


    
        
        
        


<a href="../../sql-reference/functions/machine-learning-functions/" title="Machine Learning" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Machine Learning</a>


    
        
        
        


<a href="../../sql-reference/functions/introspection/" title="Introspection" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspection</a>


    
        
        
        


<a href="../../sql-reference/functions/tuple-functions/" title="Tuples" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuples</a>


    
        
        
        


<a href="../../sql-reference/functions/encryption-functions/" title="Encryption" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encryption</a>


    
        
        
        


<a href="../../sql-reference/functions/nlp-functions/" title="NLP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">NLP</a>


    
        
        
        


<a href="../../sql-reference/functions/other-functions/" title="Other" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a>


    
        
        
        


<a href="../../sql-reference/functions/time-window-functions/" title="Time Window" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Time Window</a>


    
        
        
        


<a href="../../sql-reference/functions/statistics/" title="Statistics" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statistics</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-6" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-6" title="Aggregate Functions" class="nav-link text-light dropdown-toggle px-0">Aggregate Functions</a>
<div id="sidebar-sidebar-5-6" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/aggregate-functions/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="#sidebar-sidebar-5-6-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-6-2" title="Reference" class="nav-link text-light dropdown-toggle px-0">Reference</a>
<div id="sidebar-sidebar-5-6-2" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/count/" title="count" class="nav-link text-light text-wrap d-inline-block w-100 px-0">count</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/min/" title="min" class="nav-link text-light text-wrap d-inline-block w-100 px-0">min</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/max/" title="max" class="nav-link text-light text-wrap d-inline-block w-100 px-0">max</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/sum/" title="sum" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sum</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/avg/" title="avg" class="nav-link text-light text-wrap d-inline-block w-100 px-0">avg</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/any/" title="any" class="nav-link text-light text-wrap d-inline-block w-100 px-0">any</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/stddevpop/" title="stddevPop" class="nav-link text-light text-wrap d-inline-block w-100 px-0">stddevPop</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/stddevsamp/" title="stddevSamp" class="nav-link text-light text-wrap d-inline-block w-100 px-0">stddevSamp</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/varpop/" title="varPop(x)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">varPop(x)</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/varsamp/" title="varSamp" class="nav-link text-light text-wrap d-inline-block w-100 px-0">varSamp</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/covarpop/" title="covarPop" class="nav-link text-light text-wrap d-inline-block w-100 px-0">covarPop</a>


    
        
        
        

    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/covarsamp/" title="covarSamp" class="nav-link text-light text-wrap d-inline-block w-100 px-0">covarSamp</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/anyheavy/" title="anyHeavy" class="nav-link text-light text-wrap d-inline-block w-100 px-0">anyHeavy</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/anylast/" title="anyLast" class="nav-link text-light text-wrap d-inline-block w-100 px-0">anyLast</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/argmin/" title="argMin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">argMin</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/argmax/" title="argMax" class="nav-link text-light text-wrap d-inline-block w-100 px-0">argMax</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/avgweighted/" title="avgWeighted" class="nav-link text-light text-wrap d-inline-block w-100 px-0">avgWeighted</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/corr/" title="corr" class="nav-link text-light text-wrap d-inline-block w-100 px-0">corr</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/exponentialmovingaverage/" title="exponentialMovingAverage" class="nav-link text-light text-wrap d-inline-block w-100 px-0">exponentialMovingAverage</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/grouparraysorted/" title="groupArraySorted" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArraySorted</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/topk/" title="topK" class="nav-link text-light text-wrap d-inline-block w-100 px-0">topK</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/topkweighted/" title="topKWeighted" class="nav-link text-light text-wrap d-inline-block w-100 px-0">topKWeighted</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/grouparray/" title="groupArray" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArray</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupuniqarray/" title="groupUniqArray" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupUniqArray</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/grouparrayinsertat/" title="groupArrayInsertAt" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayInsertAt</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/grouparraymovingsum/" title="groupArrayMovingSum" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayMovingSum</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/grouparraymovingavg/" title="groupArrayMovingAvg" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayMovingAvg</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/grouparraysample/" title="groupArraySample" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArraySample</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupbitand/" title="groupBitAnd" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitAnd</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupbitor/" title="groupBitOr" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitOr</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupbitxor/" title="groupBitXor" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitXor</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupbitmap/" title="groupBitmap" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitmap</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupbitmapand/" title="groupBitmapAnd" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitmapAnd</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupbitmapor/" title="groupBitmapOr" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitmapOr</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/groupbitmapxor/" title="groupBitmapXor" class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitmapXor</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/sumwithoverflow/" title="sumWithOverflow" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumWithOverflow</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/deltasum/" title="deltaSum" class="nav-link text-light text-wrap d-inline-block w-100 px-0">deltaSum</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/deltasumtimestamp/" title="deltaSumTimestamp" class="nav-link text-light text-wrap d-inline-block w-100 px-0">deltaSumTimestamp</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/summap/" title="sumMap" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumMap</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/minmap/" title="minMap" class="nav-link text-light text-wrap d-inline-block w-100 px-0">minMap</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/maxmap/" title="maxMap" class="nav-link text-light text-wrap d-inline-block w-100 px-0">maxMap</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/sumcount/" title="sumCount" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumCount</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/rankCorr/" title="rankCorr" class="nav-link text-light text-wrap d-inline-block w-100 px-0">rankCorr</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/sumkahan/" title="sumKahan" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumKahan</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/intervalLengthSum/" title="intervalLengthSum" class="nav-link text-light text-wrap d-inline-block w-100 px-0">intervalLengthSum</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/skewpop/" title="skewPop" class="nav-link text-light text-wrap d-inline-block w-100 px-0">skewPop</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/skewsamp/" title="skewSamp" class="nav-link text-light text-wrap d-inline-block w-100 px-0">skewSamp</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/kurtpop/" title="kurtPop" class="nav-link text-light text-wrap d-inline-block w-100 px-0">kurtPop</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/kurtsamp/" title="kurtSamp" class="nav-link text-light text-wrap d-inline-block w-100 px-0">kurtSamp</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/uniq/" title="uniq" class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniq</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/uniqexact/" title="uniqExact" class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqExact</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/uniqcombined/" title="uniqCombined" class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqCombined</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/uniqcombined64/" title="uniqCombined64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqCombined64</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/uniqhll12/" title="uniqHLL12" class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqHLL12</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/uniqthetasketch/" title="uniqTheta" class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqTheta</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantile/" title="quantile" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantile</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantiles/" title="quantiles Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantiles Functions</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantileexact/" title="quantileExact Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileExact Functions</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantileexactweighted/" title="quantileExactWeighted" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileExactWeighted</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantiletiming/" title="quantileTiming" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTiming</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantiletimingweighted/" title="quantileTimingWeighted" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTimingWeighted</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantiledeterministic/" title="quantileDeterministic" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileDeterministic</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantiletdigest/" title="quantileTDigest" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTDigest</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantiletdigestweighted/" title="quantileTDigestWeighted" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTDigestWeighted</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/quantilebfloat16/" title="quantileBFloat16" class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileBFloat16</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/median/" title="median" class="nav-link text-light text-wrap d-inline-block w-100 px-0">median</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/simplelinearregression/" title="simpleLinearRegression" class="nav-link text-light text-wrap d-inline-block w-100 px-0">simpleLinearRegression</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/stochasticlinearregression/" title="stochasticLinearRegression" class="nav-link text-light text-wrap d-inline-block w-100 px-0">stochasticLinearRegression</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/stochasticlogisticregression/" title="stochasticLogisticRegression" class="nav-link text-light text-wrap d-inline-block w-100 px-0">stochasticLogisticRegression</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/categoricalinformationvalue/" title="categoricalInformationValue" class="nav-link text-light text-wrap d-inline-block w-100 px-0">categoricalInformationValue</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/studentttest/" title="studentTTest" class="nav-link text-light text-wrap d-inline-block w-100 px-0">studentTTest</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/welchttest/" title="welchTTest" class="nav-link text-light text-wrap d-inline-block w-100 px-0">welchTTest</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/entropy/" title="entropy" class="nav-link text-light text-wrap d-inline-block w-100 px-0">entropy</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/meanztest/" title="meanZTest" class="nav-link text-light text-wrap d-inline-block w-100 px-0">meanZTest</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/mannwhitneyutest/" title="mannWhitneyUTest" class="nav-link text-light text-wrap d-inline-block w-100 px-0">mannWhitneyUTest</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/reference/sparkbar/" title="sparkbar" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sparkbar</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/combinators/" title="Combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Combinators</a>


    
        
        
        


<a href="../../sql-reference/aggregate-functions/parametric-functions/" title="Parametric" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-7" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-7" title="Table Functions" class="nav-link text-light dropdown-toggle px-0">Table Functions</a>
<div id="sidebar-sidebar-5-7" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/table-functions/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../sql-reference/table-functions/file/" title="file" class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a>


    
        
        
        


<a href="../../sql-reference/table-functions/merge/" title="merge" class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a>


    
        
        
        


<a href="../../sql-reference/table-functions/numbers/" title="numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a>


    
        
        
        


<a href="../../sql-reference/table-functions/remote/" title="remote" class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a>


    
        
        
        


<a href="../../sql-reference/table-functions/url/" title="url" class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a>


    
        
        
        


<a href="../../sql-reference/table-functions/mysql/" title="mysql" class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a>


    
        
        
        


<a href="../../sql-reference/table-functions/postgresql/" title="postgresql" class="nav-link text-light text-wrap d-inline-block w-100 px-0">postgresql</a>


    
        
        
        


<a href="../../sql-reference/table-functions/jdbc/" title="jdbc" class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a>


    
        
        
        


<a href="../../sql-reference/table-functions/odbc/" title="odbc" class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a>


    
        
        
        


<a href="../../sql-reference/table-functions/hdfs/" title="hdfs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a>


    
        
        
        


<a href="../../sql-reference/table-functions/s3/" title="s3" class="nav-link text-light text-wrap d-inline-block w-100 px-0">s3</a>


    
        
        
        


<a href="../../sql-reference/table-functions/input/" title="input" class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a>


    
        
        
        


<a href="../../sql-reference/table-functions/generate/" title="generateRandom" class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a>


    
        
        
        


<a href="../../sql-reference/table-functions/cluster/" title="cluster" class="nav-link text-light text-wrap d-inline-block w-100 px-0">cluster</a>


    
        
        
        


<a href="../../sql-reference/table-functions/view/" title="view" class="nav-link text-light text-wrap d-inline-block w-100 px-0">view</a>


    
        
        
        


<a href="../../sql-reference/table-functions/null/" title="null function" class="nav-link text-light text-wrap d-inline-block w-100 px-0">null function</a>


    
        
        
        


<a href="../../sql-reference/table-functions/dictionary/" title="dictionary function" class="nav-link text-light text-wrap d-inline-block w-100 px-0">dictionary function</a>


    
        
        
        


<a href="../../sql-reference/table-functions/hdfsCluster/" title="hdfsCluster" class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfsCluster</a>


    
        
        
        


<a href="../../sql-reference/table-functions/s3Cluster/" title="s3Cluster" class="nav-link text-light text-wrap d-inline-block w-100 px-0">s3Cluster</a>


    
        
        
        


<a href="../../sql-reference/table-functions/sqlite/" title="sqlite" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sqlite</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-8" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-8" title="Dictionaries" class="nav-link text-light dropdown-toggle px-0">Dictionaries</a>
<div id="sidebar-sidebar-5-8" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/dictionaries/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="#sidebar-sidebar-5-8-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-8-2" title="External Dictionaries" class="nav-link text-light dropdown-toggle px-0">External Dictionaries</a>
<div id="sidebar-sidebar-5-8-2" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts/" title="General Description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Description</a>


    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/" title="Configuring an External Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an External Dictionary</a>


    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/" title="Storing Dictionaries in Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing Dictionaries in Memory</a>


    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/" title="Dictionary Updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Updates</a>


    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/" title="Sources of External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of External Dictionaries</a>


    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/" title="Dictionary Key and Fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Key and Fields</a>


    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/" title="Hierarchical dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hierarchical dictionaries</a>


    
        
        
        


<a href="../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-polygon/" title="Polygon Dictionaries With Grids" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Polygon Dictionaries With Grids</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/dictionaries/internal-dicts/" title="Internal Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal Dictionaries</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-9" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-9" title="Data Types" class="nav-link text-light dropdown-toggle px-0">Data Types</a>
<div id="sidebar-sidebar-5-9" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/data-types/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../sql-reference/data-types/int-uint/" title="UInt8, UInt16, UInt32, UInt64, UInt128, UInt256, Int8, Int16, Int32, Int64, Int128, Int256" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, UInt128, UInt256, Int8, Int16, Int32, Int64, Int128, Int256</a>


    
        
        
        


<a href="../../sql-reference/data-types/float/" title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a>


    
        
        
        


<a href="../../sql-reference/data-types/decimal/" title="Decimal" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a>


    
        
        
        


<a href="../../sql-reference/data-types/boolean/" title="Boolean" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean</a>


    
        
        
        


<a href="../../sql-reference/data-types/string/" title="String" class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a>


    
        
        
        


<a href="../../sql-reference/data-types/fixedstring/" title="FixedString(N)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a>


    
        
        
        


<a href="../../sql-reference/data-types/uuid/" title="UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a>


    
        
        
        


<a href="../../sql-reference/data-types/date/" title="Date" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a>


    
        
        
        


<a href="../../sql-reference/data-types/date32/" title="Date32" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date32</a>


    
        
        
        


<a href="../../sql-reference/data-types/datetime/" title="DateTime" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a>


    
        
        
        


<a href="../../sql-reference/data-types/datetime64/" title="DateTime64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a>


    
        
        
        


<a href="../../sql-reference/data-types/enum/" title="Enum" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a>


    
        
        
        


<a href="../../sql-reference/data-types/lowcardinality/" title="LowCardinality" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LowCardinality</a>


    
        
        
        


<a href="../../sql-reference/data-types/array/" title="Array(T)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a>


    
        
        
        


<a href="../../sql-reference/data-types/aggregatefunction/" title="AggregateFunction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction</a>


    
        
        
        


<a href="#sidebar-sidebar-5-9-17" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-9-17" title="Nested Data Structures" class="nav-link text-light dropdown-toggle px-0">Nested Data Structures</a>
<div id="sidebar-sidebar-5-9-17" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../sql-reference/data-types/nested-data-structures/nested/" title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/data-types/tuple/" title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a>


    
        
        
        


<a href="../../sql-reference/data-types/nullable/" title="Nullable" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a>


    
        
        
        


<a href="#sidebar-sidebar-5-9-20" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-9-20" title="Special Data Types" class="nav-link text-light dropdown-toggle px-0">Special Data Types</a>
<div id="sidebar-sidebar-5-9-20" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../sql-reference/data-types/special-data-types/expression/" title="Expression" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a>


    
        
        
        


<a href="../../sql-reference/data-types/special-data-types/set/" title="Set" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a>


    
        
        
        


<a href="../../sql-reference/data-types/special-data-types/nothing/" title="Nothing" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a>


    
        
        
        


<a href="../../sql-reference/data-types/special-data-types/interval/" title="Interval" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-9-21" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-9-21" title="Domains" class="nav-link text-light dropdown-toggle px-0">Domains</a>
<div id="sidebar-sidebar-5-9-21" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/data-types/domains/" title="Overview" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a>


    
        
        
        


<a href="../../sql-reference/data-types/domains/ipv4/" title="IPv4" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a>


    
        
        
        


<a href="../../sql-reference/data-types/domains/ipv6/" title="IPv6" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/data-types/multiword-types/" title="Multiword Type Names" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Multiword Type Names</a>


    
        
        
        


<a href="../../sql-reference/data-types/geo/" title="Geo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Geo</a>


    
        
        
        


<a href="../../sql-reference/data-types/map/" title="Map(key, value)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Map(key, value)</a>


    
        
        
        


<a href="../../sql-reference/data-types/simpleaggregatefunction/" title="SimpleAggregateFunction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-10" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-10" title="Operators" class="nav-link text-light dropdown-toggle px-0">Operators</a>
<div id="sidebar-sidebar-5-10" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/operators/" title="Operators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a>


    
        
        
        


<a href="../../sql-reference/operators/exists/" title="EXISTS" class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXISTS</a>


    
        
        
        


<a href="../../sql-reference/operators/in/" title="IN Operators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN Operators</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../sql-reference/ansi/" title="ANSI Compatibility" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSI Compatibility</a>


    
        
        
        


<a href="#sidebar-sidebar-5-12" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-12" title="Window Functions" class="nav-link text-light dropdown-toggle px-0">Window Functions</a>
<div id="sidebar-sidebar-5-12" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../sql-reference/window-functions/" title="Window Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Window Functions</a>


    
    </nav>
</div>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-6" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-6" title="Guides" class="nav-link text-light dropdown-toggle px-0">Guides</a>
<div id="sidebar-sidebar-6" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../guides/" title="Overview" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a>


    
        
        
        


<a href="../../guides/apply-catboost-model/" title="Applying CatBoost Models" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Applying CatBoost Models</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-7" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7" title="Operations" class="nav-link text-light dropdown-toggle px-0">Operations</a>
<div id="sidebar-sidebar-7" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../operations/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../operations/requirements/" title="Requirements" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a>


    
        
        
        


<a href="../../operations/monitoring/" title="Monitoring" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a>


    
        
        
        


<a href="../../operations/ssl-zookeeper/" title="Secured communication with Zookeeper" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Secured communication with Zookeeper</a>


    
        
        
        


<a href="../../operations/troubleshooting/" title="Troubleshooting" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a>


    
        
        
        


<a href="../../operations/update/" title="ClickHouse Upgrade" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Upgrade</a>


    
        
        
        


<a href="../../operations/access-rights/" title="Access Control and Account Management" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access Control and Account Management</a>


    
        
        
        


<a href="#sidebar-sidebar-7-8" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-8" title="External User Authenticators and Directories" class="nav-link text-light dropdown-toggle px-0">External User Authenticators and Directories</a>
<div id="sidebar-sidebar-7-8" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../operations/external-authenticators/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../operations/external-authenticators/kerberos/" title="Kerberos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kerberos</a>


    
        
        
        


<a href="../../operations/external-authenticators/ldap/" title="LDAP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LDAP</a>


    
        
        
        


<a href="../../operations/external-authenticators/ssl-x509/" title="SSL X.509 certificate authentication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SSL X.509 certificate authentication</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../operations/backup/" title="Data Backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Backup</a>


    
        
        
        


<a href="../../operations/configuration-files/" title="Configuration Files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration Files</a>


    
        
        
        


<a href="../../operations/quotas/" title="Quotas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a>


    
        
        
        


<a href="#sidebar-sidebar-7-12" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-12" title="Optimizing Performance" class="nav-link text-light dropdown-toggle px-0">Optimizing Performance</a>
<div id="sidebar-sidebar-7-12" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../operations/optimizing-performance/sampling-query-profiler/" title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-7-13" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-13" title="System Tables" class="nav-link text-light dropdown-toggle px-0">System Tables</a>
<div id="sidebar-sidebar-7-13" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../operations/system-tables/" title="System Tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System Tables</a>


    
        
        
        


<a href="../../operations/system-tables/information_schema/" title="INFORMATION_SCHEMA" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INFORMATION_SCHEMA</a>


    
        
        
        


<a href="../../operations/system-tables/asynchronous_metric_log/" title="system.asynchronous_metric_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.asynchronous_metric_log</a>


    
        
        
        


<a href="../../operations/system-tables/asynchronous_metrics/" title="system.asynchronous_metrics" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.asynchronous_metrics</a>


    
        
        
        


<a href="../../operations/system-tables/clusters/" title="system.clusters" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.clusters</a>


    
        
        
        


<a href="../../operations/system-tables/columns/" title="system.columns" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.columns</a>


    
        
        
        


<a href="../../operations/system-tables/contributors/" title="system.contributors" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.contributors</a>


    
        
        
        


<a href="../../operations/system-tables/crash-log/" title="system.crash_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.crash_log</a>


    
        
        
        


<a href="../../operations/system-tables/current-roles/" title="system.current_roles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.current_roles</a>


    
        
        
        


<a href="../../operations/system-tables/data_skipping_indices/" title="system.data_skipping_indices" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.data_skipping_indices</a>


    
        
        
        


<a href="../../operations/system-tables/data_type_families/" title="system.data_type_families" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.data_type_families</a>


    
        
        
        


<a href="../../operations/system-tables/databases/" title="system.databases" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.databases</a>


    
        
        
        


<a href="../../operations/system-tables/detached_parts/" title="system.detached_parts" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.detached_parts</a>


    
        
        
        


<a href="../../operations/system-tables/dictionaries/" title="system.dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.dictionaries</a>


    
        
        
        


<a href="../../operations/system-tables/disks/" title="system.disks" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.disks</a>


    
        
        
        


<a href="../../operations/system-tables/distributed_ddl_queue/" title="system.distributed_ddl_queue" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.distributed_ddl_queue</a>


    
        
        
        


<a href="../../operations/system-tables/distribution_queue/" title="system.distribution_queue" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.distribution_queue</a>


    
        
        
        


<a href="../../operations/system-tables/enabled-roles/" title="system.enabled_roles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.enabled_roles</a>


    
        
        
        


<a href="../../operations/system-tables/errors/" title="system.errors" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.errors</a>


    
        
        
        


<a href="../../operations/system-tables/events/" title="system.events" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.events</a>


    
        
        
        


<a href="../../operations/system-tables/functions/" title="system.functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.functions</a>


    
        
        
        


<a href="../../operations/system-tables/grants/" title="system.grants" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.grants</a>


    
        
        
        


<a href="../../operations/system-tables/graphite_retentions/" title="system.graphite_retentions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.graphite_retentions</a>


    
        
        
        


<a href="../../operations/system-tables/licenses/" title="system.licenses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.licenses</a>


    
        
        
        


<a href="../../operations/system-tables/merge_tree_settings/" title="system.merge_tree_settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.merge_tree_settings</a>


    
        
        
        


<a href="../../operations/system-tables/merges/" title="system.merges" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.merges</a>


    
        
        
        


<a href="../../operations/system-tables/metric_log/" title="system.metric_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.metric_log</a>


    
        
        
        


<a href="../../operations/system-tables/metrics/" title="system.metrics" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.metrics</a>


    
        
        
        


<a href="../../operations/system-tables/mutations/" title="system.mutations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.mutations</a>


    
        
        
        


<a href="../../operations/system-tables/numbers/" title="system.numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.numbers</a>


    
        
        
        


<a href="../../operations/system-tables/numbers_mt/" title="system.numbers_mt" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.numbers_mt</a>


    
        
        
        


<a href="../../operations/system-tables/one/" title="system.one" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.one</a>


    
        
        
        


<a href="../../operations/system-tables/opentelemetry_span_log/" title="system.opentelemetry_span_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.opentelemetry_span_log</a>


    
        
        
        


<a href="../../operations/system-tables/part_log/" title="system.part_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.part_log</a>


    
        
        
        


<a href="../../operations/system-tables/parts/" title="system.parts" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.parts</a>


    
        
        
        


<a href="../../operations/system-tables/parts_columns/" title="system.parts_columns" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.parts_columns</a>


    
        
        
        


<a href="../../operations/system-tables/processes/" title="system.processes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.processes</a>


    
        
        
        


<a href="../../operations/system-tables/query_log/" title="system.query_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_log</a>


    
        
        
        


<a href="../../operations/system-tables/query_thread_log/" title="system.query_thread_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_thread_log</a>


    
        
        
        


<a href="../../operations/system-tables/query_views_log/" title="system.query_views_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_views_log</a>


    
        
        
        


<a href="../../operations/system-tables/quota_limits/" title="system.quota_limits" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quota_limits</a>


    
        
        
        


<a href="../../operations/system-tables/quota_usage/" title="system.quota_usage" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quota_usage</a>


    
        
        
        


<a href="../../operations/system-tables/quotas/" title="system.quotas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quotas</a>


    
        
        
        


<a href="../../operations/system-tables/quotas_usage/" title="system.quotas_usage" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quotas_usage</a>


    
        
        
        


<a href="../../operations/system-tables/replicas/" title="system.replicas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replicas</a>


    
        
        
        


<a href="../../operations/system-tables/replicated_fetches/" title="system.replicated_fetches" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replicated_fetches</a>


    
        
        
        


<a href="../../operations/system-tables/replication_queue/" title="system.replication_queue" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replication_queue</a>


    
        
        
        


<a href="../../operations/system-tables/role-grants/" title="system.role_grants" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.role_grants</a>


    
        
        
        


<a href="../../operations/system-tables/roles/" title="system.roles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.roles</a>


    
        
        
        


<a href="../../operations/system-tables/row_policies/" title="system.row_policies" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.row_policies</a>


    
        
        
        


<a href="../../operations/system-tables/session_log/" title="system.session_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.session_log</a>


    
        
        
        


<a href="../../operations/system-tables/settings/" title="system.settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings</a>


    
        
        
        


<a href="../../operations/system-tables/settings_profile_elements/" title="system.settings_profile_elements" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings_profile_elements</a>


    
        
        
        


<a href="../../operations/system-tables/settings_profiles/" title="system.settings_profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings_profiles</a>


    
        
        
        


<a href="../../operations/system-tables/stack_trace/" title="system.stack_trace" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.stack_trace</a>


    
        
        
        


<a href="../../operations/system-tables/storage_policies/" title="system.storage_policies" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.storage_policies</a>


    
        
        
        


<a href="../../operations/system-tables/table_engines/" title="system.table_engines" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.table_engines</a>


    
        
        
        


<a href="../../operations/system-tables/tables/" title="system.tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.tables</a>


    
        
        
        


<a href="../../operations/system-tables/text_log/" title="system.text_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.text_log</a>


    
        
        
        


<a href="../../operations/system-tables/time_zones/" title="system.time_zones" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.time_zones</a>


    
        
        
        


<a href="../../operations/system-tables/trace_log/" title="system.trace_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.trace_log</a>


    
        
        
        


<a href="../../operations/system-tables/users/" title="system.users" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.users</a>


    
        
        
        


<a href="../../operations/system-tables/zookeeper/" title="system.zookeeper" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.zookeeper</a>


    
        
        
        


<a href="../../operations/system-tables/zookeeper_log/" title="system.zookeeper_log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.zookeeper_log</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-7-14" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-14" title="Server Configuration Parameters" class="nav-link text-light dropdown-toggle px-0">Server Configuration Parameters</a>
<div id="sidebar-sidebar-7-14" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../operations/server-configuration-parameters/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../operations/server-configuration-parameters/settings/" title="Server Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server Settings</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../operations/performance-test/" title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a>


    
        
        
        


<a href="#sidebar-sidebar-7-16" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-16" title="Settings" class="nav-link text-light dropdown-toggle px-0">Settings</a>
<div id="sidebar-sidebar-7-16" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../operations/settings/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
        
        
        


<a href="../../operations/settings/permissions-for-queries/" title="Permissions for Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for Queries</a>


    
        
        
        


<a href="../../operations/settings/query-complexity/" title="Restrictions on Query Complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on Query Complexity</a>


    
        
        
        


<a href="../../operations/settings/settings-profiles/" title="Settings Profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings Profiles</a>


    
        
        
        


<a href="../../operations/settings/constraints-on-settings/" title="Constraints on Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Constraints on Settings</a>


    
        
        
        


<a href="../../operations/settings/settings-users/" title="User Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">User Settings</a>


    
        
        
        


<a href="../../operations/settings/memory-overcommit/" title="Memory overcommit" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory overcommit</a>


    
        
        
        


<a href="../../operations/settings/merge-tree-settings/" title="MergeTree tables settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree tables settings</a>


    
        
        
        


<a href="../../operations/settings/settings/" title="Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-7-17" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-17" title="Utilities" class="nav-link text-light dropdown-toggle px-0">Utilities</a>
<div id="sidebar-sidebar-7-17" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../operations/utilities/" title="Overview" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a>


    
        
        
        


<a href="../../operations/utilities/clickhouse-copier/" title="clickhouse-copier" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a>


    
        
        
        


<a href="../../operations/utilities/clickhouse-local/" title="clickhouse-local" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a>


    
        
        
        


<a href="../../operations/utilities/clickhouse-benchmark/" title="clickhouse-benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a>


    
        
        
        


<a href="../../operations/utilities/clickhouse-format/" title="clickhouse-format" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-format</a>


    
        
        
        


<a href="../../operations/utilities/clickhouse-compressor/" title="ClickHouse compressor" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse compressor</a>


    
        
        
        


<a href="../../operations/utilities/clickhouse-obfuscator/" title="ClickHouse obfuscator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse obfuscator</a>


    
        
        
        


<a href="../../operations/utilities/odbc-bridge/" title="clickhouse-odbc-bridge" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-odbc-bridge</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../operations/tips/" title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a>


    
        
        
        


<a href="../../operations/opentelemetry/" title="OpenTelemetry Support" class="nav-link text-light text-wrap d-inline-block w-100 px-0">OpenTelemetry Support</a>


    
        
        
        


<a href="../../operations/caches/" title="Caches" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Caches</a>


    
        
        
        


<a href="../../operations/clickhouse-keeper/" title="ClickHouse Keeper" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Keeper</a>


    
        
        
        


<a href="../../operations/storing-data/" title="External Disks for Storing Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Disks for Storing Data</a>


    
        
        
        


<a href="../../operations/named-collections/" title="Named connections" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Named connections</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-8" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-8" title="Development" class="nav-link text-light dropdown-toggle px-0">Development</a>
<div id="sidebar-sidebar-8" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../development/developer-instruction/" title="For Beginners" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Beginners</a>


    
        
        
        


<a href="../../development/architecture/" title="Architecture Overview" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Architecture Overview</a>


    
        
        
        


<a href="../../development/continuous-integration/" title="Continuous Integration Checks" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Continuous Integration Checks</a>


    
        
        
        


<a href="../../development/build/" title="Build on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux</a>


    
        
        
        


<a href="../../development/build-osx/" title="Build on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Mac OS X</a>


    
        
        
        


<a href="../../development/build-cross-osx/" title="Build on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux for Mac OS X</a>


    
        
        
        


<a href="../../development/build-cross-arm/" title="Build on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux for AARCH64 (ARM64)</a>


    
        
        
        


<a href="../../development/build-cross-riscv/" title="Build on Linux for RISC-V 64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux for RISC-V 64</a>


    
        
        
        


<a href="../../development/style/" title="C++ Guide" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ Guide</a>


    
        
        
        


<a href="../../development/tests/" title="Testing" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing</a>


    
        
        
        


<a href="../../development/contrib/" title="Third-Party Libraries Used" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party Libraries Used</a>


    
        
        
        


<a href="../../development/browse-code/" title="Source Code Browser" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Source Code Browser</a>


    
        
        
        


<a href="../../development/cmake-in-clickhouse/" title="CMake in ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CMake in ClickHouse</a>


    
        
        
        


<a href="../../development/adding_test_queries/" title="How to add test queries to ClickHouse CI" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to add test queries to ClickHouse CI</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-9" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-9" title="Commercial" class="nav-link text-light dropdown-toggle px-0">Commercial</a>
<div id="sidebar-sidebar-9" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../commercial/cloud/" title="Cloud" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cloud</a>


    
        
        
        


<a href="../../commercial/support/" title="Support" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Support</a>


    
        
        
        


<a href="../../commercial/" title="Introduction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-10" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-10" title="F.A.Q." class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a>
<div id="sidebar-sidebar-10" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../faq/general/" title="General" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General</a>


    
        
        
        


<a href="../../faq/use-cases/" title="Use Cases" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Use Cases</a>


    
        
        
        


<a href="../../faq/operations/" title="Operations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operations</a>


    
        
        
        


<a href="../../faq/integration/" title="Integration" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integration</a>


    
        
        
        

    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-11" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-11" title="What's New" class="nav-link text-light dropdown-toggle px-0">What's New</a>
<div id="sidebar-sidebar-11" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="#sidebar-sidebar-11-1" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-11-1" title="Changelog" class="nav-link text-light dropdown-toggle px-0">Changelog</a>
<div id="sidebar-sidebar-11-1" class="nav flex-column collapse" style="transition-duration: unset;">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../whats-new/changelog/" title="2022" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">2022</a>


    
        
        
        


<a href="../../whats-new/changelog/2021/" title="2021" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a>


    
        
        
        


<a href="../../whats-new/changelog/2020/" title="2020" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a>


    
        
        
        


<a href="../../whats-new/changelog/2019/" title="2019" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a>


    
        
        
        


<a href="../../whats-new/changelog/2018/" title="2018" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a>


    
        
        
        


<a href="../../whats-new/changelog/2017/" title="2017" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../whats-new/roadmap/" title="Roadmap" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a>


    
        
        
        


<a href="../../whats-new/security-changelog/" title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a>


    
        
        
        


<a href="../../whats-new/" title="What’s New in ClickHouse?" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What’s New in ClickHouse?</a>


    
    </nav>
</div>


            
        </nav>
        
    </div>
</div>
                <div id="content-wrapper" class="anchor-fixer col-md-8 mt-5 p-2 p-md-4">
    <div id="content">
        
            
            
                
            
            
                
                <nav class="text-muted" aria-label="breadcrumb">
                    <ol class="breadcrumb bg-transparent p-0">
                        
                        
                        
                        <li class="breadcrumb-item"><a href="../" class="text-reset">What's New</a>
                            
                        </li>
                       
                    </ol>
                </nav>
            

            
            <h3 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link"> </a></h3>
<p><strong><a href="#223">ClickHouse release v22.3-lts, 2022-03-17</a></strong><br/><br>
<strong><a href="#222">ClickHouse release v22.2, 2022-02-17</a></strong><br/><br>
<strong><a href="#221">ClickHouse release v22.1, 2022-01-18</a></strong><br/><br>
<strong><a href="https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/whats-new/changelog/2021.md" rel="external nofollow noreferrer" target="_blank">Changelog for 2021</a></strong><br/></br></br></br></p>
<h2 id="clickhouse-release-v22-3-lts-2022-03-17"><a id="223"></a> ClickHouse release v22.3-lts, 2022-03-17<a class="headerlink" href="#clickhouse-release-v22-3-lts-2022-03-17" title="Permanent link"> </a></h2>
<h4 id="backward-incompatible-change">Backward Incompatible Change<a class="headerlink" href="#backward-incompatible-change" title="Permanent link"> </a></h4>
<ul>
<li>Make <code class="syntax">arrayCompact</code> function behave as other higher-order functions: perform compaction not of lambda function results but on the original array. If you're using nontrivial lambda functions in arrayCompact you may restore old behaviour by wrapping <code class="syntax">arrayCompact</code> arguments into <code class="syntax">arrayMap</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34010" rel="external nofollow noreferrer" target="_blank">#34010</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/18535" rel="external nofollow noreferrer" target="_blank">#18535</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/14778" rel="external nofollow noreferrer" target="_blank">#14778</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34795" rel="external nofollow noreferrer" target="_blank">#34795</a> (<a href="https://github.com/snar" rel="external nofollow noreferrer" target="_blank">Alexandre Snarskii</a>).</li>
<li>Change implementation specific behavior on overflow of function <code class="syntax">toDatetime</code>. It will be saturated to the nearest min/max supported instant of datetime instead of wraparound. This change is highlighted as "backward incompatible" because someone may unintentionally rely on the old behavior. <a href="https://github.com/ClickHouse/ClickHouse/pull/32898" rel="external nofollow noreferrer" target="_blank">#32898</a> (<a href="https://github.com/marising" rel="external nofollow noreferrer" target="_blank">HaiBo Li</a>).</li>
<li>Make function <code class="syntax">cast(value, 'IPv4')</code>, <code class="syntax">cast(value, 'IPv6')</code> behave same as <code class="syntax">toIPv4</code>, <code class="syntax">toIPv6</code> functions. Changed behavior of incorrect IP address passed into functions <code class="syntax">toIPv4</code>,<code class="syntax">toIPv6</code>,  now if invalid IP address passes into this functions exception will be raised, before this function return default value. Added functions <code class="syntax">IPv4StringToNumOrDefault</code>, <code class="syntax">IPv4StringToNumOrNull</code>, <code class="syntax">IPv6StringToNumOrDefault</code>, <code class="syntax">IPv6StringOrNull</code> <code class="syntax">toIPv4OrDefault</code>, <code class="syntax">toIPv4OrNull</code>, <code class="syntax">toIPv6OrDefault</code>, <code class="syntax">toIPv6OrNull</code>. Functions <code class="syntax">IPv4StringToNumOrDefault</code>, <code class="syntax">toIPv4OrDefault</code>, <code class="syntax">toIPv6OrDefault</code> should be used if previous logic relied on <code class="syntax">IPv4StringToNum</code>, <code class="syntax">toIPv4</code>, <code class="syntax">toIPv6</code> returning default value for invalid address. Added setting <code class="syntax">cast_ipv4_ipv6_default_on_conversion_error</code>, if this setting enabled, then IP address conversion functions will behave as before. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/22825" rel="external nofollow noreferrer" target="_blank">#22825</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/5799" rel="external nofollow noreferrer" target="_blank">#5799</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/35156" rel="external nofollow noreferrer" target="_blank">#35156</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35240" rel="external nofollow noreferrer" target="_blank">#35240</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
</ul>
<h4 id="new-feature">New Feature<a class="headerlink" href="#new-feature" title="Permanent link"> </a></h4>
<ul>
<li>Support for caching data locally for remote filesystems. It can be enabled for <code class="syntax">s3</code> disks. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/28961" rel="external nofollow noreferrer" target="_blank">#28961</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33717" rel="external nofollow noreferrer" target="_blank">#33717</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>). In the meantime, we enabled the test suite on s3 filesystem and no more known issues exist, so it is started to be production ready.</li>
<li>Add new table function <code class="syntax">hive</code>. It can be used as follows <code class="syntax">hive('&lt;hive metastore url&gt;', '&lt;hive database&gt;', '&lt;hive table name&gt;', '&lt;columns definition&gt;', '&lt;partition columns&gt;')</code> for example <code class="syntax">SELECT * FROM hive('thrift://hivetest:9083', 'test', 'demo', 'id Nullable(String), score Nullable(Int32), day Nullable(String)', 'day')</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34946" rel="external nofollow noreferrer" target="_blank">#34946</a> (<a href="https://github.com/lgbo-ustc" rel="external nofollow noreferrer" target="_blank">lgbo</a>).</li>
<li>Support authentication of users connected via SSL by their X.509 certificate. <a href="https://github.com/ClickHouse/ClickHouse/pull/31484" rel="external nofollow noreferrer" target="_blank">#31484</a> (<a href="https://github.com/eungenue" rel="external nofollow noreferrer" target="_blank">eungenue</a>).</li>
<li>Support schema inference for inserting into table functions <code class="syntax">file</code>/<code class="syntax">hdfs</code>/<code class="syntax">s3</code>/<code class="syntax">url</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34732" rel="external nofollow noreferrer" target="_blank">#34732</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Now you can read <code class="syntax">system.zookeeper</code> table without restrictions on path or using <code class="syntax">like</code> expression. This reads can generate quite heavy load for zookeeper so to enable this ability you have to enable setting <code class="syntax">allow_unrestricted_reads_from_keeper</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34609" rel="external nofollow noreferrer" target="_blank">#34609</a> (<a href="https://github.com/serxa" rel="external nofollow noreferrer" target="_blank">Sergei Trifonov</a>).</li>
<li>Display CPU and memory metrics in clickhouse-local. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/34545" rel="external nofollow noreferrer" target="_blank">#34545</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34605" rel="external nofollow noreferrer" target="_blank">#34605</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Implement <code class="syntax">startsWith</code> and <code class="syntax">endsWith</code> function for arrays, closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33982" rel="external nofollow noreferrer" target="_blank">#33982</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34368" rel="external nofollow noreferrer" target="_blank">#34368</a> (<a href="https://github.com/usurai" rel="external nofollow noreferrer" target="_blank">usurai</a>).</li>
<li>Add three functions for Map data type: 1. <code class="syntax">mapReplace(map1, map2)</code> - replaces values for keys in map1 with the values of the corresponding keys in map2; adds keys from map2 that don't exist in map1. 2. <code class="syntax">mapFilter</code> 3. <code class="syntax">mapMap</code>. mapFilter and mapMap are higher order functions, accepting two arguments, the first argument is a lambda function with k, v pair as arguments, the second argument is a column of type Map. <a href="https://github.com/ClickHouse/ClickHouse/pull/33698" rel="external nofollow noreferrer" target="_blank">#33698</a> (<a href="https://github.com/hexiaoting" rel="external nofollow noreferrer" target="_blank">hexiaoting</a>).</li>
<li>Allow getting default user and password for clickhouse-client from the <code class="syntax">CLICKHOUSE_USER</code> and <code class="syntax">CLICKHOUSE_PASSWORD</code> environment variables. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/34538" rel="external nofollow noreferrer" target="_blank">#34538</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34947" rel="external nofollow noreferrer" target="_blank">#34947</a> (<a href="https://github.com/freedomDR" rel="external nofollow noreferrer" target="_blank">DR</a>).</li>
</ul>
<h4 id="experimental-feature">Experimental Feature<a class="headerlink" href="#experimental-feature" title="Permanent link"> </a></h4>
<ul>
<li>New data type <code class="syntax">Object(&lt;schema_format&gt;)</code>, which supports storing of semi-structured data (for now JSON only). Data is written to such types as string. Then all paths are extracted according to format of semi-structured data and written as separate columns in most optimal types, that can store all their values. Those columns can be queried by names that match paths in source data. E.g <code class="syntax">data.key1.key2</code> or with cast operator <code class="syntax">data.key1.key2::Int64</code>.</li>
<li>Add <code class="syntax">database_replicated_allow_only_replicated_engine</code> setting. When enabled, it only allowed to only create <code class="syntax">Replicated</code> tables or tables with stateless engines in <code class="syntax">Replicated</code> databases. <a href="https://github.com/ClickHouse/ClickHouse/pull/35214" rel="external nofollow noreferrer" target="_blank">#35214</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>). Note that <code class="syntax">Replicated</code> database is still an experimental feature.</li>
</ul>
<h4 id="performance-improvement">Performance Improvement<a class="headerlink" href="#performance-improvement" title="Permanent link"> </a></h4>
<ul>
<li>Improve performance of insertion into <code class="syntax">MergeTree</code> tables by optimizing sorting. Up to 2x improvement is observed on realistic benchmarks. <a href="https://github.com/ClickHouse/ClickHouse/pull/34750" rel="external nofollow noreferrer" target="_blank">#34750</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Columns pruning when reading Parquet, ORC and Arrow files from URL and S3. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34163" rel="external nofollow noreferrer" target="_blank">#34163</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34849" rel="external nofollow noreferrer" target="_blank">#34849</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Columns pruning when reading Parquet, ORC and Arrow files from Hive. <a href="https://github.com/ClickHouse/ClickHouse/pull/34954" rel="external nofollow noreferrer" target="_blank">#34954</a> (<a href="https://github.com/lgbo-ustc" rel="external nofollow noreferrer" target="_blank">lgbo</a>).</li>
<li>A bunch of performance optimizations from a performance superhero. Improve performance of processing queries with large <code class="syntax">IN</code> section. Improve performance of <code class="syntax">direct</code> dictionary if its source is <code class="syntax">ClickHouse</code>. Improve performance of <code class="syntax">detectCharset</code>, <code class="syntax">detectLanguageUnknown</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/34888" rel="external nofollow noreferrer" target="_blank">#34888</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Improve performance of <code class="syntax">any</code> aggregate function by using more batching. <a href="https://github.com/ClickHouse/ClickHouse/pull/34760" rel="external nofollow noreferrer" target="_blank">#34760</a> (<a href="https://github.com/Algunenano" rel="external nofollow noreferrer" target="_blank">Raúl Marín</a>).</li>
<li>Multiple improvements for performance of <code class="syntax">clickhouse-keeper</code>: less locking <a href="https://github.com/ClickHouse/ClickHouse/pull/35010" rel="external nofollow noreferrer" target="_blank">#35010</a> (<a href="https://github.com/zhanglistar" rel="external nofollow noreferrer" target="_blank">zhanglistar</a>), lower memory usage by streaming reading and writing of snapshot instead of full copy. <a href="https://github.com/ClickHouse/ClickHouse/pull/34584" rel="external nofollow noreferrer" target="_blank">#34584</a> (<a href="https://github.com/zhanglistar" rel="external nofollow noreferrer" target="_blank">zhanglistar</a>), optimizing compaction of log store in the RAFT implementation. <a href="https://github.com/ClickHouse/ClickHouse/pull/34534" rel="external nofollow noreferrer" target="_blank">#34534</a> (<a href="https://github.com/zhanglistar" rel="external nofollow noreferrer" target="_blank">zhanglistar</a>), versioning of the internal data structure <a href="https://github.com/ClickHouse/ClickHouse/pull/34486" rel="external nofollow noreferrer" target="_blank">#34486</a> (<a href="https://github.com/zhanglistar" rel="external nofollow noreferrer" target="_blank">zhanglistar</a>).</li>
</ul>
<h4 id="improvement">Improvement<a class="headerlink" href="#improvement" title="Permanent link"> </a></h4>
<ul>
<li>Allow asynchronous inserts to table functions. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34864" rel="external nofollow noreferrer" target="_blank">#34864</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34866" rel="external nofollow noreferrer" target="_blank">#34866</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Implicit type casting of the key argument for functions <code class="syntax">dictGetHierarchy</code>, <code class="syntax">dictIsIn</code>, <code class="syntax">dictGetChildren</code>, <code class="syntax">dictGetDescendants</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34970" rel="external nofollow noreferrer" target="_blank">#34970</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35027" rel="external nofollow noreferrer" target="_blank">#35027</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li><code class="syntax">EXPLAIN AST</code> query can output AST in form of a graph in Graphviz format: <code class="syntax">EXPLAIN AST graph = 1 SELECT * FROM system.parts</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35173" rel="external nofollow noreferrer" target="_blank">#35173</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>When large files were written with <code class="syntax">s3</code> table function or table engine, the content type on the files was mistakenly set to <code class="syntax">application/xml</code> due to a bug in the AWS SDK. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33964" rel="external nofollow noreferrer" target="_blank">#33964</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34433" rel="external nofollow noreferrer" target="_blank">#34433</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">Alexey Milovidov</a>).</li>
<li>Change restrictive row policies a bit to make them an easier alternative to permissive policies in easy cases. If for a particular table only restrictive policies exist (without permissive policies) users will be able to see some rows. Also <code class="syntax">SHOW CREATE ROW POLICY</code> will always show <code class="syntax">AS permissive</code> or <code class="syntax">AS restrictive</code> in row policy's definition. <a href="https://github.com/ClickHouse/ClickHouse/pull/34596" rel="external nofollow noreferrer" target="_blank">#34596</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Improve schema inference with globs in File/S3/HDFS/URL engines. Try to use the next path for schema inference in case of error. <a href="https://github.com/ClickHouse/ClickHouse/pull/34465" rel="external nofollow noreferrer" target="_blank">#34465</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Play UI now correctly detects the preferred light/dark theme from the OS. <a href="https://github.com/ClickHouse/ClickHouse/pull/35068" rel="external nofollow noreferrer" target="_blank">#35068</a> (<a href="https://github.com/peledni" rel="external nofollow noreferrer" target="_blank">peledni</a>).</li>
<li>Added <code class="syntax">date_time_input_format = 'best_effort_us'</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34799" rel="external nofollow noreferrer" target="_blank">#34799</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34982" rel="external nofollow noreferrer" target="_blank">#34982</a> (<a href="https://github.com/Cai-Yao" rel="external nofollow noreferrer" target="_blank">WenYao</a>).</li>
<li>A new settings called <code class="syntax">allow_plaintext_password</code> and <code class="syntax">allow_no_password</code> are added in server configuration which turn on/off authentication types that can be potentially insecure in some environments. They are allowed by default. <a href="https://github.com/ClickHouse/ClickHouse/pull/34738" rel="external nofollow noreferrer" target="_blank">#34738</a> (<a href="https://github.com/HeenaBansal2009" rel="external nofollow noreferrer" target="_blank">Heena Bansal</a>).</li>
<li>Support for <code class="syntax">DateTime64</code> data type in <code class="syntax">Arrow</code> format, closes <a href="https://github.com/ClickHouse/ClickHouse/issues/8280" rel="external nofollow noreferrer" target="_blank">#8280</a> and closes <a href="https://github.com/ClickHouse/ClickHouse/issues/28574" rel="external nofollow noreferrer" target="_blank">#28574</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34561" rel="external nofollow noreferrer" target="_blank">#34561</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Reload <code class="syntax">remote_url_allow_hosts</code> (filtering of outgoing connections) on config update. <a href="https://github.com/ClickHouse/ClickHouse/pull/35294" rel="external nofollow noreferrer" target="_blank">#35294</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Support <code class="syntax">--testmode</code> parameter for <code class="syntax">clickhouse-local</code>. This parameter enables interpretation of test hints that we use in functional tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/35264" rel="external nofollow noreferrer" target="_blank">#35264</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Add <code class="syntax">distributed_depth</code> to query log. It is like a more detailed variant of <code class="syntax">is_initial_query</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/35207" rel="external nofollow noreferrer" target="_blank">#35207</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Respect <code class="syntax">remote_url_allow_hosts</code> for <code class="syntax">MySQL</code> and <code class="syntax">PostgreSQL</code> table functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/35191" rel="external nofollow noreferrer" target="_blank">#35191</a> (<a href="https://github.com/HeenaBansal2009" rel="external nofollow noreferrer" target="_blank">Heena Bansal</a>).</li>
<li>Added <code class="syntax">disk_name</code> field to <code class="syntax">system.part_log</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35178" rel="external nofollow noreferrer" target="_blank">#35178</a> (<a href="https://github.com/Varinara" rel="external nofollow noreferrer" target="_blank">Artyom Yurkov</a>).</li>
<li>Do not retry non-rertiable errors when querying remote URLs. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/35161" rel="external nofollow noreferrer" target="_blank">#35161</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35172" rel="external nofollow noreferrer" target="_blank">#35172</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Support distributed INSERT SELECT queries (the setting <code class="syntax">parallel_distributed_insert_select</code>) table function <code class="syntax">view()</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35132" rel="external nofollow noreferrer" target="_blank">#35132</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>More precise memory tracking during <code class="syntax">INSERT</code> into <code class="syntax">Buffer</code> with <code class="syntax">AggregateFunction</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35072" rel="external nofollow noreferrer" target="_blank">#35072</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Avoid division by zero in Query Profiler if Linux kernel has a bug. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34787" rel="external nofollow noreferrer" target="_blank">#34787</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35032" rel="external nofollow noreferrer" target="_blank">#35032</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">Alexey Milovidov</a>).</li>
<li>Add more sanity checks for keeper configuration: now mixing of localhost and non-local servers is not allowed, also add checks for same value of internal raft port and keeper client port. <a href="https://github.com/ClickHouse/ClickHouse/pull/35004" rel="external nofollow noreferrer" target="_blank">#35004</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Currently, if the user changes the settings of the system tables there will be tons of logs and ClickHouse will rename the tables every minute. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34929" rel="external nofollow noreferrer" target="_blank">#34929</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34949" rel="external nofollow noreferrer" target="_blank">#34949</a> (<a href="https://github.com/nikitamikhaylov" rel="external nofollow noreferrer" target="_blank">Nikita Mikhaylov</a>).</li>
<li>Use connection pool for Hive metastore client. <a href="https://github.com/ClickHouse/ClickHouse/pull/34940" rel="external nofollow noreferrer" target="_blank">#34940</a> (<a href="https://github.com/lgbo-ustc" rel="external nofollow noreferrer" target="_blank">lgbo</a>).</li>
<li>Ignore per-column <code class="syntax">TTL</code> in <code class="syntax">CREATE TABLE AS</code> if new table engine does not support it (i.e. if the engine is not of <code class="syntax">MergeTree</code> family). <a href="https://github.com/ClickHouse/ClickHouse/pull/34938" rel="external nofollow noreferrer" target="_blank">#34938</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Allow <code class="syntax">LowCardinality</code> strings for <code class="syntax">ngrambf_v1</code>/<code class="syntax">tokenbf_v1</code> indexes. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/21865" rel="external nofollow noreferrer" target="_blank">#21865</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34911" rel="external nofollow noreferrer" target="_blank">#34911</a> (<a href="https://github.com/larspars" rel="external nofollow noreferrer" target="_blank">Lars Hiller Eidnes</a>).</li>
<li>Allow opening empty sqlite db if the file doesn't exist. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33367" rel="external nofollow noreferrer" target="_blank">#33367</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34907" rel="external nofollow noreferrer" target="_blank">#34907</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Implement memory statistics for FreeBSD - this is required for <code class="syntax">max_server_memory_usage</code> to work correctly. <a href="https://github.com/ClickHouse/ClickHouse/pull/34902" rel="external nofollow noreferrer" target="_blank">#34902</a> (<a href="https://github.com/snar" rel="external nofollow noreferrer" target="_blank">Alexandre Snarskii</a>).</li>
<li>In previous versions the progress bar in clickhouse-client can jump forward near 50% for no reason. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34324" rel="external nofollow noreferrer" target="_blank">#34324</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34801" rel="external nofollow noreferrer" target="_blank">#34801</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">Alexey Milovidov</a>).</li>
<li>Now <code class="syntax">ALTER TABLE DROP COLUMN columnX</code> queries for <code class="syntax">MergeTree</code> table engines will work instantly when <code class="syntax">columnX</code> is an <code class="syntax">ALIAS</code> column. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34660" rel="external nofollow noreferrer" target="_blank">#34660</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34786" rel="external nofollow noreferrer" target="_blank">#34786</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Show hints when user mistyped the name of a data skipping index. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/29698" rel="external nofollow noreferrer" target="_blank">#29698</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34764" rel="external nofollow noreferrer" target="_blank">#34764</a> (<a href="https://github.com/ucasfl" rel="external nofollow noreferrer" target="_blank">flynn</a>).</li>
<li>Support <code class="syntax">remote()</code>/<code class="syntax">cluster()</code> table functions for <code class="syntax">parallel_distributed_insert_select</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34728" rel="external nofollow noreferrer" target="_blank">#34728</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Do not reset logging that configured via <code class="syntax">--log-file</code>/<code class="syntax">--errorlog-file</code> command line options in case of empty configuration in the config file. <a href="https://github.com/ClickHouse/ClickHouse/pull/34718" rel="external nofollow noreferrer" target="_blank">#34718</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Extract schema only once on table creation and prevent reading from local files/external sources to extract schema on each server startup. <a href="https://github.com/ClickHouse/ClickHouse/pull/34684" rel="external nofollow noreferrer" target="_blank">#34684</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Allow specifying argument names for executable UDFs. This is necessary for formats where argument name is part of serialization, like <code class="syntax">Native</code>, <code class="syntax">JSONEachRow</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34604" rel="external nofollow noreferrer" target="_blank">#34604</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34653" rel="external nofollow noreferrer" target="_blank">#34653</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li><code class="syntax">MaterializedMySQL</code> (experimental feature) now supports <code class="syntax">materialized_mysql_tables_list</code> (a comma-separated list of MySQL database tables, which will be replicated by the MaterializedMySQL database engine. Default value: empty list — means all the tables will be replicated), mentioned at <a href="https://github.com/ClickHouse/ClickHouse/issues/32977" rel="external nofollow noreferrer" target="_blank">#32977</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34487" rel="external nofollow noreferrer" target="_blank">#34487</a> (<a href="https://github.com/zzsmdfj" rel="external nofollow noreferrer" target="_blank">zzsmdfj</a>).</li>
<li>Improve OpenTelemetry span logs for INSERT operation on distributed table. <a href="https://github.com/ClickHouse/ClickHouse/pull/34480" rel="external nofollow noreferrer" target="_blank">#34480</a> (<a href="https://github.com/FrankChen021" rel="external nofollow noreferrer" target="_blank">Frank Chen</a>).</li>
<li>Make the znode <code class="syntax">ctime</code> and <code class="syntax">mtime</code> consistent between servers in ClickHouse Keeper. <a href="https://github.com/ClickHouse/ClickHouse/pull/33441" rel="external nofollow noreferrer" target="_blank">#33441</a> (<a href="https://github.com/nicelulu" rel="external nofollow noreferrer" target="_blank">小路</a>).</li>
</ul>
<h4 id="build-testing-packaging-improvement">Build/Testing/Packaging Improvement<a class="headerlink" href="#build-testing-packaging-improvement" title="Permanent link"> </a></h4>
<ul>
<li>Package repository is migrated to JFrog Artifactory (<strong>Mikhail f. Shiryaev</strong>).</li>
<li>Randomize some settings in functional tests, so more possible combinations of settings will be tested. This is yet another fuzzing method to ensure better test coverage. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32268" rel="external nofollow noreferrer" target="_blank">#32268</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34092" rel="external nofollow noreferrer" target="_blank">#34092</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Drop PVS-Studio from our CI. <a href="https://github.com/ClickHouse/ClickHouse/pull/34680" rel="external nofollow noreferrer" target="_blank">#34680</a> (<a href="https://github.com/Felixoid" rel="external nofollow noreferrer" target="_blank">Mikhail f. Shiryaev</a>).</li>
<li>Add an ability to build stripped binaries with CMake. In previous versions it was performed by dh-tools. <a href="https://github.com/ClickHouse/ClickHouse/pull/35196" rel="external nofollow noreferrer" target="_blank">#35196</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Smaller "fat-free" <code class="syntax">clickhouse-keeper</code> build. <a href="https://github.com/ClickHouse/ClickHouse/pull/35031" rel="external nofollow noreferrer" target="_blank">#35031</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Use @robot-clickhouse as an author and committer for PRs like <a href="https://github.com/ClickHouse/ClickHouse/pull/34685" target="_blank">https://github.com/ClickHouse/ClickHouse/pull/34685</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34793" rel="external nofollow noreferrer" target="_blank">#34793</a> (<a href="https://github.com/Felixoid" rel="external nofollow noreferrer" target="_blank">Mikhail f. Shiryaev</a>).</li>
<li>Limit DWARF version for debug info by 4 max, because our internal stack symbolizer cannot parse DWARF version 5. This makes sense if you compile ClickHouse with clang-15. <a href="https://github.com/ClickHouse/ClickHouse/pull/34777" rel="external nofollow noreferrer" target="_blank">#34777</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">Alexey Milovidov</a>).</li>
<li>Remove <code class="syntax">clickhouse-test</code> debian package as unneeded complication. CI use tests from repository and standalone testing via deb package is no longer supported. <a href="https://github.com/ClickHouse/ClickHouse/pull/34606" rel="external nofollow noreferrer" target="_blank">#34606</a> (<a href="https://github.com/qoega" rel="external nofollow noreferrer" target="_blank">Ilya Yatsishin</a>).</li>
</ul>
<h4 id="bug-fix-user-visible-misbehaviour-in-official-stable-or-prestable-release">Bug Fix (user-visible misbehaviour in official stable or prestable release)<a class="headerlink" href="#bug-fix-user-visible-misbehaviour-in-official-stable-or-prestable-release" title="Permanent link"> </a></h4>
<ul>
<li>A fix for HDFS integration: When the inner buffer size is too small, NEED_MORE_INPUT in <code class="syntax">HadoopSnappyDecoder</code> will run multi times (&gt;=3) for one compressed block. This makes the input data be copied into the wrong place in <code class="syntax">HadoopSnappyDecoder::buffer</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35116" rel="external nofollow noreferrer" target="_blank">#35116</a> (<a href="https://github.com/lgbo-ustc" rel="external nofollow noreferrer" target="_blank">lgbo</a>).</li>
<li>Ignore obsolete grants in ATTACH GRANT statements. This PR fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34815" rel="external nofollow noreferrer" target="_blank">#34815</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34855" rel="external nofollow noreferrer" target="_blank">#34855</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Fix segfault in Postgres database when getting create table query if database was created using named collections. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/35312" rel="external nofollow noreferrer" target="_blank">#35312</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35313" rel="external nofollow noreferrer" target="_blank">#35313</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix partial merge join duplicate rows bug, close <a href="https://github.com/ClickHouse/ClickHouse/issues/31009" rel="external nofollow noreferrer" target="_blank">#31009</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35311" rel="external nofollow noreferrer" target="_blank">#35311</a> (<a href="https://github.com/vdimir" rel="external nofollow noreferrer" target="_blank">Vladimir C</a>).</li>
<li>Fix possible <code class="syntax">Assertion 'position() != working_buffer.end()' failed</code> while using bzip2 compression with small <code class="syntax">max_read_buffer_size</code> setting value. The bug was found in <a href="https://github.com/ClickHouse/ClickHouse/pull/35047" target="_blank">https://github.com/ClickHouse/ClickHouse/pull/35047</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35300" rel="external nofollow noreferrer" target="_blank">#35300</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>). While using lz4 compression with a small max_read_buffer_size setting value. <a href="https://github.com/ClickHouse/ClickHouse/pull/35296" rel="external nofollow noreferrer" target="_blank">#35296</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>). While using lzma compression with small <code class="syntax">max_read_buffer_size</code> setting value. <a href="https://github.com/ClickHouse/ClickHouse/pull/35295" rel="external nofollow noreferrer" target="_blank">#35295</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>). While using <code class="syntax">brotli</code> compression with a small <code class="syntax">max_read_buffer_size</code> setting value. The bug was found in <a href="https://github.com/ClickHouse/ClickHouse/pull/35047" target="_blank">https://github.com/ClickHouse/ClickHouse/pull/35047</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35281" rel="external nofollow noreferrer" target="_blank">#35281</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix possible segfault in <code class="syntax">JSONEachRow</code> schema inference. <a href="https://github.com/ClickHouse/ClickHouse/pull/35291" rel="external nofollow noreferrer" target="_blank">#35291</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix <code class="syntax">CHECK TABLE</code> query in case when sparse columns are enabled in table. <a href="https://github.com/ClickHouse/ClickHouse/pull/35274" rel="external nofollow noreferrer" target="_blank">#35274</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Avoid std::terminate in case of exception in reading from remote VFS. <a href="https://github.com/ClickHouse/ClickHouse/pull/35257" rel="external nofollow noreferrer" target="_blank">#35257</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix reading port from config, close <a href="https://github.com/ClickHouse/ClickHouse/issues/34776" rel="external nofollow noreferrer" target="_blank">#34776</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35193" rel="external nofollow noreferrer" target="_blank">#35193</a> (<a href="https://github.com/vdimir" rel="external nofollow noreferrer" target="_blank">Vladimir C</a>).</li>
<li>Fix error in query with <code class="syntax">WITH TOTALS</code> in case if <code class="syntax">HAVING</code> returned empty result. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33711" rel="external nofollow noreferrer" target="_blank">#33711</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35186" rel="external nofollow noreferrer" target="_blank">#35186</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Fix a corner case of <code class="syntax">replaceRegexpAll</code>, close <a href="https://github.com/ClickHouse/ClickHouse/issues/35117" rel="external nofollow noreferrer" target="_blank">#35117</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35182" rel="external nofollow noreferrer" target="_blank">#35182</a> (<a href="https://github.com/vdimir" rel="external nofollow noreferrer" target="_blank">Vladimir C</a>).</li>
<li>Schema inference didn't work properly on case of <code class="syntax">INSERT INTO FUNCTION s3(...) FROM ...</code>, it tried to read schema from s3 file instead of from select query. <a href="https://github.com/ClickHouse/ClickHouse/pull/35176" rel="external nofollow noreferrer" target="_blank">#35176</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix MaterializedPostgreSQL (experimental feature) <code class="syntax">table overrides</code> for partition by, etc. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/35048" rel="external nofollow noreferrer" target="_blank">#35048</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35162" rel="external nofollow noreferrer" target="_blank">#35162</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix MaterializedPostgreSQL (experimental feature) adding new table to replication (ATTACH TABLE) after manually removing (DETACH TABLE). Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33800" rel="external nofollow noreferrer" target="_blank">#33800</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34922" rel="external nofollow noreferrer" target="_blank">#34922</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34315" rel="external nofollow noreferrer" target="_blank">#34315</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35158" rel="external nofollow noreferrer" target="_blank">#35158</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix partition pruning error when non-monotonic function is used with IN operator. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/35136" rel="external nofollow noreferrer" target="_blank">#35136</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35146" rel="external nofollow noreferrer" target="_blank">#35146</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Fixed slightly incorrect translation of YAML configs to XML. <a href="https://github.com/ClickHouse/ClickHouse/pull/35135" rel="external nofollow noreferrer" target="_blank">#35135</a> (<a href="https://github.com/mdonkers" rel="external nofollow noreferrer" target="_blank">Miel Donkers</a>).</li>
<li>Fix <code class="syntax">optimize_skip_unused_shards_rewrite_in</code> for signed columns and negative values. <a href="https://github.com/ClickHouse/ClickHouse/pull/35134" rel="external nofollow noreferrer" target="_blank">#35134</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>The <code class="syntax">update_lag</code> external dictionary configuration option was unusable showing the error message <code class="syntax">Unexpected key `update_lag` in dictionary source configuration</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35089" rel="external nofollow noreferrer" target="_blank">#35089</a> (<a href="https://github.com/1lann" rel="external nofollow noreferrer" target="_blank">Jason Chu</a>).</li>
<li>Avoid possible deadlock on server shutdown. <a href="https://github.com/ClickHouse/ClickHouse/pull/35081" rel="external nofollow noreferrer" target="_blank">#35081</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix missing alias after function is optimized to a subcolumn when setting <code class="syntax">optimize_functions_to_subcolumns</code> is enabled. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33798" rel="external nofollow noreferrer" target="_blank">#33798</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35079" rel="external nofollow noreferrer" target="_blank">#35079</a> (<a href="https://github.com/qieqieplus" rel="external nofollow noreferrer" target="_blank">qieqieplus</a>).</li>
<li>Fix reading from <code class="syntax">system.asynchronous_inserts</code> table if there exists asynchronous insert into table function. <a href="https://github.com/ClickHouse/ClickHouse/pull/35050" rel="external nofollow noreferrer" target="_blank">#35050</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix possible exception <code class="syntax">Reading for MergeTree family tables must be done with last position boundary</code> (relevant to operation on remote VFS). Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34979" rel="external nofollow noreferrer" target="_blank">#34979</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/35001" rel="external nofollow noreferrer" target="_blank">#35001</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix unexpected result when use -State type aggregate function in window frame. <a href="https://github.com/ClickHouse/ClickHouse/pull/34999" rel="external nofollow noreferrer" target="_blank">#34999</a> (<a href="https://github.com/metahys" rel="external nofollow noreferrer" target="_blank">metahys</a>).</li>
<li>Fix possible segfault in FileLog (experimental feature). Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/30749" rel="external nofollow noreferrer" target="_blank">#30749</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34996" rel="external nofollow noreferrer" target="_blank">#34996</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix possible rare error <code class="syntax">Cannot push block to port which already has data</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34993" rel="external nofollow noreferrer" target="_blank">#34993</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Fix wrong schema inference for unquoted dates in CSV. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34768" rel="external nofollow noreferrer" target="_blank">#34768</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34961" rel="external nofollow noreferrer" target="_blank">#34961</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Integration with Hive: Fix unexpected result when use <code class="syntax">in</code> in <code class="syntax">where</code> in hive query. <a href="https://github.com/ClickHouse/ClickHouse/pull/34945" rel="external nofollow noreferrer" target="_blank">#34945</a> (<a href="https://github.com/lgbo-ustc" rel="external nofollow noreferrer" target="_blank">lgbo</a>).</li>
<li>Avoid busy polling in ClickHouse Keeper while searching for changelog files to delete. <a href="https://github.com/ClickHouse/ClickHouse/pull/34931" rel="external nofollow noreferrer" target="_blank">#34931</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix DateTime64 conversion from PostgreSQL. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33364" rel="external nofollow noreferrer" target="_blank">#33364</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34910" rel="external nofollow noreferrer" target="_blank">#34910</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix possible "Part directory doesn't exist" during <code class="syntax">INSERT</code> into MergeTree table backed by VFS over s3. <a href="https://github.com/ClickHouse/ClickHouse/pull/34876" rel="external nofollow noreferrer" target="_blank">#34876</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Support DDLs like CREATE USER to be executed on cross replicated cluster. <a href="https://github.com/ClickHouse/ClickHouse/pull/34860" rel="external nofollow noreferrer" target="_blank">#34860</a> (<a href="https://github.com/zhangjmruc" rel="external nofollow noreferrer" target="_blank">Jianmei Zhang</a>).</li>
<li>Fix bugs for multiple columns group by in <code class="syntax">WindowView</code> (experimental feature). <a href="https://github.com/ClickHouse/ClickHouse/pull/34859" rel="external nofollow noreferrer" target="_blank">#34859</a> (<a href="https://github.com/Vxider" rel="external nofollow noreferrer" target="_blank">vxider</a>).</li>
<li>Fix possible failures in S2 functions when queries contain const columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/34745" rel="external nofollow noreferrer" target="_blank">#34745</a> (<a href="https://github.com/bharatnc" rel="external nofollow noreferrer" target="_blank">Bharat Nallan</a>).</li>
<li>Fix bug for H3 funcs containing const columns which cause queries to fail. <a href="https://github.com/ClickHouse/ClickHouse/pull/34743" rel="external nofollow noreferrer" target="_blank">#34743</a> (<a href="https://github.com/bharatnc" rel="external nofollow noreferrer" target="_blank">Bharat Nallan</a>).</li>
<li>Fix <code class="syntax">No such file or directory</code> with enabled <code class="syntax">fsync_part_directory</code> and vertical merge. <a href="https://github.com/ClickHouse/ClickHouse/pull/34739" rel="external nofollow noreferrer" target="_blank">#34739</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix serialization/printing for system queries <code class="syntax">RELOAD MODEL</code>, <code class="syntax">RELOAD FUNCTION</code>, <code class="syntax">RESTART DISK</code> when used <code class="syntax">ON CLUSTER</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34514" rel="external nofollow noreferrer" target="_blank">#34514</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34696" rel="external nofollow noreferrer" target="_blank">#34696</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Fix <code class="syntax">allow_experimental_projection_optimization</code> with <code class="syntax">enable_global_with_statement</code> (before it may lead to <code class="syntax">Stack size too large</code> error in case of multiple expressions in <code class="syntax">WITH</code> clause, and also it executes scalar subqueries again and again, so not it will be more optimal). <a href="https://github.com/ClickHouse/ClickHouse/pull/34650" rel="external nofollow noreferrer" target="_blank">#34650</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Stop to select part for mutate when the other replica has already updated the transaction log for <code class="syntax">ReplatedMergeTree</code> engine. <a href="https://github.com/ClickHouse/ClickHouse/pull/34633" rel="external nofollow noreferrer" target="_blank">#34633</a> (<a href="https://github.com/zhangjmruc" rel="external nofollow noreferrer" target="_blank">Jianmei Zhang</a>).</li>
<li>Fix incorrect result of trivial count query when part movement feature is used <a href="https://github.com/ClickHouse/ClickHouse/issues/34089" rel="external nofollow noreferrer" target="_blank">#34089</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34385" rel="external nofollow noreferrer" target="_blank">#34385</a> (<a href="https://github.com/nvartolomei" rel="external nofollow noreferrer" target="_blank">nvartolomei</a>).</li>
<li>Fix inconsistency of <code class="syntax">max_query_size</code> limitation in distributed subqueries. <a href="https://github.com/ClickHouse/ClickHouse/pull/34078" rel="external nofollow noreferrer" target="_blank">#34078</a> (<a href="https://github.com/godliness" rel="external nofollow noreferrer" target="_blank">Chao Ma</a>).</li>
</ul>
<h3 id="clickhouse-release-v22-2-2022-02-17"><a id="222"></a> ClickHouse release v22.2, 2022-02-17<a class="headerlink" href="#clickhouse-release-v22-2-2022-02-17" title="Permanent link"> </a></h3>
<h4 id="upgrade-notes">Upgrade Notes<a class="headerlink" href="#upgrade-notes" title="Permanent link"> </a></h4>
<ul>
<li>Applying data skipping indexes for queries with FINAL may produce incorrect result. In this release we disabled data skipping indexes by default for queries with FINAL (a new setting <code class="syntax">use_skip_indexes_if_final</code> is introduced and disabled by default). <a href="https://github.com/ClickHouse/ClickHouse/pull/34243" rel="external nofollow noreferrer" target="_blank">#34243</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
</ul>
<h4 id="new-feature_1">New Feature<a class="headerlink" href="#new-feature_1" title="Permanent link"> </a></h4>
<ul>
<li>Projections are production ready. Set <code class="syntax">allow_experimental_projection_optimization</code> by default and deprecate this setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/34456" rel="external nofollow noreferrer" target="_blank">#34456</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>An option to create a new files on insert for <code class="syntax">File</code>/<code class="syntax">S3</code>/<code class="syntax">HDFS</code> engines. Allow to overwrite a file in <code class="syntax">HDFS</code>. Throw an exception in attempt to overwrite a file in <code class="syntax">S3</code> by default. Throw an exception in attempt to append data to file in formats that have a suffix (and thus don't support appends, like <code class="syntax">Parquet</code>, <code class="syntax">ORC</code>). Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31640" rel="external nofollow noreferrer" target="_blank">#31640</a> Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31622" rel="external nofollow noreferrer" target="_blank">#31622</a> Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/23862" rel="external nofollow noreferrer" target="_blank">#23862</a> Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/15022" rel="external nofollow noreferrer" target="_blank">#15022</a> Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/16674" rel="external nofollow noreferrer" target="_blank">#16674</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33302" rel="external nofollow noreferrer" target="_blank">#33302</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Add a setting that allows a user to provide own deduplication semantic in <code class="syntax">MergeTree</code>/<code class="syntax">ReplicatedMergeTree</code> If provided, it's used instead of data digest to generate block ID. So, for example, by providing a unique value for the setting in each INSERT statement, the user can avoid the same inserted data being deduplicated. This closes: <a href="https://github.com/ClickHouse/ClickHouse/issues/7461" rel="external nofollow noreferrer" target="_blank">#7461</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32304" rel="external nofollow noreferrer" target="_blank">#32304</a> (<a href="https://github.com/devcrafter" rel="external nofollow noreferrer" target="_blank">Igor Nikonov</a>).</li>
<li>Add support of <code class="syntax">DEFAULT</code> keyword for INSERT statements. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/6331" rel="external nofollow noreferrer" target="_blank">#6331</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33141" rel="external nofollow noreferrer" target="_blank">#33141</a> (<a href="https://github.com/1over" rel="external nofollow noreferrer" target="_blank">Andrii Buriachevskyi</a>).</li>
<li><code class="syntax">EPHEMERAL</code> column specifier is added to <code class="syntax">CREATE TABLE</code> query. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/9436" rel="external nofollow noreferrer" target="_blank">#9436</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34424" rel="external nofollow noreferrer" target="_blank">#34424</a> (<a href="https://github.com/yakov-olkhovskiy" rel="external nofollow noreferrer" target="_blank">yakov-olkhovskiy</a>).</li>
<li>Support <code class="syntax">IF EXISTS</code> clause for <code class="syntax">TTL expr TO [DISK|VOLUME] [IF EXISTS] 'xxx'</code> feature. Parts will be moved to disk or volume only if it exists on replica, so <code class="syntax">MOVE TTL</code> rules will be able to behave differently on replicas according to the existing storage policies. Resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/34455" rel="external nofollow noreferrer" target="_blank">#34455</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34504" rel="external nofollow noreferrer" target="_blank">#34504</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Allow set default table engine and to create tables without specifying ENGINE. <a href="https://github.com/ClickHouse/ClickHouse/pull/34187" rel="external nofollow noreferrer" target="_blank">#34187</a> (<a href="https://github.com/qoega" rel="external nofollow noreferrer" target="_blank">Ilya Yatsishin</a>).</li>
<li>Add table function <code class="syntax">format(format_name, data)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34125" rel="external nofollow noreferrer" target="_blank">#34125</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Detect format in <code class="syntax">clickhouse-local</code> by file name even in the case when it is passed to stdin. <a href="https://github.com/ClickHouse/ClickHouse/pull/33829" rel="external nofollow noreferrer" target="_blank">#33829</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Add schema inference for <code class="syntax">values</code> table function. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33811" rel="external nofollow noreferrer" target="_blank">#33811</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34017" rel="external nofollow noreferrer" target="_blank">#34017</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Dynamic reload of server TLS certificates on config reload. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/15764" rel="external nofollow noreferrer" target="_blank">#15764</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/15765" rel="external nofollow noreferrer" target="_blank">#15765</a> (<a href="https://github.com/johnskopis" rel="external nofollow noreferrer" target="_blank">johnskopis</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/31257" rel="external nofollow noreferrer" target="_blank">#31257</a> (<a href="https://github.com/FArthur-cmd" rel="external nofollow noreferrer" target="_blank">Filatenkov Artur</a>).</li>
<li>Now ReplicatedMergeTree can recover data when some of its disks are broken. <a href="https://github.com/ClickHouse/ClickHouse/pull/13544" rel="external nofollow noreferrer" target="_blank">#13544</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Fault-tolerant connections in clickhouse-client: <code class="syntax">clickhouse-client ... --host host1 --host host2 --port port2 --host host3 --port port --host host4</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34490" rel="external nofollow noreferrer" target="_blank">#34490</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/33824" rel="external nofollow noreferrer" target="_blank">#33824</a> (<a href="https://github.com/DF5HSE" rel="external nofollow noreferrer" target="_blank">Filippov Denis</a>).</li>
<li>Add <code class="syntax">DEGREES</code> and <code class="syntax">RADIANS</code> functions for MySQL compatibility. <a href="https://github.com/ClickHouse/ClickHouse/pull/33769" rel="external nofollow noreferrer" target="_blank">#33769</a> (<a href="https://github.com/bharatnc" rel="external nofollow noreferrer" target="_blank">Bharat Nallan</a>).</li>
<li>Add <code class="syntax">h3ToCenterChild</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/33313" rel="external nofollow noreferrer" target="_blank">#33313</a> (<a href="https://github.com/bharatnc" rel="external nofollow noreferrer" target="_blank">Bharat Nallan</a>). Add new h3 miscellaneous functions: <code class="syntax">edgeLengthKm</code>,<code class="syntax">exactEdgeLengthKm</code>,<code class="syntax">exactEdgeLengthM</code>,<code class="syntax">exactEdgeLengthRads</code>,<code class="syntax">numHexagons</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33621" rel="external nofollow noreferrer" target="_blank">#33621</a> (<a href="https://github.com/bharatnc" rel="external nofollow noreferrer" target="_blank">Bharat Nallan</a>).</li>
<li>Add function <code class="syntax">bitSlice</code> to extract bit subsequences from String/FixedString. <a href="https://github.com/ClickHouse/ClickHouse/pull/33360" rel="external nofollow noreferrer" target="_blank">#33360</a> (<a href="https://github.com/RogerYK" rel="external nofollow noreferrer" target="_blank">RogerYK</a>).</li>
<li>Implemented <code class="syntax">meanZTest</code> aggregate function. <a href="https://github.com/ClickHouse/ClickHouse/pull/33354" rel="external nofollow noreferrer" target="_blank">#33354</a> (<a href="https://github.com/achimbab" rel="external nofollow noreferrer" target="_blank">achimbab</a>).</li>
<li>Add confidence intervals to T-tests aggregate functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/33260" rel="external nofollow noreferrer" target="_blank">#33260</a> (<a href="https://github.com/achimbab" rel="external nofollow noreferrer" target="_blank">achimbab</a>).</li>
<li>Add function <code class="syntax">addressToLineWithInlines</code>. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/26211" rel="external nofollow noreferrer" target="_blank">#26211</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33467" rel="external nofollow noreferrer" target="_blank">#33467</a> (<a href="https://github.com/cmsxbc" rel="external nofollow noreferrer" target="_blank">SuperDJY</a>).</li>
<li>Added <code class="syntax">#!</code> and <code class="syntax">#</code> as a recognised start of a single line comment. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34138" rel="external nofollow noreferrer" target="_blank">#34138</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34230" rel="external nofollow noreferrer" target="_blank">#34230</a> (<a href="https://github.com/aaronstephenkatz" rel="external nofollow noreferrer" target="_blank">Aaron Katz</a>).</li>
</ul>
<h4 id="experimental-feature_1">Experimental Feature<a class="headerlink" href="#experimental-feature_1" title="Permanent link"> </a></h4>
<ul>
<li>Functions for text classification: language and charset detection. See <a href="https://github.com/ClickHouse/ClickHouse/issues/23271" rel="external nofollow noreferrer" target="_blank">#23271</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33314" rel="external nofollow noreferrer" target="_blank">#33314</a> (<a href="https://github.com/evillique" rel="external nofollow noreferrer" target="_blank">Nikolay Degterinsky</a>).</li>
<li>Add memory overcommit to <code class="syntax">MemoryTracker</code>. Added <code class="syntax">guaranteed</code> settings for memory limits which represent soft memory limits. In case when hard memory limit is reached, <code class="syntax">MemoryTracker</code> tries to cancel the most overcommited query. New setting <code class="syntax">memory_usage_overcommit_max_wait_microseconds</code> specifies how long queries may wait another query to stop. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/28375" rel="external nofollow noreferrer" target="_blank">#28375</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/31182" rel="external nofollow noreferrer" target="_blank">#31182</a> (<a href="https://github.com/novikd" rel="external nofollow noreferrer" target="_blank">Dmitry Novik</a>).</li>
<li>Enable stream to table join in WindowView. <a href="https://github.com/ClickHouse/ClickHouse/pull/33729" rel="external nofollow noreferrer" target="_blank">#33729</a> (<a href="https://github.com/Vxider" rel="external nofollow noreferrer" target="_blank">vxider</a>).</li>
<li>Support <code class="syntax">SET</code>, <code class="syntax">YEAR</code>, <code class="syntax">TIME</code> and <code class="syntax">GEOMETRY</code> data types in <code class="syntax">MaterializedMySQL</code> (experimental feature). Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/18091" rel="external nofollow noreferrer" target="_blank">#18091</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/21536" rel="external nofollow noreferrer" target="_blank">#21536</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/26361" rel="external nofollow noreferrer" target="_blank">#26361</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33429" rel="external nofollow noreferrer" target="_blank">#33429</a> (<a href="https://github.com/zzsmdfj" rel="external nofollow noreferrer" target="_blank">zzsmdfj</a>).</li>
<li>Fix various issues when projection is enabled by default. Each issue is described in separate commit. This is for <a href="https://github.com/ClickHouse/ClickHouse/issues/33678" rel="external nofollow noreferrer" target="_blank">#33678</a> . This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34273" rel="external nofollow noreferrer" target="_blank">#34273</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34305" rel="external nofollow noreferrer" target="_blank">#34305</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
</ul>
<h4 id="performance-improvement_1">Performance Improvement<a class="headerlink" href="#performance-improvement_1" title="Permanent link"> </a></h4>
<ul>
<li>Support <code class="syntax">optimize_read_in_order</code> if prefix of sorting key is already sorted. E.g. if we have sorting key <code class="syntax">ORDER BY (a, b)</code> in table and query with <code class="syntax">WHERE a = const ORDER BY b</code> clauses, now it will be applied reading in order of sorting key instead of full sort. <a href="https://github.com/ClickHouse/ClickHouse/pull/32748" rel="external nofollow noreferrer" target="_blank">#32748</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Improve performance of partitioned insert into table functions <code class="syntax">URL</code>, <code class="syntax">S3</code>, <code class="syntax">File</code>, <code class="syntax">HDFS</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34348" rel="external nofollow noreferrer" target="_blank">#34348</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34510" rel="external nofollow noreferrer" target="_blank">#34510</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Multiple performance improvements of clickhouse-keeper. <a href="https://github.com/ClickHouse/ClickHouse/pull/34484" rel="external nofollow noreferrer" target="_blank">#34484</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/34587" rel="external nofollow noreferrer" target="_blank">#34587</a> (<a href="https://github.com/zhanglistar" rel="external nofollow noreferrer" target="_blank">zhanglistar</a>).</li>
<li><code class="syntax">FlatDictionary</code> improve performance of dictionary data load. <a href="https://github.com/ClickHouse/ClickHouse/pull/33871" rel="external nofollow noreferrer" target="_blank">#33871</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Improve performance of <code class="syntax">mapPopulateSeries</code> function. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33944" rel="external nofollow noreferrer" target="_blank">#33944</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34318" rel="external nofollow noreferrer" target="_blank">#34318</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li><code class="syntax">_file</code> and <code class="syntax">_path</code> virtual columns (in file-like table engines) are made <code class="syntax">LowCardinality</code> - it will make queries for multiple files faster. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34300" rel="external nofollow noreferrer" target="_blank">#34300</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34317" rel="external nofollow noreferrer" target="_blank">#34317</a> (<a href="https://github.com/ucasfl" rel="external nofollow noreferrer" target="_blank">flynn</a>).</li>
<li>Speed up loading of data parts. It was not parallelized before: the setting <code class="syntax">part_loading_threads</code> did not have effect. See <a href="https://github.com/ClickHouse/ClickHouse/issues/4699" rel="external nofollow noreferrer" target="_blank">#4699</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34310" rel="external nofollow noreferrer" target="_blank">#34310</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Improve performance of <code class="syntax">LineAsString</code> format. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34303" rel="external nofollow noreferrer" target="_blank">#34303</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34306" rel="external nofollow noreferrer" target="_blank">#34306</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Optimize <code class="syntax">quantilesExact{Low,High}</code> to use <code class="syntax">nth_element</code> instead of <code class="syntax">sort</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34287" rel="external nofollow noreferrer" target="_blank">#34287</a> (<a href="https://github.com/danlark1" rel="external nofollow noreferrer" target="_blank">Danila Kutenin</a>).</li>
<li>Slightly improve performance of <code class="syntax">Regexp</code> format. <a href="https://github.com/ClickHouse/ClickHouse/pull/34202" rel="external nofollow noreferrer" target="_blank">#34202</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Minor improvement for analysis of scalar subqueries. <a href="https://github.com/ClickHouse/ClickHouse/pull/34128" rel="external nofollow noreferrer" target="_blank">#34128</a> (<a href="https://github.com/fedrod" rel="external nofollow noreferrer" target="_blank">Federico Rodriguez</a>).</li>
<li>Make ORDER BY tuple almost as fast as ORDER BY columns. We have special optimizations for multiple column ORDER BY: <a href="https://github.com/ClickHouse/ClickHouse/pull/10831" target="_blank">https://github.com/ClickHouse/ClickHouse/pull/10831</a> . It's beneficial to also apply to tuple columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/34060" rel="external nofollow noreferrer" target="_blank">#34060</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Rework and reintroduce the scalar subqueries cache to Materialized Views execution. <a href="https://github.com/ClickHouse/ClickHouse/pull/33958" rel="external nofollow noreferrer" target="_blank">#33958</a> (<a href="https://github.com/Algunenano" rel="external nofollow noreferrer" target="_blank">Raúl Marín</a>).</li>
<li>Slightly improve performance of <code class="syntax">ORDER BY</code> by adding x86-64 AVX-512 support for <code class="syntax">memcmpSmall</code> functions to accelerate memory comparison. It works only if you compile ClickHouse by yourself. <a href="https://github.com/ClickHouse/ClickHouse/pull/33706" rel="external nofollow noreferrer" target="_blank">#33706</a> (<a href="https://github.com/hanqf-git" rel="external nofollow noreferrer" target="_blank">hanqf-git</a>).</li>
<li>Improve <code class="syntax">range_hashed</code> dictionary performance if for key there are a lot of intervals. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/23821" rel="external nofollow noreferrer" target="_blank">#23821</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33516" rel="external nofollow noreferrer" target="_blank">#33516</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>For inserts and merges into S3, write files in parallel whenever possible (TODO: check if it's merged). <a href="https://github.com/ClickHouse/ClickHouse/pull/33291" rel="external nofollow noreferrer" target="_blank">#33291</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Improve <code class="syntax">clickhouse-keeper</code> performance and fix several memory leaks in NuRaft library. <a href="https://github.com/ClickHouse/ClickHouse/pull/33329" rel="external nofollow noreferrer" target="_blank">#33329</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
</ul>
<h4 id="improvement_1">Improvement<a class="headerlink" href="#improvement_1" title="Permanent link"> </a></h4>
<ul>
<li>Support asynchronous inserts in <code class="syntax">clickhouse-client</code> for queries with inlined data. <a href="https://github.com/ClickHouse/ClickHouse/pull/34267" rel="external nofollow noreferrer" target="_blank">#34267</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Functions <code class="syntax">dictGet</code>, <code class="syntax">dictHas</code> implicitly cast key argument to dictionary key structure, if they are different. <a href="https://github.com/ClickHouse/ClickHouse/pull/33672" rel="external nofollow noreferrer" target="_blank">#33672</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Improvements for <code class="syntax">range_hashed</code> dictionaries. Improve performance of load time if there are multiple attributes. Allow to create a dictionary without attributes. Added option to specify strategy when intervals <code class="syntax">start</code> and <code class="syntax">end</code> have <code class="syntax">Nullable</code> type <code class="syntax">convert_null_range_bound_to_open</code> by default is <code class="syntax">true</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/29791" rel="external nofollow noreferrer" target="_blank">#29791</a>. Allow to specify <code class="syntax">Float</code>, <code class="syntax">Decimal</code>, <code class="syntax">DateTime64</code>, <code class="syntax">Int128</code>, <code class="syntax">Int256</code>, <code class="syntax">UInt128</code>, <code class="syntax">UInt256</code> as range types. <code class="syntax">RangeHashedDictionary</code> added support for range values that extend <code class="syntax">Int64</code> type. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/28322" rel="external nofollow noreferrer" target="_blank">#28322</a>. Added option <code class="syntax">range_lookup_strategy</code> to specify range lookup type <code class="syntax">min</code>, <code class="syntax">max</code> by default is <code class="syntax">min</code> . Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/21647" rel="external nofollow noreferrer" target="_blank">#21647</a>. Fixed allocated bytes calculations. Fixed type name in <code class="syntax">system.dictionaries</code> in case of <code class="syntax">ComplexKeyHashedDictionary</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33927" rel="external nofollow noreferrer" target="_blank">#33927</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li><code class="syntax">flat</code>, <code class="syntax">hashed</code>, <code class="syntax">hashed_array</code> dictionaries now support creating with empty attributes, with support of reading the keys and using <code class="syntax">dictHas</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33820" rel="external nofollow noreferrer" target="_blank">#33820</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33918" rel="external nofollow noreferrer" target="_blank">#33918</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Added support for <code class="syntax">DateTime64</code> data type in dictionaries. <a href="https://github.com/ClickHouse/ClickHouse/pull/33914" rel="external nofollow noreferrer" target="_blank">#33914</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Allow to write <code class="syntax">s3(url, access_key_id, secret_access_key)</code> (autodetect of data format and table structure, but with explicit credentials). <a href="https://github.com/ClickHouse/ClickHouse/pull/34503" rel="external nofollow noreferrer" target="_blank">#34503</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Added sending of the output format back to client like it's done in HTTP protocol as suggested in <a href="https://github.com/ClickHouse/ClickHouse/issues/34362" rel="external nofollow noreferrer" target="_blank">#34362</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34362" rel="external nofollow noreferrer" target="_blank">#34362</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34499" rel="external nofollow noreferrer" target="_blank">#34499</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Send ProfileEvents statistics in case of INSERT SELECT query (to display query metrics in <code class="syntax">clickhouse-client</code> for this type of queries). <a href="https://github.com/ClickHouse/ClickHouse/pull/34498" rel="external nofollow noreferrer" target="_blank">#34498</a> (<a href="https://github.com/novikd" rel="external nofollow noreferrer" target="_blank">Dmitry Novik</a>).</li>
<li>Recognize <code class="syntax">.jsonl</code> extension for JSONEachRow format. <a href="https://github.com/ClickHouse/ClickHouse/pull/34496" rel="external nofollow noreferrer" target="_blank">#34496</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Improve schema inference in clickhouse-local. Allow to write just <code class="syntax">clickhouse-local -q "select * from table" &lt; data.format</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34495" rel="external nofollow noreferrer" target="_blank">#34495</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Privileges CREATE/ALTER/DROP ROW POLICY now can be granted on a table or on <code class="syntax">database.*</code> as well as globally <code class="syntax">*.*</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34489" rel="external nofollow noreferrer" target="_blank">#34489</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Allow to export arbitrary large files to <code class="syntax">s3</code>. Add two new settings: <code class="syntax">s3_upload_part_size_multiply_factor</code> and <code class="syntax">s3_upload_part_size_multiply_parts_count_threshold</code>. Now each time <code class="syntax">s3_upload_part_size_multiply_parts_count_threshold</code> uploaded to S3 from a single query <code class="syntax">s3_min_upload_part_size</code> multiplied by <code class="syntax">s3_upload_part_size_multiply_factor</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34244" rel="external nofollow noreferrer" target="_blank">#34244</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34422" rel="external nofollow noreferrer" target="_blank">#34422</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Allow to skip not found (404) URLs for globs when using URL storage / table function. Also closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34359" rel="external nofollow noreferrer" target="_blank">#34359</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34392" rel="external nofollow noreferrer" target="_blank">#34392</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Default input and output formats for <code class="syntax">clickhouse-local</code> that can be overriden by --input-format and --output-format. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/30631" rel="external nofollow noreferrer" target="_blank">#30631</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34352" rel="external nofollow noreferrer" target="_blank">#34352</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Add options for <code class="syntax">clickhouse-format</code>. Which close <a href="https://github.com/ClickHouse/ClickHouse/issues/30528" rel="external nofollow noreferrer" target="_blank">#30528</a> - <code class="syntax">max_query_size</code> - <code class="syntax">max_parser_depth</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34349" rel="external nofollow noreferrer" target="_blank">#34349</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Better handling of pre-inputs before client start. This is for <a href="https://github.com/ClickHouse/ClickHouse/issues/34308" rel="external nofollow noreferrer" target="_blank">#34308</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34336" rel="external nofollow noreferrer" target="_blank">#34336</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li><code class="syntax">REGEXP_MATCHES</code> and <code class="syntax">REGEXP_REPLACE</code> function aliases for compatibility with PostgreSQL. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/30885" rel="external nofollow noreferrer" target="_blank">#30885</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34334" rel="external nofollow noreferrer" target="_blank">#34334</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Some servers expect a User-Agent header in their HTTP requests. A <code class="syntax">User-Agent</code> header entry has been added to HTTP requests of the form: User-Agent: ClickHouse/VERSION_STRING. <a href="https://github.com/ClickHouse/ClickHouse/pull/34330" rel="external nofollow noreferrer" target="_blank">#34330</a> (<a href="https://github.com/surahman" rel="external nofollow noreferrer" target="_blank">Saad Ur Rahman</a>).</li>
<li>Cancel merges before acquiring table lock for <code class="syntax">TRUNCATE</code> query to avoid <code class="syntax">DEADLOCK_AVOIDED</code> error in some cases. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34302" rel="external nofollow noreferrer" target="_blank">#34302</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34304" rel="external nofollow noreferrer" target="_blank">#34304</a> (<a href="https://github.com/tavplubix" rel="external nofollow noreferrer" target="_blank">tavplubix</a>).</li>
<li>Change severity of the "Cancelled merging parts" message in logs, because it's not an error. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34148" rel="external nofollow noreferrer" target="_blank">#34148</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34232" rel="external nofollow noreferrer" target="_blank">#34232</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Add ability to compose PostgreSQL-style cast operator <code class="syntax">::</code> with expressions using <code class="syntax">[]</code> and <code class="syntax">.</code> operators (array and tuple indexing). <a href="https://github.com/ClickHouse/ClickHouse/pull/34229" rel="external nofollow noreferrer" target="_blank">#34229</a> (<a href="https://github.com/evillique" rel="external nofollow noreferrer" target="_blank">Nikolay Degterinsky</a>).</li>
<li>Recognize <code class="syntax">YYYYMMDD-hhmmss</code> format in <code class="syntax">parseDateTimeBestEffort</code> function. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34206" rel="external nofollow noreferrer" target="_blank">#34206</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34208" rel="external nofollow noreferrer" target="_blank">#34208</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Allow carriage return in the middle of the line while parsing by <code class="syntax">Regexp</code> format. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34200" rel="external nofollow noreferrer" target="_blank">#34200</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34205" rel="external nofollow noreferrer" target="_blank">#34205</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Allow to parse dictionary's <code class="syntax">PRIMARY KEY</code> as <code class="syntax">PRIMARY KEY (id, value)</code>; previously supported only <code class="syntax">PRIMARY KEY id, value</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34135" rel="external nofollow noreferrer" target="_blank">#34135</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34141" rel="external nofollow noreferrer" target="_blank">#34141</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>An optional argument for <code class="syntax">splitByChar</code> to limit the number of resulting elements. close <a href="https://github.com/ClickHouse/ClickHouse/issues/34081" rel="external nofollow noreferrer" target="_blank">#34081</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34140" rel="external nofollow noreferrer" target="_blank">#34140</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Improving the experience of multiple line editing for clickhouse-client. This is a follow-up of <a href="https://github.com/ClickHouse/ClickHouse/pull/31123" rel="external nofollow noreferrer" target="_blank">#31123</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34114" rel="external nofollow noreferrer" target="_blank">#34114</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Add <code class="syntax">UUID</code> suport in <code class="syntax">MsgPack</code> input/output format. <a href="https://github.com/ClickHouse/ClickHouse/pull/34065" rel="external nofollow noreferrer" target="_blank">#34065</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Tracing context (for OpenTelemetry) is now propagated from GRPC client metadata (this change is relevant for GRPC client-server protocol). <a href="https://github.com/ClickHouse/ClickHouse/pull/34064" rel="external nofollow noreferrer" target="_blank">#34064</a> (<a href="https://github.com/andremarianiello" rel="external nofollow noreferrer" target="_blank">andremarianiello</a>).</li>
<li>Supports all types of <code class="syntax">SYSTEM</code> queries with <code class="syntax">ON CLUSTER</code> clause. <a href="https://github.com/ClickHouse/ClickHouse/pull/34005" rel="external nofollow noreferrer" target="_blank">#34005</a> (<a href="https://github.com/nicelulu" rel="external nofollow noreferrer" target="_blank">小路</a>).</li>
<li>Improve memory accounting for queries that are using less than <code class="syntax">max_untracker_memory</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34001" rel="external nofollow noreferrer" target="_blank">#34001</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fixed UTF-8 string case-insensitive search when lowercase and uppercase characters are represented by different number of bytes. Example is <code class="syntax">ẞ</code> and <code class="syntax">ß</code>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/7334" rel="external nofollow noreferrer" target="_blank">#7334</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33992" rel="external nofollow noreferrer" target="_blank">#33992</a> (<a href="https://github.com/HarryLeeIBM" rel="external nofollow noreferrer" target="_blank">Harry Lee</a>).</li>
<li>Detect format and schema from stdin in <code class="syntax">clickhouse-local</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33960" rel="external nofollow noreferrer" target="_blank">#33960</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Correctly handle the case of misconfiguration when multiple disks are using the same path on the filesystem. <a href="https://github.com/ClickHouse/ClickHouse/issues/29072" rel="external nofollow noreferrer" target="_blank">#29072</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33905" rel="external nofollow noreferrer" target="_blank">#33905</a> (<a href="https://github.com/zhongyuankai" rel="external nofollow noreferrer" target="_blank">zhongyuankai</a>).</li>
<li>Try every resolved IP address while getting S3 proxy. S3 proxies are rarely used, mostly in Yandex Cloud. <a href="https://github.com/ClickHouse/ClickHouse/pull/33862" rel="external nofollow noreferrer" target="_blank">#33862</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Support EXPLAIN AST CREATE FUNCTION query <code class="syntax">EXPLAIN AST CREATE FUNCTION mycast AS (n) -&gt; cast(n as String)</code> will return <code class="syntax">EXPLAIN AST CREATE FUNCTION mycast AS n -&gt; CAST(n, 'String')</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33819" rel="external nofollow noreferrer" target="_blank">#33819</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Added support for cast from <code class="syntax">Map(Key, Value)</code> to <code class="syntax">Array(Tuple(Key, Value))</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33794" rel="external nofollow noreferrer" target="_blank">#33794</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Add some improvements and fixes for <code class="syntax">Bool</code> data type. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33244" rel="external nofollow noreferrer" target="_blank">#33244</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33737" rel="external nofollow noreferrer" target="_blank">#33737</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Parse and store OpenTelemetry trace-id in big-endian order. <a href="https://github.com/ClickHouse/ClickHouse/pull/33723" rel="external nofollow noreferrer" target="_blank">#33723</a> (<a href="https://github.com/FrankChen021" rel="external nofollow noreferrer" target="_blank">Frank Chen</a>).</li>
<li>Improvement for <code class="syntax">fromUnixTimestamp64</code> family functions.. They now accept any integer value that can be converted to <code class="syntax">Int64</code>. This closes: <a href="https://github.com/ClickHouse/ClickHouse/issues/14648" rel="external nofollow noreferrer" target="_blank">#14648</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33505" rel="external nofollow noreferrer" target="_blank">#33505</a> (<a href="https://github.com/zvonand" rel="external nofollow noreferrer" target="_blank">Andrey Zvonov</a>).</li>
<li>Reimplement <code class="syntax">_shard_num</code> from constants (see <a href="https://github.com/ClickHouse/ClickHouse/issues/7624" rel="external nofollow noreferrer" target="_blank">#7624</a>) with <code class="syntax">shardNum()</code> function (seee <a href="https://github.com/ClickHouse/ClickHouse/issues/27020" rel="external nofollow noreferrer" target="_blank">#27020</a>), to avoid possible issues (like those that had been found in <a href="https://github.com/ClickHouse/ClickHouse/issues/16947" rel="external nofollow noreferrer" target="_blank">#16947</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/33392" rel="external nofollow noreferrer" target="_blank">#33392</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Enable binary arithmetic (plus, minus, multiply, division, least, greatest) between Decimal and Float. <a href="https://github.com/ClickHouse/ClickHouse/pull/33355" rel="external nofollow noreferrer" target="_blank">#33355</a> (<a href="https://github.com/ucasfl" rel="external nofollow noreferrer" target="_blank">flynn</a>).</li>
<li>Respect cgroups limits in max_threads autodetection. <a href="https://github.com/ClickHouse/ClickHouse/pull/33342" rel="external nofollow noreferrer" target="_blank">#33342</a> (<a href="https://github.com/JaySon-Huang" rel="external nofollow noreferrer" target="_blank">JaySon</a>).</li>
<li>Add new clickhouse-keeper setting <code class="syntax">min_session_timeout_ms</code>. Now clickhouse-keeper will determine client session timeout according to <code class="syntax">min_session_timeout_ms</code> and <code class="syntax">session_timeout_ms</code> settings. <a href="https://github.com/ClickHouse/ClickHouse/pull/33288" rel="external nofollow noreferrer" target="_blank">#33288</a> (<a href="https://github.com/JackyWoo" rel="external nofollow noreferrer" target="_blank">JackyWoo</a>).</li>
<li>Added <code class="syntax">UUID</code> data type support for functions <code class="syntax">hex</code> and <code class="syntax">bin</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32170" rel="external nofollow noreferrer" target="_blank">#32170</a> (<a href="https://github.com/FrankChen021" rel="external nofollow noreferrer" target="_blank">Frank Chen</a>).</li>
<li>Fix reading of subcolumns with dots in their names. In particular fixed reading of <code class="syntax">Nested</code> columns, if their element names contain dots (e.g <code class="syntax">Nested(`keys.name` String, `keys.id` UInt64, values UInt64)</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/34228" rel="external nofollow noreferrer" target="_blank">#34228</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fixes <code class="syntax">parallel_view_processing = 0</code> not working when inserting into a table using <code class="syntax">VALUES</code>. - Fixes <code class="syntax">view_duration_ms</code> in the <code class="syntax">query_views_log</code> not being set correctly for materialized views. <a href="https://github.com/ClickHouse/ClickHouse/pull/34067" rel="external nofollow noreferrer" target="_blank">#34067</a> (<a href="https://github.com/Algunenano" rel="external nofollow noreferrer" target="_blank">Raúl Marín</a>).</li>
<li>Fix parsing tables structure from ZooKeeper: now metadata from ZooKeeper compared with local metadata in canonical form. It helps when canonical function names can change between ClickHouse versions. <a href="https://github.com/ClickHouse/ClickHouse/pull/33933" rel="external nofollow noreferrer" target="_blank">#33933</a> (<a href="https://github.com/sunny19930321" rel="external nofollow noreferrer" target="_blank">sunny</a>).</li>
<li>Properly escape some characters for interaction with LDAP. <a href="https://github.com/ClickHouse/ClickHouse/pull/33401" rel="external nofollow noreferrer" target="_blank">#33401</a> (<a href="https://github.com/IlyaTsoi" rel="external nofollow noreferrer" target="_blank">IlyaTsoi</a>).</li>
</ul>
<h4 id="build-testing-packaging-improvement_1">Build/Testing/Packaging Improvement<a class="headerlink" href="#build-testing-packaging-improvement_1" title="Permanent link"> </a></h4>
<ul>
<li>Remove unbundled build support. <a href="https://github.com/ClickHouse/ClickHouse/pull/33690" rel="external nofollow noreferrer" target="_blank">#33690</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Ensure that tests don't depend on the result of non-stable sorting of equal elements. Added equal items ranges randomization in debug after sort to prevent issues when we rely on equal items sort order. <a href="https://github.com/ClickHouse/ClickHouse/pull/34393" rel="external nofollow noreferrer" target="_blank">#34393</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Add verbosity to a style check. <a href="https://github.com/ClickHouse/ClickHouse/pull/34289" rel="external nofollow noreferrer" target="_blank">#34289</a> (<a href="https://github.com/Felixoid" rel="external nofollow noreferrer" target="_blank">Mikhail f. Shiryaev</a>).</li>
<li>Remove <code class="syntax">clickhouse-test</code> debian package because it's obsolete. <a href="https://github.com/ClickHouse/ClickHouse/pull/33948" rel="external nofollow noreferrer" target="_blank">#33948</a> (<a href="https://github.com/qoega" rel="external nofollow noreferrer" target="_blank">Ilya Yatsishin</a>).</li>
<li>Multiple improvements for build system to remove the possibility of occasionally using packages from the OS and to enforce hermetic builds. <a href="https://github.com/ClickHouse/ClickHouse/pull/33695" rel="external nofollow noreferrer" target="_blank">#33695</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
</ul>
<h4 id="bug-fix-user-visible-misbehaviour-in-official-stable-or-prestable-release_1">Bug Fix (user-visible misbehaviour in official stable or prestable release)<a class="headerlink" href="#bug-fix-user-visible-misbehaviour-in-official-stable-or-prestable-release_1" title="Permanent link"> </a></h4>
<ul>
<li>Fixed the assertion in case of using <code class="syntax">allow_experimental_parallel_reading_from_replicas</code> with <code class="syntax">max_parallel_replicas</code> equals to 1. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34525" rel="external nofollow noreferrer" target="_blank">#34525</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34613" rel="external nofollow noreferrer" target="_blank">#34613</a> (<a href="https://github.com/nikitamikhaylov" rel="external nofollow noreferrer" target="_blank">Nikita Mikhaylov</a>).</li>
<li>Fix rare bug while reading of empty arrays, which could lead to <code class="syntax">Data compressed with different methods</code> error. It can reproduce if you have mostly empty arrays, but not always. And reading is performed in backward direction with ORDER BY ... DESC. This error is extremely unlikely to happen. <a href="https://github.com/ClickHouse/ClickHouse/pull/34327" rel="external nofollow noreferrer" target="_blank">#34327</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix wrong result of <code class="syntax">round</code>/<code class="syntax">roundBankers</code> if integer values of small types are rounded. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33267" rel="external nofollow noreferrer" target="_blank">#33267</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34562" rel="external nofollow noreferrer" target="_blank">#34562</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Sometimes query cancellation did not work immediately when we were reading multiple files from s3 or HDFS. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34301" rel="external nofollow noreferrer" target="_blank">#34301</a> Relates to <a href="https://github.com/ClickHouse/ClickHouse/issues/34397" rel="external nofollow noreferrer" target="_blank">#34397</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34539" rel="external nofollow noreferrer" target="_blank">#34539</a> (<a href="https://github.com/novikd" rel="external nofollow noreferrer" target="_blank">Dmitry Novik</a>).</li>
<li>Fix exception <code class="syntax">Chunk should have AggregatedChunkInfo in MergingAggregatedTransform</code> (in case of <code class="syntax">optimize_aggregation_in_order = 1</code> and <code class="syntax">distributed_aggregation_memory_efficient = 0</code>). Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34526" rel="external nofollow noreferrer" target="_blank">#34526</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34532" rel="external nofollow noreferrer" target="_blank">#34532</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix comparison between integers and floats in index analysis. Previously it could lead to skipping some granules for reading by mistake. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34493" rel="external nofollow noreferrer" target="_blank">#34493</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34528" rel="external nofollow noreferrer" target="_blank">#34528</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix compression support in URL engine. <a href="https://github.com/ClickHouse/ClickHouse/pull/34524" rel="external nofollow noreferrer" target="_blank">#34524</a> (<a href="https://github.com/FrankChen021" rel="external nofollow noreferrer" target="_blank">Frank Chen</a>).</li>
<li>Fix possible error 'file_size: Operation not supported' in files' schema autodetection. <a href="https://github.com/ClickHouse/ClickHouse/pull/34479" rel="external nofollow noreferrer" target="_blank">#34479</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fixes possible race with table deletion. <a href="https://github.com/ClickHouse/ClickHouse/pull/34416" rel="external nofollow noreferrer" target="_blank">#34416</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix possible error <code class="syntax">Cannot convert column Function to mask</code> in short circuit function evaluation. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34171" rel="external nofollow noreferrer" target="_blank">#34171</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34415" rel="external nofollow noreferrer" target="_blank">#34415</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix potential crash when doing schema inference from url source. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34147" rel="external nofollow noreferrer" target="_blank">#34147</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34405" rel="external nofollow noreferrer" target="_blank">#34405</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>For UDFs access permissions were checked for database level instead of global level as it should be. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34281" rel="external nofollow noreferrer" target="_blank">#34281</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34404" rel="external nofollow noreferrer" target="_blank">#34404</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Fix wrong engine syntax in result of <code class="syntax">SHOW CREATE DATABASE</code> query for databases with engine <code class="syntax">Memory</code>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34335" rel="external nofollow noreferrer" target="_blank">#34335</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34345" rel="external nofollow noreferrer" target="_blank">#34345</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Fixed a couple of extremely rare race conditions that might lead to broken state of replication queue and "intersecting parts" error. <a href="https://github.com/ClickHouse/ClickHouse/pull/34297" rel="external nofollow noreferrer" target="_blank">#34297</a> (<a href="https://github.com/tavplubix" rel="external nofollow noreferrer" target="_blank">tavplubix</a>).</li>
<li>Fix progress bar width. It was incorrectly rounded to integer number of characters. <a href="https://github.com/ClickHouse/ClickHouse/pull/34275" rel="external nofollow noreferrer" target="_blank">#34275</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Fix current_user/current_address client information fields for inter-server communication (before this patch current_user/current_address will be preserved from the previous query). <a href="https://github.com/ClickHouse/ClickHouse/pull/34263" rel="external nofollow noreferrer" target="_blank">#34263</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix memory leak in case of some Exception during query processing with <code class="syntax">optimize_aggregation_in_order=1</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34234" rel="external nofollow noreferrer" target="_blank">#34234</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix metric <code class="syntax">Query</code>, which shows the number of executing queries. In last several releases it was always 0. <a href="https://github.com/ClickHouse/ClickHouse/pull/34224" rel="external nofollow noreferrer" target="_blank">#34224</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix schema inference for table runction <code class="syntax">s3</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34186" rel="external nofollow noreferrer" target="_blank">#34186</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix rare and benign race condition in <code class="syntax">HDFS</code>, <code class="syntax">S3</code> and <code class="syntax">URL</code> storage engines which can lead to additional connections. <a href="https://github.com/ClickHouse/ClickHouse/pull/34172" rel="external nofollow noreferrer" target="_blank">#34172</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Fix bug which can rarely lead to error "Cannot read all data" while reading LowCardinality columns of MergeTree table engines family which stores data on remote file system like S3 (virtual filesystem over s3 is an experimental feature that is not ready for production). <a href="https://github.com/ClickHouse/ClickHouse/pull/34139" rel="external nofollow noreferrer" target="_blank">#34139</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Fix inserts to distributed tables in case of a change of native protocol. The last change was in the version 22.1, so there may be some failures of inserts to distributed tables after upgrade to that version. <a href="https://github.com/ClickHouse/ClickHouse/pull/34132" rel="external nofollow noreferrer" target="_blank">#34132</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix possible data race in <code class="syntax">File</code> table engine that was introduced in <a href="https://github.com/ClickHouse/ClickHouse/pull/33960" rel="external nofollow noreferrer" target="_blank">#33960</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34111" rel="external nofollow noreferrer" target="_blank">#34111</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34113" rel="external nofollow noreferrer" target="_blank">#34113</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fixed minor race condition that might cause "intersecting parts" error in extremely rare cases after ZooKeeper connection loss. <a href="https://github.com/ClickHouse/ClickHouse/pull/34096" rel="external nofollow noreferrer" target="_blank">#34096</a> (<a href="https://github.com/tavplubix" rel="external nofollow noreferrer" target="_blank">tavplubix</a>).</li>
<li>Fix asynchronous inserts with <code class="syntax">Native</code> format. <a href="https://github.com/ClickHouse/ClickHouse/pull/34068" rel="external nofollow noreferrer" target="_blank">#34068</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix bug which lead to inability for server to start when both replicated access storage and keeper (embedded in clickhouse-server) are used. Introduced two settings for keeper socket timeout instead of settings from default user: <code class="syntax">keeper_server.socket_receive_timeout_sec</code> and <code class="syntax">keeper_server.socket_send_timeout_sec</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33973" rel="external nofollow noreferrer" target="_blank">#33973</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33988" rel="external nofollow noreferrer" target="_blank">#33988</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Fix segfault while parsing ORC file with corrupted footer. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33797" rel="external nofollow noreferrer" target="_blank">#33797</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33984" rel="external nofollow noreferrer" target="_blank">#33984</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix parsing IPv6 from query parameter (prepared statements) and fix IPv6 to string conversion. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33928" rel="external nofollow noreferrer" target="_blank">#33928</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33971" rel="external nofollow noreferrer" target="_blank">#33971</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix crash while reading of nested tuples. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33838" rel="external nofollow noreferrer" target="_blank">#33838</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33956" rel="external nofollow noreferrer" target="_blank">#33956</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix usage of functions <code class="syntax">array</code> and <code class="syntax">tuple</code> with literal arguments in distributed queries. Previously it could lead to <code class="syntax">Not found columns</code> exception. <a href="https://github.com/ClickHouse/ClickHouse/pull/33938" rel="external nofollow noreferrer" target="_blank">#33938</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Aggregate function combinator <code class="syntax">-If</code> did not correctly process <code class="syntax">Nullable</code> filter argument. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/27073" rel="external nofollow noreferrer" target="_blank">#27073</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33920" rel="external nofollow noreferrer" target="_blank">#33920</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Fix potential race condition when doing remote disk read (virtual filesystem over s3 is an experimental feature that is not ready for production). <a href="https://github.com/ClickHouse/ClickHouse/pull/33912" rel="external nofollow noreferrer" target="_blank">#33912</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Fix crash if SQL UDF is created with lambda with non identifier arguments. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33866" rel="external nofollow noreferrer" target="_blank">#33866</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33868" rel="external nofollow noreferrer" target="_blank">#33868</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Fix usage of sparse columns (which can be enabled by experimental setting <code class="syntax">ratio_of_defaults_for_sparse_serialization</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/33849" rel="external nofollow noreferrer" target="_blank">#33849</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fixed <code class="syntax">replica is not readonly</code> logical error on <code class="syntax">SYSTEM RESTORE REPLICA</code> query when replica is actually readonly. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33806" rel="external nofollow noreferrer" target="_blank">#33806</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33847" rel="external nofollow noreferrer" target="_blank">#33847</a> (<a href="https://github.com/tavplubix" rel="external nofollow noreferrer" target="_blank">tavplubix</a>).</li>
<li>Fix memory leak in <code class="syntax">clickhouse-keeper</code> in case of compression is used (default). <a href="https://github.com/ClickHouse/ClickHouse/pull/33840" rel="external nofollow noreferrer" target="_blank">#33840</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix index analysis with no common types available. <a href="https://github.com/ClickHouse/ClickHouse/pull/33833" rel="external nofollow noreferrer" target="_blank">#33833</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Fix schema inference for <code class="syntax">JSONEachRow</code> and <code class="syntax">JSONCompactEachRow</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33830" rel="external nofollow noreferrer" target="_blank">#33830</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix usage of external dictionaries with <code class="syntax">redis</code> source and large number of keys. <a href="https://github.com/ClickHouse/ClickHouse/pull/33804" rel="external nofollow noreferrer" target="_blank">#33804</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix bug in client that led to 'Connection reset by peer' in server. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33309" rel="external nofollow noreferrer" target="_blank">#33309</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33790" rel="external nofollow noreferrer" target="_blank">#33790</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix parsing query INSERT INTO ... VALUES SETTINGS ... (...), ... <a href="https://github.com/ClickHouse/ClickHouse/pull/33776" rel="external nofollow noreferrer" target="_blank">#33776</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix bug of check table when creating data part with wide format and projection. <a href="https://github.com/ClickHouse/ClickHouse/pull/33774" rel="external nofollow noreferrer" target="_blank">#33774</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">李扬</a>).</li>
<li>Fix tiny race between count() and INSERT/merges/... in MergeTree (it is possible to return incorrect number of rows for SELECT with optimize_trivial_count_query). <a href="https://github.com/ClickHouse/ClickHouse/pull/33753" rel="external nofollow noreferrer" target="_blank">#33753</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Throw exception when directory listing request has failed in storage HDFS. <a href="https://github.com/ClickHouse/ClickHouse/pull/33724" rel="external nofollow noreferrer" target="_blank">#33724</a> (<a href="https://github.com/liuneng1994" rel="external nofollow noreferrer" target="_blank">LiuNeng</a>).</li>
<li>Fix mutation when table contains projections. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33010" rel="external nofollow noreferrer" target="_blank">#33010</a>. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33275" rel="external nofollow noreferrer" target="_blank">#33275</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33679" rel="external nofollow noreferrer" target="_blank">#33679</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Correctly determine current database if <code class="syntax">CREATE TEMPORARY TABLE AS SELECT</code> is queried inside a named HTTP session. This is a very rare use case. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/8340" rel="external nofollow noreferrer" target="_blank">#8340</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33676" rel="external nofollow noreferrer" target="_blank">#33676</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Allow some queries with sorting, LIMIT BY, ARRAY JOIN and lambda functions. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/7462" rel="external nofollow noreferrer" target="_blank">#7462</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33675" rel="external nofollow noreferrer" target="_blank">#33675</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Fix bug in "zero copy replication" (a feature that is under development and should not be used in production) which lead to data duplication in case of TTL move. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33643" rel="external nofollow noreferrer" target="_blank">#33643</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33642" rel="external nofollow noreferrer" target="_blank">#33642</a> (<a href="https://github.com/alesapin" rel="external nofollow noreferrer" target="_blank">alesapin</a>).</li>
<li>Fix <code class="syntax">Chunk should have AggregatedChunkInfo in GroupingAggregatedTransform</code> (in case of <code class="syntax">optimize_aggregation_in_order = 1</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/33637" rel="external nofollow noreferrer" target="_blank">#33637</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix error <code class="syntax">Bad cast from type ... to DB::DataTypeArray</code> which may happen when table has <code class="syntax">Nested</code> column with dots in name, and default value is generated for it (e.g. during insert, when column is not listed). Continuation of <a href="https://github.com/ClickHouse/ClickHouse/issues/28762" rel="external nofollow noreferrer" target="_blank">#28762</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33588" rel="external nofollow noreferrer" target="_blank">#33588</a> (<a href="https://github.com/alexeypavlenko" rel="external nofollow noreferrer" target="_blank">Alexey Pavlenko</a>).</li>
<li>Export into <code class="syntax">lz4</code> files has been fixed. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31421" rel="external nofollow noreferrer" target="_blank">#31421</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/31862" rel="external nofollow noreferrer" target="_blank">#31862</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix potential crash if <code class="syntax">group_by_overflow_mode</code> was set to <code class="syntax">any</code> (approximate GROUP BY) and aggregation was performed by single column of type <code class="syntax">LowCardinality</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34506" rel="external nofollow noreferrer" target="_blank">#34506</a> (<a href="https://github.com/freedomDR" rel="external nofollow noreferrer" target="_blank">DR</a>).</li>
<li>Fix inserting to temporary tables via gRPC client-server protocol. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/34347" rel="external nofollow noreferrer" target="_blank">#34347</a>, issue <code class="syntax">#2</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34364" rel="external nofollow noreferrer" target="_blank">#34364</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Fix issue <a href="https://github.com/ClickHouse/ClickHouse/issues/19429" rel="external nofollow noreferrer" target="_blank">#19429</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/34225" rel="external nofollow noreferrer" target="_blank">#34225</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Fix issue <a href="https://github.com/ClickHouse/ClickHouse/issues/18206" rel="external nofollow noreferrer" target="_blank">#18206</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33977" rel="external nofollow noreferrer" target="_blank">#33977</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>This PR allows using multiple LDAP storages in the same list of user directories. It worked earlier but was broken because LDAP tests are disabled (they are part of the testflows tests). <a href="https://github.com/ClickHouse/ClickHouse/pull/33574" rel="external nofollow noreferrer" target="_blank">#33574</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
</ul>
<h3 id="clickhouse-release-v22-1-2022-01-18"><a id="221"></a> ClickHouse release v22.1, 2022-01-18<a class="headerlink" href="#clickhouse-release-v22-1-2022-01-18" title="Permanent link"> </a></h3>
<h4 id="upgrade-notes_1">Upgrade Notes<a class="headerlink" href="#upgrade-notes_1" title="Permanent link"> </a></h4>
<ul>
<li>The functions <code class="syntax">left</code> and <code class="syntax">right</code> were previously implemented in parser and now full-featured. Distributed queries with <code class="syntax">left</code> or <code class="syntax">right</code> functions without aliases may throw exception if cluster contains different versions of clickhouse-server. If you are upgrading your cluster and encounter this error, you should finish upgrading your cluster to ensure all nodes have the same version. Also you can add aliases (<code class="syntax">AS something</code>) to the columns in your queries to avoid this issue. <a href="https://github.com/ClickHouse/ClickHouse/pull/33407" rel="external nofollow noreferrer" target="_blank">#33407</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Resource usage by scalar subqueries is fully accounted since this version. With this change, rows read in scalar subqueries are now reported in the query_log. If the scalar subquery is cached (repeated or called for several rows) the rows read are only counted once. This change allows KILLing queries and reporting progress while they are executing scalar subqueries. <a href="https://github.com/ClickHouse/ClickHouse/pull/32271" rel="external nofollow noreferrer" target="_blank">#32271</a> (<a href="https://github.com/Algunenano" rel="external nofollow noreferrer" target="_blank">Raúl Marín</a>).</li>
</ul>
<h4 id="new-feature_2">New Feature<a class="headerlink" href="#new-feature_2" title="Permanent link"> </a></h4>
<ul>
<li>Implement data schema inference for input formats. Allow to skip structure (or write just <code class="syntax">auto</code>) in table functions <code class="syntax">file</code>, <code class="syntax">url</code>, <code class="syntax">s3</code>, <code class="syntax">hdfs</code> and in parameters of <code class="syntax">clickhouse-local</code> . Allow to skip structure in create query for table engines <code class="syntax">File</code>, <code class="syntax">HDFS</code>, <code class="syntax">S3</code>, <code class="syntax">URL</code>, <code class="syntax">Merge</code>, <code class="syntax">Buffer</code>, <code class="syntax">Distributed</code> and <code class="syntax">ReplicatedMergeTree</code> (if we add new replicas). <a href="https://github.com/ClickHouse/ClickHouse/pull/32455" rel="external nofollow noreferrer" target="_blank">#32455</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Detect format by file extension in <code class="syntax">file</code>/<code class="syntax">hdfs</code>/<code class="syntax">s3</code>/<code class="syntax">url</code> table functions and <code class="syntax">HDFS</code>/<code class="syntax">S3</code>/<code class="syntax">URL</code> table engines and also for <code class="syntax">SELECT INTO OUTFILE</code> and <code class="syntax">INSERT FROM INFILE</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/33565" rel="external nofollow noreferrer" target="_blank">#33565</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>). Close <a href="https://github.com/ClickHouse/ClickHouse/issues/30918" rel="external nofollow noreferrer" target="_blank">#30918</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33443" rel="external nofollow noreferrer" target="_blank">#33443</a> (<a href="https://github.com/zhongyuankai" rel="external nofollow noreferrer" target="_blank">OnePiece</a>).</li>
<li>A tool for collecting diagnostics data if you need support. <a href="https://github.com/ClickHouse/ClickHouse/pull/33175" rel="external nofollow noreferrer" target="_blank">#33175</a> (<a href="https://github.com/Alex-Burmak" rel="external nofollow noreferrer" target="_blank">Alexander Burmak</a>).</li>
<li>Automatic cluster discovery via Zoo/Keeper. It allows to add replicas to the cluster without changing configuration on every server. <a href="https://github.com/ClickHouse/ClickHouse/pull/31442" rel="external nofollow noreferrer" target="_blank">#31442</a> (<a href="https://github.com/vdimir" rel="external nofollow noreferrer" target="_blank">vdimir</a>).</li>
<li>Implement hive table engine to access apache hive from clickhouse. This implements: <a href="https://github.com/ClickHouse/ClickHouse/issues/29245" rel="external nofollow noreferrer" target="_blank">#29245</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/31104" rel="external nofollow noreferrer" target="_blank">#31104</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">taiyang-li</a>).</li>
<li>Add aggregate functions <code class="syntax">cramersV</code>, <code class="syntax">cramersVBiasCorrected</code>, <code class="syntax">theilsU</code> and <code class="syntax">contingency</code>. These functions calculate dependency (measure of association) between categorical values. All these functions are using cross-tab (histogram on pairs) for implementation. You can imagine it like a correlation coefficient but for any discrete values (not necessary numbers). <a href="https://github.com/ClickHouse/ClickHouse/pull/33366" rel="external nofollow noreferrer" target="_blank">#33366</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>). Initial implementation by <a href="https://github.com/Vanyok-All-is-OK" rel="external nofollow noreferrer" target="_blank">Vanyok-All-is-OK</a> and <a href="https://github.com/antikvist" rel="external nofollow noreferrer" target="_blank">antikvist</a>.</li>
<li>Added table function <code class="syntax">hdfsCluster</code> which allows processing files from HDFS in parallel from many nodes in a specified cluster, similarly to <code class="syntax">s3Cluster</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32400" rel="external nofollow noreferrer" target="_blank">#32400</a> (<a href="https://github.com/yuzhichang" rel="external nofollow noreferrer" target="_blank">Zhichang Yu</a>).</li>
<li>Adding support for disks backed by Azure Blob Storage, in a similar way it has been done for disks backed by AWS S3. <a href="https://github.com/ClickHouse/ClickHouse/pull/31505" rel="external nofollow noreferrer" target="_blank">#31505</a> (<a href="https://github.com/jkuklis" rel="external nofollow noreferrer" target="_blank">Jakub Kuklis</a>).</li>
<li>Allow <code class="syntax">COMMENT</code> in <code class="syntax">CREATE VIEW</code> (for all VIEW kinds). <a href="https://github.com/ClickHouse/ClickHouse/pull/31062" rel="external nofollow noreferrer" target="_blank">#31062</a> (<a href="https://github.com/Enmk" rel="external nofollow noreferrer" target="_blank">Vasily Nemkov</a>).</li>
<li>Dynamically reinitialize listening ports and protocols when configuration changes. <a href="https://github.com/ClickHouse/ClickHouse/pull/30549" rel="external nofollow noreferrer" target="_blank">#30549</a> (<a href="https://github.com/kmichel-aiven" rel="external nofollow noreferrer" target="_blank">Kevin Michel</a>).</li>
<li>Added <code class="syntax">left</code>, <code class="syntax">right</code>, <code class="syntax">leftUTF8</code>, <code class="syntax">rightUTF8</code> functions. Fix error in implementation of <code class="syntax">substringUTF8</code> function with negative offset (offset from the end of string). <a href="https://github.com/ClickHouse/ClickHouse/pull/33407" rel="external nofollow noreferrer" target="_blank">#33407</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Add new functions for <code class="syntax">H3</code> coordinate system: <code class="syntax">h3HexAreaKm2</code>, <code class="syntax">h3CellAreaM2</code>, <code class="syntax">h3CellAreaRads2</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33479" rel="external nofollow noreferrer" target="_blank">#33479</a> (<a href="https://github.com/bharatnc" rel="external nofollow noreferrer" target="_blank">Bharat Nallan</a>).</li>
<li>Add <code class="syntax">MONTHNAME</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/33436" rel="external nofollow noreferrer" target="_blank">#33436</a> (<a href="https://github.com/usurai" rel="external nofollow noreferrer" target="_blank">usurai</a>).</li>
<li>Added function <code class="syntax">arrayLast</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33390" rel="external nofollow noreferrer" target="_blank">#33390</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33415" rel="external nofollow noreferrer" target="_blank">#33415</a> Added function <code class="syntax">arrayLastIndex</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33465" rel="external nofollow noreferrer" target="_blank">#33465</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Add function <code class="syntax">decodeURLFormComponent</code> slightly different to <code class="syntax">decodeURLComponent</code>. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/10298" rel="external nofollow noreferrer" target="_blank">#10298</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33451" rel="external nofollow noreferrer" target="_blank">#33451</a> (<a href="https://github.com/cmsxbc" rel="external nofollow noreferrer" target="_blank">SuperDJY</a>).</li>
<li>Allow to split <code class="syntax">GraphiteMergeTree</code> rollup rules for plain/tagged metrics (optional rule_type field). <a href="https://github.com/ClickHouse/ClickHouse/pull/33494" rel="external nofollow noreferrer" target="_blank">#33494</a> (<a href="https://github.com/msaf1980" rel="external nofollow noreferrer" target="_blank">Michail Safronov</a>).</li>
</ul>
<h4 id="performance-improvement_2">Performance Improvement<a class="headerlink" href="#performance-improvement_2" title="Permanent link"> </a></h4>
<ul>
<li>Support moving conditions to <code class="syntax">PREWHERE</code> (setting <code class="syntax">optimize_move_to_prewhere</code>) for tables of <code class="syntax">Merge</code> engine if its all underlying tables supports <code class="syntax">PREWHERE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33300" rel="external nofollow noreferrer" target="_blank">#33300</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>More efficient handling of globs for URL storage. Now you can easily query million URLs in parallel with retries. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32866" rel="external nofollow noreferrer" target="_blank">#32866</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32907" rel="external nofollow noreferrer" target="_blank">#32907</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Avoid exponential backtracking in parser. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/20158" rel="external nofollow noreferrer" target="_blank">#20158</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33481" rel="external nofollow noreferrer" target="_blank">#33481</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Abuse of <code class="syntax">untuple</code> function was leading to exponential complexity of query analysis (found by fuzzer). This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33297" rel="external nofollow noreferrer" target="_blank">#33297</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33445" rel="external nofollow noreferrer" target="_blank">#33445</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Reduce allocated memory for dictionaries with string attributes. <a href="https://github.com/ClickHouse/ClickHouse/pull/33466" rel="external nofollow noreferrer" target="_blank">#33466</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Slight performance improvement of <code class="syntax">reinterpret</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/32587" rel="external nofollow noreferrer" target="_blank">#32587</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Non significant change. In extremely rare cases when data part is lost on every replica, after merging of some data parts, the subsequent queries may skip less amount of partitions during partition pruning. This hardly affects anything. <a href="https://github.com/ClickHouse/ClickHouse/pull/32220" rel="external nofollow noreferrer" target="_blank">#32220</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Improve <code class="syntax">clickhouse-keeper</code> writing performance by optimization the size calculation logic. <a href="https://github.com/ClickHouse/ClickHouse/pull/32366" rel="external nofollow noreferrer" target="_blank">#32366</a> (<a href="https://github.com/zhanglistar" rel="external nofollow noreferrer" target="_blank">zhanglistar</a>).</li>
<li>Optimize single part projection materialization. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31669" rel="external nofollow noreferrer" target="_blank">#31669</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/31885" rel="external nofollow noreferrer" target="_blank">#31885</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Improve query performance of system tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/33312" rel="external nofollow noreferrer" target="_blank">#33312</a> (<a href="https://github.com/zhongyuankai" rel="external nofollow noreferrer" target="_blank">OnePiece</a>).</li>
<li>Optimize selecting of MergeTree parts that can be moved between volumes. <a href="https://github.com/ClickHouse/ClickHouse/pull/33225" rel="external nofollow noreferrer" target="_blank">#33225</a> (<a href="https://github.com/zhongyuankai" rel="external nofollow noreferrer" target="_blank">OnePiece</a>).</li>
<li>Fix <code class="syntax">sparse_hashed</code> dict performance with sequential keys (wrong hash function). <a href="https://github.com/ClickHouse/ClickHouse/pull/32536" rel="external nofollow noreferrer" target="_blank">#32536</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
</ul>
<h4 id="experimental-feature_2">Experimental Feature<a class="headerlink" href="#experimental-feature_2" title="Permanent link"> </a></h4>
<ul>
<li>Parallel reading from multiple replicas within a shard during distributed query without using sample key. To enable this, set <code class="syntax">allow_experimental_parallel_reading_from_replicas = 1</code> and <code class="syntax">max_parallel_replicas</code> to any number. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/26748" rel="external nofollow noreferrer" target="_blank">#26748</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/29279" rel="external nofollow noreferrer" target="_blank">#29279</a> (<a href="https://github.com/nikitamikhaylov" rel="external nofollow noreferrer" target="_blank">Nikita Mikhaylov</a>).</li>
<li>Implemented sparse serialization. It can reduce usage of disk space and improve performance of some queries for columns, which contain a lot of default (zero) values. It can be enabled by setting <code class="syntax">ratio_for_sparse_serialization</code>. Sparse serialization will be chosen dynamically for column, if it has ratio of number of default values to number of all values above that threshold. Serialization (default or sparse) will be fixed for every column in part, but may varies between parts. <a href="https://github.com/ClickHouse/ClickHouse/pull/22535" rel="external nofollow noreferrer" target="_blank">#22535</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Add "TABLE OVERRIDE" feature for customizing MaterializedMySQL table schemas. <a href="https://github.com/ClickHouse/ClickHouse/pull/32325" rel="external nofollow noreferrer" target="_blank">#32325</a> (<a href="https://github.com/stigsb" rel="external nofollow noreferrer" target="_blank">Stig Bakken</a>).</li>
<li>Add <code class="syntax">EXPLAIN TABLE OVERRIDE</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/32836" rel="external nofollow noreferrer" target="_blank">#32836</a> (<a href="https://github.com/stigsb" rel="external nofollow noreferrer" target="_blank">Stig Bakken</a>).</li>
<li>Support TABLE OVERRIDE clause for MaterializedPostgreSQL. RFC: <a href="https://github.com/ClickHouse/ClickHouse/issues/31480" rel="external nofollow noreferrer" target="_blank">#31480</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32749" rel="external nofollow noreferrer" target="_blank">#32749</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Change ZooKeeper path for zero-copy marks for shared data. Note that "zero-copy replication" is non-production feature (in early stages of development) that you shouldn't use anyway. But in case if you have used it, let you keep in mind this change. <a href="https://github.com/ClickHouse/ClickHouse/pull/32061" rel="external nofollow noreferrer" target="_blank">#32061</a> (<a href="https://github.com/ianton-ru" rel="external nofollow noreferrer" target="_blank">ianton-ru</a>).</li>
<li>Events clause support for WINDOW VIEW watch query. <a href="https://github.com/ClickHouse/ClickHouse/pull/32607" rel="external nofollow noreferrer" target="_blank">#32607</a> (<a href="https://github.com/Vxider" rel="external nofollow noreferrer" target="_blank">vxider</a>).</li>
<li>Fix ACL with explicit digit hash in <code class="syntax">clickhouse-keeper</code>: now the behavior consistent with ZooKeeper and generated digest is always accepted. <a href="https://github.com/ClickHouse/ClickHouse/pull/33249" rel="external nofollow noreferrer" target="_blank">#33249</a> (<a href="https://github.com/nicelulu" rel="external nofollow noreferrer" target="_blank">小路</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/33246" rel="external nofollow noreferrer" target="_blank">#33246</a>.</li>
<li>Fix unexpected projection removal when detaching parts. <a href="https://github.com/ClickHouse/ClickHouse/pull/32067" rel="external nofollow noreferrer" target="_blank">#32067</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
</ul>
<h4 id="improvement_2">Improvement<a class="headerlink" href="#improvement_2" title="Permanent link"> </a></h4>
<ul>
<li>Now date time conversion functions that generates time before <code class="syntax">1970-01-01 00:00:00</code> will be saturated to zero instead of overflow. <a href="https://github.com/ClickHouse/ClickHouse/pull/29953" rel="external nofollow noreferrer" target="_blank">#29953</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>). It also fixes a bug in index analysis if date truncation function would yield result before the Unix epoch.</li>
<li>Always display resource usage (total CPU usage, total RAM usage and max RAM usage per host) in client. <a href="https://github.com/ClickHouse/ClickHouse/pull/33271" rel="external nofollow noreferrer" target="_blank">#33271</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Improve <code class="syntax">Bool</code> type serialization and deserialization, check the range of values. <a href="https://github.com/ClickHouse/ClickHouse/pull/32984" rel="external nofollow noreferrer" target="_blank">#32984</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>If an invalid setting is defined using the <code class="syntax">SET</code> query or using the query parameters in the HTTP request, error message will contain suggestions that are similar to the invalid setting string (if any exists). <a href="https://github.com/ClickHouse/ClickHouse/pull/32946" rel="external nofollow noreferrer" target="_blank">#32946</a> (<a href="https://github.com/antonio2368" rel="external nofollow noreferrer" target="_blank">Antonio Andelic</a>).</li>
<li>Support hints for mistyped setting names for clickhouse-client and clickhouse-local. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32237" rel="external nofollow noreferrer" target="_blank">#32237</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32841" rel="external nofollow noreferrer" target="_blank">#32841</a> (<a href="https://github.com/lingtaolf" rel="external nofollow noreferrer" target="_blank">凌涛</a>).</li>
<li>Allow to use virtual columns in Materialized Views. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/11210" rel="external nofollow noreferrer" target="_blank">#11210</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33482" rel="external nofollow noreferrer" target="_blank">#33482</a> (<a href="https://github.com/zhongyuankai" rel="external nofollow noreferrer" target="_blank">OnePiece</a>).</li>
<li>Add config to disable IPv6 in clickhouse-keeper if needed. This close <a href="https://github.com/ClickHouse/ClickHouse/issues/33381" rel="external nofollow noreferrer" target="_blank">#33381</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33450" rel="external nofollow noreferrer" target="_blank">#33450</a> (<a href="https://github.com/wuxueyang96" rel="external nofollow noreferrer" target="_blank">Wu Xueyang</a>).</li>
<li>Add more info to <code class="syntax">system.build_options</code> about current git revision. <a href="https://github.com/ClickHouse/ClickHouse/pull/33431" rel="external nofollow noreferrer" target="_blank">#33431</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">taiyang-li</a>).</li>
<li><code class="syntax">clickhouse-local</code>: track memory under <code class="syntax">--max_memory_usage_in_client</code> option. <a href="https://github.com/ClickHouse/ClickHouse/pull/33341" rel="external nofollow noreferrer" target="_blank">#33341</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Allow negative intervals in function <code class="syntax">intervalLengthSum</code>. Their length will be added as well. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33323" rel="external nofollow noreferrer" target="_blank">#33323</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33335" rel="external nofollow noreferrer" target="_blank">#33335</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li><code class="syntax">LineAsString</code> can be used as output format. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/30919" rel="external nofollow noreferrer" target="_blank">#30919</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33331" rel="external nofollow noreferrer" target="_blank">#33331</a> (<a href="https://github.com/serxa" rel="external nofollow noreferrer" target="_blank">Sergei Trifonov</a>).</li>
<li>Support <code class="syntax">&lt;secure/&gt;</code> in cluster configuration, as an alternative form of <code class="syntax">&lt;secure&gt;1&lt;/secure&gt;</code>. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/33270" rel="external nofollow noreferrer" target="_blank">#33270</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33330" rel="external nofollow noreferrer" target="_blank">#33330</a> (<a href="https://github.com/cmsxbc" rel="external nofollow noreferrer" target="_blank">SuperDJY</a>).</li>
<li>Pressing Ctrl+C twice will terminate <code class="syntax">clickhouse-benchmark</code> immediately without waiting for in-flight queries. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32586" rel="external nofollow noreferrer" target="_blank">#32586</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33303" rel="external nofollow noreferrer" target="_blank">#33303</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Support Unix timestamp with milliseconds in <code class="syntax">parseDateTimeBestEffort</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/33276" rel="external nofollow noreferrer" target="_blank">#33276</a> (<a href="https://github.com/benbiti" rel="external nofollow noreferrer" target="_blank">Ben</a>).</li>
<li>Allow to cancel query while reading data from external table in the formats: <code class="syntax">Arrow</code> / <code class="syntax">Parquet</code> / <code class="syntax">ORC</code> - it failed to be cancelled it case of big files and setting input_format_allow_seeks as false. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/29678" rel="external nofollow noreferrer" target="_blank">#29678</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33238" rel="external nofollow noreferrer" target="_blank">#33238</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>If table engine supports <code class="syntax">SETTINGS</code> clause, allow to pass the settings as key-value or via config. Add this support for MySQL. <a href="https://github.com/ClickHouse/ClickHouse/pull/33231" rel="external nofollow noreferrer" target="_blank">#33231</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Correctly prevent Nullable primary keys if necessary. This is for <a href="https://github.com/ClickHouse/ClickHouse/issues/32780" rel="external nofollow noreferrer" target="_blank">#32780</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33218" rel="external nofollow noreferrer" target="_blank">#33218</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Add retry for <code class="syntax">PostgreSQL</code> connections in case nothing has been fetched yet. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33199" rel="external nofollow noreferrer" target="_blank">#33199</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33209" rel="external nofollow noreferrer" target="_blank">#33209</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Validate config keys for external dictionaries. <a href="https://github.com/ClickHouse/ClickHouse/issues/33095#issuecomment-1000577517" rel="external nofollow noreferrer" target="_blank">#33095</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33130" rel="external nofollow noreferrer" target="_blank">#33130</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Send profile info inside <code class="syntax">clickhouse-local</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33093" rel="external nofollow noreferrer" target="_blank">#33093</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33097" rel="external nofollow noreferrer" target="_blank">#33097</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Short circuit evaluation: support for function <code class="syntax">throwIf</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32969" rel="external nofollow noreferrer" target="_blank">#32969</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32973" rel="external nofollow noreferrer" target="_blank">#32973</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>(This only happens in unofficial builds). Fixed segfault when inserting data into compressed Decimal, String, FixedString and Array columns. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32939" rel="external nofollow noreferrer" target="_blank">#32939</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32940" rel="external nofollow noreferrer" target="_blank">#32940</a> (<a href="https://github.com/nkolotov" rel="external nofollow noreferrer" target="_blank">N. Kolotov</a>).</li>
<li>Added support for specifying subquery as SQL user defined function. Example: <code class="syntax">CREATE FUNCTION test AS () -&gt; (SELECT 1)</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/30755" rel="external nofollow noreferrer" target="_blank">#30755</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32758" rel="external nofollow noreferrer" target="_blank">#32758</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Improve gRPC compression support for <a href="https://github.com/ClickHouse/ClickHouse/issues/28671" rel="external nofollow noreferrer" target="_blank">#28671</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32747" rel="external nofollow noreferrer" target="_blank">#32747</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Flush all In-Memory data parts when WAL is not enabled while shutdown server or detaching table. <a href="https://github.com/ClickHouse/ClickHouse/pull/32742" rel="external nofollow noreferrer" target="_blank">#32742</a> (<a href="https://github.com/nautaa" rel="external nofollow noreferrer" target="_blank">nauta</a>).</li>
<li>Allow to control connection timeouts for MySQL (previously was supported only for dictionary source). Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/16669" rel="external nofollow noreferrer" target="_blank">#16669</a>. Previously default connect_timeout was rather small, now it is configurable. <a href="https://github.com/ClickHouse/ClickHouse/pull/32734" rel="external nofollow noreferrer" target="_blank">#32734</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Support <code class="syntax">authSource</code> option for storage <code class="syntax">MongoDB</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32594" rel="external nofollow noreferrer" target="_blank">#32594</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32702" rel="external nofollow noreferrer" target="_blank">#32702</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Support <code class="syntax">Date32</code> type in <code class="syntax">genarateRandom</code> table function. <a href="https://github.com/ClickHouse/ClickHouse/pull/32643" rel="external nofollow noreferrer" target="_blank">#32643</a> (<a href="https://github.com/nautaa" rel="external nofollow noreferrer" target="_blank">nauta</a>).</li>
<li>Add settings <code class="syntax">max_concurrent_select_queries</code> and <code class="syntax">max_concurrent_insert_queries</code> for control concurrent queries by query kind. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/3575" rel="external nofollow noreferrer" target="_blank">#3575</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32609" rel="external nofollow noreferrer" target="_blank">#32609</a> (<a href="https://github.com/cmsxbc" rel="external nofollow noreferrer" target="_blank">SuperDJY</a>).</li>
<li>Improve handling nested structures with missing columns while reading data in <code class="syntax">Protobuf</code> format. Follow-up to <a href="https://github.com/ClickHouse/ClickHouse/pull/31988" target="_blank">https://github.com/ClickHouse/ClickHouse/pull/31988</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32531" rel="external nofollow noreferrer" target="_blank">#32531</a> (<a href="https://github.com/vitlibar" rel="external nofollow noreferrer" target="_blank">Vitaly Baranov</a>).</li>
<li>Allow empty credentials for <code class="syntax">MongoDB</code> engine. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/26267" rel="external nofollow noreferrer" target="_blank">#26267</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32460" rel="external nofollow noreferrer" target="_blank">#32460</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Disable some optimizations for window functions that may lead to exceptions. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31535" rel="external nofollow noreferrer" target="_blank">#31535</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31620" rel="external nofollow noreferrer" target="_blank">#31620</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32453" rel="external nofollow noreferrer" target="_blank">#32453</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Allows to connect to MongoDB 5.0. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31483" rel="external nofollow noreferrer" target="_blank">#31483</a>,. <a href="https://github.com/ClickHouse/ClickHouse/pull/32416" rel="external nofollow noreferrer" target="_blank">#32416</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Enable comparison between <code class="syntax">Decimal</code> and <code class="syntax">Float</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/22626" rel="external nofollow noreferrer" target="_blank">#22626</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/31966" rel="external nofollow noreferrer" target="_blank">#31966</a> (<a href="https://github.com/ucasFL" rel="external nofollow noreferrer" target="_blank">flynn</a>).</li>
<li>Added settings <code class="syntax">command_read_timeout</code>, <code class="syntax">command_write_timeout</code> for <code class="syntax">StorageExecutable</code>, <code class="syntax">StorageExecutablePool</code>, <code class="syntax">ExecutableDictionary</code>, <code class="syntax">ExecutablePoolDictionary</code>, <code class="syntax">ExecutableUserDefinedFunctions</code>. Setting <code class="syntax">command_read_timeout</code> controls timeout for reading data from command stdout in milliseconds. Setting <code class="syntax">command_write_timeout</code> timeout for writing data to command stdin in milliseconds. Added settings <code class="syntax">command_termination_timeout</code> for <code class="syntax">ExecutableUserDefinedFunction</code>, <code class="syntax">ExecutableDictionary</code>, <code class="syntax">StorageExecutable</code>. Added setting <code class="syntax">execute_direct</code> for <code class="syntax">ExecutableUserDefinedFunction</code>, by default true. Added setting <code class="syntax">execute_direct</code> for <code class="syntax">ExecutableDictionary</code>, <code class="syntax">ExecutablePoolDictionary</code>, by default false. <a href="https://github.com/ClickHouse/ClickHouse/pull/30957" rel="external nofollow noreferrer" target="_blank">#30957</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Bitmap aggregate functions will give correct result for out of range argument instead of wraparound. <a href="https://github.com/ClickHouse/ClickHouse/pull/33127" rel="external nofollow noreferrer" target="_blank">#33127</a> (<a href="https://github.com/freedomDR" rel="external nofollow noreferrer" target="_blank">DR</a>).</li>
<li>Fix parsing incorrect queries with <code class="syntax">FROM INFILE</code> statement. <a href="https://github.com/ClickHouse/ClickHouse/pull/33521" rel="external nofollow noreferrer" target="_blank">#33521</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Don't allow to write into <code class="syntax">S3</code> if path contains globs. <a href="https://github.com/ClickHouse/ClickHouse/pull/33142" rel="external nofollow noreferrer" target="_blank">#33142</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li><code class="syntax">--echo</code> option was not used by <code class="syntax">clickhouse-client</code> in batch mode with single query. <a href="https://github.com/ClickHouse/ClickHouse/pull/32843" rel="external nofollow noreferrer" target="_blank">#32843</a> (<a href="https://github.com/nkolotov" rel="external nofollow noreferrer" target="_blank">N. Kolotov</a>).</li>
<li>Use <code class="syntax">--database</code> option for clickhouse-local. <a href="https://github.com/ClickHouse/ClickHouse/pull/32797" rel="external nofollow noreferrer" target="_blank">#32797</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix surprisingly bad code in SQL ordinary function <code class="syntax">file</code>. Now it supports symlinks. <a href="https://github.com/ClickHouse/ClickHouse/pull/32640" rel="external nofollow noreferrer" target="_blank">#32640</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Updating <code class="syntax">modification_time</code> for data part in <code class="syntax">system.parts</code> after part movement <a href="https://github.com/ClickHouse/ClickHouse/issues/32964" rel="external nofollow noreferrer" target="_blank">#32964</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32965" rel="external nofollow noreferrer" target="_blank">#32965</a> (<a href="https://github.com/save-my-heart" rel="external nofollow noreferrer" target="_blank">save-my-heart</a>).</li>
<li>Potential issue, cannot be exploited: integer overflow may happen in array resize. <a href="https://github.com/ClickHouse/ClickHouse/pull/33024" rel="external nofollow noreferrer" target="_blank">#33024</a> (<a href="https://github.com/varadarajkumar" rel="external nofollow noreferrer" target="_blank">varadarajkumar</a>).</li>
</ul>
<h4 id="build-testing-packaging-improvement_2">Build/Testing/Packaging Improvement<a class="headerlink" href="#build-testing-packaging-improvement_2" title="Permanent link"> </a></h4>
<ul>
<li>Add packages, functional tests and Docker builds for AArch64 (ARM) version of ClickHouse. <a href="https://github.com/ClickHouse/ClickHouse/pull/32911" rel="external nofollow noreferrer" target="_blank">#32911</a> (<a href="https://github.com/Felixoid" rel="external nofollow noreferrer" target="_blank">Mikhail f. Shiryaev</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/32415" rel="external nofollow noreferrer" target="_blank">#32415</a></li>
<li>Prepare ClickHouse to be built with musl-libc. It is not enabled by default. <a href="https://github.com/ClickHouse/ClickHouse/pull/33134" rel="external nofollow noreferrer" target="_blank">#33134</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Make installation script working on FreeBSD. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33384" rel="external nofollow noreferrer" target="_blank">#33384</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33418" rel="external nofollow noreferrer" target="_blank">#33418</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Add <code class="syntax">actionlint</code> for GitHub Actions workflows and verify workflow files via <code class="syntax">act --list</code> to check the correct workflow syntax. <a href="https://github.com/ClickHouse/ClickHouse/pull/33612" rel="external nofollow noreferrer" target="_blank">#33612</a> (<a href="https://github.com/Felixoid" rel="external nofollow noreferrer" target="_blank">Mikhail f. Shiryaev</a>).</li>
<li>Add more tests for the nullable primary key feature. Add more tests with different types and merge tree kinds, plus randomly generated data. <a href="https://github.com/ClickHouse/ClickHouse/pull/33228" rel="external nofollow noreferrer" target="_blank">#33228</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Add a simple tool to visualize flaky tests in web browser. <a href="https://github.com/ClickHouse/ClickHouse/pull/33185" rel="external nofollow noreferrer" target="_blank">#33185</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Enable hermetic build for shared builds. This is mainly for developers. <a href="https://github.com/ClickHouse/ClickHouse/pull/32968" rel="external nofollow noreferrer" target="_blank">#32968</a> (<a href="https://github.com/amosbird" rel="external nofollow noreferrer" target="_blank">Amos Bird</a>).</li>
<li>Update <code class="syntax">libc++</code> and <code class="syntax">libc++abi</code> to the latest. <a href="https://github.com/ClickHouse/ClickHouse/pull/32484" rel="external nofollow noreferrer" target="_blank">#32484</a> (<a href="https://github.com/Algunenano" rel="external nofollow noreferrer" target="_blank">Raúl Marín</a>).</li>
<li>Added integration test for external .NET client (<a href="https://github.com/DarkWanderer/ClickHouse.Client" rel="external nofollow noreferrer" target="_blank">ClickHouse.Client</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/23230" rel="external nofollow noreferrer" target="_blank">#23230</a> (<a href="https://github.com/DarkWanderer" rel="external nofollow noreferrer" target="_blank">Oleg V. Kozlyuk</a>).</li>
<li>Inject git information into clickhouse binary file. So we can get source code revision easily from clickhouse binary file. <a href="https://github.com/ClickHouse/ClickHouse/pull/33124" rel="external nofollow noreferrer" target="_blank">#33124</a> (<a href="https://github.com/taiyang-li" rel="external nofollow noreferrer" target="_blank">taiyang-li</a>).</li>
<li>Remove obsolete code from ConfigProcessor. Yandex specific code is not used anymore. The code contained one minor defect. This defect was reported by <a href="https://github.com/SadiHassan" rel="external nofollow noreferrer" target="_blank">Mallik Hassan</a> in <a href="https://github.com/ClickHouse/ClickHouse/issues/33032" rel="external nofollow noreferrer" target="_blank">#33032</a>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33032" rel="external nofollow noreferrer" target="_blank">#33032</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33026" rel="external nofollow noreferrer" target="_blank">#33026</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
</ul>
<h4 id="bug-fix-user-visible-misbehavior-in-official-stable-or-prestable-release">Bug Fix (user-visible misbehavior in official stable or prestable release)<a class="headerlink" href="#bug-fix-user-visible-misbehavior-in-official-stable-or-prestable-release" title="Permanent link"> </a></h4>
<ul>
<li>Several fixes for format parsing. This is relevant if <code class="syntax">clickhouse-server</code> is open for write access to adversary. Specifically crafted input data for <code class="syntax">Native</code> format may lead to reading uninitialized memory or crash. This is relevant if <code class="syntax">clickhouse-server</code> is open for write access to adversary. <a href="https://github.com/ClickHouse/ClickHouse/pull/33050" rel="external nofollow noreferrer" target="_blank">#33050</a> (<a href="https://github.com/HeenaBansal2009" rel="external nofollow noreferrer" target="_blank">Heena Bansal</a>). Fixed Apache Avro Union type index out of boundary issue in Apache Avro binary format. <a href="https://github.com/ClickHouse/ClickHouse/pull/33022" rel="external nofollow noreferrer" target="_blank">#33022</a> (<a href="https://github.com/HarryLeeIBM" rel="external nofollow noreferrer" target="_blank">Harry Lee</a>). Fix null pointer dereference in <code class="syntax">LowCardinality</code> data when deserializing <code class="syntax">LowCardinality</code> data in the Native format. <a href="https://github.com/ClickHouse/ClickHouse/pull/33021" rel="external nofollow noreferrer" target="_blank">#33021</a> (<a href="https://github.com/HarryLeeIBM" rel="external nofollow noreferrer" target="_blank">Harry Lee</a>).</li>
<li>ClickHouse Keeper handler will correctly remove operation when response sent. <a href="https://github.com/ClickHouse/ClickHouse/pull/32988" rel="external nofollow noreferrer" target="_blank">#32988</a> (<a href="https://github.com/JackyWoo" rel="external nofollow noreferrer" target="_blank">JackyWoo</a>).</li>
<li>Potential off-by-one miscalculation of quotas: quota limit was not reached, but the limit was exceeded. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/31174" rel="external nofollow noreferrer" target="_blank">#31174</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/31656" rel="external nofollow noreferrer" target="_blank">#31656</a> (<a href="https://github.com/sunny19930321" rel="external nofollow noreferrer" target="_blank">sunny</a>).</li>
<li>Fixed CASTing from String to IPv4 or IPv6 and back. Fixed error message in case of failed conversion. <a href="https://github.com/ClickHouse/ClickHouse/pull/29224" rel="external nofollow noreferrer" target="_blank">#29224</a> (<a href="https://github.com/novikd" rel="external nofollow noreferrer" target="_blank">Dmitry Novik</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/27914" rel="external nofollow noreferrer" target="_blank">#27914</a> (<a href="https://github.com/Enmk" rel="external nofollow noreferrer" target="_blank">Vasily Nemkov</a>).</li>
<li>Fixed an exception like <code class="syntax">Unknown aggregate function nothing</code> during an execution on a remote server. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/16689" rel="external nofollow noreferrer" target="_blank">#16689</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/26074" rel="external nofollow noreferrer" target="_blank">#26074</a> (<a href="https://github.com/hexiaoting" rel="external nofollow noreferrer" target="_blank">hexiaoting</a>).</li>
<li>Fix wrong database for JOIN without explicit database in distributed queries (Fixes: <a href="https://github.com/ClickHouse/ClickHouse/issues/10471" rel="external nofollow noreferrer" target="_blank">#10471</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/33611" rel="external nofollow noreferrer" target="_blank">#33611</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix segfault in Apache <code class="syntax">Avro</code> format that appears after the second insert into file. <a href="https://github.com/ClickHouse/ClickHouse/pull/33566" rel="external nofollow noreferrer" target="_blank">#33566</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix segfault in Apache <code class="syntax">Arrow</code> format if schema contains <code class="syntax">Dictionary</code> type. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33507" rel="external nofollow noreferrer" target="_blank">#33507</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33529" rel="external nofollow noreferrer" target="_blank">#33529</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Out of band <code class="syntax">offset</code> and <code class="syntax">limit</code> settings may be applied incorrectly for views. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/33289" rel="external nofollow noreferrer" target="_blank">#33289</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/33518" rel="external nofollow noreferrer" target="_blank">#33518</a> (<a href="https://github.com/hexiaoting" rel="external nofollow noreferrer" target="_blank">hexiaoting</a>).</li>
<li>Fix an exception <code class="syntax">Block structure mismatch</code> which may happen during insertion into table with default nested <code class="syntax">LowCardinality</code> column. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/33028" rel="external nofollow noreferrer" target="_blank">#33028</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33504" rel="external nofollow noreferrer" target="_blank">#33504</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Fix dictionary expressions for <code class="syntax">range_hashed</code> range min and range max attributes when created using DDL. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/30809" rel="external nofollow noreferrer" target="_blank">#30809</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33478" rel="external nofollow noreferrer" target="_blank">#33478</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Fix possible use-after-free for INSERT into Materialized View with concurrent DROP (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Do not try to read pass EOF (to workaround for a bug in the Linux kernel), this bug can be reproduced on kernels (3.14..5.9), and requires <code class="syntax">index_granularity_bytes=0</code> (i.e. turn off adaptive index granularity). <a href="https://github.com/ClickHouse/ClickHouse/pull/33372" rel="external nofollow noreferrer" target="_blank">#33372</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>The commands <code class="syntax">SYSTEM SUSPEND</code> and <code class="syntax">SYSTEM ... THREAD FUZZER</code> missed access control. It is fixed. Author: Kevin Michel. <a href="https://github.com/ClickHouse/ClickHouse/pull/33333" rel="external nofollow noreferrer" target="_blank">#33333</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Fix when <code class="syntax">COMMENT</code> for dictionaries does not appear in <code class="syntax">system.tables</code>, <code class="syntax">system.dictionaries</code>. Allow to modify the comment for <code class="syntax">Dictionary</code> engine. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33251" rel="external nofollow noreferrer" target="_blank">#33251</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33261" rel="external nofollow noreferrer" target="_blank">#33261</a> (<a href="https://github.com/kitaisreal" rel="external nofollow noreferrer" target="_blank">Maksim Kita</a>).</li>
<li>Add asynchronous inserts (with enabled setting <code class="syntax">async_insert</code>) to query log. Previously such queries didn't appear in the query log. <a href="https://github.com/ClickHouse/ClickHouse/pull/33239" rel="external nofollow noreferrer" target="_blank">#33239</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix sending <code class="syntax">WHERE 1 = 0</code> expressions for external databases query. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33152" rel="external nofollow noreferrer" target="_blank">#33152</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33214" rel="external nofollow noreferrer" target="_blank">#33214</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix DDL validation for MaterializedPostgreSQL. Fix setting <code class="syntax">materialized_postgresql_allow_automatic_update</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/29535" rel="external nofollow noreferrer" target="_blank">#29535</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33200" rel="external nofollow noreferrer" target="_blank">#33200</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>). Make sure unused replication slots are always removed. Found in <a href="https://github.com/ClickHouse/ClickHouse/issues/26952" rel="external nofollow noreferrer" target="_blank">#26952</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33187" rel="external nofollow noreferrer" target="_blank">#33187</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>). Fix MaterializedPostreSQL detach/attach (removing / adding to replication) tables with non-default schema. Found in <a href="https://github.com/ClickHouse/ClickHouse/issues/29535" rel="external nofollow noreferrer" target="_blank">#29535</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33179" rel="external nofollow noreferrer" target="_blank">#33179</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>). Fix DROP MaterializedPostgreSQL database. <a href="https://github.com/ClickHouse/ClickHouse/pull/33468" rel="external nofollow noreferrer" target="_blank">#33468</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>The metric <code class="syntax">StorageBufferBytes</code> sometimes was miscalculated. <a href="https://github.com/ClickHouse/ClickHouse/pull/33159" rel="external nofollow noreferrer" target="_blank">#33159</a> (<a href="https://github.com/xuyatian" rel="external nofollow noreferrer" target="_blank">xuyatian</a>).</li>
<li>Fix error <code class="syntax">Invalid version for SerializationLowCardinality key column</code> in case of reading from <code class="syntax">LowCardinality</code> column with <code class="syntax">local_filesystem_read_prefetch</code> or <code class="syntax">remote_filesystem_read_prefetch</code> enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/33046" rel="external nofollow noreferrer" target="_blank">#33046</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Fix <code class="syntax">s3</code> table function reading empty file. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/33008" rel="external nofollow noreferrer" target="_blank">#33008</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33037" rel="external nofollow noreferrer" target="_blank">#33037</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix Context leak in case of cancel_http_readonly_queries_on_client_close (i.e. leaking of external tables that had been uploaded the the server and other resources). <a href="https://github.com/ClickHouse/ClickHouse/pull/32982" rel="external nofollow noreferrer" target="_blank">#32982</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix wrong tuple output in <code class="syntax">CSV</code> format in case of custom csv delimiter. <a href="https://github.com/ClickHouse/ClickHouse/pull/32981" rel="external nofollow noreferrer" target="_blank">#32981</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix HDFS URL check that didn't allow using HA namenode address. Bug was introduced in <a href="https://github.com/ClickHouse/ClickHouse/pull/31042" target="_blank">https://github.com/ClickHouse/ClickHouse/pull/31042</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32976" rel="external nofollow noreferrer" target="_blank">#32976</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix throwing exception like positional argument out of bounds for non-positional arguments. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/31173" rel="external nofollow noreferrer" target="_blank">#31173</a>#event-5789668239. <a href="https://github.com/ClickHouse/ClickHouse/pull/32961" rel="external nofollow noreferrer" target="_blank">#32961</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix UB in case of unexpected EOF during filling a set from HTTP query (i.e. if the client interrupted in the middle, i.e. <code class="syntax">timeout 0.15s curl -Ss -F 's=@t.csv;' 'http://127.0.0.1:8123/?s_structure=key+Int&amp;query=SELECT+dummy+IN+s'</code> and with large enough <code class="syntax">t.csv</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/32955" rel="external nofollow noreferrer" target="_blank">#32955</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix a regression in <code class="syntax">replaceRegexpAll</code> function. The function worked incorrectly when matched substring was empty. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32777" rel="external nofollow noreferrer" target="_blank">#32777</a>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/30245" rel="external nofollow noreferrer" target="_blank">#30245</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32945" rel="external nofollow noreferrer" target="_blank">#32945</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Fix <code class="syntax">ORC</code> format stripe reading. <a href="https://github.com/ClickHouse/ClickHouse/pull/32929" rel="external nofollow noreferrer" target="_blank">#32929</a> (<a href="https://github.com/kreuzerkrieg" rel="external nofollow noreferrer" target="_blank">kreuzerkrieg</a>).</li>
<li><code class="syntax">topKWeightedState</code> failed for some input types. <a href="https://github.com/ClickHouse/ClickHouse/issues/32487" rel="external nofollow noreferrer" target="_blank">#32487</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32914" rel="external nofollow noreferrer" target="_blank">#32914</a> (<a href="https://github.com/vdimir" rel="external nofollow noreferrer" target="_blank">vdimir</a>).</li>
<li>Fix exception <code class="syntax">Single chunk is expected from view inner query (LOGICAL_ERROR)</code> in materialized view. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/31419" rel="external nofollow noreferrer" target="_blank">#31419</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32862" rel="external nofollow noreferrer" target="_blank">#32862</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Fix optimization with lazy seek for async reads from remote filesystems. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32803" rel="external nofollow noreferrer" target="_blank">#32803</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32835" rel="external nofollow noreferrer" target="_blank">#32835</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li><code class="syntax">MergeTree</code> table engine might silently skip some mutations if there are too many running mutations or in case of high memory consumption, it's fixed. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/17882" rel="external nofollow noreferrer" target="_blank">#17882</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32814" rel="external nofollow noreferrer" target="_blank">#32814</a> (<a href="https://github.com/tavplubix" rel="external nofollow noreferrer" target="_blank">tavplubix</a>).</li>
<li>Avoid reusing the scalar subquery cache when processing MV blocks. This fixes a bug when the scalar query reference the source table but it means that all subscalar queries in the MV definition will be calculated for each block. <a href="https://github.com/ClickHouse/ClickHouse/pull/32811" rel="external nofollow noreferrer" target="_blank">#32811</a> (<a href="https://github.com/Algunenano" rel="external nofollow noreferrer" target="_blank">Raúl Marín</a>).</li>
<li>Server might fail to start if database with <code class="syntax">MySQL</code> engine cannot connect to MySQL server, it's fixed. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/14441" rel="external nofollow noreferrer" target="_blank">#14441</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32802" rel="external nofollow noreferrer" target="_blank">#32802</a> (<a href="https://github.com/tavplubix" rel="external nofollow noreferrer" target="_blank">tavplubix</a>).</li>
<li>Fix crash when used <code class="syntax">fuzzBits</code> function, close <a href="https://github.com/ClickHouse/ClickHouse/issues/32737" rel="external nofollow noreferrer" target="_blank">#32737</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32755" rel="external nofollow noreferrer" target="_blank">#32755</a> (<a href="https://github.com/cmsxbc" rel="external nofollow noreferrer" target="_blank">SuperDJY</a>).</li>
<li>Fix error <code class="syntax">Column is not under aggregate function</code> in case of MV with <code class="syntax">GROUP BY (list of columns)</code> (which is pared as <code class="syntax">GROUP BY tuple(...)</code>) over <code class="syntax">Kafka</code>/<code class="syntax">RabbitMQ</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/32668" rel="external nofollow noreferrer" target="_blank">#32668</a> and <a href="https://github.com/ClickHouse/ClickHouse/issues/32744" rel="external nofollow noreferrer" target="_blank">#32744</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32751" rel="external nofollow noreferrer" target="_blank">#32751</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Fix <code class="syntax">ALTER TABLE ... MATERIALIZE TTL</code> query with <code class="syntax">TTL ... DELETE WHERE ...</code> and <code class="syntax">TTL ... GROUP BY ...</code> modes. <a href="https://github.com/ClickHouse/ClickHouse/pull/32695" rel="external nofollow noreferrer" target="_blank">#32695</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix <code class="syntax">optimize_read_in_order</code> optimization in case when table engine is <code class="syntax">Distributed</code> or <code class="syntax">Merge</code> and its underlying <code class="syntax">MergeTree</code> tables have monotonous function in prefix of sorting key. <a href="https://github.com/ClickHouse/ClickHouse/pull/32670" rel="external nofollow noreferrer" target="_blank">#32670</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix LOGICAL_ERROR exception when the target of a materialized view is a JOIN or a SET table. <a href="https://github.com/ClickHouse/ClickHouse/pull/32669" rel="external nofollow noreferrer" target="_blank">#32669</a> (<a href="https://github.com/Algunenano" rel="external nofollow noreferrer" target="_blank">Raúl Marín</a>).</li>
<li>Inserting into S3 with multipart upload to Google Cloud Storage may trigger abort. <a href="https://github.com/ClickHouse/ClickHouse/issues/32504" rel="external nofollow noreferrer" target="_blank">#32504</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32649" rel="external nofollow noreferrer" target="_blank">#32649</a> (<a href="https://github.com/vdimir" rel="external nofollow noreferrer" target="_blank">vdimir</a>).</li>
<li>Fix possible exception at <code class="syntax">RabbitMQ</code> storage startup by delaying channel creation. <a href="https://github.com/ClickHouse/ClickHouse/pull/32584" rel="external nofollow noreferrer" target="_blank">#32584</a> (<a href="https://github.com/kssenii" rel="external nofollow noreferrer" target="_blank">Kseniia Sumarokova</a>).</li>
<li>Fix table lifetime (i.e. possible use-after-free) in case of parallel DROP TABLE and INSERT. <a href="https://github.com/ClickHouse/ClickHouse/pull/32572" rel="external nofollow noreferrer" target="_blank">#32572</a> (<a href="https://github.com/azat" rel="external nofollow noreferrer" target="_blank">Azat Khuzhin</a>).</li>
<li>Fix async inserts with formats <code class="syntax">CustomSeparated</code>, <code class="syntax">Template</code>, <code class="syntax">Regexp</code>, <code class="syntax">MsgPack</code> and <code class="syntax">JSONAsString</code>. Previousely the async inserts with these formats didn't read any data. <a href="https://github.com/ClickHouse/ClickHouse/pull/32530" rel="external nofollow noreferrer" target="_blank">#32530</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix <code class="syntax">groupBitmapAnd</code> function on distributed table. <a href="https://github.com/ClickHouse/ClickHouse/pull/32529" rel="external nofollow noreferrer" target="_blank">#32529</a> (<a href="https://github.com/dmthuc" rel="external nofollow noreferrer" target="_blank">minhthucdao</a>).</li>
<li>Fix crash in JOIN found by fuzzer, close <a href="https://github.com/ClickHouse/ClickHouse/issues/32458" rel="external nofollow noreferrer" target="_blank">#32458</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32508" rel="external nofollow noreferrer" target="_blank">#32508</a> (<a href="https://github.com/vdimir" rel="external nofollow noreferrer" target="_blank">vdimir</a>).</li>
<li>Proper handling of the case with Apache Arrow column duplication. <a href="https://github.com/ClickHouse/ClickHouse/pull/32507" rel="external nofollow noreferrer" target="_blank">#32507</a> (<a href="https://github.com/DMokhnatkin" rel="external nofollow noreferrer" target="_blank">Dmitriy Mokhnatkin</a>).</li>
<li>Fix issue with ambiguous query formatting in distributed queries that led to errors when some table columns were named <code class="syntax">ALL</code> or <code class="syntax">DISTINCT</code>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/32391" rel="external nofollow noreferrer" target="_blank">#32391</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32490" rel="external nofollow noreferrer" target="_blank">#32490</a> (<a href="https://github.com/alexey-milovidov" rel="external nofollow noreferrer" target="_blank">alexey-milovidov</a>).</li>
<li>Fix failures in queries that are trying to use skipping indices, which are not materialized yet. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/32292" rel="external nofollow noreferrer" target="_blank">#32292</a> and <a href="https://github.com/ClickHouse/ClickHouse/issues/30343" rel="external nofollow noreferrer" target="_blank">#30343</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32359" rel="external nofollow noreferrer" target="_blank">#32359</a> (<a href="https://github.com/CurtizJ" rel="external nofollow noreferrer" target="_blank">Anton Popov</a>).</li>
<li>Fix broken select query when there are more than 2 row policies on same column, begin at second queries on the same session. <a href="https://github.com/ClickHouse/ClickHouse/issues/31606" rel="external nofollow noreferrer" target="_blank">#31606</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32291" rel="external nofollow noreferrer" target="_blank">#32291</a> (<a href="https://github.com/cmsxbc" rel="external nofollow noreferrer" target="_blank">SuperDJY</a>).</li>
<li>Fix fractional unix timestamp conversion to <code class="syntax">DateTime64</code>, fractional part was reversed for negative unix timestamps (before 1970-01-01). <a href="https://github.com/ClickHouse/ClickHouse/pull/32240" rel="external nofollow noreferrer" target="_blank">#32240</a> (<a href="https://github.com/benbiti" rel="external nofollow noreferrer" target="_blank">Ben</a>).</li>
<li>Some entries of replication queue might hang for <code class="syntax">temporary_directories_lifetime</code> (1 day by default) with <code class="syntax">Directory tmp_merge_&lt;part_name&gt;</code> or <code class="syntax">Part ... (state Deleting) already exists, but it will be deleted soon</code> or similar error. It's fixed. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/29616" rel="external nofollow noreferrer" target="_blank">#29616</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/32201" rel="external nofollow noreferrer" target="_blank">#32201</a> (<a href="https://github.com/tavplubix" rel="external nofollow noreferrer" target="_blank">tavplubix</a>).</li>
<li>Fix parsing of <code class="syntax">APPLY lambda</code> column transformer which could lead to client/server crash. <a href="https://github.com/ClickHouse/ClickHouse/pull/32138" rel="external nofollow noreferrer" target="_blank">#32138</a> (<a href="https://github.com/Avogar" rel="external nofollow noreferrer" target="_blank">Kruglov Pavel</a>).</li>
<li>Fix <code class="syntax">base64Encode</code> adding trailing bytes on small strings. <a href="https://github.com/ClickHouse/ClickHouse/pull/31797" rel="external nofollow noreferrer" target="_blank">#31797</a> (<a href="https://github.com/kmichel-aiven" rel="external nofollow noreferrer" target="_blank">Kevin Michel</a>).</li>
<li>Fix possible crash (or incorrect result) in case of <code class="syntax">LowCardinality</code> arguments of window function. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/31114" rel="external nofollow noreferrer" target="_blank">#31114</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/31888" rel="external nofollow noreferrer" target="_blank">#31888</a> (<a href="https://github.com/KochetovNicolai" rel="external nofollow noreferrer" target="_blank">Nikolai Kochetov</a>).</li>
<li>Fix hang up with command <code class="syntax">DROP TABLE system.query_log sync</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/33293" rel="external nofollow noreferrer" target="_blank">#33293</a> (<a href="https://github.com/zhanghuajieHIT" rel="external nofollow noreferrer" target="_blank">zhanghuajie</a>).</li>
</ul>
<h2 id="changelog-for-2021"><a href="https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/whats-new/changelog/2021.md" rel="external nofollow noreferrer" target="_blank">Changelog for 2021</a><a class="headerlink" href="#changelog-for-2021" title="Permanent link"> </a></h2>
        

        
    </div>

    
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Was this content helpful?</span>
  <div id="rating-stars" class="display-6 mb-0"
     
     data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']"
     data-documentation="documentation"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/38993f215f9186c1ac3505b1e09697cd9a468b5d" rel="external nofollow noreferrer" target="_blank" class="text-reset">38993f21</a>
    
    </div>
</div>

</div>

                
                    <div id="toc" class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5">
    
    
    <nav class="nav flex-column text-wrap">
    
        <label for="toc">Table of Contents</label>
    
    
        
        
        <a href="#table-of-contents" title="Table of Contents" class="nav-link text-wrap d-inline-block w-100">
    Table of Contents
</a>

    
        
        
        <a href="#clickhouse-release-v22-3-lts-2022-03-17" title=" ClickHouse release v22.3-lts, 2022-03-17" class="nav-link text-wrap d-inline-block w-100">
     ClickHouse release v22.3-lts, 2022-03-17
</a>

<nav id="toc-toc-2" class="nav flex-column pl-2">
    
    
        
        
        <a href="#backward-incompatible-change" title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100">
    Backward Incompatible Change
</a>

    
        
        
        <a href="#new-feature" title="New Feature" class="nav-link text-wrap d-inline-block w-100">
    New Feature
</a>

    
        
        
        <a href="#experimental-feature" title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100">
    Experimental Feature
</a>

    
        
        
        <a href="#performance-improvement" title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100">
    Performance Improvement
</a>

    
        
        
        <a href="#improvement" title="Improvement" class="nav-link text-wrap d-inline-block w-100">
    Improvement
</a>

    
        
        
        <a href="#build-testing-packaging-improvement" title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100">
    Build/Testing/Packaging Improvement
</a>

    
        
        
        <a href="#bug-fix-user-visible-misbehaviour-in-official-stable-or-prestable-release" title="Bug Fix (user-visible misbehaviour in official stable or prestable release)" class="nav-link text-wrap d-inline-block w-100">
    Bug Fix (user-visible misbehaviour in official stable or prestable release)
</a>

    
        
        
        <a href="#clickhouse-release-v22-2-2022-02-17" title=" ClickHouse release v22.2, 2022-02-17" class="nav-link text-wrap d-inline-block w-100">
     ClickHouse release v22.2, 2022-02-17
</a>

<nav id="toc-toc-2-8" class="nav flex-column pl-2">
    
    
        
        
        <a href="#upgrade-notes" title="Upgrade Notes" class="nav-link text-wrap d-inline-block w-100">
    Upgrade Notes
</a>

    
        
        
        <a href="#new-feature_1" title="New Feature" class="nav-link text-wrap d-inline-block w-100">
    New Feature
</a>

    
        
        
        <a href="#experimental-feature_1" title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100">
    Experimental Feature
</a>

    
        
        
        <a href="#performance-improvement_1" title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100">
    Performance Improvement
</a>

    
        
        
        <a href="#improvement_1" title="Improvement" class="nav-link text-wrap d-inline-block w-100">
    Improvement
</a>

    
        
        
        <a href="#build-testing-packaging-improvement_1" title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100">
    Build/Testing/Packaging Improvement
</a>

    
        
        
        <a href="#bug-fix-user-visible-misbehaviour-in-official-stable-or-prestable-release_1" title="Bug Fix (user-visible misbehaviour in official stable or prestable release)" class="nav-link text-wrap d-inline-block w-100">
    Bug Fix (user-visible misbehaviour in official stable or prestable release)
</a>

    
</nav>

    
        
        
        <a href="#clickhouse-release-v22-1-2022-01-18" title=" ClickHouse release v22.1, 2022-01-18" class="nav-link text-wrap d-inline-block w-100">
     ClickHouse release v22.1, 2022-01-18
</a>

<nav id="toc-toc-2-9" class="nav flex-column pl-2">
    
    
        
        
        <a href="#upgrade-notes_1" title="Upgrade Notes" class="nav-link text-wrap d-inline-block w-100">
    Upgrade Notes
</a>

    
        
        
        <a href="#new-feature_2" title="New Feature" class="nav-link text-wrap d-inline-block w-100">
    New Feature
</a>

    
        
        
        <a href="#performance-improvement_2" title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100">
    Performance Improvement
</a>

    
        
        
        <a href="#experimental-feature_2" title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100">
    Experimental Feature
</a>

    
        
        
        <a href="#improvement_2" title="Improvement" class="nav-link text-wrap d-inline-block w-100">
    Improvement
</a>

    
        
        
        <a href="#build-testing-packaging-improvement_2" title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100">
    Build/Testing/Packaging Improvement
</a>

    
        
        
        <a href="#bug-fix-user-visible-misbehavior-in-official-stable-or-prestable-release" title="Bug Fix (user-visible misbehavior in official stable or prestable release)" class="nav-link text-wrap d-inline-block w-100">
    Bug Fix (user-visible misbehavior in official stable or prestable release)
</a>

    
</nav>

    
</nav>

    
        
        
        <a href="#changelog-for-2021" title="Changelog for 2021" class="nav-link text-wrap d-inline-block w-100">
    Changelog for 2021
</a>

    
    </nav>
</div>
                
            </div>
        </div>
    

    
        
        <script async type="text/javascript" src="/docs/js/base.js?js_digest"></script>



<noscript>
    <div><img src="https://mc.yandex.ru/watch/18343495" alt="Yandex"/></div>
</noscript>
    </div>
</body>
</html>
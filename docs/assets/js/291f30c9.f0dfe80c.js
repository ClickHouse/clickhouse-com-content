"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[58471],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),m=l(n),f=o,d=m["".concat(s,".").concat(f)]||m[f]||p[f]||a;return n?r.createElement(d,i(i({ref:t},u),{},{components:n})):r.createElement(d,i({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},59782:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return p}});var r=n(87462),o=n(63366),a=(n(67294),n(3905)),i=["components"],c={},s="SSL X.509 certificate authentication",l={unversionedId:"en/operations/external-authenticators/ssl-x509",id:"en/operations/external-authenticators/ssl-x509",title:"SSL X.509 certificate authentication",description:"ssl-external-authentication}",source:"@site/docs/en/operations/external-authenticators/ssl-x509.md",sourceDirName:"en/operations/external-authenticators",slug:"/en/operations/external-authenticators/ssl-x509",permalink:"/docs/en/operations/external-authenticators/ssl-x509",editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/en/operations/external-authenticators/ssl-x509.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"LDAP",permalink:"/docs/en/operations/external-authenticators/ldap"},next:{title:"Data Backup",permalink:"/docs/en/operations/backup"}},u={},p=[],m={toc:p};function f(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"ssl-external-authentication"},"SSL X.509 certificate authentication"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/docs/en/operations/server-configuration-parameters/settings#server_configuration_parameters-openssl"},"SSL 'strict' option")," enables mandatory certificate validation for the incoming connections. In this case, only connections with trusted certificates can be established. Connections with untrusted certificates will be rejected. Thus, certificate validation allows to uniquely authenticate an incoming connection. ",(0,a.kt)("inlineCode",{parentName:"p"},"Common Name")," field of the certificate is used to identify connected user. This allows to associate multiple certificates with the same user. Additionally, reissuing and revoking of the certificates does not affect the ClickHouse configuration."),(0,a.kt)("p",null,"To enable SSL certificate authentication, a list of ",(0,a.kt)("inlineCode",{parentName:"p"},"Common Name"),"'s for each ClickHouse user must be sspecified in the settings file ",(0,a.kt)("inlineCode",{parentName:"p"},"config.xml "),":"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"<clickhouse>\n    <!- ... --\x3e\n    <users>\n        <user_name>\n            <certificates>\n                <common_name>host.domain.com:example_user</common_name>\n                <common_name>host.domain.com:example_user_dev</common_name>\n                \x3c!-- More names --\x3e\n            </certificates>\n            \x3c!-- Other settings --\x3e\n        </user_name>\n    </users>\n</clickhouse>\n")),(0,a.kt)("p",null,"For the SSL ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Chain_of_trust"},(0,a.kt)("inlineCode",{parentName:"a"},"chain of trust"))," to work correctly, it is also important to make sure that the ",(0,a.kt)("a",{parentName:"p",href:"/docs/en/operations/server-configuration-parameters/settings#server_configuration_parameters-openssl"},(0,a.kt)("inlineCode",{parentName:"a"},"caConfig"))," parameter is configured properly."))}f.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[43600],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return d}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),u=p(a),d=r,k=u["".concat(o,".").concat(d)]||u[d]||c[d]||i;return a?n.createElement(k,l(l({ref:t},m),{},{components:a})):n.createElement(k,l({ref:t},m))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},90162:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return c}});var n=a(87462),r=a(63366),i=(a(67294),a(3905)),l=["components"],s={sidebar_position:57,sidebar_label:"Server Settings"},o="Server Settings",p={unversionedId:"en/operations/server-configuration-parameters/settings",id:"en/operations/server-configuration-parameters/settings",title:"Server Settings",description:"server-settings}",source:"@site/docs/en/operations/server-configuration-parameters/settings.md",sourceDirName:"en/operations/server-configuration-parameters",slug:"/en/operations/server-configuration-parameters/settings",permalink:"/docs/docs/en/operations/server-configuration-parameters/settings",tags:[],version:"current",sidebarPosition:57,frontMatter:{sidebar_position:57,sidebar_label:"Server Settings"},sidebar:"tutorialSidebar",previous:{title:"Server Configuration Parameters",permalink:"/docs/docs/en/operations/server-configuration-parameters/"},next:{title:"Utilities",permalink:"/docs/docs/en/operations/utilities/"}},m={},c=[{value:"builtin_dictionaries_reload_interval",id:"builtin-dictionaries-reload-interval",level:2},{value:"compression",id:"server-settings-compression",level:2},{value:"encryption",id:"server-settings-encryption",level:2},{value:"custom_settings_prefixes",id:"custom_settings_prefixes",level:2},{value:"core_dump",id:"server_configuration_parameters-core_dump",level:2},{value:"database_atomic_delay_before_drop_table_sec",id:"database_atomic_delay_before_drop_table_sec",level:2},{value:"default_database",id:"default-database",level:2},{value:"default_profile",id:"default-profile",level:2},{value:"default_replica_path",id:"default_replica_path",level:2},{value:"default_replica_name",id:"default_replica_name",level:2},{value:"dictionaries_config",id:"server_configuration_parameters-dictionaries_config",level:2},{value:"dictionaries_lazy_load",id:"server_configuration_parameters-dictionaries_lazy_load",level:2},{value:"format_schema_path",id:"server_configuration_parameters-format_schema_path",level:2},{value:"graphite",id:"server_configuration_parameters-graphite",level:2},{value:"graphite_rollup",id:"server_configuration_parameters-graphite-rollup",level:2},{value:"http_port/https_port",id:"http-porthttps-port",level:2},{value:"http_server_default_response",id:"server_configuration_parameters-http_server_default_response",level:2},{value:"hsts_max_age",id:"hsts-max-age",level:2},{value:"include_from",id:"server_configuration_parameters-include_from",level:2},{value:"interserver_http_port",id:"interserver-http-port",level:2},{value:"interserver_http_host",id:"interserver-http-host",level:2},{value:"interserver_https_port",id:"interserver-https-port",level:2},{value:"interserver_https_host",id:"interserver-https-host",level:2},{value:"interserver_http_credentials",id:"server-settings-interserver-http-credentials",level:2},{value:"keep_alive_timeout",id:"keep-alive-timeout",level:2},{value:"listen_host",id:"server_configuration_parameters-listen_host",level:2},{value:"listen_backlog",id:"server_configuration_parameters-listen_backlog",level:2},{value:"logger",id:"server_configuration_parameters-logger",level:2},{value:"send_crash_reports",id:"server_configuration_parameters-send_crash_reports",level:2},{value:"macros",id:"macros",level:2},{value:"mark_cache_size",id:"server-mark-cache-size",level:2},{value:"max_server_memory_usage",id:"max_server_memory_usage",level:2},{value:"max_server_memory_usage_to_ram_ratio",id:"max_server_memory_usage_to_ram_ratio",level:2},{value:"max_concurrent_queries",id:"max-concurrent-queries",level:2},{value:"max_concurrent_insert_queries",id:"max-concurrent-insert-queries",level:2},{value:"max_concurrent_select_queries",id:"max-concurrent-select-queries",level:2},{value:"max_concurrent_queries_for_user",id:"max-concurrent-queries-for-user",level:2},{value:"max_concurrent_queries_for_all_users",id:"max-concurrent-queries-for-all-users",level:2},{value:"min_marks_to_honor_max_concurrent_queries",id:"min-marks-to-honor-max-concurrent-queries",level:2},{value:"max_connections",id:"max-connections",level:2},{value:"max_open_files",id:"max-open-files",level:2},{value:"max_table_size_to_drop",id:"max-table-size-to-drop",level:2},{value:"max_thread_pool_size",id:"max-thread-pool-size",level:2},{value:"max_thread_pool_free_size",id:"max-thread-pool-free-size",level:2},{value:"thread_pool_queue_size",id:"thread-pool-queue-size",level:2},{value:"merge_tree",id:"server_configuration_parameters-merge_tree",level:2},{value:"metric_log",id:"metric_log",level:2},{value:"replicated_merge_tree",id:"server_configuration_parameters-replicated_merge_tree",level:2},{value:"openSSL",id:"server_configuration_parameters-openssl",level:2},{value:"part_log",id:"server_configuration_parameters-part-log",level:2},{value:"path",id:"server_configuration_parameters-path",level:2},{value:"prometheus",id:"server_configuration_parameters-prometheus",level:2},{value:"query_log",id:"server_configuration_parameters-query-log",level:2},{value:"query_thread_log",id:"server_configuration_parameters-query_thread_log",level:2},{value:"query_views_log",id:"server_configuration_parameters-query_views_log",level:2},{value:"text_log",id:"server_configuration_parameters-text_log",level:2},{value:"trace_log",id:"server_configuration_parameters-trace_log",level:2},{value:"query_masking_rules",id:"query-masking-rules",level:2},{value:"remote_servers",id:"server-settings-remote-servers",level:2},{value:"timezone",id:"server_configuration_parameters-timezone",level:2},{value:"tcp_port",id:"server_configuration_parameters-tcp_port",level:2},{value:"tcp_port_secure",id:"server_configuration_parameters-tcp_port_secure",level:2},{value:"mysql_port",id:"server_configuration_parameters-mysql_port",level:2},{value:"postgresql_port",id:"server_configuration_parameters-postgresql_port",level:2},{value:"tmp_path",id:"tmp-path",level:2},{value:"tmp_policy",id:"tmp-policy",level:2},{value:"uncompressed_cache_size",id:"server-settings-uncompressed_cache_size",level:2},{value:"user_files_path",id:"server_configuration_parameters-user_files_path",level:2},{value:"users_config",id:"users-config",level:2},{value:"zookeeper",id:"server-settings_zookeeper",level:2},{value:"use_minimalistic_part_header_in_zookeeper",id:"server-settings-use_minimalistic_part_header_in_zookeeper",level:2},{value:"disable_internal_dns_cache",id:"server-settings-disable-internal-dns-cache",level:2},{value:"dns_cache_update_period",id:"server-settings-dns-cache-update-period",level:2},{value:"distributed_ddl",id:"server-settings-distributed_ddl",level:2},{value:"access_control_path",id:"access_control_path",level:2},{value:"user_directories",id:"user_directories",level:2},{value:"total_memory_profiler_step",id:"total-memory-profiler-step",level:2},{value:"total_memory_tracker_sample_probability",id:"total-memory-tracker-sample-probability",level:2},{value:"mmap_cache_size",id:"mmap-cache-size",level:2},{value:"compiled_expression_cache_size",id:"compiled-expression-cache-size",level:2},{value:"compiled_expression_cache_elements_size",id:"compiled_expression_cache_elements_size",level:2}],u={toc:c};function d(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"server-settings"},"Server Settings"),(0,i.kt)("h2",{id:"builtin-dictionaries-reload-interval"},"builtin_dictionaries_reload_interval"),(0,i.kt)("p",null,"The interval in seconds before reloading built-in dictionaries."),(0,i.kt)("p",null,"ClickHouse reloads built-in dictionaries every x seconds. This makes it possible to edit dictionaries \u201con the fly\u201d without restarting the server."),(0,i.kt)("p",null,"Default value: 3600."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<builtin_dictionaries_reload_interval>3600</builtin_dictionaries_reload_interval>\n")),(0,i.kt)("h2",{id:"server-settings-compression"},"compression"),(0,i.kt)("p",null,"Data compression settings for ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"MergeTree"),"-engine tables."),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Don\u2019t use it if you have just started using ClickHouse."))),(0,i.kt)("p",null,"Configuration template:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<compression>\n    <case>\n      <min_part_size>...</min_part_size>\n      <min_part_size_ratio>...</min_part_size_ratio>\n      <method>...</method>\n      <level>...</level>\n    </case>\n    ...\n</compression>\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"<case>")," fields:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"min_part_size")," \u2013 The minimum size of a data part."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"min_part_size_ratio")," \u2013 The ratio of the data part size to the table size."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"method")," \u2013 Compression method. Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"lz4"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"lz4hc"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"zstd"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"level")," \u2013 Compression level. See ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/sql-reference/statements/create/table#create-query-general-purpose-codecs"},"Codecs"),".")),(0,i.kt)("p",null,"You can configure multiple ",(0,i.kt)("inlineCode",{parentName:"p"},"<case>")," sections."),(0,i.kt)("p",null,"Actions when conditions are met:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If a data part matches a condition set, ClickHouse uses the specified compression method."),(0,i.kt)("li",{parentName:"ul"},"If a data part matches multiple condition sets, ClickHouse uses the first matched condition set.")),(0,i.kt)("p",null,"If no conditions met for a data part, ClickHouse uses the ",(0,i.kt)("inlineCode",{parentName:"p"},"lz4")," compression."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<compression incl="clickhouse_compression">\n    <case>\n        <min_part_size>10000000000</min_part_size>\n        <min_part_size_ratio>0.01</min_part_size_ratio>\n        <method>zstd</method>\n        <level>1</level>\n    </case>\n</compression>\n')),(0,i.kt)("h2",{id:"server-settings-encryption"},"encryption"),(0,i.kt)("p",null,"Configures a command to obtain a key to be used by ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/sql-reference/statements/create/table#create-query-encryption-codecs"},"encryption codecs"),". Key (or keys) should be written in environment variables or set in the configuration file."),(0,i.kt)("p",null,"Keys can be hex or string with a length equal to 16 bytes."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("p",null,"Loading from config:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<encryption_codecs>\n    <aes_128_gcm_siv>\n        <key>1234567812345678</key>\n    </aes_128_gcm_siv>\n</encryption_codecs>\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Storing keys in the configuration file is not recommended. It isn't secure. You can move the keys into a separate config file on a secure disk and put a symlink to that config file to ",(0,i.kt)("inlineCode",{parentName:"p"},"config.d/")," folder."))),(0,i.kt)("p",null,"Loading from config, when the key is in hex:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<encryption_codecs>\n    <aes_128_gcm_siv>\n        <key_hex>00112233445566778899aabbccddeeff</key_hex>\n    </aes_128_gcm_siv>\n</encryption_codecs>\n")),(0,i.kt)("p",null,"Loading key from the environment variable:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<encryption_codecs>\n    <aes_128_gcm_siv>\n        <key_hex from_env="ENVVAR"></key_hex>\n    </aes_128_gcm_siv>\n</encryption_codecs>\n')),(0,i.kt)("p",null,"Here ",(0,i.kt)("inlineCode",{parentName:"p"},"current_key_id")," sets the current key for encryption, and all specified keys can be used for decryption."),(0,i.kt)("p",null,"Each of these methods can be applied for multiple keys:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<encryption_codecs>\n    <aes_128_gcm_siv>\n        <key_hex id="0">00112233445566778899aabbccddeeff</key_hex>\n        <key_hex id="1" from_env="ENVVAR"></key_hex>\n        <current_key_id>1</current_key_id>\n    </aes_128_gcm_siv>\n</encryption_codecs>\n')),(0,i.kt)("p",null,"Here ",(0,i.kt)("inlineCode",{parentName:"p"},"current_key_id")," shows current key for encryption."),(0,i.kt)("p",null,"Also, users can add nonce that must be 12 bytes long (by default encryption and decryption processes use nonce that consists of zero bytes):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<encryption_codecs>\n    <aes_128_gcm_siv>\n        <nonce>012345678910</nonce>\n    </aes_128_gcm_siv>\n</encryption_codecs>\n")),(0,i.kt)("p",null,"Or it can be set in hex:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<encryption_codecs>\n    <aes_128_gcm_siv>\n        <nonce_hex>abcdefabcdef</nonce_hex>\n    </aes_128_gcm_siv>\n</encryption_codecs>\n")),(0,i.kt)("p",null,"Everything mentioned above can be applied for ",(0,i.kt)("inlineCode",{parentName:"p"},"aes_256_gcm_siv")," (but the key must be 32 bytes long)."),(0,i.kt)("h2",{id:"custom_settings_prefixes"},"custom_settings_prefixes"),(0,i.kt)("p",null,"List of prefixes for ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/settings/index#custom_settings"},"custom settings"),". The prefixes must be separated with commas."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<custom_settings_prefixes>custom_</custom_settings_prefixes>\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See Also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/settings/index#custom_settings"},"Custom settings"))),(0,i.kt)("h2",{id:"server_configuration_parameters-core_dump"},"core_dump"),(0,i.kt)("p",null,"Configures soft limit for core dump file size."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"1073741824")," (1 GB)."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Hard limit is configured via system tools"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<core_dump>\n    <size_limit>1073741824</size_limit>\n</core_dump>\n")),(0,i.kt)("h2",{id:"database_atomic_delay_before_drop_table_sec"},"database_atomic_delay_before_drop_table_sec"),(0,i.kt)("p",null,"Sets the delay before remove table data in seconds. If the query has ",(0,i.kt)("inlineCode",{parentName:"p"},"SYNC")," modifier, this setting is ignored."),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"480")," (8 minute)."),(0,i.kt)("h2",{id:"default-database"},"default_database"),(0,i.kt)("p",null,"The default database."),(0,i.kt)("p",null,"To get a list of databases, use the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/sql-reference/statements/show#show-databases"},"SHOW DATABASES")," query."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<default_database>default</default_database>\n")),(0,i.kt)("h2",{id:"default-profile"},"default_profile"),(0,i.kt)("p",null,"Default settings profile."),(0,i.kt)("p",null,"Settings profiles are located in the file specified in the parameter ",(0,i.kt)("inlineCode",{parentName:"p"},"user_config"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<default_profile>default</default_profile>\n")),(0,i.kt)("h2",{id:"default_replica_path"},"default_replica_path"),(0,i.kt)("p",null,"The path to the table in ZooKeeper."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<default_replica_path>/clickhouse/tables/{uuid}/{shard}</default_replica_path>\n")),(0,i.kt)("h2",{id:"default_replica_name"},"default_replica_name"),(0,i.kt)("p",null," The replica name in ZooKeeper."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<default_replica_name>{replica}</default_replica_name>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-dictionaries_config"},"dictionaries_config"),(0,i.kt)("p",null,"The path to the config file for external dictionaries."),(0,i.kt)("p",null,"Path:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Specify the absolute path or the path relative to the server config file."),(0,i.kt)("li",{parentName:"ul"},"The path can contain wildcards ","*"," and ?.")),(0,i.kt)("p",null,"See also \u201c",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/sql-reference/dictionaries/external-dictionaries/external-dicts"},"External dictionaries"),"\u201d."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<dictionaries_config>*_dictionary.xml</dictionaries_config>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-dictionaries_lazy_load"},"dictionaries_lazy_load"),(0,i.kt)("p",null,"Lazy loading of dictionaries."),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),", then each dictionary is created on first use. If dictionary creation failed, the function that was using the dictionary throws an exception."),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", all dictionaries are created when the server starts, if the dictionary or dictionaries are created too long or are created with errors, then the server boots without of these dictionaries and continues to try to create these dictionaries."),(0,i.kt)("p",null,"The default is ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<dictionaries_lazy_load>true</dictionaries_lazy_load>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-format_schema_path"},"format_schema_path"),(0,i.kt)("p",null,"The path to the directory with the schemes for the input data, such as schemas for the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/interfaces/formats#capnproto"},"CapnProto")," format."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"  \x3c!-- Directory containing schema files for various input formats. --\x3e\n  <format_schema_path>format_schemas/</format_schema_path>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-graphite"},"graphite"),(0,i.kt)("p",null,"Sending data to ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/graphite-project"},"Graphite"),"."),(0,i.kt)("p",null,"Settings:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"host \u2013 The Graphite server."),(0,i.kt)("li",{parentName:"ul"},"port \u2013 The port on the Graphite server."),(0,i.kt)("li",{parentName:"ul"},"interval \u2013 The interval for sending, in seconds."),(0,i.kt)("li",{parentName:"ul"},"timeout \u2013 The timeout for sending data, in seconds."),(0,i.kt)("li",{parentName:"ul"},"root_path \u2013 Prefix for keys."),(0,i.kt)("li",{parentName:"ul"},"metrics \u2013 Sending data from the ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/system-tables/metrics#system_tables-metrics"},"system.metrics")," table."),(0,i.kt)("li",{parentName:"ul"},"events \u2013 Sending deltas data accumulated for the time period from the ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/system-tables/events#system_tables-events"},"system.events")," table."),(0,i.kt)("li",{parentName:"ul"},"events_cumulative \u2013 Sending cumulative data from the ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/system-tables/events#system_tables-events"},"system.events")," table."),(0,i.kt)("li",{parentName:"ul"},"asynchronous_metrics \u2013 Sending data from the ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/system-tables/asynchronous_metrics#system_tables-asynchronous_metrics"},"system.asynchronous_metrics")," table.")),(0,i.kt)("p",null,"You can configure multiple ",(0,i.kt)("inlineCode",{parentName:"p"},"<graphite>")," clauses. For instance, you can use this for sending different data at different intervals."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<graphite>\n    <host>localhost</host>\n    <port>42000</port>\n    <timeout>0.1</timeout>\n    <interval>60</interval>\n    <root_path>one_min</root_path>\n    <metrics>true</metrics>\n    <events>true</events>\n    <events_cumulative>false</events_cumulative>\n    <asynchronous_metrics>true</asynchronous_metrics>\n</graphite>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-graphite-rollup"},"graphite_rollup"),(0,i.kt)("p",null,"Settings for thinning data for Graphite."),(0,i.kt)("p",null,"For more details, see ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/graphitemergetree"},"GraphiteMergeTree"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<graphite_rollup_example>\n    <default>\n        <function>max</function>\n        <retention>\n            <age>0</age>\n            <precision>60</precision>\n        </retention>\n        <retention>\n            <age>3600</age>\n            <precision>300</precision>\n        </retention>\n        <retention>\n            <age>86400</age>\n            <precision>3600</precision>\n        </retention>\n    </default>\n</graphite_rollup_example>\n")),(0,i.kt)("h2",{id:"http-porthttps-port"},"http_port/https_port"),(0,i.kt)("p",null,"The port for connecting to the server over HTTP(s)."),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"https_port")," is specified, ",(0,i.kt)("a",{parentName:"p",href:"#server_configuration_parameters-openssl"},"openSSL")," must be configured."),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"http_port")," is specified, the OpenSSL configuration is ignored even if it is set."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<https_port>9999</https_port>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-http_server_default_response"},"http_server_default_response"),(0,i.kt)("p",null,"The page that is shown by default when you access the ClickHouse HTTP(s) server.\nThe default value is \u201cOk.\u201d (with a line feed at the end)"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("p",null,"Opens ",(0,i.kt)("inlineCode",{parentName:"p"},"https://tabix.io/")," when accessing ",(0,i.kt)("inlineCode",{parentName:"p"},"http://localhost: http_port"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<http_server_default_response>\n  <![CDATA[<html ng-app="SMI2"><head><base href="http://ui.tabix.io/"></head><body><div ui-view="" class="content-ui"></div><script src="http://loader.tabix.io/master.js"><\/script></body></html>]]>\n</http_server_default_response>\n')),(0,i.kt)("h2",{id:"hsts-max-age"},"hsts_max_age"),(0,i.kt)("p",null,"Expired time for HSTS in seconds. The default value is 0 means clickhouse disabled HSTS. If you set a positive number, the HSTS will be enabled and the max-age is the number you set.  "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example"),"  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<hsts_max_age>600000</hsts_max_age>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-include_from"},"include_from"),(0,i.kt)("p",null,"The path to the file with substitutions."),(0,i.kt)("p",null,"For more information, see the section \u201c",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/configuration-files#configuration_files"},"Configuration files"),"\u201d."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<include_from>/etc/metrica.xml</include_from>\n")),(0,i.kt)("h2",{id:"interserver-http-port"},"interserver_http_port"),(0,i.kt)("p",null,"Port for exchanging data between ClickHouse servers."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<interserver_http_port>9009</interserver_http_port>\n")),(0,i.kt)("h2",{id:"interserver-http-host"},"interserver_http_host"),(0,i.kt)("p",null,"The hostname that can be used by other servers to access this server."),(0,i.kt)("p",null,"If omitted, it is defined in the same way as the ",(0,i.kt)("inlineCode",{parentName:"p"},"hostname-f")," command."),(0,i.kt)("p",null,"Useful for breaking away from a specific network interface."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<interserver_http_host>example.clickhouse.com</interserver_http_host>\n")),(0,i.kt)("h2",{id:"interserver-https-port"},"interserver_https_port"),(0,i.kt)("p",null,"Port for exchanging data between ClickHouse servers over ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPS"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<interserver_https_port>9010</interserver_https_port>\n")),(0,i.kt)("h2",{id:"interserver-https-host"},"interserver_https_host"),(0,i.kt)("p",null,"Similar to ",(0,i.kt)("inlineCode",{parentName:"p"},"interserver_http_host"),", except that this hostname can be used by other servers to access this server over ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPS"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<interserver_https_host>example.clickhouse.com</interserver_https_host>\n")),(0,i.kt)("h2",{id:"server-settings-interserver-http-credentials"},"interserver_http_credentials"),(0,i.kt)("p",null,"A username and a password used to connect to other servers during ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/replication"},"replication"),". Also the server authenticates other replicas using these credentials. So, ",(0,i.kt)("inlineCode",{parentName:"p"},"interserver_http_credentials")," must be the same for all replicas in a cluster."),(0,i.kt)("p",null,"By default, if ",(0,i.kt)("inlineCode",{parentName:"p"},"interserver_http_credentials")," section is omitted, authentication is not used during replication."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("inlineCode",{parentName:"p"},"interserver_http_credentials")," settings do not relate to a ClickHouse client credentials ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/interfaces/cli#configuration_files"},"configuration"),"."))),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"These credentials are common for replication via ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTP")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPS"),"."))),(0,i.kt)("p",null,"The section contains the following parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user")," \u2014 Username."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"password")," \u2014 Password."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"allow_empty")," \u2014 If ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", then other replicas are allowed to connect without authentication even if credentials are set. If ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),", then connections without authentication are refused. Default value: ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"old")," \u2014 Contains old ",(0,i.kt)("inlineCode",{parentName:"li"},"user")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"password")," used during credential rotation. Several ",(0,i.kt)("inlineCode",{parentName:"li"},"old")," sections can be specified.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Credentials Rotation")),(0,i.kt)("p",null,"ClickHouse supports dynamic interserver credentials rotation without stopping all replicas at the same time to update their configuration. Credentials can be changed in several steps."),(0,i.kt)("p",null,"To enable authentication, set ",(0,i.kt)("inlineCode",{parentName:"p"},"interserver_http_credentials.allow_empty")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," and add credentials. This allows connections with authentication and without it."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<interserver_http_credentials>\n    <user>admin</user>\n    <password>111</password>\n    <allow_empty>true</allow_empty>\n</interserver_http_credentials>\n")),(0,i.kt)("p",null,"After configuring all replicas set ",(0,i.kt)("inlineCode",{parentName:"p"},"allow_empty")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," or remove this setting. It makes authentication with new credentials mandatory."),(0,i.kt)("p",null,"To change existing credentials, move the username and the password to ",(0,i.kt)("inlineCode",{parentName:"p"},"interserver_http_credentials.old")," section and update ",(0,i.kt)("inlineCode",{parentName:"p"},"user")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"password")," with new values. At this point the server uses new credentials to connect to other replicas and accepts connections with either new or old credentials. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<interserver_http_credentials>\n    <user>admin</user>\n    <password>222</password>\n    <old>\n        <user>admin</user>\n        <password>111</password>\n    </old>\n    <old>\n        <user>temp</user>\n        <password>000</password>\n    </old>\n</interserver_http_credentials>\n")),(0,i.kt)("p",null,"When new credentials are applied to all replicas, old credentials may be removed."),(0,i.kt)("h2",{id:"keep-alive-timeout"},"keep_alive_timeout"),(0,i.kt)("p",null,"The number of seconds that ClickHouse waits for incoming requests before closing the connection. Defaults to 10 seconds."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<keep_alive_timeout>10</keep_alive_timeout>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-listen_host"},"listen_host"),(0,i.kt)("p",null,"Restriction on hosts that requests can come from. If you want the server to answer all of them, specify ",(0,i.kt)("inlineCode",{parentName:"p"},"::"),"."),(0,i.kt)("p",null,"Examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<listen_host>::1</listen_host>\n<listen_host>127.0.0.1</listen_host>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-listen_backlog"},"listen_backlog"),(0,i.kt)("p",null,"Backlog (queue size of pending connections) of the listen socket."),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"4096")," (as in linux ",(0,i.kt)("a",{parentName:"p",href:"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=19f92a030ca6d772ab44b22ee6a01378a8cb32d4"},"5.4+"),")."),(0,i.kt)("p",null,"Usually this value does not need to be changed, since:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"default value is large enough,"),(0,i.kt)("li",{parentName:"ul"},"and for accepting client's connections server has separate thread.")),(0,i.kt)("p",null,"So even if you have ",(0,i.kt)("inlineCode",{parentName:"p"},"TcpExtListenOverflows")," (from ",(0,i.kt)("inlineCode",{parentName:"p"},"nstat"),") non zero and this counter grows for ClickHouse server it does not mean that this value need to be increased, since:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"usually if 4096 is not enough it shows some internal ClickHouse scaling issue, so it is better to report an issue."),(0,i.kt)("li",{parentName:"ul"},"and it does not mean that the server can handle more connections later (and even if it could, by that moment clients may be gone or disconnected).")),(0,i.kt)("p",null,"Examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<listen_backlog>4096</listen_backlog>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-logger"},"logger"),(0,i.kt)("p",null,"Logging settings."),(0,i.kt)("p",null,"Keys:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"level")," \u2013 Logging level. Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"trace"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"debug"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"information"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"warning"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"error"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"log")," \u2013 The log file. Contains all the entries according to ",(0,i.kt)("inlineCode",{parentName:"li"},"level"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"errorlog")," \u2013 Error log file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"size")," \u2013 Size of the file. Applies to ",(0,i.kt)("inlineCode",{parentName:"li"},"log")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"errorlog"),". Once the file reaches ",(0,i.kt)("inlineCode",{parentName:"li"},"size"),", ClickHouse archives and renames it, and creates a new log file in its place."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"count")," \u2013 The number of archived log files that ClickHouse stores.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<logger>\n    <level>trace</level>\n    <log>/var/log/clickhouse-server/clickhouse-server.log</log>\n    <errorlog>/var/log/clickhouse-server/clickhouse-server.err.log</errorlog>\n    <size>1000M</size>\n    <count>10</count>\n</logger>\n")),(0,i.kt)("p",null,"Writing to the syslog is also supported. Config example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<logger>\n    <use_syslog>1</use_syslog>\n    <syslog>\n        <address>syslog.remote:10514</address>\n        <hostname>myhost.local</hostname>\n        <facility>LOG_LOCAL6</facility>\n        <format>syslog</format>\n    </syslog>\n</logger>\n")),(0,i.kt)("p",null,"Keys for syslog:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"use_syslog \u2014 Required setting if you want to write to the syslog."),(0,i.kt)("li",{parentName:"ul"},"address \u2014 The host","[",":port","]"," of syslogd. If omitted, the local daemon is used."),(0,i.kt)("li",{parentName:"ul"},"hostname \u2014 Optional. The name of the host that logs are sent from."),(0,i.kt)("li",{parentName:"ul"},"facility \u2014 ",(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Syslog#Facility"},"The syslog facility keyword")," in uppercase letters with the \u201cLOG_\u201d prefix: (",(0,i.kt)("inlineCode",{parentName:"li"},"LOG_USER"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"LOG_DAEMON"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"LOG_LOCAL3"),", and so on).\nDefault value: ",(0,i.kt)("inlineCode",{parentName:"li"},"LOG_USER")," if ",(0,i.kt)("inlineCode",{parentName:"li"},"address")," is specified, ",(0,i.kt)("inlineCode",{parentName:"li"},"LOG_DAEMON")," otherwise."),(0,i.kt)("li",{parentName:"ul"},"format \u2013 Message format. Possible values: ",(0,i.kt)("inlineCode",{parentName:"li"},"bsd")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"syslog."))),(0,i.kt)("h2",{id:"server_configuration_parameters-send_crash_reports"},"send_crash_reports"),(0,i.kt)("p",null,"Settings for opt-in sending crash reports to the ClickHouse core developers team via ",(0,i.kt)("a",{parentName:"p",href:"https://sentry.io"},"Sentry"),".\nEnabling it, especially in pre-production environments, is highly appreciated."),(0,i.kt)("p",null,"The server will need access to the public Internet via IPv4 (at the time of writing IPv6 is not supported by Sentry) for this feature to be functioning properly."),(0,i.kt)("p",null,"Keys:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enabled")," \u2013 Boolean flag to enable the feature, ",(0,i.kt)("inlineCode",{parentName:"li"},"false")," by default. Set to ",(0,i.kt)("inlineCode",{parentName:"li"},"true")," to allow sending crash reports."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"endpoint")," \u2013 You can override the Sentry endpoint URL for sending crash reports. It can be either a separate Sentry account or your self-hosted Sentry instance. Use the ",(0,i.kt)("a",{parentName:"li",href:"https://docs.sentry.io/error-reporting/quickstart/?platform=native#configure-the-sdk"},"Sentry DSN")," syntax."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"anonymize")," - Avoid attaching the server hostname to the crash report."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"http_proxy")," - Configure HTTP proxy for sending crash reports."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"debug")," - Sets the Sentry client into debug mode."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"tmp_path")," - Filesystem path for temporary crash report state.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Recommended way to use")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<send_crash_reports>\n    <enabled>true</enabled>\n</send_crash_reports>\n")),(0,i.kt)("h2",{id:"macros"},"macros"),(0,i.kt)("p",null,"Parameter substitutions for replicated tables."),(0,i.kt)("p",null,"Can be omitted if replicated tables are not used."),(0,i.kt)("p",null,"For more information, see the section ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/replication#creating-replicated-tables"},"Creating replicated tables"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<macros incl="macros" optional="true" />\n')),(0,i.kt)("h2",{id:"server-mark-cache-size"},"mark_cache_size"),(0,i.kt)("p",null,"Approximate size (in bytes) of the cache of marks used by table engines of the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"MergeTree")," family."),(0,i.kt)("p",null,"The cache is shared for the server and memory is allocated as needed."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<mark_cache_size>5368709120</mark_cache_size>\n")),(0,i.kt)("h2",{id:"max_server_memory_usage"},"max_server_memory_usage"),(0,i.kt)("p",null,"Limits total RAM usage by the ClickHouse server."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 Auto.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Additional Info")),(0,i.kt)("p",null,"The default ",(0,i.kt)("inlineCode",{parentName:"p"},"max_server_memory_usage")," value is calculated as ",(0,i.kt)("inlineCode",{parentName:"p"},"memory_amount * max_server_memory_usage_to_ram_ratio"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/settings/query-complexity#settings_max_memory_usage"},"max_memory_usage")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#max_server_memory_usage_to_ram_ratio"},"max_server_memory_usage_to_ram_ratio"))),(0,i.kt)("h2",{id:"max_server_memory_usage_to_ram_ratio"},"max_server_memory_usage_to_ram_ratio"),(0,i.kt)("p",null,"Defines the fraction of total physical RAM amount, available to the ClickHouse server. If the server tries to utilize more, the memory is cut down to the appropriate amount."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive double."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 The ClickHouse server can use all available RAM.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"0.9"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Usage")),(0,i.kt)("p",null,"On hosts with low RAM and swap, you possibly need setting ",(0,i.kt)("inlineCode",{parentName:"p"},"max_server_memory_usage_to_ram_ratio")," larger than 1."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_server_memory_usage_to_ram_ratio>0.9</max_server_memory_usage_to_ram_ratio>\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See Also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#max_server_memory_usage"},"max_server_memory_usage"))),(0,i.kt)("h2",{id:"max-concurrent-queries"},"max_concurrent_queries"),(0,i.kt)("p",null,"The maximum number of simultaneously processed queries related to MergeTree table.\nQueries may be limited by other settings: ",(0,i.kt)("a",{parentName:"p",href:"#max-concurrent-insert-queries"},"max_concurrent_insert_queries"),", ",(0,i.kt)("a",{parentName:"p",href:"#max-concurrent-select-queries"},"max_concurrent_select_queries"),", ",(0,i.kt)("a",{parentName:"p",href:"#max-concurrent-queries-for-user"},"max_concurrent_queries_for_user"),", ",(0,i.kt)("a",{parentName:"p",href:"#max-concurrent-queries-for-all-users"},"max_concurrent_queries_for_all_users"),", ",(0,i.kt)("a",{parentName:"p",href:"#min-marks-to-honor-max-concurrent-queries"},"min_marks_to_honor_max_concurrent_queries"),"."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"These settings can be modified at runtime and will take effect immediately. Queries that are already running will remain unchanged."))),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 No limit.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"100"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_concurrent_queries>100</max_concurrent_queries>\n")),(0,i.kt)("h2",{id:"max-concurrent-insert-queries"},"max_concurrent_insert_queries"),(0,i.kt)("p",null,"The maximum number of simultaneously processed ",(0,i.kt)("inlineCode",{parentName:"p"},"INSERT")," queries."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"These settings can be modified at runtime and will take effect immediately. Queries that are already running will remain unchanged."))),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 No limit.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_concurrent_insert_queries>100</max_concurrent_insert_queries>\n")),(0,i.kt)("h2",{id:"max-concurrent-select-queries"},"max_concurrent_select_queries"),(0,i.kt)("p",null,"The maximum number of simultaneously processed ",(0,i.kt)("inlineCode",{parentName:"p"},"SELECT")," queries."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"These settings can be modified at runtime and will take effect immediately. Queries that are already running will remain unchanged."))),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 No limit.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_concurrent_select_queries>100</max_concurrent_select_queries>\n")),(0,i.kt)("h2",{id:"max-concurrent-queries-for-user"},"max_concurrent_queries_for_user"),(0,i.kt)("p",null,"The maximum number of simultaneously processed queries related to MergeTree table per user."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 No limit.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_concurrent_queries_for_user>5</max_concurrent_queries_for_user>\n")),(0,i.kt)("h2",{id:"max-concurrent-queries-for-all-users"},"max_concurrent_queries_for_all_users"),(0,i.kt)("p",null,"Throw exception if the value of this setting is less or equal than the current number of simultaneously processed queries."),(0,i.kt)("p",null,"Example: ",(0,i.kt)("inlineCode",{parentName:"p"},"max_concurrent_queries_for_all_users")," can be set to 99 for all users and database administrator can set it to 100 for itself to run queries for investigation even when the server is overloaded."),(0,i.kt)("p",null,"Modifying the setting for one query or user does not affect other queries."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 No limit.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_concurrent_queries_for_all_users>99</max_concurrent_queries_for_all_users>\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See Also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#max-concurrent-queries"},"max_concurrent_queries"))),(0,i.kt)("h2",{id:"min-marks-to-honor-max-concurrent-queries"},"min_marks_to_honor_max_concurrent_queries"),(0,i.kt)("p",null,"The minimal number of marks read by the query for applying the ",(0,i.kt)("a",{parentName:"p",href:"#max-concurrent-queries"},"max_concurrent_queries")," setting."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 Disabled.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<min_marks_to_honor_max_concurrent_queries>10</min_marks_to_honor_max_concurrent_queries>\n")),(0,i.kt)("h2",{id:"max-connections"},"max_connections"),(0,i.kt)("p",null,"The maximum number of inbound connections."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_connections>4096</max_connections>\n")),(0,i.kt)("h2",{id:"max-open-files"},"max_open_files"),(0,i.kt)("p",null,"The maximum number of open files."),(0,i.kt)("p",null,"By default: ",(0,i.kt)("inlineCode",{parentName:"p"},"maximum"),"."),(0,i.kt)("p",null,"We recommend using this option in Mac OS X since the ",(0,i.kt)("inlineCode",{parentName:"p"},"getrlimit()")," function returns an incorrect value."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_open_files>262144</max_open_files>\n")),(0,i.kt)("h2",{id:"max-table-size-to-drop"},"max_table_size_to_drop"),(0,i.kt)("p",null,"Restriction on deleting tables."),(0,i.kt)("p",null,"If the size of a ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"MergeTree")," table exceeds ",(0,i.kt)("inlineCode",{parentName:"p"},"max_table_size_to_drop")," (in bytes), you can\u2019t delete it using a DROP query."),(0,i.kt)("p",null,"If you still need to delete the table without restarting the ClickHouse server, create the ",(0,i.kt)("inlineCode",{parentName:"p"},"<clickhouse-path>/flags/force_drop_table")," file and run the DROP query."),(0,i.kt)("p",null,"Default value: 50 GB."),(0,i.kt)("p",null,"The value 0 means that you can delete all tables without any restrictions."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_table_size_to_drop>0</max_table_size_to_drop>\n")),(0,i.kt)("h2",{id:"max-thread-pool-size"},"max_thread_pool_size"),(0,i.kt)("p",null,"ClickHouse uses threads from the Global Thread pool to process queries. If there is no idle thread to process a query, then a new thread is created in the pool. ",(0,i.kt)("inlineCode",{parentName:"p"},"max_thread_pool_size")," limits the maximum number of threads in the pool."),(0,i.kt)("p",null,"Possible values: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"10000"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_thread_pool_size>12000</max_thread_pool_size>\n")),(0,i.kt)("h2",{id:"max-thread-pool-free-size"},"max_thread_pool_free_size"),(0,i.kt)("p",null,"If the number of ",(0,i.kt)("strong",{parentName:"p"},"idle")," threads in the Global Thread pool is greater than ",(0,i.kt)("inlineCode",{parentName:"p"},"max_thread_pool_free_size"),", then ClickHouse releases resources occupied by some threads and the pool size is decreased. Threads can be created again if necessary."),(0,i.kt)("p",null,"Possible values: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"1000"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<max_thread_pool_free_size>1200</max_thread_pool_free_size>\n")),(0,i.kt)("h2",{id:"thread-pool-queue-size"},"thread_pool_queue_size"),(0,i.kt)("p",null,"The maximum number of jobs that can be scheduled on the Global Thread pool. Increasing queue size leads to larger memory usage. It is recommended to keep this value equal to ",(0,i.kt)("a",{parentName:"p",href:"#max-thread-pool-size"},"max_thread_pool_size"),"."),(0,i.kt)("p",null,"Possible values: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"10000"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<thread_pool_queue_size>12000</thread_pool_queue_size>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-merge_tree"},"merge_tree"),(0,i.kt)("p",null,"Fine tuning for tables in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"MergeTree"),"."),(0,i.kt)("p",null,"For more information, see the MergeTreeSettings.h header file."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<merge_tree>\n    <max_suspicious_broken_parts>5</max_suspicious_broken_parts>\n</merge_tree>\n")),(0,i.kt)("h2",{id:"metric_log"},"metric_log"),(0,i.kt)("p",null,"It is enabled by default. If it`s not, you can do this manually."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Enabling")),(0,i.kt)("p",null,"To manually turn on metrics history collection ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/metric_log"},(0,i.kt)("inlineCode",{parentName:"a"},"system.metric_log")),", create ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/clickhouse-server/config.d/metric_log.xml")," with the following content:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<clickhouse>\n    <metric_log>\n        <database>system</database>\n        <table>metric_log</table>\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n        <collect_interval_milliseconds>1000</collect_interval_milliseconds>\n    </metric_log>\n</clickhouse>\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Disabling")),(0,i.kt)("p",null,"To disable ",(0,i.kt)("inlineCode",{parentName:"p"},"metric_log")," setting, you should create the following file ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/clickhouse-server/config.d/disable_metric_log.xml")," with the following content:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<clickhouse>\n<metric_log remove="1" />\n</clickhouse>\n')),(0,i.kt)("h2",{id:"server_configuration_parameters-replicated_merge_tree"},"replicated_merge_tree"),(0,i.kt)("p",null,"Fine tuning for tables in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"ReplicatedMergeTree"),"."),(0,i.kt)("p",null,"This setting has a higher priority."),(0,i.kt)("p",null,"For more information, see the MergeTreeSettings.h header file."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<replicated_merge_tree>\n    <max_suspicious_broken_parts>5</max_suspicious_broken_parts>\n</replicated_merge_tree>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-openssl"},"openSSL"),(0,i.kt)("p",null,"SSL client/server configuration."),(0,i.kt)("p",null,"Support for SSL is provided by the ",(0,i.kt)("inlineCode",{parentName:"p"},"libpoco")," library. The interface is described in the file ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/SSLManager.h"},"SSLManager.h")),(0,i.kt)("p",null,"Keys for server/client settings:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"privateKeyFile \u2013 The path to the file with the secret key of the PEM certificate. The file may contain a key and certificate at the same time."),(0,i.kt)("li",{parentName:"ul"},"certificateFile \u2013 The path to the client/server certificate file in PEM format. You can omit it if ",(0,i.kt)("inlineCode",{parentName:"li"},"privateKeyFile")," contains the certificate."),(0,i.kt)("li",{parentName:"ul"},"caConfig \u2013 The path to the file or directory that contains trusted root certificates."),(0,i.kt)("li",{parentName:"ul"},"verificationMode \u2013 The method for checking the node\u2019s certificates. Details are in the description of the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/Context.h"},"Context")," class. Possible values: ",(0,i.kt)("inlineCode",{parentName:"li"},"none"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"relaxed"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"strict"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"once"),"."),(0,i.kt)("li",{parentName:"ul"},"verificationDepth \u2013 The maximum length of the verification chain. Verification will fail if the certificate chain length exceeds the set value."),(0,i.kt)("li",{parentName:"ul"},"loadDefaultCAFile \u2013 Indicates that built-in CA certificates for OpenSSL will be used. Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),". ","|"),(0,i.kt)("li",{parentName:"ul"},"cipherList \u2013 Supported OpenSSL encryptions. For example: ",(0,i.kt)("inlineCode",{parentName:"li"},"ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH"),"."),(0,i.kt)("li",{parentName:"ul"},"cacheSessions \u2013 Enables or disables caching sessions. Must be used in combination with ",(0,i.kt)("inlineCode",{parentName:"li"},"sessionIdContext"),". Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},"sessionIdContext \u2013 A unique set of random characters that the server appends to each generated identifier. The length of the string must not exceed ",(0,i.kt)("inlineCode",{parentName:"li"},"SSL_MAX_SSL_SESSION_ID_LENGTH"),". This parameter is always recommended since it helps avoid problems both if the server caches the session and if the client requested caching. Default value: ",(0,i.kt)("inlineCode",{parentName:"li"},"${application.name}"),"."),(0,i.kt)("li",{parentName:"ul"},"sessionCacheSize \u2013 The maximum number of sessions that the server caches. Default value: 1024","*","20. 0 \u2013 Unlimited sessions."),(0,i.kt)("li",{parentName:"ul"},"sessionTimeout \u2013 Time for caching the session on the server."),(0,i.kt)("li",{parentName:"ul"},"extendedVerification \u2013 Automatically extended verification of certificates after the session ends. Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},"requireTLSv1 \u2013 Require a TLSv1 connection. Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},"requireTLSv1_1 \u2013 Require a TLSv1.1 connection. Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},"requireTLSv1_2 \u2013 Require a TLSv1.2 connection. Acceptable values: ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},"fips \u2013 Activates OpenSSL FIPS mode. Supported if the library\u2019s OpenSSL version supports FIPS."),(0,i.kt)("li",{parentName:"ul"},"privateKeyPassphraseHandler \u2013 Class (PrivateKeyPassphraseHandler subclass) that requests the passphrase for accessing the private key. For example: ",(0,i.kt)("inlineCode",{parentName:"li"},"<privateKeyPassphraseHandler>"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"<name>KeyFileHandler</name>"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"<options><password>test</password></options>"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"</privateKeyPassphraseHandler>"),"."),(0,i.kt)("li",{parentName:"ul"},"invalidCertificateHandler \u2013 Class (a subclass of CertificateHandler) for verifying invalid certificates. For example: ",(0,i.kt)("inlineCode",{parentName:"li"},"<invalidCertificateHandler> <name>ConsoleCertificateHandler</name> </invalidCertificateHandler>")," ."),(0,i.kt)("li",{parentName:"ul"},"disableProtocols \u2013 Protocols that are not allowed to use."),(0,i.kt)("li",{parentName:"ul"},"preferServerCiphers \u2013 Preferred server ciphers on the client.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example of settings:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<openSSL>\n    <server>\n        \x3c!-- openssl req -subj "/CN=localhost" -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout /etc/clickhouse-server/server.key -out /etc/clickhouse-server/server.crt --\x3e\n        <certificateFile>/etc/clickhouse-server/server.crt</certificateFile>\n        <privateKeyFile>/etc/clickhouse-server/server.key</privateKeyFile>\n        \x3c!-- openssl dhparam -out /etc/clickhouse-server/dhparam.pem 4096 --\x3e\n        <dhParamsFile>/etc/clickhouse-server/dhparam.pem</dhParamsFile>\n        <verificationMode>none</verificationMode>\n        <loadDefaultCAFile>true</loadDefaultCAFile>\n        <cacheSessions>true</cacheSessions>\n        <disableProtocols>sslv2,sslv3</disableProtocols>\n        <preferServerCiphers>true</preferServerCiphers>\n    </server>\n    <client>\n        <loadDefaultCAFile>true</loadDefaultCAFile>\n        <cacheSessions>true</cacheSessions>\n        <disableProtocols>sslv2,sslv3</disableProtocols>\n        <preferServerCiphers>true</preferServerCiphers>\n        \x3c!-- Use for self-signed: <verificationMode>none</verificationMode> --\x3e\n        <invalidCertificateHandler>\n            \x3c!-- Use for self-signed: <name>AcceptCertificateHandler</name> --\x3e\n            <name>RejectCertificateHandler</name>\n        </invalidCertificateHandler>\n    </client>\n</openSSL>\n')),(0,i.kt)("h2",{id:"server_configuration_parameters-part-log"},"part_log"),(0,i.kt)("p",null,"Logging events that are associated with ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"MergeTree"),". For instance, adding or merging data. You can use the log to simulate merge algorithms and compare their characteristics. You can visualize the merge process."),(0,i.kt)("p",null,"Queries are logged in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/part_log#system_tables-part-log"},"system.part_log")," table, not in a separate file. You can configure the name of this table in the ",(0,i.kt)("inlineCode",{parentName:"p"},"table")," parameter (see below)."),(0,i.kt)("p",null,"Use the following parameters to configure logging:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"database")," \u2013 Name of the database."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"table")," \u2013 Name of the system table."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," \u2014 ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key"},"Custom partitioning key")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"engine")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"engine")," - ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-creating-a-table"},"MergeTree Engine Definition")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flush_interval_milliseconds")," \u2013 Interval for flushing data from the buffer in memory to the table.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<part_log>\n    <database>system</database>\n    <table>part_log</table>\n    <partition_by>toMonday(event_date)</partition_by>\n    <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n</part_log>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-path"},"path"),(0,i.kt)("p",null,"The path to the directory containing data."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The trailing slash is mandatory."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<path>/var/lib/clickhouse/</path>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-prometheus"},"prometheus"),(0,i.kt)("p",null,"Exposing metrics data for scraping from ",(0,i.kt)("a",{parentName:"p",href:"https://prometheus.io"},"Prometheus"),"."),(0,i.kt)("p",null,"Settings:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"endpoint")," \u2013 HTTP endpoint for scraping metrics by prometheus server. Start from \u2018/\u2019."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"port")," \u2013 Port for ",(0,i.kt)("inlineCode",{parentName:"li"},"endpoint"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"metrics")," \u2013 Flag that sets to expose metrics from the ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/system-tables/metrics#system_tables-metrics"},"system.metrics")," table."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"events")," \u2013 Flag that sets to expose metrics from the ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/system-tables/events#system_tables-events"},"system.events")," table."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"asynchronous_metrics")," \u2013 Flag that sets to expose current metrics values from the ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/system-tables/asynchronous_metrics#system_tables-asynchronous_metrics"},"system.asynchronous_metrics")," table.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"}," <prometheus>\n        <endpoint>/metrics</endpoint>\n        <port>8001</port>\n        <metrics>true</metrics>\n        <events>true</events>\n        <asynchronous_metrics>true</asynchronous_metrics>\n    </prometheus>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-query-log"},"query_log"),(0,i.kt)("p",null,"Setting for logging queries received with the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/settings/"},"log_queries=1")," setting."),(0,i.kt)("p",null,"Queries are logged in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/query_log#system_tables-query_log"},"system.query_log")," table, not in a separate file. You can change the name of the table in the ",(0,i.kt)("inlineCode",{parentName:"p"},"table")," parameter (see below)."),(0,i.kt)("p",null,"Use the following parameters to configure logging:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"database")," \u2013 Name of the database."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"table")," \u2013 Name of the system table the queries will be logged in."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," \u2014 ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key"},"Custom partitioning key")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"engine")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"engine")," - ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-creating-a-table"},"MergeTree Engine Definition")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flush_interval_milliseconds")," \u2013 Interval for flushing data from the buffer in memory to the table.")),(0,i.kt)("p",null,"If the table does not exist, ClickHouse will create it. If the structure of the query log changed when the ClickHouse server was updated, the table with the old structure is renamed, and a new table is created automatically."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<query_log>\n    <database>system</database>\n    <table>query_log</table>\n    <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + INTERVAL 30 day</engine>\n    <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n</query_log>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-query_thread_log"},"query_thread_log"),(0,i.kt)("p",null,"Setting for logging threads of queries received with the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/settings/#settings-log-query-threads"},"log_query_threads=1")," setting."),(0,i.kt)("p",null,"Queries are logged in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/query_thread_log#system_tables-query_thread_log"},"system.query_thread_log")," table, not in a separate file. You can change the name of the table in the ",(0,i.kt)("inlineCode",{parentName:"p"},"table")," parameter (see below)."),(0,i.kt)("p",null,"Use the following parameters to configure logging:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"database")," \u2013 Name of the database."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"table")," \u2013 Name of the system table the queries will be logged in."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," \u2014 ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key"},"Custom partitioning key")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"engine")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"engine")," - ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-creating-a-table"},"MergeTree Engine Definition")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flush_interval_milliseconds")," \u2013 Interval for flushing data from the buffer in memory to the table.")),(0,i.kt)("p",null,"If the table does not exist, ClickHouse will create it. If the structure of the query thread log changed when the ClickHouse server was updated, the table with the old structure is renamed, and a new table is created automatically."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<query_thread_log>\n    <database>system</database>\n    <table>query_thread_log</table>\n    <partition_by>toMonday(event_date)</partition_by>\n    <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n</query_thread_log>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-query_views_log"},"query_views_log"),(0,i.kt)("p",null,"Setting for logging views (live, materialized etc) dependant of queries received with the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/settings/#settings-log-query-views"},"log_query_views=1")," setting."),(0,i.kt)("p",null,"Queries are logged in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/query_views_log#system_tables-query_views_log"},"system.query_views_log")," table, not in a separate file. You can change the name of the table in the ",(0,i.kt)("inlineCode",{parentName:"p"},"table")," parameter (see below)."),(0,i.kt)("p",null,"Use the following parameters to configure logging:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"database")," \u2013 Name of the database."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"table")," \u2013 Name of the system table the queries will be logged in."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," \u2014 ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key"},"Custom partitioning key")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"engine")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"engine")," - ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-creating-a-table"},"MergeTree Engine Definition")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flush_interval_milliseconds")," \u2013 Interval for flushing data from the buffer in memory to the table.")),(0,i.kt)("p",null,"If the table does not exist, ClickHouse will create it. If the structure of the query views log changed when the ClickHouse server was updated, the table with the old structure is renamed, and a new table is created automatically."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<query_views_log>\n    <database>system</database>\n    <table>query_views_log</table>\n    <partition_by>toYYYYMM(event_date)</partition_by>\n    <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n</query_views_log>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-text_log"},"text_log"),(0,i.kt)("p",null,"Settings for the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/text_log#system_tables-text_log"},"text_log")," system table for logging text messages."),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"level")," \u2014 Maximum Message Level (by default ",(0,i.kt)("inlineCode",{parentName:"li"},"Trace"),") which will be stored in a table."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"database")," \u2014 Database name."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"table")," \u2014 Table name."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," \u2014 ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key"},"Custom partitioning key")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"engine")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"engine")," - ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-creating-a-table"},"MergeTree Engine Definition")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flush_interval_milliseconds")," \u2014 Interval for flushing data from the buffer in memory to the table.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<clickhouse>\n    <text_log>\n        <level>notice</level>\n        <database>system</database>\n        <table>text_log</table>\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n        \x3c!-- <partition_by>event_date</partition_by> --\x3e\n        <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + INTERVAL 30 day</engine>\n    </text_log>\n</clickhouse>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-trace_log"},"trace_log"),(0,i.kt)("p",null,"Settings for the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/trace_log#system_tables-trace_log"},"trace_log")," system table operation."),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"database")," \u2014 Database for storing a table."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"table")," \u2014 Table name."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," \u2014 ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key"},"Custom partitioning key")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"engine")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"engine")," - ",(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/"},"MergeTree Engine Definition")," for a system table. Can't be used if ",(0,i.kt)("inlineCode",{parentName:"li"},"partition_by")," defined."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flush_interval_milliseconds")," \u2014 Interval for flushing data from the buffer in memory to the table.")),(0,i.kt)("p",null,"The default server configuration file ",(0,i.kt)("inlineCode",{parentName:"p"},"config.xml")," contains the following settings section:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<trace_log>\n    <database>system</database>\n    <table>trace_log</table>\n    <partition_by>toYYYYMM(event_date)</partition_by>\n    <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n</trace_log>\n")),(0,i.kt)("h2",{id:"query-masking-rules"},"query_masking_rules"),(0,i.kt)("p",null,"Regexp-based rules, which will be applied to queries as well as all log messages before storing them in server logs,\n",(0,i.kt)("inlineCode",{parentName:"p"},"system.query_log"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"system.text_log"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"system.processes")," tables, and in logs sent to the client. That allows preventing\nsensitive data leakage from SQL queries (like names, emails, personal identifiers or credit card numbers) to logs."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<query_masking_rules>\n    <rule>\n        <name>hide SSN</name>\n        <regexp>(^|\\D)\\d{3}-\\d{2}-\\d{4}($|\\D)</regexp>\n        <replace>000-00-0000</replace>\n    </rule>\n</query_masking_rules>\n")),(0,i.kt)("p",null,"Config fields:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name")," - name for the rule (optional)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"regexp")," - RE2 compatible regular expression (mandatory)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"replace")," - substitution string for sensitive data (optional, by default - six asterisks)")),(0,i.kt)("p",null,"The masking rules are applied to the whole query (to prevent leaks of sensitive data from malformed / non-parsable queries)."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"system.events")," table have counter ",(0,i.kt)("inlineCode",{parentName:"p"},"QueryMaskingRulesMatch")," which have an overall number of query masking rules matches."),(0,i.kt)("p",null,"For distributed queries each server have to be configured separately, otherwise, subqueries passed to other\nnodes will be stored without masking."),(0,i.kt)("h2",{id:"server-settings-remote-servers"},"remote_servers"),(0,i.kt)("p",null,"Configuration of clusters used by the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/special/distributed"},"Distributed")," table engine and by the ",(0,i.kt)("inlineCode",{parentName:"p"},"cluster")," table function."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<remote_servers incl="clickhouse_remote_servers" />\n')),(0,i.kt)("p",null,"For the value of the ",(0,i.kt)("inlineCode",{parentName:"p"},"incl")," attribute, see the section \u201c",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/configuration-files#configuration_files"},"Configuration files"),"\u201d."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See Also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/settings/#settings-skip_unavailable_shards"},"skip_unavailable_shards"))),(0,i.kt)("h2",{id:"server_configuration_parameters-timezone"},"timezone"),(0,i.kt)("p",null,"The server\u2019s time zone."),(0,i.kt)("p",null,"Specified as an IANA identifier for the UTC timezone or geographic location (for example, Africa/Abidjan)."),(0,i.kt)("p",null,"The time zone is necessary for conversions between String and DateTime formats when DateTime fields are output to text format (printed on the screen or in a file), and when getting DateTime from a string. Besides, the time zone is used in functions that work with the time and date if they didn\u2019t receive the time zone in the input parameters."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<timezone>Asia/Istanbul</timezone>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-tcp_port"},"tcp_port"),(0,i.kt)("p",null,"Port for communicating with clients over the TCP protocol."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<tcp_port>9000</tcp_port>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-tcp_port_secure"},"tcp_port_secure"),(0,i.kt)("p",null,"TCP port for secure communication with clients. Use it with ",(0,i.kt)("a",{parentName:"p",href:"#server_configuration_parameters-openssl"},"OpenSSL")," settings."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Possible values")),(0,i.kt)("p",null,"Positive integer."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Default value")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<tcp_port_secure>9440</tcp_port_secure>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-mysql_port"},"mysql_port"),(0,i.kt)("p",null,"Port for communicating with clients over MySQL protocol."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Possible values")),(0,i.kt)("p",null,"Positive integer."),(0,i.kt)("p",null,"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<mysql_port>9004</mysql_port>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-postgresql_port"},"postgresql_port"),(0,i.kt)("p",null,"Port for communicating with clients over PostgreSQL protocol."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Possible values")),(0,i.kt)("p",null,"Positive integer."),(0,i.kt)("p",null,"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<postgresql_port>9005</postgresql_port>\n")),(0,i.kt)("h2",{id:"tmp-path"},"tmp_path"),(0,i.kt)("p",null,"Path to temporary data for processing large queries."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The trailing slash is mandatory."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<tmp_path>/var/lib/clickhouse/tmp/</tmp_path>\n")),(0,i.kt)("h2",{id:"tmp-policy"},"tmp_policy"),(0,i.kt)("p",null,"Policy from ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-multiple-volumes"},"storage_configuration")," to store temporary files."),(0,i.kt)("p",null,"If not set, ",(0,i.kt)("a",{parentName:"p",href:"#tmp-path"},"tmp_path")," is used, otherwise it is ignored."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"move_factor")," is ignored."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"keep_free_space_bytes")," is ignored."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"max_data_part_size_bytes")," is ignored."),(0,i.kt)("li",{parentName:"ul"},"\u0423ou must have exactly one volume in that policy.")))),(0,i.kt)("h2",{id:"server-settings-uncompressed_cache_size"},"uncompressed_cache_size"),(0,i.kt)("p",null,"Cache size (in bytes) for uncompressed data used by table engines from the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"MergeTree"),"."),(0,i.kt)("p",null,"There is one shared cache for the server. Memory is allocated on demand. The cache is used if the option ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/settings/#setting-use_uncompressed_cache"},"use_uncompressed_cache")," is enabled."),(0,i.kt)("p",null,"The uncompressed cache is advantageous for very short queries in individual cases."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<uncompressed_cache_size>8589934592</uncompressed_cache_size>\n")),(0,i.kt)("h2",{id:"server_configuration_parameters-user_files_path"},"user_files_path"),(0,i.kt)("p",null,"The directory with user files. Used in the table function ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/sql-reference/table-functions/file"},"file()"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<user_files_path>/var/lib/clickhouse/user_files/</user_files_path>\n")),(0,i.kt)("h2",{id:"users-config"},"users_config"),(0,i.kt)("p",null,"Path to the file that contains:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"User configurations."),(0,i.kt)("li",{parentName:"ul"},"Access rights."),(0,i.kt)("li",{parentName:"ul"},"Settings profiles."),(0,i.kt)("li",{parentName:"ul"},"Quota settings.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<users_config>users.xml</users_config>\n")),(0,i.kt)("h2",{id:"server-settings_zookeeper"},"zookeeper"),(0,i.kt)("p",null,"Contains settings that allow ClickHouse to interact with a ",(0,i.kt)("a",{parentName:"p",href:"http://zookeeper.apache.org/"},"ZooKeeper")," cluster."),(0,i.kt)("p",null,"ClickHouse uses ZooKeeper for storing metadata of replicas when using replicated tables. If replicated tables are not used, this section of parameters can be omitted."),(0,i.kt)("p",null,"This section contains the following parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"node")," \u2014 ZooKeeper endpoint. You can set multiple endpoints."),(0,i.kt)("p",{parentName:"li"},"For example:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'    <node index="1">\n        <host>example_host</host>\n        <port>2181</port>\n    </node>\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"  The `index` attribute specifies the node order when trying to connect to the ZooKeeper cluster.\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"session_timeout_ms")," \u2014 Maximum timeout for the client session in milliseconds."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"operation_timeout_ms")," \u2014 Maximum timeout for one operation in milliseconds."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"root")," \u2014 The ",(0,i.kt)("a",{parentName:"li",href:"http://zookeeper.apache.org/doc/r3.5.5/zookeeperOver.html#Nodes+and+ephemeral+nodes"},"znode")," that is used as the root for znodes used by the ClickHouse server. Optional."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"identity")," \u2014 User and password, that can be required by ZooKeeper to give access to requested znodes. Optional.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example configuration")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<zookeeper>\n    <node>\n        <host>example1</host>\n        <port>2181</port>\n    </node>\n    <node>\n        <host>example2</host>\n        <port>2181</port>\n    </node>\n    <session_timeout_ms>30000</session_timeout_ms>\n    <operation_timeout_ms>10000</operation_timeout_ms>\n    \x3c!-- Optional. Chroot suffix. Should exist. --\x3e\n    <root>/path/to/zookeeper/node</root>\n    \x3c!-- Optional. Zookeeper digest ACL string. --\x3e\n    <identity>user:password</identity>\n</zookeeper>\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See Also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/engines/table-engines/mergetree-family/replication"},"Replication")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://zookeeper.apache.org/doc/current/zookeeperProgrammers.html"},"ZooKeeper Programmer\u2019s Guide")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/ssl-zookeeper#secured-communication-with-zookeeper"},"Optional secured communication between ClickHouse and Zookeeper"))),(0,i.kt)("h2",{id:"server-settings-use_minimalistic_part_header_in_zookeeper"},"use_minimalistic_part_header_in_zookeeper"),(0,i.kt)("p",null,"Storage method for data part headers in ZooKeeper."),(0,i.kt)("p",null,"This setting only applies to the ",(0,i.kt)("inlineCode",{parentName:"p"},"MergeTree")," family. It can be specified:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Globally in the ",(0,i.kt)("a",{parentName:"p",href:"#server_configuration_parameters-merge_tree"},"merge_tree")," section of the ",(0,i.kt)("inlineCode",{parentName:"p"},"config.xml")," file."),(0,i.kt)("p",{parentName:"li"},"ClickHouse uses the setting for all the tables on the server. You can change the setting at any time. Existing tables change their behaviour when the setting changes.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"For each table."),(0,i.kt)("p",{parentName:"li"},"When creating a table, specify the corresponding ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-creating-a-table"},"engine setting"),". The behaviour of an existing table with this setting does not change, even if the global setting changes."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Possible values")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"0 \u2014 Functionality is turned off."),(0,i.kt)("li",{parentName:"ul"},"1 \u2014 Functionality is turned on.")),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"use_minimalistic_part_header_in_zookeeper = 1"),", then ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/replication"},"replicated")," tables store the headers of the data parts compactly using a single ",(0,i.kt)("inlineCode",{parentName:"p"},"znode"),". If the table contains many columns, this storage method significantly reduces the volume of the data stored in Zookeeper."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"After applying ",(0,i.kt)("inlineCode",{parentName:"p"},"use_minimalistic_part_header_in_zookeeper = 1"),", you can\u2019t downgrade the ClickHouse server to a version that does not support this setting. Be careful when upgrading ClickHouse on servers in a cluster. Don\u2019t upgrade all the servers at once. It is safer to test new versions of ClickHouse in a test environment, or on just a few servers of a cluster."),(0,i.kt)("p",{parentName:"div"},"Data part headers already stored with this setting can't be restored to their previous (non-compact) representation."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Default value:")," 0."),(0,i.kt)("h2",{id:"server-settings-disable-internal-dns-cache"},"disable_internal_dns_cache"),(0,i.kt)("p",null,"Disables the internal DNS cache. Recommended for operating ClickHouse in systems\nwith frequently changing infrastructure such as Kubernetes."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Default value:")," 0."),(0,i.kt)("h2",{id:"server-settings-dns-cache-update-period"},"dns_cache_update_period"),(0,i.kt)("p",null,"The period of updating IP addresses stored in the ClickHouse internal DNS cache (in seconds).\nThe update is performed asynchronously, in a separate system thread."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Default value"),": 15."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/settings/#background_schedule_pool_size"},"background_schedule_pool_size"))),(0,i.kt)("h2",{id:"server-settings-distributed_ddl"},"distributed_ddl"),(0,i.kt)("p",null,"Manage executing ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/sql-reference/distributed-ddl"},"distributed ddl queries"),"  (CREATE, DROP, ALTER, RENAME) on cluster.\nWorks only if ",(0,i.kt)("a",{parentName:"p",href:"#server-settings_zookeeper"},"ZooKeeper")," is enabled."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<distributed_ddl>\n    \x3c!-- Path in ZooKeeper to queue with DDL queries --\x3e\n    <path>/clickhouse/task_queue/ddl</path>\n\n    \x3c!-- Settings from this profile will be used to execute DDL queries --\x3e\n    <profile>default</profile>\n\n    \x3c!-- Controls how much ON CLUSTER queries can be run simultaneously. --\x3e\n    <pool_size>1</pool_size>\n\n    \x3c!--\n         Cleanup settings (active tasks will not be removed)\n    --\x3e\n\n    \x3c!-- Controls task TTL (default 1 week) --\x3e\n    <task_max_lifetime>604800</task_max_lifetime>\n\n    \x3c!-- Controls how often cleanup should be performed (in seconds) --\x3e\n    <cleanup_delay_period>60</cleanup_delay_period>\n\n    \x3c!-- Controls how many tasks could be in the queue --\x3e\n    <max_tasks_in_queue>1000</max_tasks_in_queue>\n</distributed_ddl>\n")),(0,i.kt)("h2",{id:"access_control_path"},"access_control_path"),(0,i.kt)("p",null,"Path to a folder where a ClickHouse server stores user and role configurations created by SQL commands."),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/lib/clickhouse/access/"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See also")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/docs/en/operations/access-rights#access-control"},"Access Control and Account Management"))),(0,i.kt)("h2",{id:"user_directories"},"user_directories"),(0,i.kt)("p",null,"Section of the configuration file that contains settings:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Path to configuration file with predefined users."),(0,i.kt)("li",{parentName:"ul"},"Path to folder where users created by SQL commands are stored."),(0,i.kt)("li",{parentName:"ul"},"ZooKeeper node path where users created by SQL commands are stored and replicated (experimental).")),(0,i.kt)("p",null,"If this section is specified, the path from ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/server-configuration-parameters/settings#users-config"},"users_config")," and ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/server-configuration-parameters/settings#access_control_path"},"access_control_path")," won't be used."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"user_directories")," section can contain any number of items, the order of the items means their precedence (the higher the item the higher the precedence)."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Examples")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<user_directories>\n    <users_xml>\n        <path>/etc/clickhouse-server/users.xml</path>\n    </users_xml>\n    <local_directory>\n        <path>/var/lib/clickhouse/access/</path>\n    </local_directory>\n</user_directories>\n")),(0,i.kt)("p",null,"Users, roles, row policies, quotas, and profiles can be also stored in ZooKeeper:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<user_directories>\n    <users_xml>\n        <path>/etc/clickhouse-server/users.xml</path>\n    </users_xml>\n    <replicated>\n        <zookeeper_path>/clickhouse/access/</zookeeper_path>\n    </replicated>\n</user_directories>\n")),(0,i.kt)("p",null,"You can also define sections ",(0,i.kt)("inlineCode",{parentName:"p"},"memory")," \u2014 means storing information only in memory, without writing to disk, and ",(0,i.kt)("inlineCode",{parentName:"p"},"ldap")," \u2014 means storing information on an LDAP server."),(0,i.kt)("p",null,"To add an LDAP server as a remote user directory of users that are not defined locally, define a single ",(0,i.kt)("inlineCode",{parentName:"p"},"ldap")," section with a following parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"server")," \u2014 one of LDAP server names defined in ",(0,i.kt)("inlineCode",{parentName:"li"},"ldap_servers")," config section. This parameter is mandatory and cannot be empty."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"roles")," \u2014 section with a list of locally defined roles that will be assigned to each user retrieved from the LDAP server. If no roles are specified, user will not be able to perform any actions after authentication. If any of the listed roles is not defined locally at the time of authentication, the authentication attempt will fail as if the provided password was incorrect.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<ldap>\n    <server>my_ldap_server</server>\n        <roles>\n            <my_local_role1 />\n            <my_local_role2 />\n        </roles>\n</ldap>\n")),(0,i.kt)("h2",{id:"total-memory-profiler-step"},"total_memory_profiler_step"),(0,i.kt)("p",null,"Sets the memory size (in bytes) for a stack trace at every peak allocation step. The data is stored in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/trace_log"},"system.trace_log")," system table with ",(0,i.kt)("inlineCode",{parentName:"p"},"query_id")," equal to an empty string."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"4194304"),"."),(0,i.kt)("h2",{id:"total-memory-tracker-sample-probability"},"total_memory_tracker_sample_probability"),(0,i.kt)("p",null,"Allows to collect random allocations and deallocations and writes them in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/trace_log"},"system.trace_log")," system table with ",(0,i.kt)("inlineCode",{parentName:"p"},"trace_type")," equal to a ",(0,i.kt)("inlineCode",{parentName:"p"},"MemorySample")," with the specified probability. The probability is for every allocation or deallocations, regardless of the size of the allocation. Note that sampling happens only when the amount of untracked memory exceeds the untracked memory limit (default value is ",(0,i.kt)("inlineCode",{parentName:"p"},"4")," MiB). It can be lowered if ",(0,i.kt)("a",{parentName:"p",href:"#total-memory-profiler-step"},"total_memory_profiler_step")," is lowered. You can set ",(0,i.kt)("inlineCode",{parentName:"p"},"total_memory_profiler_step")," equal to ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," for extra fine-grained sampling."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer."),(0,i.kt)("li",{parentName:"ul"},"0 \u2014 Writing of random allocations and deallocations in the ",(0,i.kt)("inlineCode",{parentName:"li"},"system.trace_log")," system table is disabled.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,i.kt)("h2",{id:"mmap-cache-size"},"mmap_cache_size"),(0,i.kt)("p",null,"Sets the cache size (in bytes) for mapped files. This setting allows to avoid frequent open/",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Mmap"},"mmap/munmap"),"/close calls (which are very expensive due to consequent page faults) and to reuse mappings from several threads and queries. The setting value is the number of mapped regions (usually equal to the number of mapped files). The amount of data in mapped files can be monitored in ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/metrics"},"system.metrics"),", ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/metric_log"},"system.metric_log")," system tables by the ",(0,i.kt)("inlineCode",{parentName:"p"},"MMappedFiles")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"MMappedFileBytes")," metrics, in ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/asynchronous_metrics"},"system.asynchronous_metrics"),", ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/asynchronous_metric_log"},"system.asynchronous_metrics_log")," by the ",(0,i.kt)("inlineCode",{parentName:"p"},"MMapCacheCells")," metric, and also in ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/events"},"system.events"),", ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/processes"},"system.processes"),", ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/query_log"},"system.query_log"),", ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/query_thread_log"},"system.query_thread_log"),", ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/system-tables/query_views_log"},"system.query_views_log")," by the ",(0,i.kt)("inlineCode",{parentName:"p"},"CreatedReadBufferMMap"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"CreatedReadBufferMMapFailed"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"MMappedFileCacheHits"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"MMappedFileCacheMisses")," events. Note that the amount of data in mapped files does not consume memory directly and is not accounted in query or server memory usage \u2014 because this memory can be discarded similar to OS page cache. The cache is dropped (the files are closed) automatically on the removal of old parts in tables of the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/engines/table-engines/mergetree-family/mergetree"},"MergeTree")," family, also it can be dropped manually by the ",(0,i.kt)("inlineCode",{parentName:"p"},"SYSTEM DROP MMAP CACHE")," query."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"1000"),"."),(0,i.kt)("h2",{id:"compiled-expression-cache-size"},"compiled_expression_cache_size"),(0,i.kt)("p",null,"Sets the cache size (in bytes) for ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/caches"},"compiled expressions"),"."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"134217728"),"."),(0,i.kt)("h2",{id:"compiled_expression_cache_elements_size"},"compiled_expression_cache_elements_size"),(0,i.kt)("p",null,"Sets the cache size (in elements) for ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/en/operations/caches"},"compiled expressions"),"."),(0,i.kt)("p",null,"Possible values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Positive integer.")),(0,i.kt)("p",null,"Default value: ",(0,i.kt)("inlineCode",{parentName:"p"},"10000"),"."))}d.isMDXComponent=!0}}]);











    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ja">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>External Disks for Storing Data | ClickHouseドキュメント</title>
    <link rel="canonical" href="https://clickhouse.com/docs/en/operations/storing-data/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "External Disks for Storing Data | ClickHouseドキュメント",
"mainEntityOfPage": "https://clickhouse.com/docs/ja/operations/storing-data/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "External Disks for Storing Data | ClickHouseドキュメント",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer,main{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ul{margin-bottom:1rem}ul{margin-top:0}ul ul{margin-bottom:0}b{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}}.table{width:100%;margin-bottom:8px;color:#212529}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-dark{color:#fff;background-color:#343a40}.form-text{display:block;margin-top:.25rem}.form-row{display:flex;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-inline{display:flex;flex-flow:row wrap;align-items:center}@media(min-width:616px){.form-inline .custom-select{width:auto}}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.custom-switch{padding-left:2.25rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-file{display:inline-block;margin-bottom:0}.custom-file{position:relative;width:100%;height:calc(1.5em+.75rem+2px)}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=external-disks>External Disks for Storing Data<a class=headerlink href=../amp/#external-disks title="Permanent link"> </a></h1> <p>Data, processed in ClickHouse, is usually stored in the local file system — on the same machine with the ClickHouse server. That requires large-capacity disks, which can be expensive enough. To avoid that you can store the data remotely — on <a href=https://aws.amazon.com/s3/ rel="external nofollow noreferrer" target=_blank>Amazon S3</a> disks or in the Hadoop Distributed File System (<a href=https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html rel="external nofollow noreferrer" target=_blank>HDFS</a>). </p> <p>To work with data stored on <code class=syntax>Amazon S3</code> disks use <a href=../../../engines/table-engines/integrations/s3/amp/ >S3</a> table engine, and to work with data in the Hadoop Distributed File System — <a href=../../../engines/table-engines/integrations/hdfs/amp/ >HDFS</a> table engine.</p> <p>To load data from a web server with static files use a disk with type <a href=../amp/#storing-data-on-webserver>web</a>.</p> <h2 id=zero-copy>Zero-copy Replication<a class=headerlink href=../amp/#zero-copy title="Permanent link"> </a></h2> <p>ClickHouse supports zero-copy replication for <code class=syntax>S3</code> and <code class=syntax>HDFS</code> disks, which means that if the data is stored remotely on several machines and needs to be synchronized, then only the metadata is replicated (paths to the data parts), but not the data itself.</p> <h2 id=configuring-hdfs>Configuring HDFS<a class=headerlink href=../amp/#configuring-hdfs title="Permanent link"> </a></h2> <p><a href=../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a> and <a href=../../../engines/table-engines/log-family/log/amp/ >Log</a> family table engines can store data to HDFS using a disk with type <code class=syntax>HDFS</code>.</p> <p>Configuration markup:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;clickhouse&gt;</span>
    <span class=nt>&lt;storage_configuration&gt;</span>
        <span class=nt>&lt;disks&gt;</span>
            <span class=nt>&lt;hdfs&gt;</span>
                <span class=nt>&lt;type&gt;</span>hdfs<span class=nt>&lt;/type&gt;</span>
                <span class=nt>&lt;endpoint&gt;</span>hdfs://hdfs1:9000/clickhouse/<span class=nt>&lt;/endpoint&gt;</span>
            <span class=nt>&lt;/hdfs&gt;</span>
        <span class=nt>&lt;/disks&gt;</span>
        <span class=nt>&lt;policies&gt;</span>
            <span class=nt>&lt;hdfs&gt;</span>
                <span class=nt>&lt;volumes&gt;</span>
                    <span class=nt>&lt;main&gt;</span>
                        <span class=nt>&lt;disk&gt;</span>hdfs<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;/main&gt;</span>
                <span class=nt>&lt;/volumes&gt;</span>
            <span class=nt>&lt;/hdfs&gt;</span>
        <span class=nt>&lt;/policies&gt;</span>
    <span class=nt>&lt;/storage_configuration&gt;</span>

    <span class=nt>&lt;merge_tree&gt;</span>
        <span class=nt>&lt;min_bytes_for_wide_part&gt;</span>0<span class=nt>&lt;/min_bytes_for_wide_part&gt;</span>
    <span class=nt>&lt;/merge_tree&gt;</span>
<span class=nt>&lt;/clickhouse&gt;</span>
</code></pre></div> <p>Required parameters:</p> <ul> <li><code class=syntax>endpoint</code> — HDFS endpoint URL in <code class=syntax>path</code> format. Endpoint URL should contain a root path to store data.</li> </ul> <p>Optional parameters:</p> <ul> <li><code class=syntax>min_bytes_for_seek</code> — The minimal number of bytes to use seek operation instead of sequential read. Default value: <code class=syntax>1 Mb</code>.</li> </ul> <h2 id=encrypted-virtual-file-system>Using Virtual File System for Data Encryption<a class=headerlink href=../amp/#encrypted-virtual-file-system title="Permanent link"> </a></h2> <p>You can encrypt the data stored on <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-s3>S3</a>, or <a href=../amp/#configuring-hdfs>HDFS</a> external disks, or on a local disk. To turn on the encryption mode, in the configuration file you must define a disk with the type <code class=syntax>encrypted</code> and choose a disk on which the data will be saved. An <code class=syntax>encrypted</code> disk ciphers all written files on the fly, and when you read files from an <code class=syntax>encrypted</code> disk it deciphers them automatically. So you can work with an <code class=syntax>encrypted</code> disk like with a normal one.</p> <p>Example of disk configuration:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;disks&gt;</span>
  <span class=nt>&lt;disk1&gt;</span>
    <span class=nt>&lt;type&gt;</span>local<span class=nt>&lt;/type&gt;</span>
    <span class=nt>&lt;path&gt;</span>/path1/<span class=nt>&lt;/path&gt;</span>
  <span class=nt>&lt;/disk1&gt;</span>
  <span class=nt>&lt;disk2&gt;</span>
    <span class=nt>&lt;type&gt;</span>encrypted<span class=nt>&lt;/type&gt;</span>
    <span class=nt>&lt;disk&gt;</span>disk1<span class=nt>&lt;/disk&gt;</span>
    <span class=nt>&lt;path&gt;</span>path2/<span class=nt>&lt;/path&gt;</span>
    <span class=nt>&lt;key&gt;</span>_16_ascii_chars_<span class=nt>&lt;/key&gt;</span>
  <span class=nt>&lt;/disk2&gt;</span>
<span class=nt>&lt;/disks&gt;</span>
</code></pre></div> <p>For example, when ClickHouse writes data from some table to a file <code class=syntax>store/all_1_1_0/data.bin</code> to <code class=syntax>disk1</code>, then in fact this file will be written to the physical disk along the path <code class=syntax>/path1/store/all_1_1_0/data.bin</code>.</p> <p>When writing the same file to <code class=syntax>disk2</code>, it will actually be written to the physical disk at the path <code class=syntax>/path1/path2/store/all_1_1_0/data.bin</code> in encrypted mode.</p> <p>Required parameters:</p> <ul> <li><code class=syntax>type</code> — <code class=syntax>encrypted</code>. Otherwise the encrypted disk is not created.</li> <li><code class=syntax>disk</code> — Type of disk for data storage.</li> <li><code class=syntax>key</code> — The key for encryption and decryption. Type: <a href=../../../sql-reference/data-types/int-uint/amp/ >Uint64</a>. You can use <code class=syntax>key_hex</code> parameter to encrypt in hexadecimal form.<br> You can specify multiple keys using the <code class=syntax>id</code> attribute (see example above).</li> </ul> <p>Optional parameters:</p> <ul> <li><code class=syntax>path</code> — Path to the location on the disk where the data will be saved. If not specified, the data will be saved in the root directory.</li> <li><code class=syntax>current_key_id</code> — The key used for encryption. All the specified keys can be used for decryption, and you can always switch to another key while maintaining access to previously encrypted data.</li> <li><code class=syntax>algorithm</code> — <a href=../../../sql-reference/statements/create/table/amp/#create-query-encryption-codecs>Algorithm</a> for encryption. Possible values: <code class=syntax>AES_128_CTR</code>, <code class=syntax>AES_192_CTR</code> or <code class=syntax>AES_256_CTR</code>. Default value: <code class=syntax>AES_128_CTR</code>. The key length depends on the algorithm: <code class=syntax>AES_128_CTR</code> — 16 bytes, <code class=syntax>AES_192_CTR</code> — 24 bytes, <code class=syntax>AES_256_CTR</code> — 32 bytes.</li> </ul> <p>Example of disk configuration:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;clickhouse&gt;</span>
    <span class=nt>&lt;storage_configuration&gt;</span>
        <span class=nt>&lt;disks&gt;</span>
            <span class=nt>&lt;disk_s3&gt;</span>
                <span class=nt>&lt;type&gt;</span>s3<span class=nt>&lt;/type&gt;</span>
                <span class=nt>&lt;endpoint&gt;</span>...
            <span class=nt>&lt;/disk_s3&gt;</span>
            <span class=nt>&lt;disk_s3_encrypted&gt;</span>
                <span class=nt>&lt;type&gt;</span>encrypted<span class=nt>&lt;/type&gt;</span>
                <span class=nt>&lt;disk&gt;</span>disk_s3<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;algorithm&gt;</span>AES_128_CTR<span class=nt>&lt;/algorithm&gt;</span>
                <span class=nt>&lt;key_hex</span> <span class=na>id=</span><span class=s>"0"</span><span class=nt>&gt;</span>00112233445566778899aabbccddeeff<span class=nt>&lt;/key_hex&gt;</span>
                <span class=nt>&lt;key_hex</span> <span class=na>id=</span><span class=s>"1"</span><span class=nt>&gt;</span>ffeeddccbbaa99887766554433221100<span class=nt>&lt;/key_hex&gt;</span>
                <span class=nt>&lt;current_key_id&gt;</span>1<span class=nt>&lt;/current_key_id&gt;</span>
            <span class=nt>&lt;/disk_s3_encrypted&gt;</span>
        <span class=nt>&lt;/disks&gt;</span>
    <span class=nt>&lt;/storage_configuration&gt;</span>
<span class=nt>&lt;/clickhouse&gt;</span>
</code></pre></div> <h2 id=storing-data-on-webserver>Storing Data on Web Server<a class=headerlink href=../amp/#storing-data-on-webserver title="Permanent link"> </a></h2> <p>There is a tool <code class=syntax>clickhouse-static-files-uploader</code>, which prepares a data directory for a given table (<code class=syntax>SELECT data_paths FROM system.tables WHERE name = 'table_name'</code>). For each table you need, you get a directory of files. These files can be uploaded to, for example, a web server with static files. After this preparation, you can load this table into any ClickHouse server via <code class=syntax>DiskWeb</code>.</p> <p>This is a read-only disk. Its data is only read and never modified. A new table is loaded to this disk via <code class=syntax>ATTACH TABLE</code> query (see example below). Local disk is not actually used, each <code class=syntax>SELECT</code> query will result in a <code class=syntax>http</code> request to fetch required data. All modification of the table data will result in an exception, i.e. the following types of queries are not allowed: <a href=../../../sql-reference/statements/create/table/amp/ >CREATE TABLE</a>, <a href=../../../sql-reference/statements/alter/amp/ >ALTER TABLE</a>, <a href=../../../sql-reference/statements/rename/amp/#misc_operations-rename_table>RENAME TABLE</a>, <a href=../../../sql-reference/statements/detach/amp/ >DETACH TABLE</a> and <a href=../../../sql-reference/statements/truncate/amp/ >TRUNCATE TABLE</a>.</p> <p>Web server storage is supported only for the <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a> and <a href=../../../engines/table-engines/log-family/log/amp/ >Log</a> engine families. To access the data stored on a <code class=syntax>web</code> disk, use the <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/#terms>storage_policy</a> setting when executing the query. For example, <code class=syntax>ATTACH TABLE table_web UUID '{}' (id Int32) ENGINE = MergeTree() ORDER BY id SETTINGS storage_policy = 'web'</code>.</p> <p>A ready test case. You need to add this configuration to config:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;clickhouse&gt;</span>
    <span class=nt>&lt;storage_configuration&gt;</span>
        <span class=nt>&lt;disks&gt;</span>
            <span class=nt>&lt;web&gt;</span>
                <span class=nt>&lt;type&gt;</span>web<span class=nt>&lt;/type&gt;</span>
                <span class=nt>&lt;endpoint&gt;</span>https://clickhouse-datasets.s3.yandex.net/disk-with-static-files-tests/test-hits/<span class=nt>&lt;/endpoint&gt;</span>
            <span class=nt>&lt;/web&gt;</span>
        <span class=nt>&lt;/disks&gt;</span>
        <span class=nt>&lt;policies&gt;</span>
            <span class=nt>&lt;web&gt;</span>
                <span class=nt>&lt;volumes&gt;</span>
                    <span class=nt>&lt;main&gt;</span>
                        <span class=nt>&lt;disk&gt;</span>web<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;/main&gt;</span>
                <span class=nt>&lt;/volumes&gt;</span>
            <span class=nt>&lt;/web&gt;</span>
        <span class=nt>&lt;/policies&gt;</span>
    <span class=nt>&lt;/storage_configuration&gt;</span>
<span class=nt>&lt;/clickhouse&gt;</span>
</code></pre></div> <p>And then execute this query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>ATTACH</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>test_hits</span><span class=w> </span><span class=n>UUID</span><span class=w> </span><span class=s1>'1ae36516-d62d-4218-9ae3-6516d62da218'</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>WatchID</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>JavaEnable</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Title</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>GoodEvent</span><span class=w> </span><span class=n>Int16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>EventTime</span><span class=w> </span><span class=n>DateTime</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>EventDate</span><span class=w> </span><span class=nb>Date</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>CounterID</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ClientIP</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ClientIP6</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>RegionID</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UserID</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>CounterClass</span><span class=w> </span><span class=nb>Int8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>OS</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UserAgent</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>URL</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Referer</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>URLDomain</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>RefererDomain</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Refresh</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsRobot</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>RefererCategories</span><span class=w> </span><span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>URLCategories</span><span class=w> </span><span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>URLRegions</span><span class=w> </span><span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>RefererRegions</span><span class=w> </span><span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>ResolutionWidth</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ResolutionHeight</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ResolutionDepth</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>FlashMajor</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>FlashMinor</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>FlashMinor2</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>NetMajor</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>NetMinor</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UserAgentMajor</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UserAgentMinor</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>CookieEnable</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>JavascriptEnable</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsMobile</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>MobilePhone</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>MobilePhoneModel</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Params</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IPNetworkID</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>TraficSourceID</span><span class=w> </span><span class=nb>Int8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SearchEngineID</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SearchPhrase</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>AdvEngineID</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsArtifical</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>WindowClientWidth</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>WindowClientHeight</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ClientTimeZone</span><span class=w> </span><span class=n>Int16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ClientEventTime</span><span class=w> </span><span class=n>DateTime</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SilverlightVersion1</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SilverlightVersion2</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SilverlightVersion3</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SilverlightVersion4</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>PageCharset</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>CodeVersion</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsLink</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsDownload</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsNotBounce</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>FUniqID</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>HID</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsOldCounter</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsEvent</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>IsParameter</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>DontCountHits</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>WithHash</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>HitColor</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>UTCEventTime</span><span class=w> </span><span class=n>DateTime</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Age</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Sex</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Income</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Interests</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>Robotness</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>GeneralInterests</span><span class=w> </span><span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>RemoteIP</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>RemoteIP6</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>WindowName</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>OpenerName</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>HistoryLength</span><span class=w> </span><span class=n>Int16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>BrowserLanguage</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>BrowserCountry</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>SocialNetwork</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SocialAction</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>HTTPError</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SendTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>DNSTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ConnectTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ResponseStartTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ResponseEndTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>FetchTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>RedirectTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>DOMInteractiveTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>DOMContentLoadedTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>DOMCompleteTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>LoadEventStartTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>LoadEventEndTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>NSToDOMContentLoadedTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>FirstPaintTiming</span><span class=w> </span><span class=n>Int32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>RedirectCount</span><span class=w> </span><span class=nb>Int8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SocialSourceNetworkID</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>SocialSourcePage</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ParamPrice</span><span class=w> </span><span class=n>Int64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ParamOrderID</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ParamCurrency</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>ParamCurrencyID</span><span class=w> </span><span class=n>UInt16</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>GoalsReached</span><span class=w> </span><span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>OpenstatServiceName</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>OpenstatCampaignID</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>OpenstatAdID</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>OpenstatSourceID</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UTMSource</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UTMMedium</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UTMCampaign</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UTMContent</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>UTMTerm</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>FromTag</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>HasGCLID</span><span class=w> </span><span class=n>UInt8</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>RefererHash</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>URLHash</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>CLID</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>YCLID</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ShareService</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ShareURL</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ShareTitle</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>ParsedParams</span><span class=w> </span><span class=n>Nested</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=n>Key1</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>Key2</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>Key3</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>Key4</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>Key5</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>ValueDouble</span><span class=w> </span><span class=n>Float64</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>IslandID</span><span class=w> </span><span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>RequestNum</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>RequestTry</span><span class=w> </span><span class=n>UInt8</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MergeTree</span><span class=p>()</span><span class=w></span>
<span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span><span class=w></span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=p>(</span><span class=n>CounterID</span><span class=p>,</span><span class=w> </span><span class=n>EventDate</span><span class=p>,</span><span class=w> </span><span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>))</span><span class=w></span>
<span class=n>SAMPLE</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span><span class=w></span>
<span class=n>SETTINGS</span><span class=w> </span><span class=n>storage_policy</span><span class=o>=</span><span class=s1>'web'</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Required parameters:</p> <ul> <li><code class=syntax>type</code> — <code class=syntax>web</code>. Otherwise the disk is not created.</li> <li><code class=syntax>endpoint</code> — The endpoint URL in <code class=syntax>path</code> format. Endpoint URL must contain a root path to store data, where they were uploaded.</li> </ul> <p>Optional parameters:</p> <ul> <li><code class=syntax>min_bytes_for_seek</code> — The minimal number of bytes to use seek operation instead of sequential read. Default value: <code class=syntax>1</code> Mb.</li> <li><code class=syntax>remote_fs_read_backoff_threashold</code> — The maximum wait time when trying to read data for remote disk. Default value: <code class=syntax>10000</code> seconds.</li> <li><code class=syntax>remote_fs_read_backoff_max_tries</code> — The maximum number of attempts to read with backoff. Default value: <code class=syntax>5</code>.</li> </ul> <p>If a query fails with an exception <code class=syntax>DB:Exception Unreachable URL</code>, then you can try to adjust the settings: <a href=../../settings/settings/amp/#http_connection_timeout>http_connection_timeout</a>, <a href=../../settings/settings/amp/#http_receive_timeout>http_receive_timeout</a>, <a href=../../server-configuration-parameters/settings/amp/#keep-alive-timeout>keep_alive_timeout</a>.</p> <p>To get files for upload run:<br> <code class=syntax>clickhouse static-files-disk-uploader --metadata-path &lt;path&gt; --output-dir &lt;dir&gt;</code> (<code class=syntax>--metadata-path</code> can be found in query <code class=syntax>SELECT data_paths FROM system.tables WHERE name = 'table_name'</code>).</p> <p>When loading files by <code class=syntax>endpoint</code>, they must be loaded into <code class=syntax>&lt;endpoint&gt;/store/</code> path, but config must contain only <code class=syntax>endpoint</code>.</p> <p>If URL is not reachable on disk load when the server is starting up tables, then all errors are caught. If in this case there were errors, tables can be reloaded (become visible) via <code class=syntax>DETACH TABLE table_name</code> -&gt; <code class=syntax>ATTACH TABLE table_name</code>. If metadata was successfully loaded at server startup, then tables are available straight away.</p> <p>Use <a href=../../settings/settings/amp/#http-max-single-read-retries>http_max_single_read_retries</a> setting to limit the maximum number of retries during a single HTTP read.</p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/c60fd44c5b70c56ff0f9c7fc538e58c6c8186aea" rel="external nofollow noreferrer" target="_blank" class="text-reset">c60fd44c</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/ja/operations/storing-data/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

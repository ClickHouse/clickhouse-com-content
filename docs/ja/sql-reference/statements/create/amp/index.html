










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ja">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>CREATE | ClickHouseドキュメント</title>
    <link rel="canonical" href="https://clickhouse.com/docs/ja/sql-reference/statements/create/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "CREATE | ClickHouseドキュメント",
"mainEntityOfPage": "https://clickhouse.com/docs/ja/sql-reference/statements/create/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "CREATE | ClickHouseドキュメント",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer,main{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}address{font-style:normal;line-height:inherit}address,ul{margin-bottom:1rem}ul{margin-top:0}ul ul{margin-bottom:0}dt{font-weight:700}b{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}template{display:none}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.lead{font-size:1.375rem;font-weight:400}@media(max-width:1200px){.lead{font-size:calc(1.2625rem+.15vw)}}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-first{order:-1}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-first{order:-1}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-first{order:-1}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}}.table{width:100%;margin-bottom:8px;color:#212529}.table-primary{background-color:#fff1b8}.table-info{background-color:#bee5eb}.table-warning{background-color:#ffeeba}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-primary-light{background-color:#fffefb}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-dark{color:#fff;background-color:#343a40}.form-group{margin-bottom:1rem}.form-text{display:block;margin-top:.25rem}.form-row{display:flex;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-check{position:relative;display:block;padding-left:1.25rem}.form-check-inline{display:inline-flex;align-items:center;padding-left:0;margin-right:.75rem}.form-inline{display:flex;flex-flow:row wrap;align-items:center}.form-inline .form-check{width:100%}@media(min-width:616px){.form-inline .form-group{display:flex;align-items:center;margin-bottom:0}.form-inline .form-group{flex:0 0 auto;flex-flow:row wrap}.form-inline .custom-select{width:auto}.form-inline .form-check{display:flex;align-items:center;justify-content:center;width:auto;padding-left:0}}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-primary{color:#495057;background-color:#fc0;border-color:#fc0}.btn-primary:focus,.btn-primary:hover{color:#495057;background-color:#d9ad00;border-color:#cca300}.btn-primary:focus{box-shadow:0 0 0 0 rgba(228,185,13,.5)}.btn-primary:disabled{color:#495057;background-color:#fc0;border-color:#fc0}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:focus,.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info:focus{box-shadow:0 0 0 0 rgba(58,176,195,.5)}.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-warning{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-warning:focus,.btn-warning:hover{color:#495057;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{box-shadow:0 0 0 0 rgba(228,176,19,.5)}.btn-warning:disabled{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-primary-light{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-primary-light:focus,.btn-primary-light:hover{color:#495057;background-color:#ffedca;border-color:#ffe9bd}.btn-primary-light:focus{box-shadow:0 0 0 0 rgba(228,225,217,.5)}.btn-primary-light:disabled{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-primary{color:#fc0;border-color:#fc0}.btn-outline-primary:hover{color:#495057;background-color:#fc0;border-color:#fc0}.btn-outline-primary:focus{box-shadow:0 0 0 0 rgba(255,204,0,.5)}.btn-outline-primary:disabled{color:#fc0;background-color:transparent}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:focus{box-shadow:0 0 0 0 rgba(23,162,184,.5)}.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 0 rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-primary-light{color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:hover{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:focus{box-shadow:0 0 0 0 rgba(255,250,240,.5)}.btn-outline-primary-light:disabled{color:#fffaf0;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.btn-group{position:relative;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/docs/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/docs/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
    <div class="alert alert-primary" role="alert">
      <p class="display-5 mb-2">Help wanted!</p>
      <p class="lead">The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href="/docs/en/sql-reference/statements/create/" class="alert-link">You can also use the original English version as a reference.</a></p>
      <p class="lead">
          <a class="btn btn-lg btn-primary text-white" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/sql-reference/statements/create.md" target="_blank" rel="external nofollow noreferrer">
              Help ClickHouse documentation by editing this page
          </a>
      </p>
    </div>

          <h1 id=create-queries>クエリの作成<a class=headerlink href=../amp/#create-queries title="Permanent link"> </a></h1> <h2 id=query-language-create-database>CREATE DATABASE<a class=headerlink href=../amp/#query-language-create-database title="Permanent link"> </a></h2> <p>データベースの作成</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=n>db_name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=k>cluster</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>engine</span><span class=p>(...)]</span><span class=w></span>
</code></pre></div> <h3 id=clauses>句<a class=headerlink href=../amp/#clauses title="Permanent link"> </a></h3> <ul> <li> <p><code class=syntax>IF NOT EXISTS</code><br> もし <code class=syntax>db_name</code> データベースが既に存在する場合、ClickHouseは新しいデータベースを作成せず、:</p> <ul> <li>句が指定されている場合は例外をスローしません。</li> <li>句が指定されていない場合、例外をスローします。</li> </ul> </li> <li> <p><code class=syntax>ON CLUSTER</code><br> クリックハウスは <code class=syntax>db_name</code> データベースの全てのサーバーの指定されたクラスター</p> </li> <li> <p><code class=syntax>ENGINE</code></p> <ul> <li><a href=../../../../engines/database-engines/mysql/amp/ >MySQL</a><br> リモートMySQLサーバーからデータを取得できます。<br> 既定では、ClickHouseは独自のものを使用します <a href=../../../../engines/database-engines/amp/ >データベース</a>.</li> </ul> </li> </ul> <h2 id=create-table-query>CREATE TABLE<a class=headerlink href=../amp/#create-table-query title="Permanent link"> </a></h2> <p>その <code class=syntax>CREATE TABLE</code> クエリには複数の形式があります。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=k>cluster</span><span class=p>]</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>name1</span><span class=w> </span><span class=p>[</span><span class=n>type1</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span><span class=w> </span><span class=n>expr1</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>TTL</span><span class=w> </span><span class=n>expr1</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=n>name2</span><span class=w> </span><span class=p>[</span><span class=n>type2</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span><span class=w> </span><span class=n>expr2</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>TTL</span><span class=w> </span><span class=n>expr2</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>engine</span><span class=w></span>
</code></pre></div> <p>テーブルを作成します ‘name’ で ‘db’ データベー ‘db’ が設定されていない。 ‘engine’ エンジン<br> テーブルの構造は、列の説明のリストです。 た場合の指数については、エンジンとして表示していパラメータテーブルのエンジンです。</p> <p>列の説明は次のとおりです <code class=syntax>name type</code> 最も単純なケースでは。 例: <code class=syntax>RegionID UInt32</code>.<br> デフォルト値に対して式を定義することもできます(下記参照)。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>[</span><span class=n>db2</span><span class=p>.]</span><span class=n>name2</span><span class=w> </span><span class=p>[</span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>engine</span><span class=p>]</span><span class=w></span>
</code></pre></div> <p>別のテーブルと同じ構造を持つテーブルを作成します。 テーブルに別のエンジンを指定できます。 エンジンが指定されていない場合、同じエンジンが使用されます。 <code class=syntax>db2.name2</code> テーブル。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>table_function</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p>テーブルを作成しますの構造やデータによって返される <a href=../../../table-functions/amp/#table-functions>テーブル関数</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>engine</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span><span class=w></span>
</code></pre></div> <p>の結果のような構造体を持つテーブルを作成します。 <code class=syntax>SELECT</code> クエリは、 ‘engine’ エンジン充填でのデータを選択します。</p> <p>すべての場合において、 <code class=syntax>IF NOT EXISTS</code> テーブルが既に存在する場合、クエリはエラーを返しません。 この場合、クエリは何もしません。</p> <p>の後に他の句がある場合もあります。 <code class=syntax>ENGINE</code> クエリ内の句。 テーブルの作成方法に関する詳細なドキュメントを参照してください <a href=../../../../engines/table-engines/amp/#table_engines>表エンジン</a>.</p> <h3 id=create-default-values>デフォルト値<a class=headerlink href=../amp/#create-default-values title="Permanent link"> </a></h3> <p>列の説明では、次のいずれかの方法で既定値の式を指定できます:<code class=syntax>DEFAULT expr</code>, <code class=syntax>MATERIALIZED expr</code>, <code class=syntax>ALIAS expr</code>.<br> 例: <code class=syntax>URLDomain String DEFAULT domain(URL)</code>.</p> <p>既定値の式が定義されていない場合、既定値は数値の場合はゼロ、文字列の場合は空の文字列、配列の場合は空の配列、および <code class=syntax>1970-01-01</code> 日付または zero unix timestamp 時間と日付のために。 Nullはサポートされていません。</p> <p>既定の式が定義されている場合、列の型は省略可能です。 明示的に定義された型がない場合は、既定の式の型が使用されます。 例: <code class=syntax>EventDate DEFAULT toDate(EventTime)</code> – the ‘Date’ タイプは ‘EventDate’ 列。</p> <p>データ型と既定の式が明示的に定義されている場合、この式は型キャスト関数を使用して指定された型にキャストされます。 例: <code class=syntax>Hits UInt32 DEFAULT 0</code> と同じことを意味します <code class=syntax>Hits UInt32 DEFAULT toUInt32(0)</code>.</p> <p>Default expressions may be defined as an arbitrary expression from table constants and columns. When creating and changing the table structure, it checks that expressions don't contain loops. For INSERT, it checks that expressions are resolvable – that all columns they can be calculated from have been passed.</p> <p><code class=syntax>DEFAULT expr</code></p> <p>標準のデフォルト値。 INSERTクエリで対応する列が指定されていない場合は、対応する式を計算して入力されます。</p> <p><code class=syntax>MATERIALIZED expr</code></p> <p>マテリアライズ式。 このような列は常に計算されるため、INSERTには指定できません。<br> 列のリストがない挿入の場合、これらの列は考慮されません。<br> また、SELECTクエリでアスタリスクを使用する場合、この列は置換されません。 これは、ダンプが取得した不変量を保持するためです <code class=syntax>SELECT *</code> 列のリストを指定せずにINSERTを使用してテーブルに挿入することができます。</p> <p><code class=syntax>ALIAS expr</code></p> <p>シノニム このような列は、テーブルにまったく格納されません。<br> また、SELECTクエリでアスタリスクを使用する場合は、その値は置換されません。<br> クエリの解析中にエイリアスが展開される場合は、Selectで使用できます。</p> <p>ALTERクエリを使用して新しい列を追加する場合、これらの列の古いデータは書き込まれません。 代わりに、新しい列の値を持たない古いデータを読み取るときは、デフォルトで式がその場で計算されます。 ただし、式を実行するには、クエリで指定されていない異なる列が必要な場合は、これらの列はさらに読み取られますが、必要なデータブロックに対し</p> <p>テーブルに新しい列を追加し、後でその既定の式を変更すると、古いデータに使用される値が変更されます（値がディスクに格納されていないデータの場合）。 ご注意実行する場合背景が合併のデータ列を欠損の合流部に書かれて合併します。</p> <p>入れ子になったデータ構造の要素に既定値を設定することはできません。</p> <h3 id=constraints>制約<a class=headerlink href=../amp/#constraints title="Permanent link"> </a></h3> <p>列記述制約と一緒に定義することができます:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=k>cluster</span><span class=p>]</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>name1</span><span class=w> </span><span class=p>[</span><span class=n>type1</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span><span class=w> </span><span class=n>expr1</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>TTL</span><span class=w> </span><span class=n>expr1</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>constraint_name_1</span><span class=w> </span><span class=k>CHECK</span><span class=w> </span><span class=n>boolean_expr_1</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>engine</span><span class=w></span>
</code></pre></div> <p><code class=syntax>boolean_expr_1</code> 任意のブール式で可能です。 場合に制約の定義のテーブルのそれぞれチェック毎に行 <code class=syntax>INSERT</code> query. If any constraint is not satisfied — server will raise an exception with constraint name and checking expression.</p> <p>追加大量の制約になる可能性の性能を大 <code class=syntax>INSERT</code> クエリ。</p> <h3 id=ttl-expression>TTL式<a class=headerlink href=../amp/#ttl-expression title="Permanent link"> </a></h3> <p>値の保存時間を定義します。 MergeTree-familyテーブルに対してのみ指定できます。 詳細な説明については、 <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-ttl>列および表のTTL</a>.</p> <h3 id=codecs>列圧縮コーデック<a class=headerlink href=../amp/#codecs title="Permanent link"> </a></h3> <p>デフォルトでは、ClickHouseは <code class=syntax>lz4</code> 圧縮方法。 のために <code class=syntax>MergeTree</code>-エンジンファミリでデフォルトの圧縮方法を変更できます。 <a href=../../../../operations/server-configuration-parameters/settings/amp/#server-settings-compression>圧縮</a> サーバー構成のセクション。 また、圧縮方法を定義することもできます。 <code class=syntax>CREATE TABLE</code> クエリ。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>codec_example</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>dt</span><span class=w> </span><span class=nb>Date</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=n>ZSTD</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>ts</span><span class=w> </span><span class=n>DateTime</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=n>LZ4HC</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>float_value</span><span class=w> </span><span class=n>Float32</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=k>NONE</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>double_value</span><span class=w> </span><span class=n>Float64</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=n>LZ4HC</span><span class=p>(</span><span class=mi>9</span><span class=p>))</span><span class=w></span>
<span class=w>    </span><span class=n>value</span><span class=w> </span><span class=n>Float32</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=n>Delta</span><span class=p>,</span><span class=w> </span><span class=n>ZSTD</span><span class=p>)</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&lt;</span><span class=n>Engine</span><span class=o>&gt;</span><span class=w></span>
<span class=p>...</span><span class=w></span>
</code></pre></div> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">警告</p> <p>できない解凍ClickHouseデータベースファイルを外部の事のように <code class=syntax>lz4</code>. 代わりに、特別な <a class=alert-link href=https://github.com/ClickHouse/ClickHouse/tree/master/programs/compressor rel="external nofollow noreferrer" target=_blank>clickhouse-コンプレッサー</a> ユーティリティ</p> </div> <p>圧縮は、次の表エンジンでサポートされます:</p> <ul> <li><a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >メルゲツリー</a> 家族だ 支柱の圧縮コーデックとの選択のデフォルトの圧縮メソッドによる <a href=../../../../operations/server-configuration-parameters/settings/amp/#server-settings-compression>圧縮</a> 設定。</li> <li><a href=../../../../engines/table-engines/log-family/amp/ >ログ</a> 家族だ を使用して <code class=syntax>lz4</code> 圧縮メソッドはデフォルト対応カラムの圧縮コーデック.</li> <li><a href=../../../../engines/table-engines/special/set/amp/ >セット</a>. 既定の圧縮のみをサポートしました。</li> <li><a href=../../../../engines/table-engines/special/join/amp/ >参加</a>. 既定の圧縮のみをサポートしました。</li> </ul> <p>ClickHouse支援共通の目的コーデックや専門のコーデック.</p> <h4 id=create-query-specialized-codecs>特殊なコーデック<a class=headerlink href=../amp/#create-query-specialized-codecs title="Permanent link"> </a></h4> <p>これらのコーデックしていただくための圧縮により効果的な利用の特徴データです。 これらのコーデックの一部は、データ自体を圧縮しません。 代わりに、共通の目的のコーデックのためにデータを準備し、この準備がない場合よりも圧縮します。</p> <p>特殊なコーデック:</p> <ul> <li><code class=syntax>Delta(delta_bytes)</code> — Compression approach in which raw values are replaced by the difference of two neighboring values, except for the first value that stays unchanged. Up to <code class=syntax>delta_bytes</code> デルタ値を格納するために使用されます。 <code class=syntax>delta_bytes</code> 生の値の最大サイズです。 可能 <code class=syntax>delta_bytes</code> 値:1,2,4,8。 のデフォルト値 <code class=syntax>delta_bytes</code> は <code class=syntax>sizeof(type)</code> 1、2、4、または8に等しい場合。 他のすべてのケースでは、それは1です。</li> <li><code class=syntax>DoubleDelta</code> — Calculates delta of deltas and writes it in compact binary form. Optimal compression rates are achieved for monotonic sequences with a constant stride, such as time series data. Can be used with any fixed-width type. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. Uses 1 extra bit for 32-byte deltas: 5-bit prefixes instead of 4-bit prefixes. For additional information, see Compressing Time Stamps in <a href=http://www.vldb.org/pvldb/vol8/p1816-teller.pdf rel="external nofollow noreferrer" target=_blank>Gorilla:高速でスケーラブルなメモリ内の時系列データベース</a>.</li> <li><code class=syntax>Gorilla</code> — Calculates XOR between current and previous value and writes it in compact binary form. Efficient when storing a series of floating point values that change slowly, because the best compression rate is achieved when neighboring values are binary equal. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. For additional information, see Compressing Values in <a href=http://www.vldb.org/pvldb/vol8/p1816-teller.pdf rel="external nofollow noreferrer" target=_blank>Gorilla:高速でスケーラブルなメモリ内の時系列データベース</a>.</li> <li><code class=syntax>T64</code> — Compression approach that crops unused high bits of values in integer data types (including <code class=syntax>Enum</code>, <code class=syntax>Date</code> と <code class=syntax>DateTime</code>). そのアルゴリズムの各ステップで、codecは64の値のブロックを取り、それらを64x64ビット行列に入れ、転置し、未使用の値のビットを切り取り、残りをシー 未使用ビットは、圧縮が使用されるデータ部分全体の最大値と最小値の間で異ならないビットです。</li> </ul> <p><code class=syntax>DoubleDelta</code> と <code class=syntax>Gorilla</code> Gorilla TSDBでは圧縮アルゴリズムの構成要素としてコーデックが使用されている。 Gorillaのアプローチは、タイムスタンプにゆっくりと変化する一連の値がある場合のシナリオで効果的です。 タイムスタンプは <code class=syntax>DoubleDelta</code> によって効果的に圧縮されます <code class=syntax>Gorilla</code> コーデック。 たとえば、効果的に格納されたテーブルを取得するには、次の構成で作成できます:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>codec_example</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=k>timestamp</span><span class=w> </span><span class=n>DateTime</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=n>DoubleDelta</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>slow_values</span><span class=w> </span><span class=n>Float32</span><span class=w> </span><span class=n>CODEC</span><span class=p>(</span><span class=n>Gorilla</span><span class=p>)</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MergeTree</span><span class=p>()</span><span class=w></span>
</code></pre></div> <h4 id=create-query-general-purpose-codecs>汎用コーデック<a class=headerlink href=../amp/#create-query-general-purpose-codecs title="Permanent link"> </a></h4> <p>コーデック:</p> <ul> <li><code class=syntax>NONE</code> — No compression.</li> <li><code class=syntax>LZ4</code> — Lossless <a href=https://github.com/lz4/lz4 rel="external nofollow noreferrer" target=_blank>データ圧縮</a> 既定で使用されます。 LZ4高速圧縮を適用します。</li> <li><code class=syntax>LZ4HC[(level)]</code> — LZ4 HC (high compression) algorithm with configurable level. Default level: 9. Setting <code class=syntax>level &lt;= 0</code> 既定のレベルを適用します。 可能なレベル：[1、12]。 推奨レベル範囲：[4、9]。</li> <li><code class=syntax>ZSTD[(level)]</code> — <a href=https://en.wikipedia.org/wiki/Zstandard rel="external nofollow noreferrer" target=_blank>ZSTD圧縮アルゴリズム</a> 構成可能を使って <code class=syntax>level</code>. 可能なレベル：[1、22]。 デフォルト値:1。</li> </ul> <p>高い圧縮レベルは、一度の圧縮、繰り返しの解凍などの非対称シナリオに役立ちます。 高いレベルは、より良い圧縮と高いCPU使用率を意味します。</p> <h2 id=temporary-tables>一時テーブル<a class=headerlink href=../amp/#temporary-tables title="Permanent link"> </a></h2> <p>ClickHouseは、次の特性を持つ一時テーブルをサポートします:</p> <ul> <li>一時テーブルは、接続が失われた場合を含め、セッションが終了すると消滅します。</li> <li>一時テーブルはメモリエンジンのみを使用します。</li> <li>一時テーブルにDBを指定することはできません。 データベースの外部に作成されます。</li> <li>すべてのクラスタサーバーで分散DDLクエリを使用して一時テーブルを作成することはできません <code class=syntax>ON CLUSTER</code>):このテーブルは現在のセッションにのみ存在します。</li> <li>一時テーブルの名前が別のテーブルと同じで、クエリがDBを指定せずにテーブル名を指定した場合、一時テーブルが使用されます。</li> <li>分散クエリ処理では、クエリで使用される一時テーブルがリモートサーバーに渡されます。</li> </ul> <p>一時テーブルを作成するには、次の構文を使用します:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TEMPORARY</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=k>table_name</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>name1</span><span class=w> </span><span class=p>[</span><span class=n>type1</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span><span class=w> </span><span class=n>expr1</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=n>name2</span><span class=w> </span><span class=p>[</span><span class=n>type2</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span><span class=w> </span><span class=n>expr2</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>)</span><span class=w></span>
</code></pre></div> <p>ほとんどの場合、一時テーブルを手動で作成され、外部データを利用するためのクエリに対して、または配布 <code class=syntax>(GLOBAL) IN</code>. 詳細については、該当する項を参照してください</p> <p>テーブルを使用することは可能です <a href=../../../../engines/table-engines/special/memory/amp/ >エンジン=メモリ</a> 一時テーブルの代わりに。</p> <h2 id=distributed-ddl-queries-on-cluster-clause>分散DDLクエリ(ON CLUSTER句)<a class=headerlink href=../amp/#distributed-ddl-queries-on-cluster-clause title="Permanent link"> </a></h2> <p>その <code class=syntax>CREATE</code>, <code class=syntax>DROP</code>, <code class=syntax>ALTER</code>,and <code class=syntax>RENAME</code> クエリの支援の分散実行クラスター<br> たとえば、次のクエリは、 <code class=syntax>all_hits</code> <code class=syntax>Distributed</code> 各ホストのテーブル <code class=syntax>cluster</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>all_hits</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=k>cluster</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=w> </span><span class=nb>Date</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=n>Int32</span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Distributed</span><span class=p>(</span><span class=k>cluster</span><span class=p>,</span><span class=w> </span><span class=k>default</span><span class=p>,</span><span class=w> </span><span class=n>hits</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>これらのクエリを正しく実行するには、各ホストが同じクラスタ定義を持っている必要があります（設定の同期を簡単にするために、ZooKeeperからの置換 また、ZooKeeperサーバーに接続する必要があります。<br> 一部のホストが現在利用できない場合でも、ローカルバージョンのクエリは最終的にクラスタ内の各ホストに実装されます。 単一のホスト内でクエリを実行する順序は保証されます。</p> <h2 id=create-view>CREATE VIEW<a class=headerlink href=../amp/#create-view title="Permanent link"> </a></h2> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=p>[</span><span class=n>MATERIALIZED</span><span class=p>]</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span><span class=w> </span><span class=p>[</span><span class=k>TO</span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>engine</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>POPULATE</span><span class=p>]</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span><span class=w></span>
</code></pre></div> <p>ビューを作成します。 通常と実体化：ビューの二つのタイプがあります。</p> <p>通常のビューはデータを格納せず、別のテーブルからの読み取りを実行するだけです。 つまり、通常のビューは保存されたクエリに過ぎません。 ビューから読み取るとき、この保存されたクエリはFROM句のサブクエリとして使用されます。</p> <p>例として、ビューを作成したとします:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=k>view</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span><span class=w></span>
</code></pre></div> <p>そして、クエリを書いた:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>view</span><span class=w></span>
</code></pre></div> <p>このクエリは、サブクエリの使用と完全に同等です:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=p>...)</span><span class=w></span>
</code></pre></div> <p>マテリアライズドビュ</p> <p>マテリアライズドビューを作成するとき <code class=syntax>TO [db].[table]</code>, you must specify ENGINE – the table engine for storing data.</p> <p>マテリアライズドビューを作成するとき <code class=syntax>TO [db].[table]</code>、使用してはいけません <code class=syntax>POPULATE</code>.</p> <p>SELECTで指定されたテーブルにデータを挿入すると、挿入されたデータの一部がこのSELECTクエリによって変換され、結果がビューに挿入されます。</p> <p>POPULATEを指定すると、既存のテーブルデータが作成時にビューに挿入されます。 <code class=syntax>CREATE TABLE ... AS SELECT ...</code> . そうしないと、クエリーを含み、データを挿入し、表の作成後、作成した。 ビューの作成中にテーブルに挿入されたデータは挿入されないため、POPULATEを使用することはお勧めしません。</p> <p>A <code class=syntax>SELECT</code> クエリを含むことができ <code class=syntax>DISTINCT</code>, <code class=syntax>GROUP BY</code>, <code class=syntax>ORDER BY</code>, <code class=syntax>LIMIT</code>… Note that the corresponding conversions are performed independently on each block of inserted data. For example, if <code class=syntax>GROUP BY</code> データは挿入中に集計されますが、挿入されたデータの単一パケット内でのみ集計されます。 データはそれ以上集計されません。 例外は、次のように独立してデータ集計を実行するエンジンを使用する場合です <code class=syntax>SummingMergeTree</code>.</p> <p>の実行 <code class=syntax>ALTER</code> マテリアライズドビューのクエリは完全に開発されていないため、不便な場合があります。 マテリアライズドビューで構成を使用する場合 <code class=syntax>TO [db.]name</code>、できます <code class=syntax>DETACH</code> ビュー、実行 <code class=syntax>ALTER</code> ターゲットテーブルの場合、次に <code class=syntax>ATTACH</code> 以前に切り離された (<code class=syntax>DETACH</code>）ビュー。</p> <p>ビューの外観は通常のテーブルと同じです。 たとえば、それらは次の結果にリストされます <code class=syntax>SHOW TABLES</code> クエリ。</p> <p>ビューを削除するための別のクエリはありません。 ビューを削除するには <code class=syntax>DROP TABLE</code>.</p> <h2 id=create-dictionary-query>CREATE DICTIONARY<a class=headerlink href=../amp/#create-dictionary-query title="Permanent link"> </a></h2> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DICTIONARY</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>dictionary_name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=k>cluster</span><span class=p>]</span><span class=w></span>
<span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>key1</span><span class=w> </span><span class=n>type1</span><span class=w>  </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span><span class=w> </span><span class=n>expr1</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>HIERARCHICAL</span><span class=o>|</span><span class=n>INJECTIVE</span><span class=o>|</span><span class=n>IS_OBJECT_ID</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=n>key2</span><span class=w> </span><span class=n>type2</span><span class=w>  </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span><span class=w> </span><span class=n>expr2</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>HIERARCHICAL</span><span class=o>|</span><span class=n>INJECTIVE</span><span class=o>|</span><span class=n>IS_OBJECT_ID</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=n>attr1</span><span class=w> </span><span class=n>type2</span><span class=w> </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span><span class=w> </span><span class=n>expr3</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=n>attr2</span><span class=w> </span><span class=n>type2</span><span class=w> </span><span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span><span class=w> </span><span class=n>expr4</span><span class=p>]</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>key1</span><span class=p>,</span><span class=w> </span><span class=n>key2</span><span class=w></span>
<span class=k>SOURCE</span><span class=p>(</span><span class=n>SOURCE_NAME</span><span class=p>([</span><span class=n>param1</span><span class=w> </span><span class=n>value1</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>paramN</span><span class=w> </span><span class=n>valueN</span><span class=p>]))</span><span class=w></span>
<span class=n>LAYOUT</span><span class=p>(</span><span class=n>LAYOUT_NAME</span><span class=p>([</span><span class=n>param_name</span><span class=w> </span><span class=n>param_value</span><span class=p>]))</span><span class=w></span>
<span class=n>LIFETIME</span><span class=p>(</span><span class=err>{</span><span class=k>MIN</span><span class=w> </span><span class=n>min_val</span><span class=w> </span><span class=k>MAX</span><span class=w> </span><span class=n>max_val</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>max_val</span><span class=err>}</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>作成 <a href=../../../dictionaries/external-dictionaries/external-dicts/amp/ >外部辞書</a> 与えられたと <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-structure/amp/ >構造</a>, <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-sources/amp/ >ソース</a>, <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-layout/amp/ >レイアウト</a> と <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-lifetime/amp/ >生涯</a>.</p> <p>外部辞書構造は属性で構成されます。 辞書属性は、表の列と同様に指定されます。 必要な属性プロパティはその型だけで、他のすべてのプロパティには既定値があります。</p> <p>辞書によっては <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-layout/amp/ >レイアウト</a> 一つ以上の属性を辞書キーとして指定できます。</p> <p>詳細については、 <a href=../../../dictionaries/external-dictionaries/external-dicts/amp/ >外部辞書</a> セクション</p> <h2 id=create-user-statement>CREATE USER<a class=headerlink href=../amp/#create-user-statement title="Permanent link"> </a></h2> <p>を作成します。 <a href=../../../../operations/access-rights/amp/#user-account-management>ユーザー</a>.</p> <h3 id=create-user-syntax>構文<a class=headerlink href=../amp/#create-user-syntax title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=p>]</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=n>cluster_name</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>IDENTIFIED</span><span class=w> </span><span class=p>[</span><span class=k>WITH</span><span class=w> </span><span class=err>{</span><span class=n>NO_PASSWORD</span><span class=o>|</span><span class=n>PLAINTEXT_PASSWORD</span><span class=o>|</span><span class=n>SHA256_PASSWORD</span><span class=o>|</span><span class=n>SHA256_HASH</span><span class=o>|</span><span class=n>DOUBLE_SHA1_PASSWORD</span><span class=o>|</span><span class=n>DOUBLE_SHA1_HASH</span><span class=err>}</span><span class=p>]</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=err>{</span><span class=s1>'password'</span><span class=o>|</span><span class=s1>'hash'</span><span class=err>}</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>HOST</span><span class=w> </span><span class=err>{</span><span class=k>LOCAL</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>NAME</span><span class=w> </span><span class=s1>'name'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>REGEXP</span><span class=w> </span><span class=s1>'name_regexp'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>IP</span><span class=w> </span><span class=s1>'address'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>'pattern'</span><span class=err>}</span><span class=w> </span><span class=p>[,...]</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>ANY</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>NONE</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>DEFAULT</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=k>role</span><span class=w> </span><span class=p>[,...]]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>SETTINGS</span><span class=w> </span><span class=k>variable</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=w> </span><span class=n>value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>MIN</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=p>]</span><span class=w> </span><span class=n>min_value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>MAX</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=p>]</span><span class=w> </span><span class=n>max_value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>PROFILE</span><span class=w> </span><span class=s1>'profile_name'</span><span class=p>]</span><span class=w> </span><span class=p>[,...]</span><span class=w></span>
</code></pre></div> <h4 id=identification>識別情報<a class=headerlink href=../amp/#identification title="Permanent link"> </a></h4> <p>ユーザー識別には複数の方法があります:</p> <ul> <li><code class=syntax>IDENTIFIED WITH no_password</code></li> <li><code class=syntax>IDENTIFIED WITH plaintext_password BY 'qwerty'</code></li> <li><code class=syntax>IDENTIFIED WITH sha256_password BY 'qwerty'</code> または <code class=syntax>IDENTIFIED BY 'password'</code></li> <li><code class=syntax>IDENTIFIED WITH sha256_hash BY 'hash'</code></li> <li><code class=syntax>IDENTIFIED WITH double_sha1_password BY 'qwerty'</code></li> <li><code class=syntax>IDENTIFIED WITH double_sha1_hash BY 'hash'</code></li> </ul> <h4 id=user-host>ユーザホスト<a class=headerlink href=../amp/#user-host title="Permanent link"> </a></h4> <p>ユーザーホストは、ClickHouseサーバーへの接続を確立できるホストです。 ホストを指定することができます。 <code class=syntax>HOST</code> 次の方法によるクエリのセクション:</p> <ul> <li><code class=syntax>HOST IP 'ip_address_or_subnetwork'</code> — User can connect to ClickHouse server only from the specified IP address or a <a href=https://en.wikipedia.org/wiki/Subnetwork rel="external nofollow noreferrer" target=_blank>サブネットワーク</a>. 例: <code class=syntax>HOST IP '192.168.0.0/16'</code>, <code class=syntax>HOST IP '2001:DB8::/32'</code>. の使用、生産を指定するだけでいいのです。 <code class=syntax>HOST IP</code> 要素（IPアドレスとそのマスク）を使用しているため <code class=syntax>host</code> と <code class=syntax>host_regexp</code> が原因別の待ち時間をゼロにすることに</li> <li><code class=syntax>HOST ANY</code> — User can connect from any location. This is default option.</li> <li><code class=syntax>HOST LOCAL</code> — User can connect only locally.</li> <li><code class=syntax>HOST NAME 'fqdn'</code> — User host can be specified as FQDN. For example, <code class=syntax>HOST NAME 'mysite.com'</code>.</li> <li><code class=syntax>HOST NAME REGEXP 'regexp'</code> — You can use <a href=http://www.pcre.org/ rel="external nofollow noreferrer" target=_blank>pcre</a> ユーザーホストを指定するときの正規表現。 例えば, <code class=syntax>HOST NAME REGEXP '.*\.mysite\.com'</code>.</li> <li><code class=syntax>HOST LIKE 'template'</code> — Allows you use the <a href=../../../functions/string-search-functions/amp/#function-like>LIKE</a> ユーザーホストをフィルタする演算子。 例えば, <code class=syntax>HOST LIKE '%'</code> に等しい。 <code class=syntax>HOST ANY</code>, <code class=syntax>HOST LIKE '%.mysite.com'</code> すべてのホストをフィルタする。 <code class=syntax>mysite.com</code> ドメイン。</li> </ul> <p>Hostを指定する別の方法は次のとおりです <code class=syntax>@</code> ユーザー名の構文。 例:</p> <ul> <li><code class=syntax>CREATE USER mira@'127.0.0.1'</code> — Equivalent to the <code class=syntax>HOST IP</code> 構文。</li> <li><code class=syntax>CREATE USER mira@'localhost'</code> — Equivalent to the <code class=syntax>HOST LOCAL</code> 構文。</li> <li><code class=syntax>CREATE USER mira@'192.168.%.%'</code> — Equivalent to the <code class=syntax>HOST LIKE</code> 構文。</li> </ul> <div class="admonition info alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">警告</p> <p>クリックハウス <code class=syntax>user_name@'address'</code> 全体としてのユーザー名として。 このように、技術的に作成できます複数のユーザー <code class=syntax>user_name</code> そして後の異なった構造 <code class=syntax>@</code>. 私たちはそうすることをお勧めしません。</p> </div> <h3 id=create-user-examples>例<a class=headerlink href=../amp/#create-user-examples title="Permanent link"> </a></h3> <p>ユーザーアカウントの作成 <code class=syntax>mira</code> パスワードで保護 <code class=syntax>qwerty</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=n>mira</span><span class=w> </span><span class=k>HOST</span><span class=w> </span><span class=n>IP</span><span class=w> </span><span class=s1>'127.0.0.1'</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>sha256_password</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>'qwerty'</span><span class=w></span>
</code></pre></div> <p><code class=syntax>mira</code> 開始すべきお客様のアプリをホストにClickHouseサーバー運行しています。</p> <p>ユーザーアカウントの作成 <code class=syntax>john</code> ロールを割り当て、このロールをデフォルトにする:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=n>john</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>role1</span><span class=p>,</span><span class=w> </span><span class=n>role2</span><span class=w></span>
</code></pre></div> <p>ユーザーアカウントの作成 <code class=syntax>john</code> 彼の将来の役割をすべてデフォルトにする:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=k>ALL</span><span class=w></span>
</code></pre></div> <p>いくつかの役割が割り当てられるとき <code class=syntax>john</code> 将来的には自動的にデフォルトになります。</p> <p>ユーザーアカウントの作成 <code class=syntax>john</code> く全ての彼の今後の役割はデフォルトを除く <code class=syntax>role1</code> と <code class=syntax>role2</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=n>john</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>EXCEPT</span><span class=w> </span><span class=n>role1</span><span class=p>,</span><span class=w> </span><span class=n>role2</span><span class=w></span>
</code></pre></div> <h2 id=create-role-statement>CREATE ROLE<a class=headerlink href=../amp/#create-role-statement title="Permanent link"> </a></h2> <p>を作成します。 <a href=../../../../operations/access-rights/amp/#role-management>役割</a>.</p> <h3 id=create-role-syntax>構文<a class=headerlink href=../amp/#create-role-syntax title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=p>]</span><span class=w> </span><span class=n>name</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>SETTINGS</span><span class=w> </span><span class=k>variable</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=w> </span><span class=n>value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>MIN</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=p>]</span><span class=w> </span><span class=n>min_value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>MAX</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=p>]</span><span class=w> </span><span class=n>max_value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>PROFILE</span><span class=w> </span><span class=s1>'profile_name'</span><span class=p>]</span><span class=w> </span><span class=p>[,...]</span><span class=w></span>
</code></pre></div> <h3 id=create-role-description>説明<a class=headerlink href=../amp/#create-role-description title="Permanent link"> </a></h3> <p>役割は、 <a href=../../grant/amp/#grant-privileges>特権</a>. ロールで付与されたユーザーは、このロールのすべての権限を取得します。</p> <p>ユーザーの割り当てることができ複数の役割です。 ユーザーに適用できるのを助の役割の任意の組み合わせによる <a href=../../misc/amp/#set-role-statement>SET ROLE</a> 声明。 特権の最終的なスコープは、適用されたすべてのロールのすべての特権の組み合わせです。 ユーザーが権限を付与に直接かつてのユーザーアカウント、または権限を付与する。</p> <p>ユーザーがデフォルトの役割を応用したユーザーログインします。 デフォルトのロールを設定するには、 <a href=../../misc/amp/#set-default-role-statement>SET DEFAULT ROLE</a> 文または <a href=../../alter/amp/#alter-user-statement>ALTER USER</a> 声明。</p> <p>ロールを取り消すには、 <a href=../../revoke/amp/ >REVOKE</a> 声明。</p> <p>ロールを削除するには、 <a href=../../misc/amp/#drop-role-statement>DROP ROLE</a> 声明。 削除されたロールは、付与されたすべてのユーザーおよびロールから自動的に取り消されます。</p> <h3 id=create-role-examples>例<a class=headerlink href=../amp/#create-role-examples title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>accountant</span><span class=p>;</span><span class=w></span>
<span class=k>GRANT</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>accountant</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>この一連のクエリは、ロールを作成します <code class=syntax>accountant</code> それはからデータを読み取る権限を持っています <code class=syntax>accounting</code> データベース。</p> <p>ユーザーへのロールの付与 <code class=syntax>mira</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>GRANT</span><span class=w> </span><span class=n>accountant</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>mira</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>後の役割が付与されたユーザーが利用できる実行させます。 例えば:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>accountant</span><span class=p>;</span><span class=w></span>
<span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=o>*</span><span class=p>;</span><span class=w></span>
</code></pre></div> <h2 id=create-row-policy-statement>CREATE ROW POLICY<a class=headerlink href=../amp/#create-row-policy-statement title="Permanent link"> </a></h2> <p>を作成します。 <a href=../../../../operations/access-rights/amp/#row-policy-management>行のフィルタ</a> ユーザーがテーブルから読み取ることができます。</p> <h3 id=create-row-policy-syntax>構文<a class=headerlink href=../amp/#create-row-policy-syntax title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=p>[</span><span class=k>ROW</span><span class=p>]</span><span class=w> </span><span class=n>POLICY</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=p>]</span><span class=w> </span><span class=n>policy_name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=n>cluster_name</span><span class=p>]</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>AS</span><span class=w> </span><span class=err>{</span><span class=n>PERMISSIVE</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>RESTRICTIVE</span><span class=err>}</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>FOR</span><span class=w> </span><span class=k>SELECT</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>USING</span><span class=w> </span><span class=n>condition</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>TO</span><span class=w> </span><span class=err>{</span><span class=k>role</span><span class=w> </span><span class=p>[,...]</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>EXCEPT</span><span class=w> </span><span class=k>role</span><span class=w> </span><span class=p>[,...]</span><span class=err>}</span><span class=p>]</span><span class=w></span>
</code></pre></div> <h4 id=create-row-policy-as>セクションAS<a class=headerlink href=../amp/#create-row-policy-as title="Permanent link"> </a></h4> <p>このセクショ</p> <p>確認方針にアクセスが付与されています。 同じテーブルに適用されるパーミッシブポリシーは、booleanを使用して結合されます <code class=syntax>OR</code> オペレーター ポリシーは既定では許可されています。</p> <p>制限的な政策アクセス制限を行います。 同じテーブルに適用される制限ポリシーは、ブール値を使用して結合されます <code class=syntax>AND</code> オペレーター</p> <p>制限ポリシーは、許可フィルターを通過した行に適用されます。 制限的なポリシーを設定しても、許可的なポリシーを設定しない場合、ユーザーはテーブルから行を取得できません。</p> <h4 id=create-row-policy-to>セクションへ<a class=headerlink href=../amp/#create-row-policy-to title="Permanent link"> </a></h4> <p>セクション内 <code class=syntax>TO</code> ロールとユーザーの混在リストを指定できます。, <code class=syntax>CREATE ROW POLICY ... TO accountant, john@localhost</code>.</p> <p>キーワード <code class=syntax>ALL</code> 現在のユーザを含むすべてのClickHouseユーザを意味します。 キーワード <code class=syntax>ALL EXCEPT</code> allow toは、すべてのユーザーリストから一部のユーザーを除外します。 <code class=syntax>CREATE ROW POLICY ... TO ALL EXCEPT accountant, john@localhost</code></p> <h3 id=examples>例<a class=headerlink href=../amp/#examples title="Permanent link"> </a></h3> <ul> <li><code class=syntax>CREATE ROW POLICY filter ON mydb.mytable FOR SELECT USING a&lt;1000 TO accountant, john@localhost</code></li> <li><code class=syntax>CREATE ROW POLICY filter ON mydb.mytable FOR SELECT USING a&lt;1000 TO ALL EXCEPT mira</code></li> </ul> <h2 id=create-quota-statement>CREATE QUOTA<a class=headerlink href=../amp/#create-quota-statement title="Permanent link"> </a></h2> <p>を作成します。 <a href=../../../../operations/access-rights/amp/#quotas-management>クォータ</a> ユーザーまたはロールに割り当てることができます。</p> <h3 id=create-quota-syntax>構文<a class=headerlink href=../amp/#create-quota-syntax title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=n>QUOTA</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=p>]</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=n>cluster_name</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>KEYED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=err>{</span><span class=s1>'none'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>'user name'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>'ip address'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>'client key'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>'client key or user name'</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>'client key or ip address'</span><span class=err>}</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>FOR</span><span class=w> </span><span class=p>[</span><span class=n>RANDOMIZED</span><span class=p>]</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=err>{</span><span class=k>SECOND</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>MINUTE</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>HOUR</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>DAY</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>WEEK</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>MONTH</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>QUARTER</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>YEAR</span><span class=err>}</span><span class=w></span>
<span class=w>        </span><span class=err>{</span><span class=k>MAX</span><span class=w> </span><span class=err>{</span><span class=w> </span><span class=err>{</span><span class=n>QUERIES</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>ERRORS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>RESULT</span><span class=w> </span><span class=k>ROWS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>RESULT</span><span class=w> </span><span class=n>BYTES</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>READ</span><span class=w> </span><span class=k>ROWS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>READ</span><span class=w> </span><span class=n>BYTES</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>EXECUTION</span><span class=w> </span><span class=k>TIME</span><span class=err>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=err>}</span><span class=w> </span><span class=p>[,...]</span><span class=w> </span><span class=o>|</span><span class=w></span>
<span class=w>         </span><span class=k>NO</span><span class=w> </span><span class=n>LIMITS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>TRACKING</span><span class=w> </span><span class=k>ONLY</span><span class=err>}</span><span class=w> </span><span class=p>[,...]]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=k>TO</span><span class=w> </span><span class=err>{</span><span class=k>role</span><span class=w> </span><span class=p>[,...]</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>EXCEPT</span><span class=w> </span><span class=k>role</span><span class=w> </span><span class=p>[,...]</span><span class=err>}</span><span class=p>]</span><span class=w></span>
</code></pre></div> <h3 id=create-quota-example>例<a class=headerlink href=../amp/#create-quota-example title="Permanent link"> </a></h3> <p>現在のユーザーに対するクエリの最大数を123か月以内に制限する制約:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=n>QUOTA</span><span class=w> </span><span class=n>qA</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=mi>15</span><span class=w> </span><span class=k>MONTH</span><span class=w> </span><span class=k>MAX</span><span class=w> </span><span class=n>QUERIES</span><span class=w> </span><span class=mi>123</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=k>CURRENT_USER</span><span class=w></span>
</code></pre></div> <h2 id=create-settings-profile-statement>CREATE SETTINGS PROFILE<a class=headerlink href=../amp/#create-settings-profile-statement title="Permanent link"> </a></h2> <p>を作成します。 <a href=../../../../operations/access-rights/amp/#settings-profiles-management>設定プロファイル</a> ユーザーまたはロールに割り当てることができます。</p> <h3 id=create-settings-profile-syntax>構文<a class=headerlink href=../amp/#create-settings-profile-syntax title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=n>SETTINGS</span><span class=w> </span><span class=n>PROFILE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=p>]</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=p>[</span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=n>cluster_name</span><span class=p>]</span><span class=w></span>
<span class=w>    </span><span class=p>[</span><span class=n>SETTINGS</span><span class=w> </span><span class=k>variable</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=w> </span><span class=n>value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>MIN</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=p>]</span><span class=w> </span><span class=n>min_value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>MAX</span><span class=w> </span><span class=p>[</span><span class=o>=</span><span class=p>]</span><span class=w> </span><span class=n>max_value</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>INHERIT</span><span class=w> </span><span class=s1>'profile_name'</span><span class=p>]</span><span class=w> </span><span class=p>[,...]</span><span class=w></span>
</code></pre></div> <h1 id=create-settings-profile-syntax>例<a class=headerlink href=../amp/#create-settings-profile-syntax title="Permanent link"> </a></h1> <p>を作成します。 <code class=syntax>max_memory_usage_profile</code> の値と制約を持つ設定プロファイル <code class=syntax>max_memory_usage</code> 設定。 それを割り当てる <code class=syntax>robin</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=n>SETTINGS</span><span class=w> </span><span class=n>PROFILE</span><span class=w> </span><span class=n>max_memory_usage_profile</span><span class=w> </span><span class=n>SETTINGS</span><span class=w> </span><span class=n>max_memory_usage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100000001</span><span class=w> </span><span class=k>MIN</span><span class=w> </span><span class=mi>90000000</span><span class=w> </span><span class=k>MAX</span><span class=w> </span><span class=mi>110000000</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>robin</span><span class=w></span>
</code></pre></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/38993f215f9186c1ac3505b1e09697cd9a468b5d" rel="external nofollow noreferrer" target="_blank" class="text-reset">38993f21</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/ja/sql-reference/statements/create/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

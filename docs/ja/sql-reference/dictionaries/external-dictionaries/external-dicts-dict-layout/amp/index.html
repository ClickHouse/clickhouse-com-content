










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ja">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>メモリへの辞書の格納 | ClickHouseドキュメント</title>
    <link rel="canonical" href="https://clickhouse.com/docs/ja/sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "メモリへの辞書の格納 | ClickHouseドキュメント",
"mainEntityOfPage": "https://clickhouse.com/docs/ja/sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "メモリへの辞書の格納 | ClickHouseドキュメント",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer,main{display:block}body{margin:0;font-family:Noto Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-bottom:1rem}ol,ul{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b{font-weight:bolder}a{text-decoration:none;background-color:transparent}a,a:hover{color:#ff8c00}a:hover{text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:Hind Siliguri,sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.lead{font-size:1.375rem;font-weight:400}@media(max-width:1200px){.lead{font-size:calc(1.2625rem+.15vw)}}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}}.table{width:100%;margin-bottom:8px;color:#212529}.table-primary{background-color:#fff1b8}.table-warning{background-color:#ffeeba}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-primary-light{background-color:#fffefb}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-primary{color:#495057;background-color:#fc0;border-color:#fc0}.btn-primary:focus,.btn-primary:hover{color:#495057;background-color:#d9ad00;border-color:#cca300}.btn-primary:focus{box-shadow:0 0 0 0 rgba(228,185,13,.5)}.btn-primary:disabled{color:#495057;background-color:#fc0;border-color:#fc0}.btn-warning{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-warning:focus,.btn-warning:hover{color:#495057;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{box-shadow:0 0 0 0 rgba(228,176,19,.5)}.btn-warning:disabled{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:focus,.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:focus,.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-primary-light{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-primary-light:focus,.btn-primary-light:hover{color:#495057;background-color:#ffedca;border-color:#ffe9bd}.btn-primary-light:focus{box-shadow:0 0 0 0 rgba(228,225,217,.5)}.btn-primary-light:disabled{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:focus,.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:focus,.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:focus,.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:focus,.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-primary{color:#fc0;border-color:#fc0}.btn-outline-primary:hover{color:#495057;background-color:#fc0;border-color:#fc0}.btn-outline-primary:focus{box-shadow:0 0 0 0 rgba(255,204,0,.5)}.btn-outline-primary:disabled{color:#fc0;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 0 rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-primary-light{color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:hover{color:#495057;background-color:#fffaf0;border-color:#fffaf0}.btn-outline-primary-light:focus{box-shadow:0 0 0 0 rgba(255,250,240,.5)}.btn-outline-primary-light:disabled{color:#fffaf0;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 hsla(0,0%,100%,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.btn-group{position:relative;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(255,204,0,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#fc0;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#fff0b3}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#fc0;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#fff0b3}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#fc0;border:0;border-radius:1rem;-ms-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#fff0b3}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower,.custom-range::-ms-fill-upper{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px}.custom-range:disabled::-webkit-slider-thumb{background-color:#d6dbdf}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#d6dbdf}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#d6dbdf}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}.container,body{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/docs/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/docs/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
    <div class="alert alert-primary" role="alert">
      <p class="display-5 mb-2">Help wanted!</p>
      <p class="lead">The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href="/docs/en/sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/" class="alert-link">You can also use the original English version as a reference.</a></p>
      <p class="lead">
          <a class="btn btn-lg btn-primary text-white" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout.md" target="_blank" rel="external nofollow noreferrer">
              Help ClickHouse documentation by editing this page
          </a>
      </p>
    </div>

          <h1 id=dicts-external-dicts-dict-layout>メモリへの辞書の格納<a class=headerlink href=../amp/#dicts-external-dicts-dict-layout title="Permanent link"> </a></h1> <p>辞書をメモリに保存するには、さまざまな方法があります。</p> <p>私達は推薦します <a href=../amp/#flat>平ら</a>, <a href=../amp/#dicts-external_dicts_dict_layout-hashed>ハッシュ</a> と <a href=../amp/#complex-key-hashed>complex_key_hashed</a>. 最適の処理速度を提供するかどれが。</p> <p>キャッシュ推奨されていないものになる可能性のある性能や困難の選定に最適なパラメータ。 セクションの続きを読む “<a href=../amp/#cache>キャッシュ</a>”.</p> <p>する方法は幾つかあるが、今回は改善辞書性能:</p> <ul> <li>後で辞書を操作するための関数を呼び出します <code class=syntax>GROUP BY</code>.</li> <li>抽出する属性をinjectiveとしてマークします。 異なる属性値が異なるキーに対応する場合、属性はinjectiveと呼ばれます。 だからとき <code class=syntax>GROUP BY</code> キーによって属性値を取得する関数を使用すると、この関数は自動的に <code class=syntax>GROUP BY</code>.</li> </ul> <p>ClickHouseは、辞書のエラーに対して例外を生成します。 エラーの例:</p> <ul> <li>アクセス中の辞書を読み込めませんでした。</li> <li>クエリエラー <code class=syntax>cached</code> 辞書。</li> </ul> <p>外部辞書のリストとそのステータスは、 <code class=syntax>system.dictionaries</code> テーブル。</p> <p>設定は次のようになります:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;clickhouse&gt;</span>
    <span class=nt>&lt;dictionary&gt;</span>
        ...
        <span class=nt>&lt;layout&gt;</span>
            <span class=nt>&lt;layout_type&gt;</span>
                <span class=cm>&lt;!-- layout settings --&gt;</span>
            <span class=nt>&lt;/layout_type&gt;</span>
        <span class=nt>&lt;/layout&gt;</span>
        ...
    <span class=nt>&lt;/dictionary&gt;</span>
<span class=nt>&lt;/clickhouse&gt;</span>
</code></pre></div> <p>対応する <a href=../../../../statements/create/amp/#create-dictionary-query>DDL-クエリ</a>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DICTIONARY</span><span class=w> </span><span class=p>(...)</span><span class=w></span>
<span class=p>...</span><span class=w></span>
<span class=n>LAYOUT</span><span class=p>(</span><span class=n>LAYOUT_TYPE</span><span class=p>(</span><span class=n>param</span><span class=w> </span><span class=n>value</span><span class=p>))</span><span class=w> </span><span class=c1>-- layout settings</span>
<span class=p>...</span><span class=w></span>
</code></pre></div> <h2 id=ways-to-store-dictionaries-in-memory>辞書をメモリに保存する方法<a class=headerlink href=../amp/#ways-to-store-dictionaries-in-memory title="Permanent link"> </a></h2> <ul> <li><a href=../amp/#flat>平ら</a></li> <li><a href=../amp/#dicts-external_dicts_dict_layout-hashed>ハッシュ</a></li> <li><a href=../amp/#dicts-external_dicts_dict_layout-sparse_hashed>sparse_hashed</a></li> <li><a href=../amp/#cache>キャッシュ</a></li> <li><a href=../amp/#direct>直接</a></li> <li><a href=../amp/#range-hashed>range_hashed</a></li> <li><a href=../amp/#complex-key-hashed>complex_key_hashed</a></li> <li><a href=../amp/#complex-key-cache>complex_key_cache</a></li> <li><a href=../amp/#ip-trie>ip_trie</a></li> </ul> <h3 id=flat>平ら<a class=headerlink href=../amp/#flat title="Permanent link"> </a></h3> <p>辞書は完全にフラット配列の形でメモリに格納されます。 辞書はどのくらいのメモリを使用しますか？ 量は、最大のキーのサイズに比例します（使用されるスペース）。</p> <p>辞書キーには <code class=syntax>UInt64</code> タイプと値は500,000に制限されています。 辞書の作成時に大きなキーが検出された場合、ClickHouseは例外をスローし、辞書を作成しません。</p> <p>すべての種類の源対応しています。 更新時には、ファイルまたはテーブルからのデータが全体として読み込まれます。</p> <p>この方法は最高性能の中で利用可能なすべての方法を格納する辞書です。</p> <p>設定例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;layout&gt;</span>
  <span class=nt>&lt;flat</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/layout&gt;</span>
</code></pre></div> <p>または</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>LAYOUT</span><span class=p>(</span><span class=n>FLAT</span><span class=p>())</span><span class=w></span>
</code></pre></div> <h3 id=dicts-external_dicts_dict_layout-hashed>ハッシュ<a class=headerlink href=../amp/#dicts-external_dicts_dict_layout-hashed title="Permanent link"> </a></h3> <p>辞書は、ハッシュテーブルの形でメモリに完全に格納されます。 辞書には、実際には任意の識別子を持つ任意の数の要素を含めることができ、キーの数は数千万の項目に達することができます。</p> <p>すべての種類の源対応しています。 更新時には、ファイルまたはテーブルからのデータが全体として読み込まれます。</p> <p>設定例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;layout&gt;</span>
  <span class=nt>&lt;hashed</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/layout&gt;</span>
</code></pre></div> <p>または</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>LAYOUT</span><span class=p>(</span><span class=n>HASHED</span><span class=p>())</span><span class=w></span>
</code></pre></div> <h3 id=dicts-external_dicts_dict_layout-sparse_hashed>sparse_hashed<a class=headerlink href=../amp/#dicts-external_dicts_dict_layout-sparse_hashed title="Permanent link"> </a></h3> <p>に類似した <code class=syntax>hashed</code> が、使用メモリ賛以上のCPUます。</p> <p>設定例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;layout&gt;</span>
  <span class=nt>&lt;sparse_hashed</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/layout&gt;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>LAYOUT</span><span class=p>(</span><span class=n>SPARSE_HASHED</span><span class=p>())</span><span class=w></span>
</code></pre></div> <h3 id=complex-key-hashed>complex_key_hashed<a class=headerlink href=../amp/#complex-key-hashed title="Permanent link"> </a></h3> <p>このタイプの貯蔵は合成物との使用のためです <a href=../../external-dicts-dict-structure/amp/ >キー</a>. に類似した <code class=syntax>hashed</code>.</p> <p>設定例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;layout&gt;</span>
  <span class=nt>&lt;complex_key_hashed</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/layout&gt;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>LAYOUT</span><span class=p>(</span><span class=n>COMPLEX_KEY_HASHED</span><span class=p>())</span><span class=w></span>
</code></pre></div> <h3 id=range-hashed>range_hashed<a class=headerlink href=../amp/#range-hashed title="Permanent link"> </a></h3> <p>辞書は、範囲とそれに対応する値の順序付き配列を持つハッシュテーブルの形式でメモリに格納されます。</p> <p>このストレージメソッドはハッシュ処理と同じように動作し、キーに加えて日付/時刻(任意の数値型)範囲を使用できます。</p> <p>例:この表には、各広告主の割引が次の形式で含まれています:</p> <div class=codehilite><pre><span></span><code class=syntax>+---------|-------------|-------------|------+
| advertiser id | discount start date | discount end date | amount |
+===============+=====================+===================+========+
| 123           | 2015-01-01          | 2015-01-15        | 0.15   |
+---------|-------------|-------------|------+
| 123           | 2015-01-16          | 2015-01-31        | 0.25   |
+---------|-------------|-------------|------+
| 456           | 2015-01-01          | 2015-01-15        | 0.05   |
+---------|-------------|-------------|------+
</code></pre></div> <p>日付範囲のサンプルを使用するには、 <code class=syntax>range_min</code> と <code class=syntax>range_max</code> の要素 <a href=../../external-dicts-dict-structure/amp/ >構造</a>. これらの要素の要素が含まれている必要があ <code class=syntax>name</code> と<code class=syntax>type</code> （もし <code class=syntax>type</code> 指定されていない場合、デフォルトの型はuse-Dateになります)。 <code class=syntax>type</code> 任意の数値型(Date/DateTime/UInt64/Int32/others)を指定できます。</p> <p>例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;structure&gt;</span>
    <span class=nt>&lt;id&gt;</span>
        <span class=nt>&lt;name&gt;</span>Id<span class=nt>&lt;/name&gt;</span>
    <span class=nt>&lt;/id&gt;</span>
    <span class=nt>&lt;range_min&gt;</span>
        <span class=nt>&lt;name&gt;</span>first<span class=nt>&lt;/name&gt;</span>
        <span class=nt>&lt;type&gt;</span>Date<span class=nt>&lt;/type&gt;</span>
    <span class=nt>&lt;/range_min&gt;</span>
    <span class=nt>&lt;range_max&gt;</span>
        <span class=nt>&lt;name&gt;</span>last<span class=nt>&lt;/name&gt;</span>
        <span class=nt>&lt;type&gt;</span>Date<span class=nt>&lt;/type&gt;</span>
    <span class=nt>&lt;/range_max&gt;</span>
    ...
</code></pre></div> <p>または</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DICTIONARY</span><span class=w> </span><span class=n>somedict</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>id</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>first</span><span class=w> </span><span class=nb>Date</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>last</span><span class=w> </span><span class=nb>Date</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>id</span><span class=w></span>
<span class=n>LAYOUT</span><span class=p>(</span><span class=n>RANGE_HASHED</span><span class=p>())</span><span class=w></span>
<span class=n>RANGE</span><span class=p>(</span><span class=k>MIN</span><span class=w> </span><span class=k>first</span><span class=w> </span><span class=k>MAX</span><span class=w> </span><span class=k>last</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>これらの辞書を操作するには、追加の引数を渡す必要があります。 <code class=syntax>dictGetT</code> 範囲が選択される関数:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dictGetT</span><span class=p>(</span><span class=s1>'dict_name'</span><span class=p>,</span><span class=w> </span><span class=s1>'attr_name'</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=nb>date</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>この関数は、指定された値を返します <code class=syntax>id</code>sおよび渡された日付を含む日付範囲。</p> <p>アルゴリズムの詳細:</p> <ul> <li>もし <code class=syntax>id</code> が見つからないか、範囲が見つからない。 <code class=syntax>id</code>,ディクショナリのデフォルト値を返します。</li> <li>重複する範囲がある場合は、anyを使用できます。</li> <li>範囲区切り文字が <code class=syntax>NULL</code> または無効な日付(1900-01-01または2039-01-01など)、範囲は開いたままになります。 範囲は両側で開くことができる。</li> </ul> <p>設定例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;clickhouse&gt;</span>
        <span class=nt>&lt;dictionary&gt;</span>

                ...

                <span class=nt>&lt;layout&gt;</span>
                        <span class=nt>&lt;range_hashed</span> <span class=nt>/&gt;</span>
                <span class=nt>&lt;/layout&gt;</span>

                <span class=nt>&lt;structure&gt;</span>
                        <span class=nt>&lt;id&gt;</span>
                                <span class=nt>&lt;name&gt;</span>Abcdef<span class=nt>&lt;/name&gt;</span>
                        <span class=nt>&lt;/id&gt;</span>
                        <span class=nt>&lt;range_min&gt;</span>
                                <span class=nt>&lt;name&gt;</span>StartTimeStamp<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/range_min&gt;</span>
                        <span class=nt>&lt;range_max&gt;</span>
                                <span class=nt>&lt;name&gt;</span>EndTimeStamp<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/range_max&gt;</span>
                        <span class=nt>&lt;attribute&gt;</span>
                                <span class=nt>&lt;name&gt;</span>XXXType<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
                                <span class=nt>&lt;null_value</span> <span class=nt>/&gt;</span>
                        <span class=nt>&lt;/attribute&gt;</span>
                <span class=nt>&lt;/structure&gt;</span>

        <span class=nt>&lt;/dictionary&gt;</span>
<span class=nt>&lt;/clickhouse&gt;</span>
</code></pre></div> <p>または</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DICTIONARY</span><span class=w> </span><span class=n>somedict</span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>Abcdef</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>StartTimeStamp</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>EndTimeStamp</span><span class=w> </span><span class=n>UInt64</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>XXXType</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>''</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>Abcdef</span><span class=w></span>
<span class=n>RANGE</span><span class=p>(</span><span class=k>MIN</span><span class=w> </span><span class=n>StartTimeStamp</span><span class=w> </span><span class=k>MAX</span><span class=w> </span><span class=n>EndTimeStamp</span><span class=p>)</span><span class=w></span>
</code></pre></div> <h3 id=cache>キャッシュ<a class=headerlink href=../amp/#cache title="Permanent link"> </a></h3> <p>辞書は、固定数のセルを持つキャッシュに格納されます。 これらの細胞を含む使用頻度の高います。</p> <p>辞書を検索するときは、まずキャッシュが検索されます。 データの各ブロックについて、キャッシュ内に見つからない、または古いすべてのキーがソースから要求されます。 <code class=syntax>SELECT attrs... FROM db.table WHERE id IN (k1, k2, ...)</code>. 受信したデータは、キャッシュに書き込まれます。</p> <p>キャッシュディクショナリの有効期限 <a href=../../external-dicts-dict-lifetime/amp/ >生涯</a> キャッシュ内のデータの設定が可能です。 より多くの時間が <code class=syntax>lifetime</code> セルにデータをロードしてから経過した場合、セルの値は使用されず、次に使用する必要があるときに再要求されます。<br> これは、辞書を保存するすべての方法の中で最も効果的ではありません。 キャッシュの速度は、正しい設定と使用シナリオに強く依存します。 キャッシュタイプディクショナリは、ヒット率が十分に高い(推奨99%以上)場合にのみ適切に機能します。 の平均ヒット率を表示することができます <code class=syntax>system.dictionaries</code> テーブル。</p> <p>キャッシュのパフォーマ <code class=syntax>LIMIT</code>、および外部辞書を使用して関数を呼び出します。</p> <p>サポート <a href=../../external-dicts-dict-sources/amp/ >ソース</a>：MySQL、ClickHouse、実行可能ファイル、HTTP。</p> <p>設定例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;layout&gt;</span>
    <span class=nt>&lt;cache&gt;</span>
        <span class=cm>&lt;!-- The size of the cache, in number of cells. Rounded up to a power of two. --&gt;</span>
        <span class=nt>&lt;size_in_cells&gt;</span>1000000000<span class=nt>&lt;/size_in_cells&gt;</span>
    <span class=nt>&lt;/cache&gt;</span>
<span class=nt>&lt;/layout&gt;</span>
</code></pre></div> <p>または</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>LAYOUT</span><span class=p>(</span><span class=k>CACHE</span><span class=p>(</span><span class=n>SIZE_IN_CELLS</span><span class=w> </span><span class=mi>1000000000</span><span class=p>))</span><span class=w></span>
</code></pre></div> <p>設定するのに十分な大きさのキャッシュサイズです。 あなたは細胞の数を選択するために実験する必要があります:</p> <ol> <li>値を設定します。</li> <li>走行クエリーまでのキャッシュを完全に。</li> <li>を使用してメモリ消費量を評価する <code class=syntax>system.dictionaries</code> テーブル。</li> <li>必要なメモリ消費に達するまで、セル数を増減します。</li> </ol> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">警告</p> <p>ClickHouseをソースとして使用しないでください。</p> </div> <h3 id=complex-key-cache>complex_key_cache<a class=headerlink href=../amp/#complex-key-cache title="Permanent link"> </a></h3> <p>このタイプの貯蔵は合成物との使用のためです <a href=../../external-dicts-dict-structure/amp/ >キー</a>. に類似した <code class=syntax>cache</code>.</p> <h3 id=direct>直接<a class=headerlink href=../amp/#direct title="Permanent link"> </a></h3> <p>辞書はメモリに格納されず、要求の処理中にソースに直接移動します。</p> <p>辞書キーには <code class=syntax>UInt64</code> タイプ。</p> <p>すべてのタイプの <a href=../../external-dicts-dict-sources/amp/ >ソース</a> ローカルファイ</p> <p>設定例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;layout&gt;</span>
  <span class=nt>&lt;direct</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/layout&gt;</span>
</code></pre></div> <p>または</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>LAYOUT</span><span class=p>(</span><span class=n>DIRECT</span><span class=p>())</span><span class=w></span>
</code></pre></div> <h3 id=ip-trie>ip_trie<a class=headerlink href=../amp/#ip-trie title="Permanent link"> </a></h3> <p>このタイプの貯蔵するマッピングするネットワーク接頭辞(IPアドレスへのメタデータなどのASN.</p> <p>例:テーブルを含むネットワークの接頭辞およびその対応としての数および国コード:</p> <div class=codehilite><pre><span></span><code class=syntax>  +-----------|-----|------+
  | prefix          | asn   | cca2   |
  +=================+=======+========+
  | 202.79.32.0/20  | 17501 | NP     |
  +-----------|-----|------+
  | 2620:0:870::/48 | 3856  | US     |
  +-----------|-----|------+
  | 2a02:6b8:1::/48 | 13238 | RU     |
  +-----------|-----|------+
  | 2001:db8::/32   | 65536 | ZZ     |
  +-----------|-----|------+
</code></pre></div> <p>このタイプのレイアウトを使用する場合、構造に複合キーが必要です。</p> <p>例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;structure&gt;</span>
    <span class=nt>&lt;key&gt;</span>
        <span class=nt>&lt;attribute&gt;</span>
            <span class=nt>&lt;name&gt;</span>prefix<span class=nt>&lt;/name&gt;</span>
            <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
        <span class=nt>&lt;/attribute&gt;</span>
    <span class=nt>&lt;/key&gt;</span>
    <span class=nt>&lt;attribute&gt;</span>
            <span class=nt>&lt;name&gt;</span>asn<span class=nt>&lt;/name&gt;</span>
            <span class=nt>&lt;type&gt;</span>UInt32<span class=nt>&lt;/type&gt;</span>
            <span class=nt>&lt;null_value</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;/attribute&gt;</span>
    <span class=nt>&lt;attribute&gt;</span>
            <span class=nt>&lt;name&gt;</span>cca2<span class=nt>&lt;/name&gt;</span>
            <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
            <span class=nt>&lt;null_value&gt;</span>??<span class=nt>&lt;/null_value&gt;</span>
    <span class=nt>&lt;/attribute&gt;</span>
    ...
<span class=nt>&lt;/structure&gt;</span>
<span class=nt>&lt;layout&gt;</span>
    <span class=nt>&lt;ip_trie&gt;</span>
        <span class=nt>&lt;access_to_key_from_attributes&gt;</span>true<span class=nt>&lt;/access_to_key_from_attributes&gt;</span>
    <span class=nt>&lt;/ip_trie&gt;</span>
<span class=nt>&lt;/layout&gt;</span>
</code></pre></div> <p>または</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span><span class=w> </span><span class=k>DICTIONARY</span><span class=w> </span><span class=n>somedict</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=k>prefix</span><span class=w> </span><span class=n>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>asn</span><span class=w> </span><span class=n>UInt32</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>cca2</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>'??'</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=k>prefix</span><span class=w></span>
</code></pre></div> <p>キーには、許可されたIPプレフィックスを含む文字列型属性のみが必要です。 その他のタイプはサポートされていませんか。</p> <p>クエリでは、同じ関数を使用する必要があります (<code class=syntax>dictGetT</code> タプル付き）複合キーを持つ辞書については:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dictGetT</span><span class=p>(</span><span class=s1>'dict_name'</span><span class=p>,</span><span class=w> </span><span class=s1>'attr_name'</span><span class=p>,</span><span class=w> </span><span class=n>tuple</span><span class=p>(</span><span class=n>ip</span><span class=p>))</span><span class=w></span>
</code></pre></div> <p>この関数は、 <code class=syntax>UInt32</code> IPv4の場合、または <code class=syntax>FixedString(16)</code> IPv6の場合:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dictGetString</span><span class=p>(</span><span class=s1>'prefix'</span><span class=p>,</span><span class=w> </span><span class=s1>'asn'</span><span class=p>,</span><span class=w> </span><span class=n>tuple</span><span class=p>(</span><span class=n>IPv6StringToNum</span><span class=p>(</span><span class=s1>'2001:db8::1'</span><span class=p>)))</span><span class=w></span>
</code></pre></div> <p>その他のタイプはサポートされていませんか。 この関数は、このIPアドレスに対応するプレフィックスの属性を返します。 重複する接頭辞がある場合は、最も特定の接頭辞が返されます。</p> <p>データは <code class=syntax>trie</code>. それはRAMに完全に収まる必要があります。</p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2022 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/38993f215f9186c1ac3505b1e09697cd9a468b5d" rel="external nofollow noreferrer" target="_blank" class="text-reset">38993f21</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/ja/sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>

<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-en/example-datasets/uk-price-paid">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">UK Property Price Paid | ClickHouse Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://clickhouse.com//docs/staging3/docs/en/example-datasets/uk-price-paid"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="UK Property Price Paid | ClickHouse Docs"><meta data-rh="true" name="description" content="The dataset contains data about prices paid for real-estate property in England and Wales. The data is available since year 1995."><meta data-rh="true" property="og:description" content="The dataset contains data about prices paid for real-estate property in England and Wales. The data is available since year 1995."><link data-rh="true" rel="icon" href="/docs/staging3/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com//docs/staging3/docs/en/example-datasets/uk-price-paid"><link data-rh="true" rel="alternate" href="https://clickhouse.com//docs/staging3/docs/en/example-datasets/uk-price-paid" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com//docs/staging3/docs/en/example-datasets/uk-price-paid" hreflang="x-default"><link rel="stylesheet" href="/docs/staging3/assets/css/styles.c4f08da8.css">
<link rel="preload" href="/docs/staging3/assets/js/runtime~main.1413fc46.js" as="script">
<link rel="preload" href="/docs/staging3/assets/js/main.6120f71b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/staging3/docs/"><div class="navbar__logo"><img src="/docs/staging3/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/staging3/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">ClickHouse</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/staging3/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/docs/staging3/docs/"><img src="/docs/staging3/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/staging3/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"><b>ClickHouse</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/staging3/docs/intro">What is ClickHouse?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/staging3/docs/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/staging3/docs/tutorial">Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/staging3/docs/connect-a-ui">Connect a UI</a><button aria-label="Toggle the collapsible sidebar category &#x27;Connect a UI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/staging3/docs/integrations">Integrations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/staging3/docs/guides">User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/staging3/docs/en">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/getting-started/install">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/getting-started/playground">Playground</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/staging3/docs/en/example-datasets">Example Datasets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Example Datasets&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/amplab-benchmark">AMPLab Big Data Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/brown-benchmark">Brown University Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/cell-towers">Cell Towers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/criteo">Terabyte Click Logs from Criteo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/github-events">GitHub Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/menus">New York Public Library &quot;What&#x27;s on the Menu?&quot; Dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/metrica">Web Analytics Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/nyc-taxi">New York Taxi Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/ontime">OnTime Airline Flight Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/opensky">Air Traffic Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/recipes">Recipes Dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/star-schema">Star Schema Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/staging3/docs/en/example-datasets/uk-price-paid">UK Property Price Paid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staging3/docs/en/example-datasets/wikistat">WikiStat</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staging3/docs/en/sql-reference/">SQL Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staging3/docs/en/table-engines">Database &amp; Table Engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Database &amp; Table Engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staging3/docs/en/interfaces/">Interfaces</a><button aria-label="Toggle the collapsible sidebar category &#x27;Interfaces&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staging3/docs/en/operations/">Operations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staging3/docs/category/building-clickhouse">Building ClickHouse</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building ClickHouse&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staging3/docs/en/whats-new/">What&#x27;s New</a><button aria-label="Toggle the collapsible sidebar category &#x27;What&#x27;s New&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/staging3/docs/faq/">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/staging3/docs/about-us">About Us</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Us&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/staging3/docs/en"><span itemprop="name">Reference Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/staging3/docs/en/example-datasets"><span itemprop="name">Example Datasets</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">UK Property Price Paid</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>UK Property Price Paid</h1><p>The dataset contains data about prices paid for real-estate property in England and Wales. The data is available since year 1995.
The size of the dataset in uncompressed form is about 4 GiB and it will take about 278 MiB in ClickHouse.</p><p>Source: <a href="https://www.gov.uk/government/statistical-data-sets/price-paid-data-downloads" target="_blank" rel="noopener noreferrer">https://www.gov.uk/government/statistical-data-sets/price-paid-data-downloads</a>
Description of the fields: <a href="https://www.gov.uk/guidance/about-the-price-paid-data" target="_blank" rel="noopener noreferrer">https://www.gov.uk/guidance/about-the-price-paid-data</a></p><p>Contains HM Land Registry data © Crown copyright and database right 2021. This data is licensed under the Open Government Licence v3.0.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="download-dataset">Download the Dataset<a class="hash-link" href="#download-dataset" title="Direct link to heading">​</a></h2><p>Run the command:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">wget</span><span class="token plain"> http://prod.publicdata.landregistry.gov.uk.s3-website-eu-west-1.amazonaws.com/pp-complete.csv</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Download will take about 2 minutes with good internet connection.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="create-table">Create the Table<a class="hash-link" href="#create-table" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    price UInt32</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">Date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    postcode1 LowCardinality</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    postcode2 LowCardinality</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">type</span><span class="token plain"> Enum8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;terraced&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;semi-detached&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;detached&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;flat&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;other&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    is_new UInt8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    duration Enum8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;freehold&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;leasehold&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;unknown&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    addr1 String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    addr2 String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    street LowCardinality</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    locality LowCardinality</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    town LowCardinality</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    district LowCardinality</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    county LowCardinality</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    category UInt8</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ENGINE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> MergeTree </span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">postcode1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> postcode2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> addr1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> addr2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="preprocess-import-data">Preprocess and Import Data<a class="hash-link" href="#preprocess-import-data" title="Direct link to heading">​</a></h2><p>We will use <code>clickhouse-local</code> tool for data preprocessing and <code>clickhouse-client</code> to upload it.</p><p>In this example, we define the structure of source data from the CSV file and specify a query to preprocess the data with <code>clickhouse-local</code>.</p><p>The preprocessing is:</p><ul><li>splitting the postcode to two different columns <code>postcode1</code> and <code>postcode2</code> that is better for storage and queries;</li><li>coverting the <code>time</code> field to date as it only contains 00:00 time;</li><li>ignoring the <a href="/docs/staging3/docs/en/sql-reference/data-types/uuid">UUid</a> field because we don&#x27;t need it for analysis;</li><li>transforming <code>type</code> and <code>duration</code> to more readable Enum fields with function <a href="/docs/staging3/docs/en/sql-reference/functions/other-functions#transform">transform</a>;</li><li>transforming <code>is_new</code> and <code>category</code> fields from single-character string (<code>Y</code>/<code>N</code> and <code>A</code>/<code>B</code>) to <a href="/docs/staging3/docs/en/sql-reference/data-types/int-uint#uint8-uint16-uint32-uint64-uint256-int8-int16-int32-int64-int128-int256">UInt8</a> field with 0 and 1.</li></ul><p>Preprocessed data is piped directly to <code>clickhouse-client</code> to be inserted into ClickHouse table in streaming fashion.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">clickhouse-local --input-format CSV --structure </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    uuid String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    price UInt32,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    time DateTime,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    postcode String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    a String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    b String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    c String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    addr1 String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    addr2 String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    street String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    locality String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    town String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    district String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    county String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    d String,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    e String</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">&#x27;</span><span class="token plain"> --query </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    WITH splitByChar(&#x27; &#x27;, postcode) AS p</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    SELECT</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        price,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        toDate(time) AS date,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        p[1] AS postcode1,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        p[2] AS postcode2,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        transform(a, [&#x27;T&#x27;, &#x27;S&#x27;, &#x27;D&#x27;, &#x27;F&#x27;, &#x27;O&#x27;], [&#x27;terraced&#x27;, &#x27;semi-detached&#x27;, &#x27;detached&#x27;, &#x27;flat&#x27;, &#x27;other&#x27;]) AS type,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        b = &#x27;Y&#x27; AS is_new,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        transform(c, [&#x27;F&#x27;, &#x27;L&#x27;, &#x27;U&#x27;], [&#x27;freehold&#x27;, &#x27;leasehold&#x27;, &#x27;unknown&#x27;]) AS duration,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        addr1,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        addr2,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        street,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        locality,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        town,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        district,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        county,</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">        d = &#x27;B&#x27; AS category</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">    FROM table&quot;</span><span class="token plain"> --date_time_input_format best_effort </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain"> pp-complete.csv </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> clickhouse-client --query </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;INSERT INTO uk_price_paid FORMAT TSV&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>It will take about 40 seconds.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="validate-data">Validate the Data<a class="hash-link" href="#validate-data" title="Direct link to heading">​</a></h2><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> uk_price_paid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">┌──count()─┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 26321785 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The size of dataset in ClickHouse is just 278 MiB, check it.</p><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"> formatReadableSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">total_bytes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">tables</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">WHERE</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;uk_price_paid&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">┌─formatReadableSize(total_bytes)─┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 278.80 MiB                      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└─────────────────────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="run-queries">Run Some Queries<a class="hash-link" href="#run-queries" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="average-price">Query 1. Average Price Per Year<a class="hash-link" href="#average-price" title="Direct link to heading">​</a></h3><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"> toYear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">avg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">80</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> uk_price_paid </span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">┌─year─┬──price─┬─bar(round(avg(price)), 0, 1000000, 80)─┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1995 │  67932 │ █████▍                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1996 │  71505 │ █████▋                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1997 │  78532 │ ██████▎                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1998 │  85436 │ ██████▋                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1999 │  96037 │ ███████▋                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2000 │ 107479 │ ████████▌                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2001 │ 118885 │ █████████▌                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2002 │ 137941 │ ███████████                            │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2003 │ 155889 │ ████████████▍                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2004 │ 178885 │ ██████████████▎                        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2005 │ 189351 │ ███████████████▏                       │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2006 │ 203528 │ ████████████████▎                      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2007 │ 219378 │ █████████████████▌                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2008 │ 217056 │ █████████████████▎                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2009 │ 213419 │ █████████████████                      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2010 │ 236109 │ ██████████████████▊                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2011 │ 232805 │ ██████████████████▌                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2012 │ 238367 │ ███████████████████                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2013 │ 256931 │ ████████████████████▌                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2014 │ 279915 │ ██████████████████████▍                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2015 │ 297266 │ ███████████████████████▋               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2016 │ 313201 │ █████████████████████████              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2017 │ 346097 │ ███████████████████████████▋           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2018 │ 350116 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2019 │ 351013 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2020 │ 369420 │ █████████████████████████████▌         │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2021 │ 386903 │ ██████████████████████████████▊        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────┴────────┴────────────────────────────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="average-price-london">Query 2. Average Price per Year in London<a class="hash-link" href="#average-price-london" title="Direct link to heading">​</a></h3><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"> toYear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">avg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2000000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> uk_price_paid </span><span class="token keyword" style="color:rgb(0, 0, 255)">WHERE</span><span class="token plain"> town </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;LONDON&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">┌─year─┬───price─┬─bar(round(avg(price)), 0, 2000000, 100)───────────────┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1995 │  109116 │ █████▍                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1996 │  118667 │ █████▊                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1997 │  136518 │ ██████▋                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1998 │  152983 │ ███████▋                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1999 │  180637 │ █████████                                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2000 │  215838 │ ██████████▋                                           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2001 │  232994 │ ███████████▋                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2002 │  263670 │ █████████████▏                                        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2003 │  278394 │ █████████████▊                                        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2004 │  304666 │ ███████████████▏                                      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2005 │  322875 │ ████████████████▏                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2006 │  356191 │ █████████████████▋                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2007 │  404054 │ ████████████████████▏                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2008 │  420741 │ █████████████████████                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2009 │  427753 │ █████████████████████▍                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2010 │  480306 │ ████████████████████████                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2011 │  496274 │ ████████████████████████▋                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2012 │  519442 │ █████████████████████████▊                            │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2013 │  616212 │ ██████████████████████████████▋                       │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2014 │  724154 │ ████████████████████████████████████▏                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2015 │  792129 │ ███████████████████████████████████████▌              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2016 │  843655 │ ██████████████████████████████████████████▏           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2017 │  982642 │ █████████████████████████████████████████████████▏    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2018 │ 1016835 │ ██████████████████████████████████████████████████▋   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2019 │ 1042849 │ ████████████████████████████████████████████████████▏ │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2020 │ 1011889 │ ██████████████████████████████████████████████████▌   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2021 │  960343 │ ████████████████████████████████████████████████      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────┴─────────┴───────────────────────────────────────────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Something happened in 2013. I don&#x27;t have a clue. Maybe you have a clue what happened in 2020?</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="most-expensive-neighborhoods">Query 3. The Most Expensive Neighborhoods<a class="hash-link" href="#most-expensive-neighborhoods" title="Direct link to heading">​</a></h3><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    district</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">avg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5000000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;2020-01-01&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    district</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">HAVING</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> price </span><span class="token keyword" style="color:rgb(0, 0, 255)">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">┌─town─────────────────┬─district───────────────┬────c─┬───price─┬─bar(round(avg(price)), 0, 5000000, 100)────────────────────────────┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ CITY OF WESTMINSTER    │ 3606 │ 3280239 │ █████████████████████████████████████████████████████████████████▌ │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ CITY OF LONDON         │  274 │ 3160502 │ ███████████████████████████████████████████████████████████████▏   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ KENSINGTON AND CHELSEA │ 2550 │ 2308478 │ ██████████████████████████████████████████████▏                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LEATHERHEAD          │ ELMBRIDGE              │  114 │ 1897407 │ █████████████████████████████████████▊                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ CAMDEN                 │ 3033 │ 1805404 │ ████████████████████████████████████                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ VIRGINIA WATER       │ RUNNYMEDE              │  156 │ 1753247 │ ███████████████████████████████████                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WINDLESHAM           │ SURREY HEATH           │  108 │ 1677613 │ █████████████████████████████████▌                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ THORNTON HEATH       │ CROYDON                │  546 │ 1671721 │ █████████████████████████████████▍                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BARNET               │ ENFIELD                │  124 │ 1505840 │ ██████████████████████████████                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ COBHAM               │ ELMBRIDGE              │  387 │ 1237250 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ ISLINGTON              │ 2668 │ 1236980 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OXFORD               │ SOUTH OXFORDSHIRE      │  321 │ 1220907 │ ████████████████████████▍                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ RICHMOND UPON THAMES   │  704 │ 1215551 │ ████████████████████████▎                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HOUNSLOW               │  671 │ 1207493 │ ████████████████████████▏                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ASCOT                │ WINDSOR AND MAIDENHEAD │  407 │ 1183299 │ ███████████████████████▋                                           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BEACONSFIELD         │ BUCKINGHAMSHIRE        │  330 │ 1175615 │ ███████████████████████▌                                           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ RICHMOND             │ RICHMOND UPON THAMES   │  874 │ 1110444 │ ██████████████████████▏                                            │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HAMMERSMITH AND FULHAM │ 3086 │ 1053983 │ █████████████████████                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SURBITON             │ ELMBRIDGE              │  100 │ 1011800 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ RADLETT              │ HERTSMERE              │  283 │ 1011712 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SALCOMBE             │ SOUTH HAMS             │  127 │ 1011624 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WEYBRIDGE            │ ELMBRIDGE              │  655 │ 1007265 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ESHER                │ ELMBRIDGE              │  485 │  986581 │ ███████████████████▋                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LEATHERHEAD          │ GUILDFORD              │  202 │  977320 │ ███████████████████▌                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BURFORD              │ WEST OXFORDSHIRE       │  111 │  966893 │ ███████████████████▎                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BROCKENHURST         │ NEW FOREST             │  129 │  956675 │ ███████████████████▏                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HINDHEAD             │ WAVERLEY               │  137 │  953753 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ GERRARDS CROSS       │ BUCKINGHAMSHIRE        │  419 │  951121 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ EAST MOLESEY         │ ELMBRIDGE              │  192 │  936769 │ ██████████████████▋                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CHALFONT ST GILES    │ BUCKINGHAMSHIRE        │  146 │  925515 │ ██████████████████▌                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ TOWER HAMLETS          │ 4388 │  918304 │ ██████████████████▎                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OLNEY                │ MILTON KEYNES          │  235 │  910646 │ ██████████████████▏                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HENLEY-ON-THAMES     │ SOUTH OXFORDSHIRE      │  540 │  902418 │ ██████████████████                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ SOUTHWARK              │ 3885 │  892997 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ KINGSTON UPON THAMES │ KINGSTON UPON THAMES   │  960 │  885969 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ EALING                 │ 2658 │  871755 │ █████████████████▍                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CRANBROOK            │ TUNBRIDGE WELLS        │  431 │  862348 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ MERTON                 │ 2099 │  859118 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BELVEDERE            │ BEXLEY                 │  346 │  842423 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ GUILDFORD            │ WAVERLEY               │  143 │  841277 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HARPENDEN            │ ST ALBANS              │  657 │  841216 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HACKNEY                │ 3307 │  837090 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ WANDSWORTH             │ 6566 │  832663 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MAIDENHEAD           │ BUCKINGHAMSHIRE        │  123 │  824299 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ KINGS LANGLEY        │ DACORUM                │  145 │  821331 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BERKHAMSTED          │ DACORUM                │  543 │  818415 │ ████████████████▎                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ GREAT MISSENDEN      │ BUCKINGHAMSHIRE        │  226 │  802807 │ ████████████████                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BILLINGSHURST        │ CHICHESTER             │  144 │  797829 │ ███████████████▊                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WOKING               │ GUILDFORD              │  176 │  793494 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ STOCKBRIDGE          │ TEST VALLEY            │  178 │  793269 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ EPSOM                │ REIGATE AND BANSTEAD   │  172 │  791862 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TONBRIDGE            │ TUNBRIDGE WELLS        │  360 │  787876 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TEDDINGTON           │ RICHMOND UPON THAMES   │  595 │  786492 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TWICKENHAM           │ RICHMOND UPON THAMES   │ 1155 │  786193 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LYNDHURST            │ NEW FOREST             │  102 │  785593 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ LAMBETH                │ 5228 │  774574 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ BARNET                 │ 3955 │  773259 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OXFORD               │ VALE OF WHITE HORSE    │  353 │  772088 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TONBRIDGE            │ MAIDSTONE              │  305 │  770740 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LUTTERWORTH          │ HARBOROUGH             │  538 │  768634 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WOODSTOCK            │ WEST OXFORDSHIRE       │  140 │  766037 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MIDHURST             │ CHICHESTER             │  257 │  764815 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MARLOW               │ BUCKINGHAMSHIRE        │  327 │  761876 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ NEWHAM                 │ 3237 │  761784 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ALDERLEY EDGE        │ CHESHIRE EAST          │  178 │  757318 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LUTON                │ CENTRAL BEDFORDSHIRE   │  212 │  754283 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ PETWORTH             │ CHICHESTER             │  154 │  754220 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ALRESFORD            │ WINCHESTER             │  219 │  752718 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ POTTERS BAR          │ WELWYN HATFIELD        │  174 │  748465 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HASLEMERE            │ CHICHESTER             │  128 │  746907 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TADWORTH             │ REIGATE AND BANSTEAD   │  502 │  743252 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ THAMES DITTON        │ ELMBRIDGE              │  244 │  741913 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ REIGATE              │ REIGATE AND BANSTEAD   │  581 │  738198 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BOURNE END           │ BUCKINGHAMSHIRE        │  138 │  735190 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SEVENOAKS            │ SEVENOAKS              │ 1156 │  730018 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OXTED                │ TANDRIDGE              │  336 │  729123 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ INGATESTONE          │ BRENTWOOD              │  166 │  728103 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ BRENT                  │ 2079 │  720605 │ ██████████████▍                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HARINGEY               │ 3216 │  717780 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ PURLEY               │ CROYDON                │  575 │  716108 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WELWYN               │ WELWYN HATFIELD        │  222 │  710603 │ ██████████████▏                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ RICKMANSWORTH        │ THREE RIVERS           │  798 │  704571 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BANSTEAD             │ REIGATE AND BANSTEAD   │  401 │  701293 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CHIGWELL             │ EPPING FOREST          │  261 │  701203 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ PINNER               │ HARROW                 │  528 │  698885 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HASLEMERE            │ WAVERLEY               │  280 │  696659 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SLOUGH               │ BUCKINGHAMSHIRE        │  396 │  694917 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WALTON-ON-THAMES     │ ELMBRIDGE              │  946 │  692395 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ READING              │ SOUTH OXFORDSHIRE      │  318 │  691988 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ NORTHWOOD            │ HILLINGDON             │  271 │  690643 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ FELTHAM              │ HOUNSLOW               │  763 │  688595 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ASHTEAD              │ MOLE VALLEY            │  303 │  687923 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BARNET               │ BARNET                 │  975 │  686980 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WOKING               │ SURREY HEATH           │  283 │  686669 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MALMESBURY           │ WILTSHIRE              │  323 │  683324 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ AMERSHAM             │ BUCKINGHAMSHIRE        │  496 │  680962 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CHISLEHURST          │ BROMLEY                │  430 │  680209 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HYTHE                │ FOLKESTONE AND HYTHE   │  490 │  676908 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MAYFIELD             │ WEALDEN                │  101 │  676210 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ASCOT                │ BRACKNELL FOREST       │  168 │  676004 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────────────────────┴────────────────────────┴──────┴─────────┴────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="speedup-with-projections">Let&#x27;s Speed Up Queries Using Projections<a class="hash-link" href="#speedup-with-projections" title="Direct link to heading">​</a></h2><p><a href="/docs/staging3/docs/en/sql-reference/statements/alter/projection">Projections</a> allow to improve queries speed by storing pre-aggregated data.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="build-projection">Build a Projection<a class="hash-link" href="#build-projection" title="Direct link to heading">​</a></h3><p>Create an aggregate projection by dimensions <code>toYear(date)</code>, <code>district</code>, <code>town</code>:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">ADD</span><span class="token plain"> PROJECTION projection_by_year_district_town</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            toYear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            district</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            town</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">avg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">sum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            toYear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            district</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            town</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Populate the projection for existing data (without it projection will be created for only newly inserted data):</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    MATERIALIZE PROJECTION projection_by_year_district_town</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">SETTINGS mutations_sync </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="test-performance">Test Performance<a class="hash-link" href="#test-performance" title="Direct link to heading">​</a></h2><p>Let&#x27;s run the same 3 queries.</p><p><a href="/docs/staging3/docs/en/operations/settings/#allow-experimental-projection-optimization">Enable</a> projections for selects:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SET</span><span class="token plain"> allow_experimental_projection_optimization </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="average-price-projections">Query 1. Average Price Per Year<a class="hash-link" href="#average-price-projections" title="Direct link to heading">​</a></h3><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    toYear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">avg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">80</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ASC</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">┌─year─┬──price─┬─bar(round(avg(price)), 0, 1000000, 80)─┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1995 │  67932 │ █████▍                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1996 │  71505 │ █████▋                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1997 │  78532 │ ██████▎                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1998 │  85436 │ ██████▋                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1999 │  96037 │ ███████▋                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2000 │ 107479 │ ████████▌                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2001 │ 118885 │ █████████▌                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2002 │ 137941 │ ███████████                            │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2003 │ 155889 │ ████████████▍                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2004 │ 178885 │ ██████████████▎                        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2005 │ 189351 │ ███████████████▏                       │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2006 │ 203528 │ ████████████████▎                      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2007 │ 219378 │ █████████████████▌                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2008 │ 217056 │ █████████████████▎                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2009 │ 213419 │ █████████████████                      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2010 │ 236109 │ ██████████████████▊                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2011 │ 232805 │ ██████████████████▌                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2012 │ 238367 │ ███████████████████                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2013 │ 256931 │ ████████████████████▌                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2014 │ 279915 │ ██████████████████████▍                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2015 │ 297266 │ ███████████████████████▋               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2016 │ 313201 │ █████████████████████████              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2017 │ 346097 │ ███████████████████████████▋           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2018 │ 350116 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2019 │ 351013 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2020 │ 369420 │ █████████████████████████████▌         │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2021 │ 386903 │ ██████████████████████████████▊        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────┴────────┴────────────────────────────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="average-price-london-projections">Query 2. Average Price Per Year in London<a class="hash-link" href="#average-price-london-projections" title="Direct link to heading">​</a></h3><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    toYear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">avg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2000000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">WHERE</span><span class="token plain"> town </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;LONDON&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ASC</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">┌─year─┬───price─┬─bar(round(avg(price)), 0, 2000000, 100)───────────────┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1995 │  109116 │ █████▍                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1996 │  118667 │ █████▊                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1997 │  136518 │ ██████▋                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1998 │  152983 │ ███████▋                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 1999 │  180637 │ █████████                                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2000 │  215838 │ ██████████▋                                           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2001 │  232994 │ ███████████▋                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2002 │  263670 │ █████████████▏                                        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2003 │  278394 │ █████████████▊                                        │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2004 │  304666 │ ███████████████▏                                      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2005 │  322875 │ ████████████████▏                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2006 │  356191 │ █████████████████▋                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2007 │  404054 │ ████████████████████▏                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2008 │  420741 │ █████████████████████                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2009 │  427753 │ █████████████████████▍                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2010 │  480306 │ ████████████████████████                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2011 │  496274 │ ████████████████████████▋                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2012 │  519442 │ █████████████████████████▊                            │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2013 │  616212 │ ██████████████████████████████▋                       │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2014 │  724154 │ ████████████████████████████████████▏                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2015 │  792129 │ ███████████████████████████████████████▌              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2016 │  843655 │ ██████████████████████████████████████████▏           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2017 │  982642 │ █████████████████████████████████████████████████▏    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2018 │ 1016835 │ ██████████████████████████████████████████████████▋   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2019 │ 1042849 │ ████████████████████████████████████████████████████▏ │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2020 │ 1011889 │ ██████████████████████████████████████████████████▌   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ 2021 │  960343 │ ████████████████████████████████████████████████      │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────┴─────────┴───────────────────────────────────────────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="most-expensive-neighborhoods-projections">Query 3. The Most Expensive Neighborhoods<a class="hash-link" href="#most-expensive-neighborhoods-projections" title="Direct link to heading">​</a></h3><p>The condition (date &gt;= &#x27;2020-01-01&#x27;) needs to be modified to match projection dimension (toYear(date) &gt;= 2020).</p><p>Query:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    district</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">avg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5000000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">WHERE</span><span class="token plain"> toYear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    district</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">HAVING</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> price </span><span class="token keyword" style="color:rgb(0, 0, 255)">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Result:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">┌─town─────────────────┬─district───────────────┬────c─┬───price─┬─bar(round(avg(price)), 0, 5000000, 100)────────────────────────────┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ CITY OF WESTMINSTER    │ 3606 │ 3280239 │ █████████████████████████████████████████████████████████████████▌ │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ CITY OF LONDON         │  274 │ 3160502 │ ███████████████████████████████████████████████████████████████▏   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ KENSINGTON AND CHELSEA │ 2550 │ 2308478 │ ██████████████████████████████████████████████▏                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LEATHERHEAD          │ ELMBRIDGE              │  114 │ 1897407 │ █████████████████████████████████████▊                             │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ CAMDEN                 │ 3033 │ 1805404 │ ████████████████████████████████████                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ VIRGINIA WATER       │ RUNNYMEDE              │  156 │ 1753247 │ ███████████████████████████████████                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WINDLESHAM           │ SURREY HEATH           │  108 │ 1677613 │ █████████████████████████████████▌                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ THORNTON HEATH       │ CROYDON                │  546 │ 1671721 │ █████████████████████████████████▍                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BARNET               │ ENFIELD                │  124 │ 1505840 │ ██████████████████████████████                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ COBHAM               │ ELMBRIDGE              │  387 │ 1237250 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ ISLINGTON              │ 2668 │ 1236980 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OXFORD               │ SOUTH OXFORDSHIRE      │  321 │ 1220907 │ ████████████████████████▍                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ RICHMOND UPON THAMES   │  704 │ 1215551 │ ████████████████████████▎                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HOUNSLOW               │  671 │ 1207493 │ ████████████████████████▏                                          │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ASCOT                │ WINDSOR AND MAIDENHEAD │  407 │ 1183299 │ ███████████████████████▋                                           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BEACONSFIELD         │ BUCKINGHAMSHIRE        │  330 │ 1175615 │ ███████████████████████▌                                           │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ RICHMOND             │ RICHMOND UPON THAMES   │  874 │ 1110444 │ ██████████████████████▏                                            │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HAMMERSMITH AND FULHAM │ 3086 │ 1053983 │ █████████████████████                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SURBITON             │ ELMBRIDGE              │  100 │ 1011800 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ RADLETT              │ HERTSMERE              │  283 │ 1011712 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SALCOMBE             │ SOUTH HAMS             │  127 │ 1011624 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WEYBRIDGE            │ ELMBRIDGE              │  655 │ 1007265 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ESHER                │ ELMBRIDGE              │  485 │  986581 │ ███████████████████▋                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LEATHERHEAD          │ GUILDFORD              │  202 │  977320 │ ███████████████████▌                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BURFORD              │ WEST OXFORDSHIRE       │  111 │  966893 │ ███████████████████▎                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BROCKENHURST         │ NEW FOREST             │  129 │  956675 │ ███████████████████▏                                               │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HINDHEAD             │ WAVERLEY               │  137 │  953753 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ GERRARDS CROSS       │ BUCKINGHAMSHIRE        │  419 │  951121 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ EAST MOLESEY         │ ELMBRIDGE              │  192 │  936769 │ ██████████████████▋                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CHALFONT ST GILES    │ BUCKINGHAMSHIRE        │  146 │  925515 │ ██████████████████▌                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ TOWER HAMLETS          │ 4388 │  918304 │ ██████████████████▎                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OLNEY                │ MILTON KEYNES          │  235 │  910646 │ ██████████████████▏                                                │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HENLEY-ON-THAMES     │ SOUTH OXFORDSHIRE      │  540 │  902418 │ ██████████████████                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ SOUTHWARK              │ 3885 │  892997 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ KINGSTON UPON THAMES │ KINGSTON UPON THAMES   │  960 │  885969 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ EALING                 │ 2658 │  871755 │ █████████████████▍                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CRANBROOK            │ TUNBRIDGE WELLS        │  431 │  862348 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ MERTON                 │ 2099 │  859118 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BELVEDERE            │ BEXLEY                 │  346 │  842423 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ GUILDFORD            │ WAVERLEY               │  143 │  841277 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HARPENDEN            │ ST ALBANS              │  657 │  841216 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HACKNEY                │ 3307 │  837090 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ WANDSWORTH             │ 6566 │  832663 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MAIDENHEAD           │ BUCKINGHAMSHIRE        │  123 │  824299 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ KINGS LANGLEY        │ DACORUM                │  145 │  821331 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BERKHAMSTED          │ DACORUM                │  543 │  818415 │ ████████████████▎                                                  │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ GREAT MISSENDEN      │ BUCKINGHAMSHIRE        │  226 │  802807 │ ████████████████                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BILLINGSHURST        │ CHICHESTER             │  144 │  797829 │ ███████████████▊                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WOKING               │ GUILDFORD              │  176 │  793494 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ STOCKBRIDGE          │ TEST VALLEY            │  178 │  793269 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ EPSOM                │ REIGATE AND BANSTEAD   │  172 │  791862 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TONBRIDGE            │ TUNBRIDGE WELLS        │  360 │  787876 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TEDDINGTON           │ RICHMOND UPON THAMES   │  595 │  786492 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TWICKENHAM           │ RICHMOND UPON THAMES   │ 1155 │  786193 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LYNDHURST            │ NEW FOREST             │  102 │  785593 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ LAMBETH                │ 5228 │  774574 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ BARNET                 │ 3955 │  773259 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OXFORD               │ VALE OF WHITE HORSE    │  353 │  772088 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TONBRIDGE            │ MAIDSTONE              │  305 │  770740 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LUTTERWORTH          │ HARBOROUGH             │  538 │  768634 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WOODSTOCK            │ WEST OXFORDSHIRE       │  140 │  766037 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MIDHURST             │ CHICHESTER             │  257 │  764815 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MARLOW               │ BUCKINGHAMSHIRE        │  327 │  761876 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ NEWHAM                 │ 3237 │  761784 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ALDERLEY EDGE        │ CHESHIRE EAST          │  178 │  757318 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LUTON                │ CENTRAL BEDFORDSHIRE   │  212 │  754283 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ PETWORTH             │ CHICHESTER             │  154 │  754220 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ALRESFORD            │ WINCHESTER             │  219 │  752718 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ POTTERS BAR          │ WELWYN HATFIELD        │  174 │  748465 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HASLEMERE            │ CHICHESTER             │  128 │  746907 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ TADWORTH             │ REIGATE AND BANSTEAD   │  502 │  743252 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ THAMES DITTON        │ ELMBRIDGE              │  244 │  741913 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ REIGATE              │ REIGATE AND BANSTEAD   │  581 │  738198 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BOURNE END           │ BUCKINGHAMSHIRE        │  138 │  735190 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SEVENOAKS            │ SEVENOAKS              │ 1156 │  730018 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ OXTED                │ TANDRIDGE              │  336 │  729123 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ INGATESTONE          │ BRENTWOOD              │  166 │  728103 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ BRENT                  │ 2079 │  720605 │ ██████████████▍                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ LONDON               │ HARINGEY               │ 3216 │  717780 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ PURLEY               │ CROYDON                │  575 │  716108 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WELWYN               │ WELWYN HATFIELD        │  222 │  710603 │ ██████████████▏                                                    │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ RICKMANSWORTH        │ THREE RIVERS           │  798 │  704571 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BANSTEAD             │ REIGATE AND BANSTEAD   │  401 │  701293 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CHIGWELL             │ EPPING FOREST          │  261 │  701203 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ PINNER               │ HARROW                 │  528 │  698885 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HASLEMERE            │ WAVERLEY               │  280 │  696659 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ SLOUGH               │ BUCKINGHAMSHIRE        │  396 │  694917 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WALTON-ON-THAMES     │ ELMBRIDGE              │  946 │  692395 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ READING              │ SOUTH OXFORDSHIRE      │  318 │  691988 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ NORTHWOOD            │ HILLINGDON             │  271 │  690643 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ FELTHAM              │ HOUNSLOW               │  763 │  688595 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ASHTEAD              │ MOLE VALLEY            │  303 │  687923 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ BARNET               │ BARNET                 │  975 │  686980 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ WOKING               │ SURREY HEATH           │  283 │  686669 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MALMESBURY           │ WILTSHIRE              │  323 │  683324 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ AMERSHAM             │ BUCKINGHAMSHIRE        │  496 │  680962 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CHISLEHURST          │ BROMLEY                │  430 │  680209 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ HYTHE                │ FOLKESTONE AND HYTHE   │  490 │  676908 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ MAYFIELD             │ WEALDEN                │  101 │  676210 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ ASCOT                │ BRACKNELL FOREST       │  168 │  676004 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────────────────────┴────────────────────────┴──────┴─────────┴────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h3><p>All 3 queries work much faster and read fewer rows.</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">Query 1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">no projection: 27 rows in set. Elapsed: 0.158 sec. Processed 26.32 million rows, 157.93 MB (166.57 million rows/s., 999.39 MB/s.)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   projection: 27 rows in set. Elapsed: 0.007 sec. Processed 105.96 thousand rows, 3.33 MB (14.58 million rows/s., 458.13 MB/s.)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Query 2</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">no projection: 27 rows in set. Elapsed: 0.163 sec. Processed 26.32 million rows, 80.01 MB (161.75 million rows/s., 491.64 MB/s.)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   projection: 27 rows in set. Elapsed: 0.008 sec. Processed 105.96 thousand rows, 3.67 MB (13.29 million rows/s., 459.89 MB/s.)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Query 3</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">no projection: 100 rows in set. Elapsed: 0.069 sec. Processed 26.32 million rows, 62.47 MB (382.13 million rows/s., 906.93 MB/s.)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   projection: 100 rows in set. Elapsed: 0.029 sec. Processed 8.08 thousand rows, 511.08 KB (276.06 thousand rows/s., 17.47 MB/s.)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="playground">Test It in Playground<a class="hash-link" href="#playground" title="Direct link to heading">​</a></h3><p>The dataset is also available in the <a href="https://gh-api.clickhouse.com/play?user=play#U0VMRUNUIHRvd24sIGRpc3RyaWN0LCBjb3VudCgpIEFTIGMsIHJvdW5kKGF2ZyhwcmljZSkpIEFTIHByaWNlLCBiYXIocHJpY2UsIDAsIDUwMDAwMDAsIDEwMCkgRlJPTSB1a19wcmljZV9wYWlkIFdIRVJFIGRhdGUgPj0gJzIwMjAtMDEtMDEnIEdST1VQIEJZIHRvd24sIGRpc3RyaWN0IEhBVklORyBjID49IDEwMCBPUkRFUiBCWSBwcmljZSBERVNDIExJTUlUIDEwMA==" target="_blank" rel="noopener noreferrer">Online Playground</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/staging3/docs/en/example-datasets/star-schema"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Star Schema Benchmark</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/staging3/docs/en/example-datasets/wikistat"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">WikiStat</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#download-dataset" class="table-of-contents__link toc-highlight">Download the Dataset</a></li><li><a href="#create-table" class="table-of-contents__link toc-highlight">Create the Table</a></li><li><a href="#preprocess-import-data" class="table-of-contents__link toc-highlight">Preprocess and Import Data</a></li><li><a href="#validate-data" class="table-of-contents__link toc-highlight">Validate the Data</a></li><li><a href="#run-queries" class="table-of-contents__link toc-highlight">Run Some Queries</a><ul><li><a href="#average-price" class="table-of-contents__link toc-highlight">Query 1. Average Price Per Year</a></li><li><a href="#average-price-london" class="table-of-contents__link toc-highlight">Query 2. Average Price per Year in London</a></li><li><a href="#most-expensive-neighborhoods" class="table-of-contents__link toc-highlight">Query 3. The Most Expensive Neighborhoods</a></li></ul></li><li><a href="#speedup-with-projections" class="table-of-contents__link toc-highlight">Let&#39;s Speed Up Queries Using Projections</a><ul><li><a href="#build-projection" class="table-of-contents__link toc-highlight">Build a Projection</a></li></ul></li><li><a href="#test-performance" class="table-of-contents__link toc-highlight">Test Performance</a><ul><li><a href="#average-price-projections" class="table-of-contents__link toc-highlight">Query 1. Average Price Per Year</a></li><li><a href="#average-price-london-projections" class="table-of-contents__link toc-highlight">Query 2. Average Price Per Year in London</a></li><li><a href="#most-expensive-neighborhoods-projections" class="table-of-contents__link toc-highlight">Query 3. The Most Expensive Neighborhoods</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#playground" class="table-of-contents__link toc-highlight">Test It in Playground</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ClickHouse</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://clickhouse.com/cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ClickHouse as a Service</a></li><li class="footer__item"><a href="https://clickhouse.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://clickhouse.com/learn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn ClickHouse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://clickhouse.com/blog/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/clickhousedb/shared_invite/zt-rxm3rdrk-lIUmhLC3V8WTaL0TGxsOmg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Policies</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/legal/trademark-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/docs/staging3/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/docs/staging3/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></div><div class="footer__copyright">Copyright © 2016 - 2022 ClickHouse, Inc. ClickHouse Docs provided under the Creative Commons CC BY-NC-SA license. ClickHouse is a registered trademark of ClickHouse, Inc.</div></div></div></footer></div>
<script src="/docs/staging3/assets/js/runtime~main.1413fc46.js"></script>
<script src="/docs/staging3/assets/js/main.6120f71b.js"></script>
</body>
</html>
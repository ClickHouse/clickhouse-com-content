"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[18565],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return d}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=p(n),d=r,k=c["".concat(o,".").concat(d)]||c[d]||u[d]||s;return n?a.createElement(k,l(l({ref:t},m),{},{components:n})):a.createElement(k,l({ref:t},m))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,l=new Array(s);l[0]=c;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<s;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},17951:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return u}});var a=n(87462),r=n(63366),s=(n(67294),n(3905)),l=["components"],i={sidebar_position:32,sidebar_label:"SELECT"},o="SELECT Query",p={unversionedId:"en/sql-reference/statements/select/index",id:"en/sql-reference/statements/select/index",title:"SELECT Query",description:"SELECT queries perform data retrieval. By default, the requested data is returned to the client, while in conjunction with INSERT INTO it can be forwarded to a different table.",source:"@site/docs/en/sql-reference/statements/select/index.md",sourceDirName:"en/sql-reference/statements/select",slug:"/en/sql-reference/statements/select/",permalink:"/docs/staging3/docs/en/sql-reference/statements/select/",tags:[],version:"current",sidebarPosition:32,frontMatter:{sidebar_position:32,sidebar_label:"SELECT"},sidebar:"tutorialSidebar",previous:{title:"Statements",permalink:"/docs/staging3/docs/en/sql-reference/statements/"},next:{title:"ALL",permalink:"/docs/staging3/docs/en/sql-reference/statements/select/all"}},m={},u=[{value:"Syntax",id:"syntax",level:2},{value:"SELECT Clause",id:"select-clause",level:2},{value:"COLUMNS expression",id:"columns-expression",level:3},{value:"Asterisk",id:"asterisk",level:3},{value:"Extreme Values",id:"extreme-values",level:3},{value:"Notes",id:"notes",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"SELECT modifiers",id:"select-modifiers",level:2},{value:"APPLY",id:"apply-modifier",level:3},{value:"EXCEPT",id:"except-modifier",level:3},{value:"REPLACE",id:"replace-modifier",level:3},{value:"Modifier Combinations",id:"modifier-combinations",level:3},{value:"SETTINGS in SELECT Query",id:"settings-in-select",level:2}],c={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,l);return(0,s.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"select-query"},"SELECT Query"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"SELECT")," queries perform data retrieval. By default, the requested data is returned to the client, while in conjunction with ",(0,s.kt)("a",{parentName:"p",href:"/docs/staging3/docs/en/sql-reference/statements/insert-into"},"INSERT INTO")," it can be forwarded to a different table."),(0,s.kt)("h2",{id:"syntax"},"Syntax"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"[WITH expr_list|(subquery)]\nSELECT [DISTINCT [ON (column1, column2, ...)]] expr_list\n[FROM [db.]table | (subquery) | table_function] [FINAL]\n[SAMPLE sample_coeff]\n[ARRAY JOIN ...]\n[GLOBAL] [ANY|ALL|ASOF] [INNER|LEFT|RIGHT|FULL|CROSS] [OUTER|SEMI|ANTI] JOIN (subquery)|table (ON <expr_list>)|(USING <column_list>)\n[PREWHERE expr]\n[WHERE expr]\n[GROUP BY expr_list] [WITH ROLLUP|WITH CUBE] [WITH TOTALS]\n[HAVING expr]\n[ORDER BY expr_list] [WITH FILL] [FROM expr] [TO expr] [STEP expr]\n[LIMIT [offset_value, ]n BY columns]\n[LIMIT [n, ]m] [WITH TIES]\n[SETTINGS ...]\n[UNION  ...]\n[INTO OUTFILE filename [COMPRESSION type] ]\n[FORMAT format]\n")),(0,s.kt)("p",null,"All clauses are optional, except for the required list of expressions immediately after ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT")," which is covered in more detail ",(0,s.kt)("a",{parentName:"p",href:"#select-clause"},"below"),"."),(0,s.kt)("p",null,"Specifics of each optional clause are covered in separate sections, which are listed in the same order as they are executed:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/with"},"WITH clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#select-clause"},"SELECT clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/distinct"},"DISTINCT clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/from"},"FROM clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/sample"},"SAMPLE clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/join"},"JOIN clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/prewhere"},"PREWHERE clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/where"},"WHERE clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/group-by"},"GROUP BY clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/limit-by"},"LIMIT BY clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/having"},"HAVING clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/limit"},"LIMIT clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/offset"},"OFFSET clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/union"},"UNION clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/intersect"},"INTERSECT clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/except"},"EXCEPT clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/into-outfile"},"INTO OUTFILE clause")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/staging3/docs/en/sql-reference/statements/select/format"},"FORMAT clause"))),(0,s.kt)("h2",{id:"select-clause"},"SELECT Clause"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"/docs/staging3/docs/en/sql-reference/syntax#syntax-expressions"},"Expressions")," specified in the ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT")," clause are calculated after all the operations in the clauses described above are finished. These expressions work as if they apply to separate rows in the result. If expressions in the ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT")," clause contain aggregate functions, then ClickHouse processes aggregate functions and expressions used as their arguments during the ",(0,s.kt)("a",{parentName:"p",href:"/docs/staging3/docs/en/sql-reference/statements/select/group-by"},"GROUP BY")," aggregation."),(0,s.kt)("p",null,"If you want to include all columns in the result, use the asterisk (",(0,s.kt)("inlineCode",{parentName:"p"},"*"),") symbol. For example, ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT * FROM ..."),"."),(0,s.kt)("h3",{id:"columns-expression"},"COLUMNS expression"),(0,s.kt)("p",null,"To match some columns in the result with a ",(0,s.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/RE2_(software)"},"re2")," regular expression, you can use the ",(0,s.kt)("inlineCode",{parentName:"p"},"COLUMNS")," expression."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"COLUMNS('regexp')\n")),(0,s.kt)("p",null,"For example, consider the table:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE default.col_names (aa Int8, ab Int8, bc Int8) ENGINE = TinyLog\n")),(0,s.kt)("p",null,"The following query selects data from all the columns containing the ",(0,s.kt)("inlineCode",{parentName:"p"},"a")," symbol in their name."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT COLUMNS('a') FROM col_names\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500aa\u2500\u252c\u2500ab\u2500\u2510\n\u2502  1 \u2502  1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2518\n")),(0,s.kt)("p",null,"The selected columns are returned not in the alphabetical order."),(0,s.kt)("p",null,"You can use multiple ",(0,s.kt)("inlineCode",{parentName:"p"},"COLUMNS")," expressions in a query and apply functions to them."),(0,s.kt)("p",null,"For example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT COLUMNS('a'), COLUMNS('c'), toTypeName(COLUMNS('c')) FROM col_names\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500aa\u2500\u252c\u2500ab\u2500\u252c\u2500bc\u2500\u252c\u2500toTypeName(bc)\u2500\u2510\n\u2502  1 \u2502  1 \u2502  1 \u2502 Int8           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,s.kt)("p",null,"Each column returned by the ",(0,s.kt)("inlineCode",{parentName:"p"},"COLUMNS")," expression is passed to the function as a separate argument. Also you can pass other arguments to the function if it supports them. Be careful when using functions. If a function does not support the number of arguments you have passed to it, ClickHouse throws an exception."),(0,s.kt)("p",null,"For example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT COLUMNS('a') + COLUMNS('c') FROM col_names\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},"Received exception from server (version 19.14.1):\nCode: 42. DB::Exception: Received from localhost:9000. DB::Exception: Number of arguments for function plus does not match: passed 3, should be 2.\n")),(0,s.kt)("p",null,"In this example, ",(0,s.kt)("inlineCode",{parentName:"p"},"COLUMNS('a')")," returns two columns: ",(0,s.kt)("inlineCode",{parentName:"p"},"aa")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"ab"),". ",(0,s.kt)("inlineCode",{parentName:"p"},"COLUMNS('c')")," returns the ",(0,s.kt)("inlineCode",{parentName:"p"},"bc")," column. The ",(0,s.kt)("inlineCode",{parentName:"p"},"+")," operator can\u2019t apply to 3 arguments, so ClickHouse throws an exception with the relevant message."),(0,s.kt)("p",null,"Columns that matched the ",(0,s.kt)("inlineCode",{parentName:"p"},"COLUMNS")," expression can have different data types. If ",(0,s.kt)("inlineCode",{parentName:"p"},"COLUMNS")," does not match any columns and is the only expression in ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT"),", ClickHouse throws an exception."),(0,s.kt)("h3",{id:"asterisk"},"Asterisk"),(0,s.kt)("p",null,"You can put an asterisk in any part of a query instead of an expression. When the query is analyzed, the asterisk is expanded to a list of all table columns (excluding the ",(0,s.kt)("inlineCode",{parentName:"p"},"MATERIALIZED")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"ALIAS")," columns). There are only a few cases when using an asterisk is justified:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"When creating a table dump."),(0,s.kt)("li",{parentName:"ul"},"For tables containing just a few columns, such as system tables."),(0,s.kt)("li",{parentName:"ul"},"For getting information about what columns are in a table. In this case, set ",(0,s.kt)("inlineCode",{parentName:"li"},"LIMIT 1"),". But it is better to use the ",(0,s.kt)("inlineCode",{parentName:"li"},"DESC TABLE")," query."),(0,s.kt)("li",{parentName:"ul"},"When there is strong filtration on a small number of columns using ",(0,s.kt)("inlineCode",{parentName:"li"},"PREWHERE"),"."),(0,s.kt)("li",{parentName:"ul"},"In subqueries (since columns that aren\u2019t needed for the external query are excluded from subqueries).")),(0,s.kt)("p",null,"In all other cases, we do not recommend using the asterisk, since it only gives you the drawbacks of a columnar DBMS instead of the advantages. In other words using the asterisk is not recommended."),(0,s.kt)("h3",{id:"extreme-values"},"Extreme Values"),(0,s.kt)("p",null,"In addition to results, you can also get minimum and maximum values for the results columns. To do this, set the ",(0,s.kt)("strong",{parentName:"p"},"extremes")," setting to 1. Minimums and maximums are calculated for numeric types, dates, and dates with times. For other columns, the default values are output."),(0,s.kt)("p",null,"An extra two rows are calculated \u2013 the minimums and maximums, respectively. These extra two rows are output in ",(0,s.kt)("inlineCode",{parentName:"p"},"JSON*"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"TabSeparated*"),", and ",(0,s.kt)("inlineCode",{parentName:"p"},"Pretty*")," ",(0,s.kt)("a",{parentName:"p",href:"/docs/staging3/docs/en/interfaces/formats"},"formats"),", separate from the other rows. They are not output for other formats."),(0,s.kt)("p",null,"In ",(0,s.kt)("inlineCode",{parentName:"p"},"JSON*")," formats, the extreme values are output in a separate \u2018extremes\u2019 field. In ",(0,s.kt)("inlineCode",{parentName:"p"},"TabSeparated*")," formats, the row comes after the main result, and after \u2018totals\u2019 if present. It is preceded by an empty row (after the other data). In ",(0,s.kt)("inlineCode",{parentName:"p"},"Pretty*")," formats, the row is output as a separate table after the main result, and after ",(0,s.kt)("inlineCode",{parentName:"p"},"totals")," if present."),(0,s.kt)("p",null,"Extreme values are calculated for rows before ",(0,s.kt)("inlineCode",{parentName:"p"},"LIMIT"),", but after ",(0,s.kt)("inlineCode",{parentName:"p"},"LIMIT BY"),". However, when using ",(0,s.kt)("inlineCode",{parentName:"p"},"LIMIT offset, size"),", the rows before ",(0,s.kt)("inlineCode",{parentName:"p"},"offset")," are included in ",(0,s.kt)("inlineCode",{parentName:"p"},"extremes"),". In stream requests, the result may also include a small number of rows that passed through ",(0,s.kt)("inlineCode",{parentName:"p"},"LIMIT"),"."),(0,s.kt)("h3",{id:"notes"},"Notes"),(0,s.kt)("p",null,"You can use synonyms (",(0,s.kt)("inlineCode",{parentName:"p"},"AS")," aliases) in any part of a query."),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"GROUP BY"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"ORDER BY"),", and ",(0,s.kt)("inlineCode",{parentName:"p"},"LIMIT BY")," clauses can support positional arguments. To enable this, switch on the ",(0,s.kt)("a",{parentName:"p",href:"/docs/staging3/docs/en/operations/settings/#enable-positional-arguments"},"enable_positional_arguments")," setting. Then, for example, ",(0,s.kt)("inlineCode",{parentName:"p"},"ORDER BY 1,2")," will be sorting rows in the table on the first and then the second column."),(0,s.kt)("h2",{id:"implementation-details"},"Implementation Details"),(0,s.kt)("p",null,"If the query omits the ",(0,s.kt)("inlineCode",{parentName:"p"},"DISTINCT"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"GROUP BY")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"ORDER BY")," clauses and the ",(0,s.kt)("inlineCode",{parentName:"p"},"IN")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"JOIN")," subqueries, the query will be completely stream processed, using O(1) amount of RAM. Otherwise, the query might consume a lot of RAM if the appropriate restrictions are not specified:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_memory_usage")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_rows_to_group_by")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_rows_to_sort")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_rows_in_distinct")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_bytes_in_distinct")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_rows_in_set")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_bytes_in_set")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_rows_in_join")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_bytes_in_join")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_bytes_before_external_sort")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max_bytes_before_external_group_by"))),(0,s.kt)("p",null,"For more information, see the section \u201cSettings\u201d. It is possible to use external sorting (saving temporary tables to a disk) and external aggregation."),(0,s.kt)("h2",{id:"select-modifiers"},"SELECT modifiers"),(0,s.kt)("p",null,"You can use the following modifiers in ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT")," queries."),(0,s.kt)("h3",{id:"apply-modifier"},"APPLY"),(0,s.kt)("p",null,"Allows you to invoke some function for each row returned by an outer table expression of a query."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Syntax:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT <expr> APPLY( <func> ) FROM [db.]table_name\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Example:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE columns_transformers (i Int64, j Int16, k Int64) ENGINE = MergeTree ORDER by (i);\nINSERT INTO columns_transformers VALUES (100, 10, 324), (120, 8, 23);\nSELECT * APPLY(sum) FROM columns_transformers;\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"\u250c\u2500sum(i)\u2500\u252c\u2500sum(j)\u2500\u252c\u2500sum(k)\u2500\u2510\n\u2502    220 \u2502     18 \u2502    347 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,s.kt)("h3",{id:"except-modifier"},"EXCEPT"),(0,s.kt)("p",null,"Specifies the names of one or more columns to exclude from the result. All matching column names are omitted from the output."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Syntax:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT <expr> EXCEPT ( col_name1 [, col_name2, col_name3, ...] ) FROM [db.]table_name\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Example:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * EXCEPT (i) from columns_transformers;\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"\u250c\u2500\u2500j\u2500\u252c\u2500\u2500\u2500k\u2500\u2510\n\u2502 10 \u2502 324 \u2502\n\u2502  8 \u2502  23 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,s.kt)("h3",{id:"replace-modifier"},"REPLACE"),(0,s.kt)("p",null,"Specifies one or more ",(0,s.kt)("a",{parentName:"p",href:"/docs/staging3/docs/en/sql-reference/syntax#syntax-expression_aliases"},"expression aliases"),". Each alias must match a column name from the ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT *")," statement. In the output column list, the column that matches the alias is replaced by the expression in that ",(0,s.kt)("inlineCode",{parentName:"p"},"REPLACE"),"."),(0,s.kt)("p",null,"This modifier does not change the names or order of columns. However, it can change the value and the value type."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Syntax:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT <expr> REPLACE( <expr> AS col_name) from [db.]table_name\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Example:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * REPLACE(i + 1 AS i) from columns_transformers;\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"\u250c\u2500\u2500\u2500i\u2500\u252c\u2500\u2500j\u2500\u252c\u2500\u2500\u2500k\u2500\u2510\n\u2502 101 \u2502 10 \u2502 324 \u2502\n\u2502 121 \u2502  8 \u2502  23 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,s.kt)("h3",{id:"modifier-combinations"},"Modifier Combinations"),(0,s.kt)("p",null,"You can use each modifier separately or combine them."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Examples:")),(0,s.kt)("p",null,"Using the same modifier multiple times."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT COLUMNS('[jk]') APPLY(toString) APPLY(length) APPLY(max) from columns_transformers;\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"\u250c\u2500max(length(toString(j)))\u2500\u252c\u2500max(length(toString(k)))\u2500\u2510\n\u2502                        2 \u2502                        3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,s.kt)("p",null,"Using multiple modifiers in a single query."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * REPLACE(i + 1 AS i) EXCEPT (j) APPLY(sum) from columns_transformers;\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"\u250c\u2500sum(plus(i, 1))\u2500\u252c\u2500sum(k)\u2500\u2510\n\u2502             222 \u2502    347 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,s.kt)("h2",{id:"settings-in-select"},"SETTINGS in SELECT Query"),(0,s.kt)("p",null,"You can specify the necessary settings right in the ",(0,s.kt)("inlineCode",{parentName:"p"},"SELECT")," query. The setting value is applied only to this query and is reset to default or previous value after the query is executed."),(0,s.kt)("p",null,"Other ways to make settings see ",(0,s.kt)("a",{parentName:"p",href:"/docs/staging3/docs/en/operations/settings/index"},"here"),"."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Example")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM some_table SETTINGS optimize_read_in_order=1, cast_keep_nullable=1;\n")),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/en/sql-reference/statements/select/"},"Original article")))}d.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[15568],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return d}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(t),d=r,h=c["".concat(s,".").concat(d)]||c[d]||m[d]||o;return t?a.createElement(h,l(l({ref:n},p),{},{components:t})):a.createElement(h,l({ref:n},p))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=c;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=t[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},97291:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return m}});var a=t(87462),r=t(63366),o=(t(67294),t(3905)),l=["components"],i={sidebar_position:50,sidebar_label:"Enum"},s="Enum",u={unversionedId:"en/sql-reference/data-types/enum",id:"en/sql-reference/data-types/enum",title:"Enum",description:"enum}",source:"@site/docs/en/sql-reference/data-types/enum.md",sourceDirName:"en/sql-reference/data-types",slug:"/en/sql-reference/data-types/enum",permalink:"/docs/testing/docs/en/sql-reference/data-types/enum",tags:[],version:"current",sidebarPosition:50,frontMatter:{sidebar_position:50,sidebar_label:"Enum"},sidebar:"tutorialSidebar",previous:{title:"DateTime64",permalink:"/docs/testing/docs/en/sql-reference/data-types/datetime64"},next:{title:"LowCardinality",permalink:"/docs/testing/docs/en/sql-reference/data-types/lowcardinality"}},p={},m=[{value:"Usage Examples",id:"usage-examples",level:2},{value:"General Rules and Usage",id:"general-rules-and-usage",level:2}],c={toc:m};function d(e){var n=e.components,t=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"enum"},"Enum"),(0,o.kt)("p",null,"Enumerated type consisting of named values."),(0,o.kt)("p",null,"Named values must be declared as ",(0,o.kt)("inlineCode",{parentName:"p"},"'string' = integer")," pairs. ClickHouse stores only numbers, but supports operations with the values through their names."),(0,o.kt)("p",null,"ClickHouse supports:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"8-bit ",(0,o.kt)("inlineCode",{parentName:"li"},"Enum"),". It can contain up to 256 values enumerated in the ",(0,o.kt)("inlineCode",{parentName:"li"},"[-128, 127]")," range."),(0,o.kt)("li",{parentName:"ul"},"16-bit ",(0,o.kt)("inlineCode",{parentName:"li"},"Enum"),". It can contain up to 65536 values enumerated in the ",(0,o.kt)("inlineCode",{parentName:"li"},"[-32768, 32767]")," range.")),(0,o.kt)("p",null,"ClickHouse automatically chooses the type of ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," when data is inserted. You can also use ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum8")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum16")," types to be sure in the size of storage."),(0,o.kt)("h2",{id:"usage-examples"},"Usage Examples"),(0,o.kt)("p",null,"Here we create a table with an ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum8('hello' = 1, 'world' = 2)")," type column:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE t_enum\n(\n    x Enum('hello' = 1, 'world' = 2)\n)\nENGINE = TinyLog\n")),(0,o.kt)("p",null,"Column ",(0,o.kt)("inlineCode",{parentName:"p"},"x")," can only store values that are listed in the type definition: ",(0,o.kt)("inlineCode",{parentName:"p"},"'hello'")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"'world'"),". If you try to save any other value, ClickHouse will raise an exception. 8-bit size for this ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," is chosen automatically."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO t_enum VALUES ('hello'), ('world'), ('hello')\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Ok.\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO t_enum values('a')\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Exception on client:\nCode: 49. DB::Exception: Unknown element 'a' for type Enum('hello' = 1, 'world' = 2)\n")),(0,o.kt)("p",null,"When you query data from the table, ClickHouse outputs the string values from ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM t_enum\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500x\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 hello \u2502\n\u2502 world \u2502\n\u2502 hello \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,o.kt)("p",null,"If you need to see the numeric equivalents of the rows, you must cast the ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," value to integer type."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT CAST(x, 'Int8') FROM t_enum\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500CAST(x, 'Int8')\u2500\u2510\n\u2502               1 \u2502\n\u2502               2 \u2502\n\u2502               1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,o.kt)("p",null,"To create an Enum value in a query, you also need to use ",(0,o.kt)("inlineCode",{parentName:"p"},"CAST"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT toTypeName(CAST('a', 'Enum(\\'a\\' = 1, \\'b\\' = 2)'))\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500toTypeName(CAST('a', 'Enum(\\'a\\' = 1, \\'b\\' = 2)'))\u2500\u2510\n\u2502 Enum8('a' = 1, 'b' = 2)                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,o.kt)("h2",{id:"general-rules-and-usage"},"General Rules and Usage"),(0,o.kt)("p",null,"Each of the values is assigned a number in the range ",(0,o.kt)("inlineCode",{parentName:"p"},"-128 ... 127")," for ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum8")," or in the range ",(0,o.kt)("inlineCode",{parentName:"p"},"-32768 ... 32767")," for ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum16"),". All the strings and numbers must be different. An empty string is allowed. If this type is specified (in a table definition), numbers can be in an arbitrary order. However, the order does not matter."),(0,o.kt)("p",null,"Neither the string nor the numeric value in an ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," can be ",(0,o.kt)("a",{parentName:"p",href:"/docs/testing/docs/en/sql-reference/syntax"},"NULL"),"."),(0,o.kt)("p",null,"An ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," can be contained in ",(0,o.kt)("a",{parentName:"p",href:"/docs/testing/docs/en/sql-reference/data-types/nullable"},"Nullable")," type. So if you create a table using the query"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE t_enum_nullable\n(\n    x Nullable( Enum8('hello' = 1, 'world' = 2) )\n)\nENGINE = TinyLog\n")),(0,o.kt)("p",null,"it can store not only ",(0,o.kt)("inlineCode",{parentName:"p"},"'hello'")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"'world'"),", but ",(0,o.kt)("inlineCode",{parentName:"p"},"NULL"),", as well."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO t_enum_nullable Values('hello'),('world'),(NULL)\n")),(0,o.kt)("p",null,"In RAM, an ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," column is stored in the same way as ",(0,o.kt)("inlineCode",{parentName:"p"},"Int8")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Int16")," of the corresponding numerical values."),(0,o.kt)("p",null,"When reading in text form, ClickHouse parses the value as a string and searches for the corresponding string from the set of Enum values. If it is not found, an exception is thrown. When reading in text format, the string is read and the corresponding numeric value is looked up. An exception will be thrown if it is not found.\nWhen writing in text form, it writes the value as the corresponding string. If column data contains garbage (numbers that are not from the valid set), an exception is thrown. When reading and writing in binary form, it works the same way as for Int8 and Int16 data types.\nThe implicit default value is the value with the lowest number."),(0,o.kt)("p",null,"During ",(0,o.kt)("inlineCode",{parentName:"p"},"ORDER BY"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"GROUP BY"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"IN"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"DISTINCT")," and so on, Enums behave the same way as the corresponding numbers. For example, ORDER BY sorts them numerically. Equality and comparison operators work the same way on Enums as they do on the underlying numeric values."),(0,o.kt)("p",null,"Enum values cannot be compared with numbers. Enums can be compared to a constant string. If the string compared to is not a valid value for the Enum, an exception will be thrown. The IN operator is supported with the Enum on the left-hand side and a set of strings on the right-hand side. The strings are the values of the corresponding Enum."),(0,o.kt)("p",null,"Most numeric and string operations are not defined for Enum values, e.g.\xa0adding a number to an Enum or concatenating a string to an Enum.\nHowever, the Enum has a natural ",(0,o.kt)("inlineCode",{parentName:"p"},"toString")," function that returns its string value."),(0,o.kt)("p",null,"Enum values are also convertible to numeric types using the ",(0,o.kt)("inlineCode",{parentName:"p"},"toT")," function, where T is a numeric type. When T corresponds to the enum\u2019s underlying numeric type, this conversion is zero-cost.\nThe Enum type can be changed without cost using ALTER, if only the set of values is changed. It is possible to both add and remove members of the Enum using ALTER (removing is safe only if the removed value has never been used in the table). As a safeguard, changing the numeric value of a previously defined Enum member will throw an exception."),(0,o.kt)("p",null,"Using ALTER, it is possible to change an Enum8 to an Enum16 or vice versa, just like changing an Int8 to Int16."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/en/data_types/enum/"},"Original article")," "))}d.isMDXComponent=!0}}]);
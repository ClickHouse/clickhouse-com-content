<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-en/whats-new/changelog/2019">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">2019 | ClickHouse Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://clickhouse.com//docs/testing/docs/en/whats-new/changelog/2019"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="2019 | ClickHouse Docs"><meta data-rh="true" name="description" content="ClickHouse Release 19.17"><meta data-rh="true" property="og:description" content="ClickHouse Release 19.17"><link data-rh="true" rel="icon" href="/docs/testing/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com//docs/testing/docs/en/whats-new/changelog/2019"><link data-rh="true" rel="alternate" href="https://clickhouse.com//docs/testing/docs/en/whats-new/changelog/2019" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com//docs/testing/docs/en/whats-new/changelog/2019" hreflang="x-default"><link rel="stylesheet" href="/docs/testing/assets/css/styles.d9a90f5c.css">
<link rel="preload" href="/docs/testing/assets/js/runtime~main.6602212c.js" as="script">
<link rel="preload" href="/docs/testing/assets/js/main.b12ab45e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/testing/docs/"><div class="navbar__logo"><img src="/docs/testing/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/testing/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">ClickHouse</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/testing/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/docs/testing/docs/"><img src="/docs/testing/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/testing/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"><b>ClickHouse</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/testing/docs/intro">What is ClickHouse?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/testing/docs/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/testing/docs/tutorial">Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/testing/docs/connect-a-ui">Connect a UI</a><button aria-label="Toggle the collapsible sidebar category &#x27;Connect a UI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/testing/docs/category/integrations">Integrations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/testing/docs/guides">User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/testing/docs/en">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/getting-started/install">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/getting-started/playground">Playground</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/testing/docs/en/example-datasets">Example Datasets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Example Datasets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/testing/docs/en/sql-reference/">SQL Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/testing/docs/en/table-engines">Database &amp; Table Engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Database &amp; Table Engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/testing/docs/en/interfaces/">Interfaces</a><button aria-label="Toggle the collapsible sidebar category &#x27;Interfaces&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/testing/docs/en/operations/">Operations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/testing/docs/category/building-clickhouse">Building ClickHouse</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building ClickHouse&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/testing/docs/en/whats-new/">What&#x27;s New</a><button aria-label="Toggle the collapsible sidebar category &#x27;What&#x27;s New&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/testing/docs/en/whats-new/changelog/">Changelog</a><button aria-label="Toggle the collapsible sidebar category &#x27;Changelog&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/whats-new/changelog/2021">2021</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/whats-new/changelog/2020">2020</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/testing/docs/en/whats-new/changelog/2019">2019</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/whats-new/changelog/2018">2018</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/whats-new/changelog/2017">2017</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/whats-new/security-changelog">Security Changelog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/docs/en/whats-new/roadmap">Roadmap</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/testing/docs/faq/">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/testing/docs/about-us">About Us</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Us&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/testing/docs/en"><span itemprop="name">Reference Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/testing/docs/en/whats-new/"><span itemprop="name">What&#x27;s New</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/testing/docs/en/whats-new/changelog/"><span itemprop="name">Changelog</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">2019</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>2019</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v19-17">ClickHouse Release 19.17<a class="hash-link" href="#clickhouse-release-v19-17" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v19-17-6-36-2019-12-27">ClickHouse Release 19.17.6.36, 2019-12-27<a class="hash-link" href="#clickhouse-release-v19-17-6-36-2019-12-27" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix">Bug Fix<a class="hash-link" href="#bug-fix" title="Direct link to heading">​</a></h4><ul><li>Fixed potential buffer overflow in decompress. Malicious user can pass fabricated compressed data that could cause read after buffer. This issue was found by Eldar Zaitov from Yandex information security team. <a href="https://github.com/ClickHouse/ClickHouse/pull/8404" target="_blank" rel="noopener noreferrer">#8404</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed possible server crash (<code>std::terminate</code>) when the server cannot send or write data in JSON or XML format with values of String data type (that require UTF-8 validation) or when compressing result data with Brotli algorithm or in some other rare cases. <a href="https://github.com/ClickHouse/ClickHouse/pull/8384" target="_blank" rel="noopener noreferrer">#8384</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed dictionaries with source from a clickhouse <code>VIEW</code>, now reading such dictionaries does not cause the error <code>There is no query</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8351" target="_blank" rel="noopener noreferrer">#8351</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fixed checking if a client host is allowed by host_regexp specified in users.xml. <a href="https://github.com/ClickHouse/ClickHouse/pull/8241" target="_blank" rel="noopener noreferrer">#8241</a>, <a href="https://github.com/ClickHouse/ClickHouse/pull/8342" target="_blank" rel="noopener noreferrer">#8342</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li><code>RENAME TABLE</code> for a distributed table now renames the folder containing inserted data before sending to shards. This fixes an issue with successive renames <code>tableA-&gt;tableB</code>, <code>tableC-&gt;tableA</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8306" target="_blank" rel="noopener noreferrer">#8306</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li><code>range_hashed</code> external dictionaries created by DDL queries now allow ranges of arbitrary numeric types. <a href="https://github.com/ClickHouse/ClickHouse/pull/8275" target="_blank" rel="noopener noreferrer">#8275</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>INSERT INTO table SELECT ... FROM mysql(...)</code> table function. <a href="https://github.com/ClickHouse/ClickHouse/pull/8234" target="_blank" rel="noopener noreferrer">#8234</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed segfault in <code>INSERT INTO TABLE FUNCTION file()</code> while inserting into a file which does not exist. Now in this case file would be created and then insert would be processed. <a href="https://github.com/ClickHouse/ClickHouse/pull/8177" target="_blank" rel="noopener noreferrer">#8177</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Fixed bitmapAnd error when intersecting an aggregated bitmap and a scalar bitmap. <a href="https://github.com/ClickHouse/ClickHouse/pull/8082" target="_blank" rel="noopener noreferrer">#8082</a> (<a href="https://github.com/moon03432" target="_blank" rel="noopener noreferrer">Yue Huang</a>)</li><li>Fixed segfault when <code>EXISTS</code> query was used without <code>TABLE</code> or <code>DICTIONARY</code> qualifier, just like <code>EXISTS t</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8213" target="_blank" rel="noopener noreferrer">#8213</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed return type for functions <code>rand</code> and <code>randConstant</code> in case of nullable argument. Now functions always return <code>UInt32</code> and never <code>Nullable(UInt32)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8204" target="_blank" rel="noopener noreferrer">#8204</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fixed <code>DROP DICTIONARY IF EXISTS db.dict</code>, now it does not throw exception if <code>db</code> does not exist. <a href="https://github.com/ClickHouse/ClickHouse/pull/8185" target="_blank" rel="noopener noreferrer">#8185</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>If a table wasn’t completely dropped because of server crash, the server will try to restore and load it <a href="https://github.com/ClickHouse/ClickHouse/pull/8176" target="_blank" rel="noopener noreferrer">#8176</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed a trivial count query for a distributed table if there are more than two shard local table. <a href="https://github.com/ClickHouse/ClickHouse/pull/8164" target="_blank" rel="noopener noreferrer">#8164</a> (<a href="https://github.com/nicelulu" target="_blank" rel="noopener noreferrer">小路</a>)</li><li>Fixed bug that lead to a data race in DB::BlockStreamProfileInfo::calculateRowsBeforeLimit() <a href="https://github.com/ClickHouse/ClickHouse/pull/8143" target="_blank" rel="noopener noreferrer">#8143</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander Kazakov</a>)</li><li>Fixed <code>ALTER table MOVE part</code> executed immediately after merging the specified part, which could cause moving a part which the specified part merged into. Now it correctly moves the specified part. <a href="https://github.com/ClickHouse/ClickHouse/pull/8104" target="_blank" rel="noopener noreferrer">#8104</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Expressions for dictionaries can be specified as strings now. This is useful for calculation of attributes while extracting data from non-ClickHouse sources because it allows to use non-ClickHouse syntax for those expressions. <a href="https://github.com/ClickHouse/ClickHouse/pull/8098" target="_blank" rel="noopener noreferrer">#8098</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed a very rare race in <code>clickhouse-copier</code> because of an overflow in ZXid. <a href="https://github.com/ClickHouse/ClickHouse/pull/8088" target="_blank" rel="noopener noreferrer">#8088</a> (<a href="https://github.com/dingxiangfei2009" target="_blank" rel="noopener noreferrer">Ding Xiang Fei</a>)</li><li>Fixed the bug when after the query failed (due to “Too many simultaneous queries” for example) it would not read external tables info, and the
next request would interpret this info as the beginning of the next query causing an error like <code>Unknown packet from client</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8084" target="_blank" rel="noopener noreferrer">#8084</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Avoid null dereference after “Unknown packet X from server” <a href="https://github.com/ClickHouse/ClickHouse/pull/8071" target="_blank" rel="noopener noreferrer">#8071</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Restore support of all ICU locales, add the ability to apply collations for constant expressions and add language name to system.collations table. <a href="https://github.com/ClickHouse/ClickHouse/pull/8051" target="_blank" rel="noopener noreferrer">#8051</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Number of streams for read from <code>StorageFile</code> and <code>StorageHDFS</code> is now limited, to avoid exceeding the memory limit. <a href="https://github.com/ClickHouse/ClickHouse/pull/7981" target="_blank" rel="noopener noreferrer">#7981</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>CHECK TABLE</code> query for <code>*MergeTree</code> tables without key. <a href="https://github.com/ClickHouse/ClickHouse/pull/7979" target="_blank" rel="noopener noreferrer">#7979</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Removed the mutation number from a part name in case there were no mutations. This removing improved the compatibility with older versions. <a href="https://github.com/ClickHouse/ClickHouse/pull/8250" target="_blank" rel="noopener noreferrer">#8250</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed the bug that mutations are skipped for some attached parts due to their data_version are larger than the table mutation version. <a href="https://github.com/ClickHouse/ClickHouse/pull/7812" target="_blank" rel="noopener noreferrer">#7812</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Allow starting the server with redundant copies of parts after moving them to another device. <a href="https://github.com/ClickHouse/ClickHouse/pull/7810" target="_blank" rel="noopener noreferrer">#7810</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fixed the error “Sizes of columns does not match” that might appear when using aggregate function columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/7790" target="_blank" rel="noopener noreferrer">#7790</a> (<a href="https://github.com/bgranvea" target="_blank" rel="noopener noreferrer">Boris Granveaud</a>)</li><li>Now an exception will be thrown in case of using WITH TIES alongside LIMIT BY. And now it’s possible to use TOP with LIMIT BY. <a href="https://github.com/ClickHouse/ClickHouse/pull/7637" target="_blank" rel="noopener noreferrer">#7637</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>)</li><li>Fix dictionary reload if it has <code>invalidate_query</code>, which stopped updates and some exception on previous update tries. <a href="https://github.com/ClickHouse/ClickHouse/pull/8029" target="_blank" rel="noopener noreferrer">#8029</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v19-17-4-11-2019-11-22">ClickHouse Release 19.17.4.11, 2019-11-22<a class="hash-link" href="#clickhouse-release-v19-17-4-11-2019-11-22" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change" title="Direct link to heading">​</a></h4><ul><li>Using column instead of AST to store scalar subquery results for better performance. Setting <code>enable_scalar_subquery_optimization</code> was added in 19.17 and it was enabled by default. It leads to errors like <a href="https://github.com/ClickHouse/ClickHouse/issues/7851" target="_blank" rel="noopener noreferrer">this</a> during upgrade to 19.17.2 or 19.17.3 from previous versions. This setting was disabled by default in 19.17.4, to make possible upgrading from 19.16 and older versions without errors. <a href="https://github.com/ClickHouse/ClickHouse/pull/7392" target="_blank" rel="noopener noreferrer">#7392</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature">New Feature<a class="hash-link" href="#new-feature" title="Direct link to heading">​</a></h4><ul><li>Add the ability to create dictionaries with DDL queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/7360" target="_blank" rel="noopener noreferrer">#7360</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Make <code>bloom_filter</code> type of index supporting <code>LowCardinality</code> and <code>Nullable</code> <a href="https://github.com/ClickHouse/ClickHouse/issues/7363" target="_blank" rel="noopener noreferrer">#7363</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7561" target="_blank" rel="noopener noreferrer">#7561</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Add function <code>isValidJSON</code> to check that passed string is a valid json. <a href="https://github.com/ClickHouse/ClickHouse/issues/5910" target="_blank" rel="noopener noreferrer">#5910</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7293" target="_blank" rel="noopener noreferrer">#7293</a> (<a href="https://github.com/Vdimir" target="_blank" rel="noopener noreferrer">Vdimir</a>)</li><li>Implement <code>arrayCompact</code> function <a href="https://github.com/ClickHouse/ClickHouse/pull/7328" target="_blank" rel="noopener noreferrer">#7328</a> (<a href="https://github.com/Joeywzr" target="_blank" rel="noopener noreferrer">Memo</a>)</li><li>Created function <code>hex</code> for Decimal numbers. It works like <code>hex(reinterpretAsString())</code>, but does not delete last zero bytes. <a href="https://github.com/ClickHouse/ClickHouse/pull/7355" target="_blank" rel="noopener noreferrer">#7355</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">Mikhail Korotov</a>)</li><li>Add <code>arrayFill</code> and <code>arrayReverseFill</code> functions, which replace elements by other elements in front/back of them in the array. <a href="https://github.com/ClickHouse/ClickHouse/pull/7380" target="_blank" rel="noopener noreferrer">#7380</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Add <code>CRC32IEEE()</code>/<code>CRC64()</code> support <a href="https://github.com/ClickHouse/ClickHouse/pull/7480" target="_blank" rel="noopener noreferrer">#7480</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Implement <code>char</code> function similar to one in <a href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char" target="_blank" rel="noopener noreferrer">mysql</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7486" target="_blank" rel="noopener noreferrer">#7486</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Add <code>bitmapTransform</code> function. It transforms an array of values in a bitmap to another array of values, the result is a new bitmap <a href="https://github.com/ClickHouse/ClickHouse/pull/7598" target="_blank" rel="noopener noreferrer">#7598</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Implemented <code>javaHashUTF16LE()</code> function <a href="https://github.com/ClickHouse/ClickHouse/pull/7651" target="_blank" rel="noopener noreferrer">#7651</a> (<a href="https://github.com/achimbab" target="_blank" rel="noopener noreferrer">achimbab</a>)</li><li>Add <code>_shard_num</code> virtual column for the Distributed engine <a href="https://github.com/ClickHouse/ClickHouse/pull/7624" target="_blank" rel="noopener noreferrer">#7624</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-feature">Experimental Feature<a class="hash-link" href="#experimental-feature" title="Direct link to heading">​</a></h4><ul><li>Support for processors (new query execution pipeline) in <code>MergeTree</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7181" target="_blank" rel="noopener noreferrer">#7181</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-1">Bug Fix<a class="hash-link" href="#bug-fix-1" title="Direct link to heading">​</a></h4><ul><li>Fix incorrect float parsing in <code>Values</code> <a href="https://github.com/ClickHouse/ClickHouse/issues/7817" target="_blank" rel="noopener noreferrer">#7817</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7870" target="_blank" rel="noopener noreferrer">#7870</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fix rare deadlock which can happen when trace_log is enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/7838" target="_blank" rel="noopener noreferrer">#7838</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Prevent message duplication when producing Kafka table has any MVs selecting from it <a href="https://github.com/ClickHouse/ClickHouse/pull/7265" target="_blank" rel="noopener noreferrer">#7265</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Support for <code>Array(LowCardinality(Nullable(String)))</code> in <code>IN</code>. Resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/7364" target="_blank" rel="noopener noreferrer">#7364</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7366" target="_blank" rel="noopener noreferrer">#7366</a> (<a href="https://github.com/achimbab" target="_blank" rel="noopener noreferrer">achimbab</a>)</li><li>Add handling of <code>SQL_TINYINT</code> and <code>SQL_BIGINT</code>, and fix handling of <code>SQL_FLOAT</code> data source types in ODBC Bridge. <a href="https://github.com/ClickHouse/ClickHouse/pull/7491" target="_blank" rel="noopener noreferrer">#7491</a> (<a href="https://github.com/traceon" target="_blank" rel="noopener noreferrer">Denis Glazachev</a>)</li><li>Fix aggregation (<code>avg</code> and quantiles) over empty decimal columns <a href="https://github.com/ClickHouse/ClickHouse/pull/7431" target="_blank" rel="noopener noreferrer">#7431</a> (<a href="https://github.com/akonyaev90" target="_blank" rel="noopener noreferrer">Andrey Konyaev</a>)</li><li>Fix <code>INSERT</code> into Distributed with <code>MATERIALIZED</code> columns <a href="https://github.com/ClickHouse/ClickHouse/pull/7377" target="_blank" rel="noopener noreferrer">#7377</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Make <code>MOVE PARTITION</code> work if some parts of partition are already on destination disk or volume <a href="https://github.com/ClickHouse/ClickHouse/pull/7434" target="_blank" rel="noopener noreferrer">#7434</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fixed bug with hardlinks failing to be created during mutations in <code>ReplicatedMergeTree</code> in multi-disk configurations. <a href="https://github.com/ClickHouse/ClickHouse/pull/7558" target="_blank" rel="noopener noreferrer">#7558</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fixed a bug with a mutation on a MergeTree when whole part remains unchanged and best space is being found on another disk <a href="https://github.com/ClickHouse/ClickHouse/pull/7602" target="_blank" rel="noopener noreferrer">#7602</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fixed bug with <code>keep_free_space_ratio</code> not being read from disks configuration <a href="https://github.com/ClickHouse/ClickHouse/pull/7645" target="_blank" rel="noopener noreferrer">#7645</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fix bug with table contains only <code>Tuple</code> columns or columns with complex paths. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/7541" target="_blank" rel="noopener noreferrer">7541</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7545" target="_blank" rel="noopener noreferrer">#7545</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Do not account memory for Buffer engine in max_memory_usage limit <a href="https://github.com/ClickHouse/ClickHouse/pull/7552" target="_blank" rel="noopener noreferrer">#7552</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Fix final mark usage in <code>MergeTree</code> tables ordered by <code>tuple()</code>. In rare cases it could lead to <code>Can&#x27;t adjust last granule</code> error while select. <a href="https://github.com/ClickHouse/ClickHouse/pull/7639" target="_blank" rel="noopener noreferrer">#7639</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix bug in mutations that have predicate with actions that require context (for example functions for json), which may lead to crashes or strange exceptions. <a href="https://github.com/ClickHouse/ClickHouse/pull/7664" target="_blank" rel="noopener noreferrer">#7664</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix mismatch of database and table names escaping in <code>data/</code> and <code>shadow/</code> directories <a href="https://github.com/ClickHouse/ClickHouse/pull/7575" target="_blank" rel="noopener noreferrer">#7575</a> (<a href="https://github.com/Alex-Burmak" target="_blank" rel="noopener noreferrer">Alexander Burmak</a>)</li><li>Support duplicated keys in RIGHT<!-- -->|<!-- -->FULL JOINs, e.g. <code>ON t.x = u.x AND t.x = u.y</code>. Fix crash in this case. <a href="https://github.com/ClickHouse/ClickHouse/pull/7586" target="_blank" rel="noopener noreferrer">#7586</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix <code>Not found column &lt;expression&gt; in block</code> when joining on expression with RIGHT or FULL JOIN. <a href="https://github.com/ClickHouse/ClickHouse/pull/7641" target="_blank" rel="noopener noreferrer">#7641</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>One more attempt to fix infinite loop in <code>PrettySpace</code> format <a href="https://github.com/ClickHouse/ClickHouse/pull/7591" target="_blank" rel="noopener noreferrer">#7591</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Fix bug in <code>concat</code> function when all arguments were <code>FixedString</code> of the same size. <a href="https://github.com/ClickHouse/ClickHouse/pull/7635" target="_blank" rel="noopener noreferrer">#7635</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed exception in case of using 1 argument while defining S3, URL and HDFS storages. <a href="https://github.com/ClickHouse/ClickHouse/pull/7618" target="_blank" rel="noopener noreferrer">#7618</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fix scope of the InterpreterSelectQuery for views with query <a href="https://github.com/ClickHouse/ClickHouse/pull/7601" target="_blank" rel="noopener noreferrer">#7601</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement">Improvement<a class="hash-link" href="#improvement" title="Direct link to heading">​</a></h4><ul><li><code>Nullable</code> columns recognized and NULL-values handled correctly by ODBC-bridge <a href="https://github.com/ClickHouse/ClickHouse/pull/7402" target="_blank" rel="noopener noreferrer">#7402</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Write current batch for distributed send atomically <a href="https://github.com/ClickHouse/ClickHouse/pull/7600" target="_blank" rel="noopener noreferrer">#7600</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Throw an exception if we cannot detect table for column name in query. <a href="https://github.com/ClickHouse/ClickHouse/pull/7358" target="_blank" rel="noopener noreferrer">#7358</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Add <code>merge_max_block_size</code> setting to <code>MergeTreeSettings</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/7412" target="_blank" rel="noopener noreferrer">#7412</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Queries with <code>HAVING</code> and without <code>GROUP BY</code> assume group by constant. So, <code>SELECT 1 HAVING 1</code> now returns a result. <a href="https://github.com/ClickHouse/ClickHouse/pull/7496" target="_blank" rel="noopener noreferrer">#7496</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Support parsing <code>(X,)</code> as tuple similar to python. <a href="https://github.com/ClickHouse/ClickHouse/pull/7501" target="_blank" rel="noopener noreferrer">#7501</a>, <a href="https://github.com/ClickHouse/ClickHouse/pull/7562" target="_blank" rel="noopener noreferrer">#7562</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Make <code>range</code> function behaviors almost like pythonic one. <a href="https://github.com/ClickHouse/ClickHouse/pull/7518" target="_blank" rel="noopener noreferrer">#7518</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Add <code>constraints</code> columns to table <code>system.settings</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/7553" target="_blank" rel="noopener noreferrer">#7553</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Better Null format for tcp handler, so that it’s possible to use <code>select ignore(&lt;expression&gt;) from table format Null</code> for perf measure via clickhouse-client <a href="https://github.com/ClickHouse/ClickHouse/pull/7606" target="_blank" rel="noopener noreferrer">#7606</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Queries like <code>CREATE TABLE ... AS (SELECT (1, 2))</code> are parsed correctly <a href="https://github.com/ClickHouse/ClickHouse/pull/7542" target="_blank" rel="noopener noreferrer">#7542</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement">Performance Improvement<a class="hash-link" href="#performance-improvement" title="Direct link to heading">​</a></h4><ul><li>The performance of aggregation over short string keys is improved. <a href="https://github.com/ClickHouse/ClickHouse/pull/6243" target="_blank" rel="noopener noreferrer">#6243</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>, <a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Run another pass of syntax/expression analysis to get potential optimizations after constant predicates are folded. <a href="https://github.com/ClickHouse/ClickHouse/pull/7497" target="_blank" rel="noopener noreferrer">#7497</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Use storage meta info to evaluate trivial <code>SELECT count() FROM table;</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/7510" target="_blank" rel="noopener noreferrer">#7510</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>, <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Vectorize processing <code>arrayReduce</code> similar to Aggregator <code>addBatch</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7608" target="_blank" rel="noopener noreferrer">#7608</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Minor improvements in performance of <code>Kafka</code> consumption <a href="https://github.com/ClickHouse/ClickHouse/pull/7475" target="_blank" rel="noopener noreferrer">#7475</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement" title="Direct link to heading">​</a></h4><ul><li>Add support for cross-compiling to the CPU architecture AARCH64. Refactor packager script. <a href="https://github.com/ClickHouse/ClickHouse/pull/7370" target="_blank" rel="noopener noreferrer">#7370</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7539" target="_blank" rel="noopener noreferrer">#7539</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Unpack darwin-x86_64 and linux-aarch64 toolchains into mounted Docker volume when building packages <a href="https://github.com/ClickHouse/ClickHouse/pull/7534" target="_blank" rel="noopener noreferrer">#7534</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Update Docker Image for Binary Packager <a href="https://github.com/ClickHouse/ClickHouse/pull/7474" target="_blank" rel="noopener noreferrer">#7474</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixed compile errors on MacOS Catalina <a href="https://github.com/ClickHouse/ClickHouse/pull/7585" target="_blank" rel="noopener noreferrer">#7585</a> (<a href="https://github.com/ernestp" target="_blank" rel="noopener noreferrer">Ernest Poletaev</a>)</li><li>Some refactoring in query analysis logic: split complex class into several simple ones. <a href="https://github.com/ClickHouse/ClickHouse/pull/7454" target="_blank" rel="noopener noreferrer">#7454</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix build without submodules <a href="https://github.com/ClickHouse/ClickHouse/pull/7295" target="_blank" rel="noopener noreferrer">#7295</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Better <code>add_globs</code> in CMake files <a href="https://github.com/ClickHouse/ClickHouse/pull/7418" target="_blank" rel="noopener noreferrer">#7418</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Remove hardcoded paths in <code>unwind</code> target <a href="https://github.com/ClickHouse/ClickHouse/pull/7460" target="_blank" rel="noopener noreferrer">#7460</a> (<a href="https://github.com/podshumok" target="_blank" rel="noopener noreferrer">Konstantin Podshumok</a>)</li><li>Allow to use mysql format without ssl <a href="https://github.com/ClickHouse/ClickHouse/pull/7524" target="_blank" rel="noopener noreferrer">#7524</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="other">Other<a class="hash-link" href="#other" title="Direct link to heading">​</a></h4><ul><li>Added ANTLR4 grammar for ClickHouse SQL dialect <a href="https://github.com/ClickHouse/ClickHouse/issues/7595" target="_blank" rel="noopener noreferrer">#7595</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7596" target="_blank" rel="noopener noreferrer">#7596</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v19-16">ClickHouse Release 19.16<a class="hash-link" href="#clickhouse-release-v19-16" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v19-16-14-65-2020-03-25">ClickHouse Release 19.16.14.65, 2020-03-25<a class="hash-link" href="#clickhouse-release-v19-16-14-65-2020-03-25" title="Direct link to heading">​</a></h4><ul><li>Fixed up a bug in batched calculations of ternary logical OPs on multiple arguments (more than 10). <a href="https://github.com/ClickHouse/ClickHouse/pull/8718" target="_blank" rel="noopener noreferrer">#8718</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander Kazakov</a>) This bugfix was backported to version 19.16 by a special request from Altinity.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v19-16-14-65-2020-03-05">ClickHouse Release 19.16.14.65, 2020-03-05<a class="hash-link" href="#clickhouse-release-v19-16-14-65-2020-03-05" title="Direct link to heading">​</a></h4><ul><li>Fix distributed subqueries incompatibility with older CH versions. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/7851" target="_blank" rel="noopener noreferrer">#7851</a><a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">(tabplubix)</a></li><li>When executing <code>CREATE</code> query, fold constant expressions in storage engine arguments. Replace empty database name with current database. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6508" target="_blank" rel="noopener noreferrer">#6508</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/3492" target="_blank" rel="noopener noreferrer">#3492</a>. Also fix check for local address in <code>ClickHouseDictionarySource</code>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9262" target="_blank" rel="noopener noreferrer">#9262</a> <a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">(tabplubix)</a></li><li>Now background merges in <code>*MergeTree</code> table engines family preserve storage policy volume order more accurately.
<a href="https://github.com/ClickHouse/ClickHouse/pull/8549" target="_blank" rel="noopener noreferrer">#8549</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Prevent losing data in <code>Kafka</code> in rare cases when exception happens after reading suffix but before commit. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/9378" target="_blank" rel="noopener noreferrer">#9378</a>. Related: <a href="https://github.com/ClickHouse/ClickHouse/issues/7175" target="_blank" rel="noopener noreferrer">#7175</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9507" target="_blank" rel="noopener noreferrer">#9507</a> <a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">(filimonov)</a></li><li>Fix bug leading to server termination when trying to use / drop <code>Kafka</code> table created with wrong parameters. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/9494" target="_blank" rel="noopener noreferrer">#9494</a>. Incorporates <a href="https://github.com/ClickHouse/ClickHouse/issues/9507" target="_blank" rel="noopener noreferrer">#9507</a>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9513" target="_blank" rel="noopener noreferrer">#9513</a> <a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">(filimonov)</a></li><li>Allow using <code>MaterializedView</code> with subqueries above <code>Kafka</code> tables.
<a href="https://github.com/ClickHouse/ClickHouse/pull/8197" target="_blank" rel="noopener noreferrer">#8197</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-1">New Feature<a class="hash-link" href="#new-feature-1" title="Direct link to heading">​</a></h4><ul><li>Add <code>deduplicate_blocks_in_dependent_materialized_views</code> option to control the behaviour of idempotent inserts into tables with materialized views. This new feature was added to the bugfix release by a special request from Altinity.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9070" target="_blank" rel="noopener noreferrer">#9070</a> <a href="https://github.com/urykhy" target="_blank" rel="noopener noreferrer">(urykhy)</a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v19-16-2-2-2019-10-30">ClickHouse Release 19.16.2.2, 2019-10-30<a class="hash-link" href="#clickhouse-release-v19-16-2-2-2019-10-30" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-1">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-1" title="Direct link to heading">​</a></h4><ul><li>Add missing arity validation for count/counIf.
<a href="https://github.com/ClickHouse/ClickHouse/issues/7095" target="_blank" rel="noopener noreferrer">#7095</a><a href="https://github.com/ClickHouse/ClickHouse/pull/7298" target="_blank" rel="noopener noreferrer">#7298</a> (<a href="https://github.com/Vdimir" target="_blank" rel="noopener noreferrer">Vdimir</a>)</li><li>Remove legacy <code>asterisk_left_columns_only</code> setting (it was disabled by default).
<a href="https://github.com/ClickHouse/ClickHouse/pull/7335" target="_blank" rel="noopener noreferrer">#7335</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem
Zuikov</a>)</li><li>Format strings for Template data format are now specified in files.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7118" target="_blank" rel="noopener noreferrer">#7118</a>
(<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-2">New Feature<a class="hash-link" href="#new-feature-2" title="Direct link to heading">​</a></h4><ul><li>Introduce uniqCombined64() to calculate cardinality greater than UINT_MAX.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7213" target="_blank" rel="noopener noreferrer">#7213</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/7222" target="_blank" rel="noopener noreferrer">#7222</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat
Khuzhin</a>)</li><li>Support Bloom filter indexes on Array columns.
<a href="https://github.com/ClickHouse/ClickHouse/pull/6984" target="_blank" rel="noopener noreferrer">#6984</a>
(<a href="https://github.com/achimbab" target="_blank" rel="noopener noreferrer">achimbab</a>)</li><li>Add a function <code>getMacro(name)</code> that returns String with the value of corresponding <code>&lt;macros&gt;</code>
from server configuration. <a href="https://github.com/ClickHouse/ClickHouse/pull/7240" target="_blank" rel="noopener noreferrer">#7240</a>
(<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Set two configuration options for a dictionary based on an HTTP source: <code>credentials</code> and
<code>http-headers</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7092" target="_blank" rel="noopener noreferrer">#7092</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume
Tassery</a>)</li><li>Add a new ProfileEvent <code>Merge</code> that counts the number of launched background merges.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7093" target="_blank" rel="noopener noreferrer">#7093</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">Mikhail
Korotov</a>)</li><li>Add fullHostName function that returns a fully qualified domain name.
<a href="https://github.com/ClickHouse/ClickHouse/issues/7263" target="_blank" rel="noopener noreferrer">#7263</a><a href="https://github.com/ClickHouse/ClickHouse/pull/7291" target="_blank" rel="noopener noreferrer">#7291</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Add function <code>arraySplit</code> and <code>arrayReverseSplit</code> which split an array by “cut off”
conditions. They are useful in time sequence handling.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7294" target="_blank" rel="noopener noreferrer">#7294</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Add new functions that return the Array of all matched indices in multiMatch family of functions.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7299" target="_blank" rel="noopener noreferrer">#7299</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila
Kutenin</a>)</li><li>Add a new database engine <code>Lazy</code> that is optimized for storing a large number of small -Log
tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/7171" target="_blank" rel="noopener noreferrer">#7171</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita
Vasilev</a>)</li><li>Add aggregate functions groupBitmapAnd, -Or, -Xor for bitmap columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/7109" target="_blank" rel="noopener noreferrer">#7109</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang
Yu</a>)</li><li>Add aggregate function combinators -OrNull and -OrDefault, which return null
or default values when there is nothing to aggregate.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7331" target="_blank" rel="noopener noreferrer">#7331</a>
(<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Introduce CustomSeparated data format that supports custom escaping and
delimiter rules. <a href="https://github.com/ClickHouse/ClickHouse/pull/7118" target="_blank" rel="noopener noreferrer">#7118</a>
(<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Support Redis as source of external dictionary. <a href="https://github.com/ClickHouse/ClickHouse/pull/4361" target="_blank" rel="noopener noreferrer">#4361</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6962" target="_blank" rel="noopener noreferrer">#6962</a> (<a href="https://github.com/comunodi" target="_blank" rel="noopener noreferrer">comunodi</a>, <a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton
Popov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-2">Bug Fix<a class="hash-link" href="#bug-fix-2" title="Direct link to heading">​</a></h4><ul><li>Fix wrong query result if it has <code>WHERE IN (SELECT ...)</code> section and <code>optimize_read_in_order</code> is
used. <a href="https://github.com/ClickHouse/ClickHouse/pull/7371" target="_blank" rel="noopener noreferrer">#7371</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton
Popov</a>)</li><li>Disabled MariaDB authentication plugin, which depends on files outside of project.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7140" target="_blank" rel="noopener noreferrer">#7140</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy
Baranov</a>)</li><li>Fix exception <code>Cannot convert column ... because it is constant but values of constants are different in source and result</code> which could rarely happen when functions <code>now()</code>, <code>today()</code>,
<code>yesterday()</code>, <code>randConstant()</code> are used.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7156" target="_blank" rel="noopener noreferrer">#7156</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai
Kochetov</a>)</li><li>Fixed issue of using HTTP keep alive timeout instead of TCP keep alive timeout.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7351" target="_blank" rel="noopener noreferrer">#7351</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily
Nemkov</a>)</li><li>Fixed a segmentation fault in groupBitmapOr (issue <a href="https://github.com/ClickHouse/ClickHouse/issues/7109" target="_blank" rel="noopener noreferrer">#7109</a>).
<a href="https://github.com/ClickHouse/ClickHouse/pull/7289" target="_blank" rel="noopener noreferrer">#7289</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang
Yu</a>)</li><li>For materialized views the commit for Kafka is called after all data were written.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7175" target="_blank" rel="noopener noreferrer">#7175</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixed wrong <code>duration_ms</code> value in <code>system.part_log</code> table. It was ten times off.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7172" target="_blank" rel="noopener noreferrer">#7172</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir
Chebotarev</a>)</li><li>A quick fix to resolve crash in LIVE VIEW table and re-enabling all LIVE VIEW tests.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7201" target="_blank" rel="noopener noreferrer">#7201</a>
(<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>)</li><li>Serialize NULL values correctly in min/max indexes of MergeTree parts.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7234" target="_blank" rel="noopener noreferrer">#7234</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander
Kuzmenkov</a>)</li><li>Don’t put virtual columns to .sql metadata when table is created as <code>CREATE TABLE AS</code>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7183" target="_blank" rel="noopener noreferrer">#7183</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix segmentation fault in <code>ATTACH PART</code> query.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7185" target="_blank" rel="noopener noreferrer">#7185</a>
(<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix wrong result for some queries given by the optimization of empty IN subqueries and empty
INNER/RIGHT JOIN. <a href="https://github.com/ClickHouse/ClickHouse/pull/7284" target="_blank" rel="noopener noreferrer">#7284</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai
Kochetov</a>)</li><li>Fixing AddressSanitizer error in the LIVE VIEW getHeader() method.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7271" target="_blank" rel="noopener noreferrer">#7271</a>
(<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-1">Improvement<a class="hash-link" href="#improvement-1" title="Direct link to heading">​</a></h4><ul><li>Add a message in case of queue_wait_max_ms wait takes place.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7390" target="_blank" rel="noopener noreferrer">#7390</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat
Khuzhin</a>)</li><li>Made setting <code>s3_min_upload_part_size</code> table-level.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7059" target="_blank" rel="noopener noreferrer">#7059</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir
Chebotarev</a>)</li><li>Check TTL in StorageFactory. <a href="https://github.com/ClickHouse/ClickHouse/pull/7304" target="_blank" rel="noopener noreferrer">#7304</a>
(<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Squash left-hand blocks in partial merge join (optimization).
<a href="https://github.com/ClickHouse/ClickHouse/pull/7122" target="_blank" rel="noopener noreferrer">#7122</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem
Zuikov</a>)</li><li>Do not allow non-deterministic functions in mutations of Replicated table engines, because this
can introduce inconsistencies between replicas.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7247" target="_blank" rel="noopener noreferrer">#7247</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander
Kazakov</a>)</li><li>Disable memory tracker while converting exception stack trace to string. It can prevent the loss
of error messages of type <code>Memory limit exceeded</code> on server, which caused the <code>Attempt to read after eof</code> exception on client. <a href="https://github.com/ClickHouse/ClickHouse/pull/7264" target="_blank" rel="noopener noreferrer">#7264</a>
(<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Miscellaneous format improvements. Resolves
<a href="https://github.com/ClickHouse/ClickHouse/issues/6033" target="_blank" rel="noopener noreferrer">#6033</a>,
<a href="https://github.com/ClickHouse/ClickHouse/issues/2633" target="_blank" rel="noopener noreferrer">#2633</a>,
<a href="https://github.com/ClickHouse/ClickHouse/issues/6611" target="_blank" rel="noopener noreferrer">#6611</a>,
<a href="https://github.com/ClickHouse/ClickHouse/issues/6742" target="_blank" rel="noopener noreferrer">#6742</a><a href="https://github.com/ClickHouse/ClickHouse/pull/7215" target="_blank" rel="noopener noreferrer">#7215</a>
(<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>ClickHouse ignores values on the right side of IN operator that are not convertible to the left
side type. Make it work properly for compound types – Array and Tuple.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7283" target="_blank" rel="noopener noreferrer">#7283</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander
Kuzmenkov</a>)</li><li>Support missing inequalities for ASOF JOIN. It’s possible to join less-or-equal variant and strict
greater and less variants for ASOF column in ON syntax.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7282" target="_blank" rel="noopener noreferrer">#7282</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem
Zuikov</a>)</li><li>Optimize partial merge join. <a href="https://github.com/ClickHouse/ClickHouse/pull/7070" target="_blank" rel="noopener noreferrer">#7070</a>
(<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Do not use more than 98K of memory in uniqCombined functions.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7236" target="_blank" rel="noopener noreferrer">#7236</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/7270" target="_blank" rel="noopener noreferrer">#7270</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat
Khuzhin</a>)</li><li>Flush parts of right-hand joining table on disk in PartialMergeJoin (if there is not enough
memory). Load data back when needed. <a href="https://github.com/ClickHouse/ClickHouse/pull/7186" target="_blank" rel="noopener noreferrer">#7186</a>
(<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement-1">Performance Improvement<a class="hash-link" href="#performance-improvement-1" title="Direct link to heading">​</a></h4><ul><li>Speed up joinGet with const arguments by avoiding data duplication.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7359" target="_blank" rel="noopener noreferrer">#7359</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos
Bird</a>)</li><li>Return early if the subquery is empty.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7007" target="_blank" rel="noopener noreferrer">#7007</a> (<a href="https://github.com/nicelulu" target="_blank" rel="noopener noreferrer">小路</a>)</li><li>Optimize parsing of SQL expression in Values.
<a href="https://github.com/ClickHouse/ClickHouse/pull/6781" target="_blank" rel="noopener noreferrer">#6781</a>
(<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-1">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-1" title="Direct link to heading">​</a></h4><ul><li>Disable some contribs for cross-compilation to Mac OS.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7101" target="_blank" rel="noopener noreferrer">#7101</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Add missing linking with PocoXML for clickhouse_common_io.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7200" target="_blank" rel="noopener noreferrer">#7200</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat
Khuzhin</a>)</li><li>Accept multiple test filter arguments in clickhouse-test.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7226" target="_blank" rel="noopener noreferrer">#7226</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander
Kuzmenkov</a>)</li><li>Enable musl and jemalloc for ARM. <a href="https://github.com/ClickHouse/ClickHouse/pull/7300" target="_blank" rel="noopener noreferrer">#7300</a>
(<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Added <code>--client-option</code> parameter to <code>clickhouse-test</code> to pass additional parameters to client.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7277" target="_blank" rel="noopener noreferrer">#7277</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai
Kochetov</a>)</li><li>Preserve existing configs on rpm package upgrade.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7103" target="_blank" rel="noopener noreferrer">#7103</a>
(<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Fix errors detected by PVS. <a href="https://github.com/ClickHouse/ClickHouse/pull/7153" target="_blank" rel="noopener noreferrer">#7153</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem
Zuikov</a>)</li><li>Fix build for Darwin. <a href="https://github.com/ClickHouse/ClickHouse/pull/7149" target="_blank" rel="noopener noreferrer">#7149</a>
(<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>glibc 2.29 compatibility. <a href="https://github.com/ClickHouse/ClickHouse/pull/7142" target="_blank" rel="noopener noreferrer">#7142</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos
Bird</a>)</li><li>Make sure dh_clean does not touch potential source files.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7205" target="_blank" rel="noopener noreferrer">#7205</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos
Bird</a>)</li><li>Attempt to avoid conflict when updating from altinity rpm - it has config file packaged separately
in clickhouse-server-common. <a href="https://github.com/ClickHouse/ClickHouse/pull/7073" target="_blank" rel="noopener noreferrer">#7073</a>
(<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Optimize some header files for faster rebuilds.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7212" target="_blank" rel="noopener noreferrer">#7212</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/7231" target="_blank" rel="noopener noreferrer">#7231</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander
Kuzmenkov</a>)</li><li>Add performance tests for Date and DateTime. <a href="https://github.com/ClickHouse/ClickHouse/pull/7332" target="_blank" rel="noopener noreferrer">#7332</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily
Nemkov</a>)</li><li>Fix some tests that contained non-deterministic mutations.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7132" target="_blank" rel="noopener noreferrer">#7132</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander
Kazakov</a>)</li><li>Add build with MemorySanitizer to CI. <a href="https://github.com/ClickHouse/ClickHouse/pull/7066" target="_blank" rel="noopener noreferrer">#7066</a>
(<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>Avoid use of uninitialized values in MetricsTransmitter.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7158" target="_blank" rel="noopener noreferrer">#7158</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat
Khuzhin</a>)</li><li>Fix some issues in Fields found by MemorySanitizer.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7135" target="_blank" rel="noopener noreferrer">#7135</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/7179" target="_blank" rel="noopener noreferrer">#7179</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander
Kuzmenkov</a>), <a href="https://github.com/ClickHouse/ClickHouse/pull/7376" target="_blank" rel="noopener noreferrer">#7376</a>
(<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Fix undefined behavior in murmurhash32. <a href="https://github.com/ClickHouse/ClickHouse/pull/7388" target="_blank" rel="noopener noreferrer">#7388</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos
Bird</a>)</li><li>Fix undefined behavior in StoragesInfoStream. <a href="https://github.com/ClickHouse/ClickHouse/pull/7384" target="_blank" rel="noopener noreferrer">#7384</a>
(<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed constant expressions folding for external database engines (MySQL, ODBC, JDBC). In previous
versions it wasn’t working for multiple constant expressions and was not working at all for Date,
DateTime and UUID. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/7245" target="_blank" rel="noopener noreferrer">#7245</a><a href="https://github.com/ClickHouse/ClickHouse/pull/7252" target="_blank" rel="noopener noreferrer">#7252</a>
(<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixing ThreadSanitizer data race error in the LIVE VIEW when accessing no_users_thread variable.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7353" target="_blank" rel="noopener noreferrer">#7353</a>
(<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>)</li><li>Get rid of malloc symbols in libcommon
<a href="https://github.com/ClickHouse/ClickHouse/pull/7134" target="_blank" rel="noopener noreferrer">#7134</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/7065" target="_blank" rel="noopener noreferrer">#7065</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos
Bird</a>)</li><li>Add global flag ENABLE_LIBRARIES for disabling all libraries.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7063" target="_blank" rel="noopener noreferrer">#7063</a>
(<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="code-cleanup">Code Cleanup<a class="hash-link" href="#code-cleanup" title="Direct link to heading">​</a></h4><ul><li>Generalize configuration repository to prepare for DDL for Dictionaries. <a href="https://github.com/ClickHouse/ClickHouse/pull/7155" target="_blank" rel="noopener noreferrer">#7155</a>
(<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Parser for dictionaries DDL without any semantic.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7209" target="_blank" rel="noopener noreferrer">#7209</a>
(<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Split ParserCreateQuery into different smaller parsers.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7253" target="_blank" rel="noopener noreferrer">#7253</a>
(<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Small refactoring and renaming near external dictionaries.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7111" target="_blank" rel="noopener noreferrer">#7111</a>
(<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Refactor some code to prepare for role-based access control. <a href="https://github.com/ClickHouse/ClickHouse/pull/7235" target="_blank" rel="noopener noreferrer">#7235</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly
Baranov</a>)</li><li>Some improvements in DatabaseOrdinary code.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7086" target="_blank" rel="noopener noreferrer">#7086</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita
Vasilev</a>)</li><li>Do not use iterators in find() and emplace() methods of hash tables.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7026" target="_blank" rel="noopener noreferrer">#7026</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander
Kuzmenkov</a>)</li><li>Fix getMultipleValuesFromConfig in case when parameter root is not empty. <a href="https://github.com/ClickHouse/ClickHouse/pull/7374" target="_blank" rel="noopener noreferrer">#7374</a>
(<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">Mikhail Korotov</a>)</li><li>Remove some copy-paste (TemporaryFile and TemporaryFileStream)
<a href="https://github.com/ClickHouse/ClickHouse/pull/7166" target="_blank" rel="noopener noreferrer">#7166</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem
Zuikov</a>)</li><li>Improved code readability a little bit (<code>MergeTreeData::getActiveContainingPart</code>).
<a href="https://github.com/ClickHouse/ClickHouse/pull/7361" target="_blank" rel="noopener noreferrer">#7361</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir
Chebotarev</a>)</li><li>Wait for all scheduled jobs, which are using local objects, if <code>ThreadPool::schedule(...)</code> throws
an exception. Rename <code>ThreadPool::schedule(...)</code> to <code>ThreadPool::scheduleOrThrowOnError(...)</code> and
fix comments to make obvious that it may throw.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7350" target="_blank" rel="noopener noreferrer">#7350</a>
(<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-15">ClickHouse Release 19.15<a class="hash-link" href="#clickhouse-release-19-15" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-15-4-10-2019-10-31">ClickHouse Release 19.15.4.10, 2019-10-31<a class="hash-link" href="#clickhouse-release-19-15-4-10-2019-10-31" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-3">Bug Fix<a class="hash-link" href="#bug-fix-3" title="Direct link to heading">​</a></h4><ul><li>Added handling of SQL_TINYINT and SQL_BIGINT, and fix handling of SQL_FLOAT data source types in ODBC Bridge.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7491" target="_blank" rel="noopener noreferrer">#7491</a> (<a href="https://github.com/traceon" target="_blank" rel="noopener noreferrer">Denis Glazachev</a>)</li><li>Allowed to have some parts on destination disk or volume in MOVE PARTITION.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7434" target="_blank" rel="noopener noreferrer">#7434</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fixed NULL-values in nullable columns through ODBC-bridge.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7402" target="_blank" rel="noopener noreferrer">#7402</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Fixed INSERT into Distributed non local node with MATERIALIZED columns.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7377" target="_blank" rel="noopener noreferrer">#7377</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Fixed function getMultipleValuesFromConfig.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7374" target="_blank" rel="noopener noreferrer">#7374</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">Mikhail Korotov</a>)</li><li>Fixed issue of using HTTP keep alive timeout instead of TCP keep alive timeout.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7351" target="_blank" rel="noopener noreferrer">#7351</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Wait for all jobs to finish on exception (fixes rare segfaults).
<a href="https://github.com/ClickHouse/ClickHouse/pull/7350" target="_blank" rel="noopener noreferrer">#7350</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Don’t push to MVs when inserting into Kafka table.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7265" target="_blank" rel="noopener noreferrer">#7265</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Disable memory tracker for exception stack.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7264" target="_blank" rel="noopener noreferrer">#7264</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fixed bad code in transforming query for external database.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7252" target="_blank" rel="noopener noreferrer">#7252</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Avoid use of uninitialized values in MetricsTransmitter.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7158" target="_blank" rel="noopener noreferrer">#7158</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Added example config with macros for tests (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-15-3-6-2019-10-09">ClickHouse Release 19.15.3.6, 2019-10-09<a class="hash-link" href="#clickhouse-release-19-15-3-6-2019-10-09" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-4">Bug Fix<a class="hash-link" href="#bug-fix-4" title="Direct link to heading">​</a></h4><ul><li>Fixed bad_variant in hashed dictionary.
(<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed up bug with segmentation fault in ATTACH PART query.
(<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed time calculation in <code>MergeTreeData</code>.
(<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Commit to Kafka explicitly after the writing is finalized.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7175" target="_blank" rel="noopener noreferrer">#7175</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Serialize NULL values correctly in min/max indexes of MergeTree parts.
<a href="https://github.com/ClickHouse/ClickHouse/pull/7234" target="_blank" rel="noopener noreferrer">#7234</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-15-2-2-2019-10-01">ClickHouse Release 19.15.2.2, 2019-10-01<a class="hash-link" href="#clickhouse-release-19-15-2-2-2019-10-01" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-3">New Feature<a class="hash-link" href="#new-feature-3" title="Direct link to heading">​</a></h4><ul><li>Tiered storage: support to use multiple storage volumes for tables with MergeTree engine. It’s possible to store fresh data on SSD and automatically move old data to HDD. (<a href="https://clickhouse.github.io/clickhouse-presentations/meetup30/new_features/#12" target="_blank" rel="noopener noreferrer">example</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4918" target="_blank" rel="noopener noreferrer">#4918</a> (<a href="https://github.com/ObjatieGroba" target="_blank" rel="noopener noreferrer">Igr</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6489" target="_blank" rel="noopener noreferrer">#6489</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add table function <code>input</code> for reading incoming data in <code>INSERT SELECT</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/5450" target="_blank" rel="noopener noreferrer">#5450</a> (<a href="https://github.com/palasonic1" target="_blank" rel="noopener noreferrer">palasonic1</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6832" target="_blank" rel="noopener noreferrer">#6832</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Add a <code>sparse_hashed</code> dictionary layout, that is functionally equivalent to the <code>hashed</code> layout, but is more memory efficient. It uses about twice as less memory at the cost of slower value retrieval. <a href="https://github.com/ClickHouse/ClickHouse/pull/6894" target="_blank" rel="noopener noreferrer">#6894</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Implement ability to define list of users for access to dictionaries. Only current connected database using. <a href="https://github.com/ClickHouse/ClickHouse/pull/6907" target="_blank" rel="noopener noreferrer">#6907</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Add <code>LIMIT</code> option to <code>SHOW</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/6944" target="_blank" rel="noopener noreferrer">#6944</a> (<a href="https://github.com/malkfilipp" target="_blank" rel="noopener noreferrer">Philipp Malkovsky</a>)</li><li>Add <code>bitmapSubsetLimit(bitmap, range_start, limit)</code> function, that returns subset of the smallest <code>limit</code> values in set that is no smaller than <code>range_start</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6957" target="_blank" rel="noopener noreferrer">#6957</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Add <code>bitmapMin</code> and <code>bitmapMax</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/6970" target="_blank" rel="noopener noreferrer">#6970</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Add function <code>repeat</code> related to <a href="https://github.com/ClickHouse/ClickHouse/issues/6648" target="_blank" rel="noopener noreferrer">issue-6648</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6999" target="_blank" rel="noopener noreferrer">#6999</a> (<a href="https://github.com/ucasFL" target="_blank" rel="noopener noreferrer">flynn</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-feature-1">Experimental Feature<a class="hash-link" href="#experimental-feature-1" title="Direct link to heading">​</a></h4><ul><li>Implement (in memory) Merge Join variant that does not change current pipeline. Result is partially sorted by merge key. Set <code>partial_merge_join = 1</code> to use this feature. The Merge Join is still in development. <a href="https://github.com/ClickHouse/ClickHouse/pull/6940" target="_blank" rel="noopener noreferrer">#6940</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Add <code>S3</code> engine and table function. It is still in development (no authentication support yet). <a href="https://github.com/ClickHouse/ClickHouse/pull/5596" target="_blank" rel="noopener noreferrer">#5596</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-2">Improvement<a class="hash-link" href="#improvement-2" title="Direct link to heading">​</a></h4><ul><li>Every message read from Kafka is inserted atomically. This resolves almost all known issues with Kafka engine. <a href="https://github.com/ClickHouse/ClickHouse/pull/6950" target="_blank" rel="noopener noreferrer">#6950</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Improvements for failover of Distributed queries. Shorten recovery time, also it is now configurable and can be seen in <code>system.clusters</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6399" target="_blank" rel="noopener noreferrer">#6399</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Support numeric values for Enums directly in <code>IN</code> section. #6766 <a href="https://github.com/ClickHouse/ClickHouse/pull/6941" target="_blank" rel="noopener noreferrer">#6941</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Support (optional, disabled by default) redirects on URL storage. <a href="https://github.com/ClickHouse/ClickHouse/pull/6914" target="_blank" rel="noopener noreferrer">#6914</a> (<a href="https://github.com/maqroll" target="_blank" rel="noopener noreferrer">maqroll</a>)</li><li>Add information message when client with an older version connects to a server. <a href="https://github.com/ClickHouse/ClickHouse/pull/6893" target="_blank" rel="noopener noreferrer">#6893</a> (<a href="https://github.com/malkfilipp" target="_blank" rel="noopener noreferrer">Philipp Malkovsky</a>)</li><li>Remove maximum backoff sleep time limit for sending data in Distributed tables <a href="https://github.com/ClickHouse/ClickHouse/pull/6895" target="_blank" rel="noopener noreferrer">#6895</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Add ability to send profile events (counters) with cumulative values to graphite. It can be enabled under <code>&lt;events_cumulative&gt;</code> in server <code>config.xml</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6969" target="_blank" rel="noopener noreferrer">#6969</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Add automatically cast type <code>T</code> to <code>LowCardinality(T)</code> while inserting data in column of type <code>LowCardinality(T)</code> in Native format via HTTP. <a href="https://github.com/ClickHouse/ClickHouse/pull/6891" target="_blank" rel="noopener noreferrer">#6891</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Add ability to use function <code>hex</code> without using <code>reinterpretAsString</code> for <code>Float32</code>, <code>Float64</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7024" target="_blank" rel="noopener noreferrer">#7024</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">Mikhail Korotov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-2">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-2" title="Direct link to heading">​</a></h4><ul><li>Add gdb-index to clickhouse binary with debug info. It will speed up startup time of <code>gdb</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6947" target="_blank" rel="noopener noreferrer">#6947</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Speed up deb packaging with patched dpkg-deb which uses <code>pigz</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6960" target="_blank" rel="noopener noreferrer">#6960</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Set <code>enable_fuzzing = 1</code> to enable libfuzzer instrumentation of all the project code. <a href="https://github.com/ClickHouse/ClickHouse/pull/7042" target="_blank" rel="noopener noreferrer">#7042</a> (<a href="https://github.com/kyprizel" target="_blank" rel="noopener noreferrer">kyprizel</a>)</li><li>Add split build smoke test in CI. <a href="https://github.com/ClickHouse/ClickHouse/pull/7061" target="_blank" rel="noopener noreferrer">#7061</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add build with MemorySanitizer to CI. <a href="https://github.com/ClickHouse/ClickHouse/pull/7066" target="_blank" rel="noopener noreferrer">#7066</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>Replace <code>libsparsehash</code> with <code>sparsehash-c11</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/6965" target="_blank" rel="noopener noreferrer">#6965</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-5">Bug Fix<a class="hash-link" href="#bug-fix-5" title="Direct link to heading">​</a></h4><ul><li>Fixed performance degradation of index analysis on complex keys on large tables. This fixes #6924. <a href="https://github.com/ClickHouse/ClickHouse/pull/7075" target="_blank" rel="noopener noreferrer">#7075</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix logical error causing segfaults when selecting from Kafka empty topic. <a href="https://github.com/ClickHouse/ClickHouse/pull/6909" target="_blank" rel="noopener noreferrer">#6909</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix too early MySQL connection close in <code>MySQLBlockInputStream.cpp</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6882" target="_blank" rel="noopener noreferrer">#6882</a> (<a href="https://github.com/clemrodriguez" target="_blank" rel="noopener noreferrer">Clément Rodriguez</a>)</li><li>Returned support for very old Linux kernels (fix <a href="https://github.com/ClickHouse/ClickHouse/issues/6841" target="_blank" rel="noopener noreferrer">#6841</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6853" target="_blank" rel="noopener noreferrer">#6853</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix possible data loss in <code>insert select</code> query in case of empty block in input stream. #6834 #6862 <a href="https://github.com/ClickHouse/ClickHouse/pull/6911" target="_blank" rel="noopener noreferrer">#6911</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix for function <code>АrrayEnumerateUniqRanked</code> with empty arrays in params <a href="https://github.com/ClickHouse/ClickHouse/pull/6928" target="_blank" rel="noopener noreferrer">#6928</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix complex queries with array joins and global subqueries. <a href="https://github.com/ClickHouse/ClickHouse/pull/6934" target="_blank" rel="noopener noreferrer">#6934</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix <code>Unknown identifier</code> error in ORDER BY and GROUP BY with multiple JOINs <a href="https://github.com/ClickHouse/ClickHouse/pull/7022" target="_blank" rel="noopener noreferrer">#7022</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed <code>MSan</code> warning while executing function with <code>LowCardinality</code> argument. <a href="https://github.com/ClickHouse/ClickHouse/pull/7062" target="_blank" rel="noopener noreferrer">#7062</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-2">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-2" title="Direct link to heading">​</a></h4><ul><li>Changed serialization format of bitmap<!-- -->*<!-- --> aggregate function states to improve performance. Serialized states of bitmap<!-- -->*<!-- --> from previous versions cannot be read. <a href="https://github.com/ClickHouse/ClickHouse/pull/6908" target="_blank" rel="noopener noreferrer">#6908</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-14">ClickHouse Release 19.14<a class="hash-link" href="#clickhouse-release-19-14" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-14-7-15-2019-10-02">ClickHouse Release 19.14.7.15, 2019-10-02<a class="hash-link" href="#clickhouse-release-19-14-7-15-2019-10-02" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-6">Bug Fix<a class="hash-link" href="#bug-fix-6" title="Direct link to heading">​</a></h4><ul><li>This release also contains all bug fixes from 19.11.12.69.</li><li>Fixed compatibility for distributed queries between 19.14 and earlier versions. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/7068" target="_blank" rel="noopener noreferrer">#7068</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7069" target="_blank" rel="noopener noreferrer">#7069</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-14-6-12-2019-09-19">ClickHouse Release 19.14.6.12, 2019-09-19<a class="hash-link" href="#clickhouse-release-19-14-6-12-2019-09-19" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-7">Bug Fix<a class="hash-link" href="#bug-fix-7" title="Direct link to heading">​</a></h4><ul><li>Fix for function <code>АrrayEnumerateUniqRanked</code> with empty arrays in params. <a href="https://github.com/ClickHouse/ClickHouse/pull/6928" target="_blank" rel="noopener noreferrer">#6928</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed subquery name in queries with <code>ARRAY JOIN</code> and <code>GLOBAL IN subquery</code> with alias. Use subquery alias for external table name if it is specified. <a href="https://github.com/ClickHouse/ClickHouse/pull/6934" target="_blank" rel="noopener noreferrer">#6934</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-3">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-3" title="Direct link to heading">​</a></h4><ul><li>Fix <a href="https://clickhouse-test-reports.s3.yandex.net/6944/aab95fd5175a513413c7395a73a82044bdafb906/functional_stateless_tests_(debug).html" target="_blank" rel="noopener noreferrer">flapping</a> test <code>00715_fetch_merged_or_mutated_part_zookeeper</code> by rewriting it to a shell scripts because it needs to wait for mutations to apply. <a href="https://github.com/ClickHouse/ClickHouse/pull/6977" target="_blank" rel="noopener noreferrer">#6977</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander Kazakov</a>)</li><li>Fixed UBSan and MemSan failure in function <code>groupUniqArray</code> with emtpy array argument. It was caused by placing of empty <code>PaddedPODArray</code> into hash table zero cell because constructor for zero cell value was not called. <a href="https://github.com/ClickHouse/ClickHouse/pull/6937" target="_blank" rel="noopener noreferrer">#6937</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-14-3-3-2019-09-10">ClickHouse Release 19.14.3.3, 2019-09-10<a class="hash-link" href="#clickhouse-release-19-14-3-3-2019-09-10" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-4">New Feature<a class="hash-link" href="#new-feature-4" title="Direct link to heading">​</a></h4><ul><li><code>WITH FILL</code> modifier for <code>ORDER BY</code>. (continuation of <a href="https://github.com/ClickHouse/ClickHouse/issues/5069" target="_blank" rel="noopener noreferrer">#5069</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6610" target="_blank" rel="noopener noreferrer">#6610</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li><code>WITH TIES</code> modifier for <code>LIMIT</code>. (continuation of <a href="https://github.com/ClickHouse/ClickHouse/issues/5069" target="_blank" rel="noopener noreferrer">#5069</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6610" target="_blank" rel="noopener noreferrer">#6610</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Parse unquoted <code>NULL</code> literal as NULL (if setting <code>format_csv_unquoted_null_literal_as_null=1</code>). Initialize null fields with default values if data type of this field is not nullable (if setting <code>input_format_null_as_default=1</code>). <a href="https://github.com/ClickHouse/ClickHouse/issues/5990" target="_blank" rel="noopener noreferrer">#5990</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6055" target="_blank" rel="noopener noreferrer">#6055</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Support for wildcards in paths of table functions <code>file</code> and <code>hdfs</code>. If the path contains wildcards, the table will be readonly. Example of usage: <code>select * from hdfs(&#x27;hdfs://hdfs1:9000/some_dir/another_dir/*/file{0..9}{0..9}&#x27;)</code> and <code>select * from file(&#x27;some_dir/{some_file,another_file,yet_another}.tsv&#x27;, &#x27;TSV&#x27;, &#x27;value UInt32&#x27;)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6092" target="_blank" rel="noopener noreferrer">#6092</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>New <code>system.metric_log</code> table which stores values of <code>system.events</code> and <code>system.metrics</code> with specified time interval. <a href="https://github.com/ClickHouse/ClickHouse/issues/6363" target="_blank" rel="noopener noreferrer">#6363</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6467" target="_blank" rel="noopener noreferrer">#6467</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6530" target="_blank" rel="noopener noreferrer">#6530</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Allow to write ClickHouse text logs to <code>system.text_log</code> table. <a href="https://github.com/ClickHouse/ClickHouse/issues/6037" target="_blank" rel="noopener noreferrer">#6037</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6103" target="_blank" rel="noopener noreferrer">#6103</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6164" target="_blank" rel="noopener noreferrer">#6164</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Show private symbols in stack traces (this is done via parsing symbol tables of ELF files). Added information about file and line number in stack traces if debug info is present. Speedup symbol name lookup with indexing symbols present in program. Added new SQL functions for introspection: <code>demangle</code> and <code>addressToLine</code>. Renamed function <code>symbolizeAddress</code> to <code>addressToSymbol</code> for consistency. Function <code>addressToSymbol</code> will return mangled name for performance reasons and you have to apply <code>demangle</code>. Added setting <code>allow_introspection_functions</code> which is turned off by default. <a href="https://github.com/ClickHouse/ClickHouse/pull/6201" target="_blank" rel="noopener noreferrer">#6201</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Table function <code>values</code> (the name is case-insensitive). It allows to read from <code>VALUES</code> list proposed in <a href="https://github.com/ClickHouse/ClickHouse/issues/5984" target="_blank" rel="noopener noreferrer">#5984</a>. Example: <code>SELECT * FROM VALUES(&#x27;a UInt64, s String&#x27;, (1, &#x27;one&#x27;), (2, &#x27;two&#x27;), (3, &#x27;three&#x27;))</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6217" target="_blank" rel="noopener noreferrer">#6217</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6209" target="_blank" rel="noopener noreferrer">#6209</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Added an ability to alter storage settings. Syntax: <code>ALTER TABLE &lt;table&gt; MODIFY SETTING &lt;setting&gt; = &lt;value&gt;</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6366" target="_blank" rel="noopener noreferrer">#6366</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6669" target="_blank" rel="noopener noreferrer">#6669</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6685" target="_blank" rel="noopener noreferrer">#6685</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Support for removing of detached parts. Syntax: <code>ALTER TABLE &lt;table_name&gt; DROP DETACHED PART &#x27;&lt;part_id&gt;&#x27;</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6158" target="_blank" rel="noopener noreferrer">#6158</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Table constraints. Allows to add constraint to table definition which will be checked at insert. <a href="https://github.com/ClickHouse/ClickHouse/pull/5273" target="_blank" rel="noopener noreferrer">#5273</a> (<a href="https://github.com/NanoBjorn" target="_blank" rel="noopener noreferrer">Gleb Novikov</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6652" target="_blank" rel="noopener noreferrer">#6652</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Suppport for cascaded materialized views. <a href="https://github.com/ClickHouse/ClickHouse/pull/6324" target="_blank" rel="noopener noreferrer">#6324</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Turn on query profiler by default to sample every query execution thread once a second. <a href="https://github.com/ClickHouse/ClickHouse/pull/6283" target="_blank" rel="noopener noreferrer">#6283</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Input format <code>ORC</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6454" target="_blank" rel="noopener noreferrer">#6454</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6703" target="_blank" rel="noopener noreferrer">#6703</a> (<a href="https://github.com/akonyaev90" target="_blank" rel="noopener noreferrer">akonyaev90</a>)</li><li>Added two new functions: <code>sigmoid</code> and <code>tanh</code> (that are useful for machine learning applications). <a href="https://github.com/ClickHouse/ClickHouse/pull/6254" target="_blank" rel="noopener noreferrer">#6254</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Function <code>hasToken(haystack, token)</code>, <code>hasTokenCaseInsensitive(haystack, token)</code> to check if given token is in haystack. Token is a maximal length substring between two non alphanumeric ASCII characters (or boundaries of haystack). Token must be a constant string. Supported by tokenbf_v1 index specialization. <a href="https://github.com/ClickHouse/ClickHouse/pull/6596" target="_blank" rel="noopener noreferrer">#6596</a>, <a href="https://github.com/ClickHouse/ClickHouse/pull/6662" target="_blank" rel="noopener noreferrer">#6662</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>New function <code>neighbor(value, offset[, default_value])</code>. Allows to reach prev/next value within column in a block of data. <a href="https://github.com/ClickHouse/ClickHouse/pull/5925" target="_blank" rel="noopener noreferrer">#5925</a> (<a href="https://github.com/alex-krash" target="_blank" rel="noopener noreferrer">Alex Krash</a>) <a href="https://github.com/ClickHouse/ClickHouse/commit/6685365ab8c5b74f9650492c88a012596eb1b0c6" target="_blank" rel="noopener noreferrer">6685365ab8c5b74f9650492c88a012596eb1b0c6</a> <a href="https://github.com/ClickHouse/ClickHouse/commit/341e2e4587a18065c2da1ca888c73389f48ce36c" target="_blank" rel="noopener noreferrer">341e2e4587a18065c2da1ca888c73389f48ce36c</a> <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a></li><li>Created a function <code>currentUser()</code>, returning login of authorized user. Added alias <code>user()</code> for compatibility with MySQL. <a href="https://github.com/ClickHouse/ClickHouse/pull/6470" target="_blank" rel="noopener noreferrer">#6470</a> (<a href="https://github.com/alex-krash" target="_blank" rel="noopener noreferrer">Alex Krash</a>)</li><li>New aggregate functions <code>quantilesExactInclusive</code> and <code>quantilesExactExclusive</code> which were proposed in <a href="https://github.com/ClickHouse/ClickHouse/issues/5885" target="_blank" rel="noopener noreferrer">#5885</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6477" target="_blank" rel="noopener noreferrer">#6477</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Function <code>bitmapRange(bitmap, range_begin, range_end)</code> which returns new set with specified range (not include the <code>range_end</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/6314" target="_blank" rel="noopener noreferrer">#6314</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Function <code>geohashesInBox(longitude_min, latitude_min, longitude_max, latitude_max, precision)</code> which creates array of precision-long strings of geohash-boxes covering provided area. <a href="https://github.com/ClickHouse/ClickHouse/pull/6127" target="_blank" rel="noopener noreferrer">#6127</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Implement support for INSERT query with <code>Kafka</code> tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/6012" target="_blank" rel="noopener noreferrer">#6012</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Added support for <code>_partition</code> and <code>_timestamp</code> virtual columns to Kafka engine. <a href="https://github.com/ClickHouse/ClickHouse/pull/6400" target="_blank" rel="noopener noreferrer">#6400</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Possibility to remove sensitive data from <code>query_log</code>, server logs, process list with regexp-based rules. <a href="https://github.com/ClickHouse/ClickHouse/pull/5710" target="_blank" rel="noopener noreferrer">#5710</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-feature-2">Experimental Feature<a class="hash-link" href="#experimental-feature-2" title="Direct link to heading">​</a></h4><ul><li>Input and output data format <code>Template</code>. It allows to specify custom format string for input and output. <a href="https://github.com/ClickHouse/ClickHouse/issues/4354" target="_blank" rel="noopener noreferrer">#4354</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6727" target="_blank" rel="noopener noreferrer">#6727</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Implementation of <code>LIVE VIEW</code> tables that were originally proposed in <a href="https://github.com/ClickHouse/ClickHouse/pull/2898" target="_blank" rel="noopener noreferrer">#2898</a>, prepared in <a href="https://github.com/ClickHouse/ClickHouse/issues/3925" target="_blank" rel="noopener noreferrer">#3925</a>, and then updated in <a href="https://github.com/ClickHouse/ClickHouse/issues/5541" target="_blank" rel="noopener noreferrer">#5541</a>. See <a href="https://github.com/ClickHouse/ClickHouse/issues/5541" target="_blank" rel="noopener noreferrer">#5541</a> for detailed description. <a href="https://github.com/ClickHouse/ClickHouse/issues/5541" target="_blank" rel="noopener noreferrer">#5541</a> (<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6425" target="_blank" rel="noopener noreferrer">#6425</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6656" target="_blank" rel="noopener noreferrer">#6656</a> (<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>) Note that <code>LIVE VIEW</code> feature may be removed in next versions.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-8">Bug Fix<a class="hash-link" href="#bug-fix-8" title="Direct link to heading">​</a></h4><ul><li>This release also contains all bug fixes from 19.13 and 19.11.</li><li>Fix segmentation fault when the table has skip indices and vertical merge happens. <a href="https://github.com/ClickHouse/ClickHouse/pull/6723" target="_blank" rel="noopener noreferrer">#6723</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix per-column TTL with non-trivial column defaults. Previously in case of force TTL merge with <code>OPTIMIZE ... FINAL</code> query, expired values was replaced by type defaults instead of user-specified column defaults. <a href="https://github.com/ClickHouse/ClickHouse/pull/6796" target="_blank" rel="noopener noreferrer">#6796</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix Kafka messages duplication problem on normal server restart. <a href="https://github.com/ClickHouse/ClickHouse/pull/6597" target="_blank" rel="noopener noreferrer">#6597</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixed infinite loop when reading Kafka messages. Do not pause/resume consumer on subscription at all - otherwise it may get paused indefinitely in some scenarios. <a href="https://github.com/ClickHouse/ClickHouse/pull/6354" target="_blank" rel="noopener noreferrer">#6354</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix <code>Key expression contains comparison between inconvertible types</code> exception in <code>bitmapContains</code> function. <a href="https://github.com/ClickHouse/ClickHouse/issues/6136" target="_blank" rel="noopener noreferrer">#6136</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/6146" target="_blank" rel="noopener noreferrer">#6146</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6156" target="_blank" rel="noopener noreferrer">#6156</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Fix segfault with enabled <code>optimize_skip_unused_shards</code> and missing sharding key. <a href="https://github.com/ClickHouse/ClickHouse/pull/6384" target="_blank" rel="noopener noreferrer">#6384</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href="https://github.com/ClickHouse/ClickHouse/pull/6514" target="_blank" rel="noopener noreferrer">#6514</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Removed extra verbose logging in MySQL interface <a href="https://github.com/ClickHouse/ClickHouse/pull/6389" target="_blank" rel="noopener noreferrer">#6389</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Return the ability to parse boolean settings from ‘true’ and ‘false’ in the configuration file. <a href="https://github.com/ClickHouse/ClickHouse/pull/6278" target="_blank" rel="noopener noreferrer">#6278</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix crash in <code>quantile</code> and <code>median</code> function over <code>Nullable(Decimal128)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6378" target="_blank" rel="noopener noreferrer">#6378</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed possible incomplete result returned by <code>SELECT</code> query with <code>WHERE</code> condition on primary key contained conversion to Float type. It was caused by incorrect checking of monotonicity in <code>toFloat</code> function. <a href="https://github.com/ClickHouse/ClickHouse/issues/6248" target="_blank" rel="noopener noreferrer">#6248</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6374" target="_blank" rel="noopener noreferrer">#6374</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Check <code>max_expanded_ast_elements</code> setting for mutations. Clear mutations after <code>TRUNCATE TABLE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6205" target="_blank" rel="noopener noreferrer">#6205</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fix JOIN results for key columns when used with <code>join_use_nulls</code>. Attach Nulls instead of columns defaults. <a href="https://github.com/ClickHouse/ClickHouse/pull/6249" target="_blank" rel="noopener noreferrer">#6249</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix for skip indices with vertical merge and alter. Fix for <code>Bad size of marks file</code> exception. <a href="https://github.com/ClickHouse/ClickHouse/issues/6594" target="_blank" rel="noopener noreferrer">#6594</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6713" target="_blank" rel="noopener noreferrer">#6713</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix rare crash in <code>ALTER MODIFY COLUMN</code> and vertical merge when one of merged/altered parts is empty (0 rows) <a href="https://github.com/ClickHouse/ClickHouse/issues/6746" target="_blank" rel="noopener noreferrer">#6746</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6780" target="_blank" rel="noopener noreferrer">#6780</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed bug in conversion of <code>LowCardinality</code> types in <code>AggregateFunctionFactory</code>. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6257" target="_blank" rel="noopener noreferrer">#6257</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6281" target="_blank" rel="noopener noreferrer">#6281</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix wrong behavior and possible segfaults in <code>topK</code> and <code>topKWeighted</code> aggregated functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/6404" target="_blank" rel="noopener noreferrer">#6404</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fixed unsafe code around <code>getIdentifier</code> function. <a href="https://github.com/ClickHouse/ClickHouse/issues/6401" target="_blank" rel="noopener noreferrer">#6401</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6409" target="_blank" rel="noopener noreferrer">#6409</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed bug in MySQL wire protocol (is used while connecting to ClickHouse form MySQL client). Caused by heap buffer overflow in <code>PacketPayloadWriteBuffer</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6212" target="_blank" rel="noopener noreferrer">#6212</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Fixed memory leak in <code>bitmapSubsetInRange</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/6819" target="_blank" rel="noopener noreferrer">#6819</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Fix rare bug when mutation executed after granularity change. <a href="https://github.com/ClickHouse/ClickHouse/pull/6816" target="_blank" rel="noopener noreferrer">#6816</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Allow protobuf message with all fields by default. <a href="https://github.com/ClickHouse/ClickHouse/pull/6132" target="_blank" rel="noopener noreferrer">#6132</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Resolve a bug with <code>nullIf</code> function when we send a <code>NULL</code> argument on the second argument. <a href="https://github.com/ClickHouse/ClickHouse/pull/6446" target="_blank" rel="noopener noreferrer">#6446</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Fix rare bug with wrong memory allocation/deallocation in complex key cache dictionaries with string fields which leads to infinite memory consumption (looks like memory leak). Bug reproduces when string size was a power of two starting from eight (8, 16, 32, etc). <a href="https://github.com/ClickHouse/ClickHouse/pull/6447" target="_blank" rel="noopener noreferrer">#6447</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed Gorilla encoding on small sequences which caused exception <code>Cannot write after end of buffer</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6398" target="_blank" rel="noopener noreferrer">#6398</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6444" target="_blank" rel="noopener noreferrer">#6444</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Allow to use not nullable types in JOINs with <code>join_use_nulls</code> enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/6705" target="_blank" rel="noopener noreferrer">#6705</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Disable <code>Poco::AbstractConfiguration</code> substitutions in query in <code>clickhouse-client</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6706" target="_blank" rel="noopener noreferrer">#6706</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Avoid deadlock in <code>REPLACE PARTITION</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6677" target="_blank" rel="noopener noreferrer">#6677</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Using <code>arrayReduce</code> for constant arguments may lead to segfault. <a href="https://github.com/ClickHouse/ClickHouse/issues/6242" target="_blank" rel="noopener noreferrer">#6242</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6326" target="_blank" rel="noopener noreferrer">#6326</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix inconsistent parts which can appear if replica was restored after <code>DROP PARTITION</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6522" target="_blank" rel="noopener noreferrer">#6522</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6523" target="_blank" rel="noopener noreferrer">#6523</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed hang in <code>JSONExtractRaw</code> function. <a href="https://github.com/ClickHouse/ClickHouse/issues/6195" target="_blank" rel="noopener noreferrer">#6195</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6198" target="_blank" rel="noopener noreferrer">#6198</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix bug with incorrect skip indices serialization and aggregation with adaptive granularity. <a href="https://github.com/ClickHouse/ClickHouse/issues/6594" target="_blank" rel="noopener noreferrer">#6594</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6748" target="_blank" rel="noopener noreferrer">#6748</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix <code>WITH ROLLUP</code> and <code>WITH CUBE</code> modifiers of <code>GROUP BY</code> with two-level aggregation. <a href="https://github.com/ClickHouse/ClickHouse/pull/6225" target="_blank" rel="noopener noreferrer">#6225</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix bug with writing secondary indices marks with adaptive granularity. <a href="https://github.com/ClickHouse/ClickHouse/pull/6126" target="_blank" rel="noopener noreferrer">#6126</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix initialization order while server startup. Since <code>StorageMergeTree::background_task_handle</code> is initialized in <code>startup()</code> the <code>MergeTreeBlockOutputStream::write()</code> may try to use it before initialization. Just check if it is initialized. <a href="https://github.com/ClickHouse/ClickHouse/pull/6080" target="_blank" rel="noopener noreferrer">#6080</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Clearing the data buffer from the previous read operation that was completed with an error. <a href="https://github.com/ClickHouse/ClickHouse/pull/6026" target="_blank" rel="noopener noreferrer">#6026</a> (<a href="https://github.com/bopohaa" target="_blank" rel="noopener noreferrer">Nikolay</a>)</li><li>Fix bug with enabling adaptive granularity when creating a new replica for Replicated<!-- -->*<!-- -->MergeTree table. <a href="https://github.com/ClickHouse/ClickHouse/issues/6394" target="_blank" rel="noopener noreferrer">#6394</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6452" target="_blank" rel="noopener noreferrer">#6452</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed possible crash during server startup in case of exception happened in <code>libunwind</code> during exception at access to uninitialized <code>ThreadStatus</code> structure. <a href="https://github.com/ClickHouse/ClickHouse/pull/6456" target="_blank" rel="noopener noreferrer">#6456</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>)</li><li>Fix crash in <code>yandexConsistentHash</code> function. Found by fuzz test. <a href="https://github.com/ClickHouse/ClickHouse/issues/6304" target="_blank" rel="noopener noreferrer">#6304</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6305" target="_blank" rel="noopener noreferrer">#6305</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed the possibility of hanging queries when server is overloaded and global thread pool becomes near full. This have higher chance to happen on clusters with large number of shards (hundreds), because distributed queries allocate a thread per connection to each shard. For example, this issue may reproduce if a cluster of 330 shards is processing 30 concurrent distributed queries. This issue affects all versions starting from 19.2. <a href="https://github.com/ClickHouse/ClickHouse/pull/6301" target="_blank" rel="noopener noreferrer">#6301</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed logic of <code>arrayEnumerateUniqRanked</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/6423" target="_blank" rel="noopener noreferrer">#6423</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix segfault when decoding symbol table. <a href="https://github.com/ClickHouse/ClickHouse/pull/6603" target="_blank" rel="noopener noreferrer">#6603</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Fixed irrelevant exception in cast of <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it does not contain Nulls (e.g. in query like <code>SELECT CAST(CAST(&#x27;Hello&#x27; AS LowCardinality(Nullable(String))) AS String)</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6094" target="_blank" rel="noopener noreferrer">#6094</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6119" target="_blank" rel="noopener noreferrer">#6119</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Removed extra quoting of description in <code>system.settings</code> table. <a href="https://github.com/ClickHouse/ClickHouse/issues/6696" target="_blank" rel="noopener noreferrer">#6696</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6699" target="_blank" rel="noopener noreferrer">#6699</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Avoid possible deadlock in <code>TRUNCATE</code> of Replicated table. <a href="https://github.com/ClickHouse/ClickHouse/pull/6695" target="_blank" rel="noopener noreferrer">#6695</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix reading in order of sorting key. <a href="https://github.com/ClickHouse/ClickHouse/pull/6189" target="_blank" rel="noopener noreferrer">#6189</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6543" target="_blank" rel="noopener noreferrer">#6543</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix bug opened by <a href="https://github.com/ClickHouse/ClickHouse/pull/4405" target="_blank" rel="noopener noreferrer">#4405</a> (since 19.4.0). Reproduces in queries to Distributed tables over MergeTree tables when we does not query any columns (<code>SELECT 1</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/6236" target="_blank" rel="noopener noreferrer">#6236</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed overflow in integer division of signed type to unsigned type. The behaviour was exactly as in C or C++ language (integer promotion rules) that may be surprising. Please note that the overflow is still possible when dividing large signed number to large unsigned number or vice-versa (but that case is less usual). The issue existed in all server versions. <a href="https://github.com/ClickHouse/ClickHouse/issues/6214" target="_blank" rel="noopener noreferrer">#6214</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6233" target="_blank" rel="noopener noreferrer">#6233</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Limit maximum sleep time for throttling when <code>max_execution_speed</code> or <code>max_execution_speed_bytes</code> is set. Fixed false errors like <code>Estimated query execution time (inf seconds) is too long</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/5547" target="_blank" rel="noopener noreferrer">#5547</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6232" target="_blank" rel="noopener noreferrer">#6232</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed issues about using <code>MATERIALIZED</code> columns and aliases in <code>MaterializedView</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/448" target="_blank" rel="noopener noreferrer">#448</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/3484" target="_blank" rel="noopener noreferrer">#3484</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/3450" target="_blank" rel="noopener noreferrer">#3450</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/2878" target="_blank" rel="noopener noreferrer">#2878</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/2285" target="_blank" rel="noopener noreferrer">#2285</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/3796" target="_blank" rel="noopener noreferrer">#3796</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6316" target="_blank" rel="noopener noreferrer">#6316</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix <code>FormatFactory</code> behaviour for input streams which are not implemented as processor. <a href="https://github.com/ClickHouse/ClickHouse/pull/6495" target="_blank" rel="noopener noreferrer">#6495</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fixed typo. <a href="https://github.com/ClickHouse/ClickHouse/pull/6631" target="_blank" rel="noopener noreferrer">#6631</a> (<a href="https://github.com/alexryndin" target="_blank" rel="noopener noreferrer">Alex Ryndin</a>)</li><li>Typo in the error message ( is -<!-- -->&gt;<!-- --> are ). <a href="https://github.com/ClickHouse/ClickHouse/pull/6839" target="_blank" rel="noopener noreferrer">#6839</a> (<a href="https://github.com/den-crane" target="_blank" rel="noopener noreferrer">Denis Zhuravlev</a>)</li><li>Fixed error while parsing of columns list from string if type contained a comma (this issue was relevant for <code>File</code>, <code>URL</code>, <code>HDFS</code> storages) <a href="https://github.com/ClickHouse/ClickHouse/issues/6217" target="_blank" rel="noopener noreferrer">#6217</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6209" target="_blank" rel="noopener noreferrer">#6209</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="security-fix">Security Fix<a class="hash-link" href="#security-fix" title="Direct link to heading">​</a></h4><ul><li>This release also contains all bug security fixes from 19.13 and 19.11.</li><li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser. Fixed the possibility of stack overflow in Merge and Distributed tables, materialized views and conditions for row-level security that involve subqueries. <a href="https://github.com/ClickHouse/ClickHouse/pull/6433" target="_blank" rel="noopener noreferrer">#6433</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-3">Improvement<a class="hash-link" href="#improvement-3" title="Direct link to heading">​</a></h4><ul><li>Correct implementation of ternary logic for <code>AND/OR</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6048" target="_blank" rel="noopener noreferrer">#6048</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander Kazakov</a>)</li><li>Now values and rows with expired TTL will be removed after <code>OPTIMIZE ... FINAL</code> query from old parts without TTL infos or with outdated TTL infos, e.g. after <code>ALTER ... MODIFY TTL</code> query. Added queries <code>SYSTEM STOP/START TTL MERGES</code> to disallow/allow assign merges with TTL and filter expired values in all merges. <a href="https://github.com/ClickHouse/ClickHouse/pull/6274" target="_blank" rel="noopener noreferrer">#6274</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Possibility to change the location of ClickHouse history file for client using <code>CLICKHOUSE_HISTORY_FILE</code> env. <a href="https://github.com/ClickHouse/ClickHouse/pull/6840" target="_blank" rel="noopener noreferrer">#6840</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Remove <code>dry_run</code> flag from <code>InterpreterSelectQuery</code>. … <a href="https://github.com/ClickHouse/ClickHouse/pull/6375" target="_blank" rel="noopener noreferrer">#6375</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Support <code>ASOF JOIN</code> with <code>ON</code> section. <a href="https://github.com/ClickHouse/ClickHouse/pull/6211" target="_blank" rel="noopener noreferrer">#6211</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Better support of skip indexes for mutations and replication. Support for <code>MATERIALIZE/CLEAR INDEX ... IN PARTITION</code> query. <code>UPDATE x = x</code> recalculates all indices that use column <code>x</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5053" target="_blank" rel="noopener noreferrer">#5053</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Allow to <code>ATTACH</code> live views (for example, at the server startup) regardless to <code>allow_experimental_live_view</code> setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/6754" target="_blank" rel="noopener noreferrer">#6754</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>For stack traces gathered by query profiler, do not include stack frames generated by the query profiler itself. <a href="https://github.com/ClickHouse/ClickHouse/pull/6250" target="_blank" rel="noopener noreferrer">#6250</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Now table functions <code>values</code>, <code>file</code>, <code>url</code>, <code>hdfs</code> have support for ALIAS columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/6255" target="_blank" rel="noopener noreferrer">#6255</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Throw an exception if <code>config.d</code> file does not have the corresponding root element as the config file. <a href="https://github.com/ClickHouse/ClickHouse/pull/6123" target="_blank" rel="noopener noreferrer">#6123</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Print extra info in exception message for <code>no space left on device</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6182" target="_blank" rel="noopener noreferrer">#6182</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/6252" target="_blank" rel="noopener noreferrer">#6252</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6352" target="_blank" rel="noopener noreferrer">#6352</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>When determining shards of a <code>Distributed</code> table to be covered by a read query (for <code>optimize_skip_unused_shards</code> = 1) ClickHouse now checks conditions from both <code>prewhere</code> and <code>where</code> clauses of select statement. <a href="https://github.com/ClickHouse/ClickHouse/pull/6521" target="_blank" rel="noopener noreferrer">#6521</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander Kazakov</a>)</li><li>Enabled <code>SIMDJSON</code> for machines without AVX2 but with SSE 4.2 and PCLMUL instruction set. <a href="https://github.com/ClickHouse/ClickHouse/issues/6285" target="_blank" rel="noopener noreferrer">#6285</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6320" target="_blank" rel="noopener noreferrer">#6320</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>ClickHouse can work on filesystems without <code>O_DIRECT</code> support (such as ZFS and BtrFS) without additional tuning. <a href="https://github.com/ClickHouse/ClickHouse/issues/4449" target="_blank" rel="noopener noreferrer">#4449</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6730" target="_blank" rel="noopener noreferrer">#6730</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Support push down predicate for final subquery. <a href="https://github.com/ClickHouse/ClickHouse/pull/6120" target="_blank" rel="noopener noreferrer">#6120</a> (<a href="https://github.com/TCeason" target="_blank" rel="noopener noreferrer">TCeason</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6162" target="_blank" rel="noopener noreferrer">#6162</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Better <code>JOIN ON</code> keys extraction <a href="https://github.com/ClickHouse/ClickHouse/pull/6131" target="_blank" rel="noopener noreferrer">#6131</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Upated <code>SIMDJSON</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6285" target="_blank" rel="noopener noreferrer">#6285</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6306" target="_blank" rel="noopener noreferrer">#6306</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Optimize selecting of smallest column for <code>SELECT count()</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/6344" target="_blank" rel="noopener noreferrer">#6344</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Added <code>strict</code> parameter in <code>windowFunnel()</code>. When the <code>strict</code> is set, the <code>windowFunnel()</code> applies conditions only for the unique values. <a href="https://github.com/ClickHouse/ClickHouse/pull/6548" target="_blank" rel="noopener noreferrer">#6548</a> (<a href="https://github.com/achimbab" target="_blank" rel="noopener noreferrer">achimbab</a>)</li><li>Safer interface of <code>mysqlxx::Pool</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6150" target="_blank" rel="noopener noreferrer">#6150</a> (<a href="https://github.com/avasiliev" target="_blank" rel="noopener noreferrer">avasiliev</a>)</li><li>Options line size when executing with <code>--help</code> option now corresponds with terminal size. <a href="https://github.com/ClickHouse/ClickHouse/pull/6590" target="_blank" rel="noopener noreferrer">#6590</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Disable “read in order” optimization for aggregation without keys. <a href="https://github.com/ClickHouse/ClickHouse/pull/6599" target="_blank" rel="noopener noreferrer">#6599</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>HTTP status code for <code>INCORRECT_DATA</code> and <code>TYPE_MISMATCH</code> error codes was changed from default <code>500 Internal Server Error</code> to <code>400 Bad Request</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6271" target="_blank" rel="noopener noreferrer">#6271</a> (<a href="https://github.com/a-rodin" target="_blank" rel="noopener noreferrer">Alexander Rodin</a>)</li><li>Move Join object from <code>ExpressionAction</code> into <code>AnalyzedJoin</code>. <code>ExpressionAnalyzer</code> and <code>ExpressionAction</code> do not know about <code>Join</code> class anymore. Its logic is hidden by <code>AnalyzedJoin</code> iface. <a href="https://github.com/ClickHouse/ClickHouse/pull/6801" target="_blank" rel="noopener noreferrer">#6801</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed possible deadlock of distributed queries when one of shards is localhost but the query is sent via network connection. <a href="https://github.com/ClickHouse/ClickHouse/pull/6759" target="_blank" rel="noopener noreferrer">#6759</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Changed semantic of multiple tables <code>RENAME</code> to avoid possible deadlocks. <a href="https://github.com/ClickHouse/ClickHouse/issues/6757" target="_blank" rel="noopener noreferrer">#6757</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6756" target="_blank" rel="noopener noreferrer">#6756</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Rewritten MySQL compatibility server to prevent loading full packet payload in memory. Decreased memory consumption for each connection to approximately <code>2 * DBMS_DEFAULT_BUFFER_SIZE</code> (read/write buffers). <a href="https://github.com/ClickHouse/ClickHouse/pull/5811" target="_blank" rel="noopener noreferrer">#5811</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Move AST alias interpreting logic out of parser that does not have to know anything about query semantics. <a href="https://github.com/ClickHouse/ClickHouse/pull/6108" target="_blank" rel="noopener noreferrer">#6108</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Slightly more safe parsing of <code>NamesAndTypesList</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6408" target="_blank" rel="noopener noreferrer">#6408</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6410" target="_blank" rel="noopener noreferrer">#6410</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>clickhouse-copier</code>: Allow use <code>where_condition</code> from config with <code>partition_key</code> alias in query for checking partition existence (Earlier it was used only in reading data queries). <a href="https://github.com/ClickHouse/ClickHouse/pull/6577" target="_blank" rel="noopener noreferrer">#6577</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Added optional message argument in <code>throwIf</code>. (<a href="https://github.com/ClickHouse/ClickHouse/issues/5772" target="_blank" rel="noopener noreferrer">#5772</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6329" target="_blank" rel="noopener noreferrer">#6329</a> (<a href="https://github.com/Vdimir" target="_blank" rel="noopener noreferrer">Vdimir</a>)</li><li>Server exception got while sending insertion data is now being processed in client as well. <a href="https://github.com/ClickHouse/ClickHouse/issues/5891" target="_blank" rel="noopener noreferrer">#5891</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6711" target="_blank" rel="noopener noreferrer">#6711</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Added a metric <code>DistributedFilesToInsert</code> that shows the total number of files in filesystem that are selected to send to remote servers by Distributed tables. The number is summed across all shards. <a href="https://github.com/ClickHouse/ClickHouse/pull/6600" target="_blank" rel="noopener noreferrer">#6600</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Move most of JOINs prepare logic from <code>ExpressionAction/ExpressionAnalyzer</code> to <code>AnalyzedJoin</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6785" target="_blank" rel="noopener noreferrer">#6785</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix TSan <a href="https://clickhouse-test-reports.s3.yandex.net/6399/c1c1d1daa98e199e620766f1bd06a5921050a00d/functional_stateful_tests_(thread).html" target="_blank" rel="noopener noreferrer">warning</a> ‘lock-order-inversion’. <a href="https://github.com/ClickHouse/ClickHouse/pull/6740" target="_blank" rel="noopener noreferrer">#6740</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Better information messages about lack of Linux capabilities. Logging fatal errors with “fatal” level, that will make it easier to find in <code>system.text_log</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6441" target="_blank" rel="noopener noreferrer">#6441</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>When enable dumping temporary data to the disk to restrict memory usage during <code>GROUP BY</code>, <code>ORDER BY</code>, it didn’t check the free disk space. The fix add a new setting <code>min_free_disk_space</code>, when the free disk space it smaller then the threshold, the query will stop and throw <code>ErrorCodes::NOT_ENOUGH_SPACE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6678" target="_blank" rel="noopener noreferrer">#6678</a> (<a href="https://github.com/weiqxu" target="_blank" rel="noopener noreferrer">Weiqing Xu</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6691" target="_blank" rel="noopener noreferrer">#6691</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Removed recursive rwlock by thread. It makes no sense, because threads are reused between queries. <code>SELECT</code> query may acquire a lock in one thread, hold a lock from another thread and exit from first thread. In the same time, first thread can be reused by <code>DROP</code> query. This will lead to false “Attempt to acquire exclusive lock recursively” messages. <a href="https://github.com/ClickHouse/ClickHouse/pull/6771" target="_blank" rel="noopener noreferrer">#6771</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Split <code>ExpressionAnalyzer.appendJoin()</code>. Prepare a place in <code>ExpressionAnalyzer</code> for <code>MergeJoin</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6524" target="_blank" rel="noopener noreferrer">#6524</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Added <code>mysql_native_password</code> authentication plugin to MySQL compatibility server. <a href="https://github.com/ClickHouse/ClickHouse/pull/6194" target="_blank" rel="noopener noreferrer">#6194</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Less number of <code>clock_gettime</code> calls; fixed ABI compatibility between debug/release in <code>Allocator</code> (insignificant issue). <a href="https://github.com/ClickHouse/ClickHouse/pull/6197" target="_blank" rel="noopener noreferrer">#6197</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Move <code>collectUsedColumns</code> from <code>ExpressionAnalyzer</code> to <code>SyntaxAnalyzer</code>. <code>SyntaxAnalyzer</code> makes <code>required_source_columns</code> itself now. <a href="https://github.com/ClickHouse/ClickHouse/pull/6416" target="_blank" rel="noopener noreferrer">#6416</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Add setting <code>joined_subquery_requires_alias</code> to require aliases for subselects and table functions in <code>FROM</code> that more than one table is present (i.e. queries with JOINs). <a href="https://github.com/ClickHouse/ClickHouse/pull/6733" target="_blank" rel="noopener noreferrer">#6733</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Extract <code>GetAggregatesVisitor</code> class from <code>ExpressionAnalyzer</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6458" target="_blank" rel="noopener noreferrer">#6458</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li><code>system.query_log</code>: change data type of <code>type</code> column to <code>Enum</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6265" target="_blank" rel="noopener noreferrer">#6265</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>)</li><li>Static linking of <code>sha256_password</code> authentication plugin. <a href="https://github.com/ClickHouse/ClickHouse/pull/6512" target="_blank" rel="noopener noreferrer">#6512</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Avoid extra dependency for the setting <code>compile</code> to work. In previous versions, the user may get error like <code>cannot open crti.o</code>, <code>unable to find library -lc</code> etc. <a href="https://github.com/ClickHouse/ClickHouse/pull/6309" target="_blank" rel="noopener noreferrer">#6309</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>More validation of the input that may come from malicious replica. <a href="https://github.com/ClickHouse/ClickHouse/pull/6303" target="_blank" rel="noopener noreferrer">#6303</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Now <code>clickhouse-obfuscator</code> file is available in <code>clickhouse-client</code> package. In previous versions it was available as <code>clickhouse obfuscator</code> (with whitespace). <a href="https://github.com/ClickHouse/ClickHouse/issues/5816" target="_blank" rel="noopener noreferrer">#5816</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6609" target="_blank" rel="noopener noreferrer">#6609</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Fixed deadlock when we have at least two queries that read at least two tables in different order and another query that performs DDL operation on one of tables. Fixed another very rare deadlock. <a href="https://github.com/ClickHouse/ClickHouse/pull/6764" target="_blank" rel="noopener noreferrer">#6764</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added <code>os_thread_ids</code> column to <code>system.processes</code> and <code>system.query_log</code> for better debugging possibilities. <a href="https://github.com/ClickHouse/ClickHouse/pull/6763" target="_blank" rel="noopener noreferrer">#6763</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>A workaround for PHP mysqlnd extension bugs which occur when <code>sha256_password</code> is used as a default authentication plugin (described in <a href="https://github.com/ClickHouse/ClickHouse/issues/6031" target="_blank" rel="noopener noreferrer">#6031</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/6113" target="_blank" rel="noopener noreferrer">#6113</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Remove unneeded place with changed nullability columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/6693" target="_blank" rel="noopener noreferrer">#6693</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Set default value of <code>queue_max_wait_ms</code> to zero, because current value (five seconds) makes no sense. There are rare circumstances when this settings has any use. Added settings <code>replace_running_query_max_wait_ms</code>, <code>kafka_max_wait_ms</code> and <code>connection_pool_max_wait_ms</code> for disambiguation. <a href="https://github.com/ClickHouse/ClickHouse/pull/6692" target="_blank" rel="noopener noreferrer">#6692</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Extract <code>SelectQueryExpressionAnalyzer</code> from <code>ExpressionAnalyzer</code>. Keep the last one for non-select queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/6499" target="_blank" rel="noopener noreferrer">#6499</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Removed duplicating input and output formats. <a href="https://github.com/ClickHouse/ClickHouse/pull/6239" target="_blank" rel="noopener noreferrer">#6239</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Allow user to override <code>poll_interval</code> and <code>idle_connection_timeout</code> settings on connection. <a href="https://github.com/ClickHouse/ClickHouse/pull/6230" target="_blank" rel="noopener noreferrer">#6230</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>MergeTree</code> now has an additional option <code>ttl_only_drop_parts</code> (disabled by default) to avoid partial pruning of parts, so that they dropped completely when all the rows in a part are expired. <a href="https://github.com/ClickHouse/ClickHouse/pull/6191" target="_blank" rel="noopener noreferrer">#6191</a> (<a href="https://github.com/svladykin" target="_blank" rel="noopener noreferrer">Sergi Vladykin</a>)</li><li>Type checks for set index functions. Throw exception if function got a wrong type. This fixes fuzz test with UBSan. <a href="https://github.com/ClickHouse/ClickHouse/pull/6511" target="_blank" rel="noopener noreferrer">#6511</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement-2">Performance Improvement<a class="hash-link" href="#performance-improvement-2" title="Direct link to heading">​</a></h4><ul><li>Optimize queries with <code>ORDER BY expressions</code> clause, where <code>expressions</code> have coinciding prefix with sorting key in <code>MergeTree</code> tables. This optimization is controlled by <code>optimize_read_in_order</code> setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/6054" target="_blank" rel="noopener noreferrer">#6054</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6629" target="_blank" rel="noopener noreferrer">#6629</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Allow to use multiple threads during parts loading and removal. <a href="https://github.com/ClickHouse/ClickHouse/issues/6372" target="_blank" rel="noopener noreferrer">#6372</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/6074" target="_blank" rel="noopener noreferrer">#6074</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6438" target="_blank" rel="noopener noreferrer">#6438</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Implemented batch variant of updating aggregate function states. It may lead to performance benefits. <a href="https://github.com/ClickHouse/ClickHouse/pull/6435" target="_blank" rel="noopener noreferrer">#6435</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Using <code>FastOps</code> library for functions <code>exp</code>, <code>log</code>, <code>sigmoid</code>, <code>tanh</code>. FastOps is a fast vector math library from Michael Parakhin (Yandex CTO). Improved performance of <code>exp</code> and <code>log</code> functions more than 6 times. The functions <code>exp</code> and <code>log</code> from <code>Float32</code> argument will return <code>Float32</code> (in previous versions they always return <code>Float64</code>). Now <code>exp(nan)</code> may return <code>inf</code>. The result of <code>exp</code> and <code>log</code> functions may be not the nearest machine representable number to the true answer. <a href="https://github.com/ClickHouse/ClickHouse/pull/6254" target="_blank" rel="noopener noreferrer">#6254</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>) Using Danila Kutenin variant to make fastops working <a href="https://github.com/ClickHouse/ClickHouse/pull/6317" target="_blank" rel="noopener noreferrer">#6317</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Disable consecutive key optimization for <code>UInt8/16</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6298" target="_blank" rel="noopener noreferrer">#6298</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6701" target="_blank" rel="noopener noreferrer">#6701</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Improved performance of <code>simdjson</code> library by getting rid of dynamic allocation in <code>ParsedJson::Iterator</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6479" target="_blank" rel="noopener noreferrer">#6479</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Pre-fault pages when allocating memory with <code>mmap()</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6667" target="_blank" rel="noopener noreferrer">#6667</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Fix performance bug in <code>Decimal</code> comparison. <a href="https://github.com/ClickHouse/ClickHouse/pull/6380" target="_blank" rel="noopener noreferrer">#6380</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-4">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-4" title="Direct link to heading">​</a></h4><ul><li>Remove Compiler (runtime template instantiation) because we’ve win over it’s performance. <a href="https://github.com/ClickHouse/ClickHouse/pull/6646" target="_blank" rel="noopener noreferrer">#6646</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added performance test to show degradation of performance in gcc-9 in more isolated way. <a href="https://github.com/ClickHouse/ClickHouse/pull/6302" target="_blank" rel="noopener noreferrer">#6302</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added table function <code>numbers_mt</code>, which is multithreaded version of <code>numbers</code>. Updated performance tests with hash functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/6554" target="_blank" rel="noopener noreferrer">#6554</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Comparison mode in <code>clickhouse-benchmark</code> <a href="https://github.com/ClickHouse/ClickHouse/issues/6220" target="_blank" rel="noopener noreferrer">#6220</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6343" target="_blank" rel="noopener noreferrer">#6343</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Best effort for printing stack traces. Also added <code>SIGPROF</code> as a debugging signal to print stack trace of a running thread. <a href="https://github.com/ClickHouse/ClickHouse/pull/6529" target="_blank" rel="noopener noreferrer">#6529</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Every function in its own file, part 10. <a href="https://github.com/ClickHouse/ClickHouse/pull/6321" target="_blank" rel="noopener noreferrer">#6321</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Remove doubled const <code>TABLE_IS_READ_ONLY</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6566" target="_blank" rel="noopener noreferrer">#6566</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Formatting changes for <code>StringHashMap</code> PR <a href="https://github.com/ClickHouse/ClickHouse/issues/5417" target="_blank" rel="noopener noreferrer">#5417</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6700" target="_blank" rel="noopener noreferrer">#6700</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Better subquery for join creation in <code>ExpressionAnalyzer</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6824" target="_blank" rel="noopener noreferrer">#6824</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Remove a redundant condition (found by PVS Studio). <a href="https://github.com/ClickHouse/ClickHouse/pull/6775" target="_blank" rel="noopener noreferrer">#6775</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Separate the hash table interface for <code>ReverseIndex</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6672" target="_blank" rel="noopener noreferrer">#6672</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Refactoring of settings. <a href="https://github.com/ClickHouse/ClickHouse/pull/6689" target="_blank" rel="noopener noreferrer">#6689</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add comments for <code>set</code> index functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/6319" target="_blank" rel="noopener noreferrer">#6319</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Increase OOM score in debug version on Linux. <a href="https://github.com/ClickHouse/ClickHouse/pull/6152" target="_blank" rel="noopener noreferrer">#6152</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>HDFS HA now work in debug build. <a href="https://github.com/ClickHouse/ClickHouse/pull/6650" target="_blank" rel="noopener noreferrer">#6650</a> (<a href="https://github.com/weiqxu" target="_blank" rel="noopener noreferrer">Weiqing Xu</a>)</li><li>Added a test to <code>transform_query_for_external_database</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6388" target="_blank" rel="noopener noreferrer">#6388</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add test for multiple materialized views for Kafka table. <a href="https://github.com/ClickHouse/ClickHouse/pull/6509" target="_blank" rel="noopener noreferrer">#6509</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Make a better build scheme. <a href="https://github.com/ClickHouse/ClickHouse/pull/6500" target="_blank" rel="noopener noreferrer">#6500</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixed <code>test_external_dictionaries</code> integration in case it was executed under non root user. <a href="https://github.com/ClickHouse/ClickHouse/pull/6507" target="_blank" rel="noopener noreferrer">#6507</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>The bug reproduces when total size of written packets exceeds <code>DBMS_DEFAULT_BUFFER_SIZE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6204" target="_blank" rel="noopener noreferrer">#6204</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Added a test for <code>RENAME</code> table race condition <a href="https://github.com/ClickHouse/ClickHouse/pull/6752" target="_blank" rel="noopener noreferrer">#6752</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Avoid data race on Settings in <code>KILL QUERY</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6753" target="_blank" rel="noopener noreferrer">#6753</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add integration test for handling errors by a cache dictionary. <a href="https://github.com/ClickHouse/ClickHouse/pull/6755" target="_blank" rel="noopener noreferrer">#6755</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Disable parsing of ELF object files on Mac OS, because it makes no sense. <a href="https://github.com/ClickHouse/ClickHouse/pull/6578" target="_blank" rel="noopener noreferrer">#6578</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Attempt to make changelog generator better. <a href="https://github.com/ClickHouse/ClickHouse/pull/6327" target="_blank" rel="noopener noreferrer">#6327</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Adding <code>-Wshadow</code> switch to the GCC. <a href="https://github.com/ClickHouse/ClickHouse/pull/6325" target="_blank" rel="noopener noreferrer">#6325</a> (<a href="https://github.com/kreuzerkrieg" target="_blank" rel="noopener noreferrer">kreuzerkrieg</a>)</li><li>Removed obsolete code for <code>mimalloc</code> support. <a href="https://github.com/ClickHouse/ClickHouse/pull/6715" target="_blank" rel="noopener noreferrer">#6715</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>zlib-ng</code> determines x86 capabilities and saves this info to global variables. This is done in defalteInit call, which may be made by different threads simultaneously. To avoid multithreaded writes, do it on library startup. <a href="https://github.com/ClickHouse/ClickHouse/pull/6141" target="_blank" rel="noopener noreferrer">#6141</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Regression test for a bug which in join which was fixed in <a href="https://github.com/ClickHouse/ClickHouse/issues/5192" target="_blank" rel="noopener noreferrer">#5192</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6147" target="_blank" rel="noopener noreferrer">#6147</a> (<a href="https://github.com/theruziev" target="_blank" rel="noopener noreferrer">Bakhtiyor Ruziev</a>)</li><li>Fixed MSan report. <a href="https://github.com/ClickHouse/ClickHouse/pull/6144" target="_blank" rel="noopener noreferrer">#6144</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix flapping TTL test. <a href="https://github.com/ClickHouse/ClickHouse/pull/6782" target="_blank" rel="noopener noreferrer">#6782</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fixed false data race in <code>MergeTreeDataPart::is_frozen</code> field. <a href="https://github.com/ClickHouse/ClickHouse/pull/6583" target="_blank" rel="noopener noreferrer">#6583</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed timeouts in fuzz test. In previous version, it managed to find false hangup in query <code>SELECT * FROM numbers_mt(gccMurmurHash(&#x27;&#x27;))</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6582" target="_blank" rel="noopener noreferrer">#6582</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added debug checks to <code>static_cast</code> of columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/6581" target="_blank" rel="noopener noreferrer">#6581</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Support for Oracle Linux in official RPM packages. <a href="https://github.com/ClickHouse/ClickHouse/issues/6356" target="_blank" rel="noopener noreferrer">#6356</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6585" target="_blank" rel="noopener noreferrer">#6585</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Changed json perftests from <code>once</code> to <code>loop</code> type. <a href="https://github.com/ClickHouse/ClickHouse/pull/6536" target="_blank" rel="noopener noreferrer">#6536</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li><code>odbc-bridge.cpp</code> defines <code>main()</code> so it should not be included in <code>clickhouse-lib</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6538" target="_blank" rel="noopener noreferrer">#6538</a> (<a href="https://github.com/orivej" target="_blank" rel="noopener noreferrer">Orivej Desh</a>)</li><li>Test for crash in <code>FULL|RIGHT JOIN</code> with nulls in right table’s keys. <a href="https://github.com/ClickHouse/ClickHouse/pull/6362" target="_blank" rel="noopener noreferrer">#6362</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Added a test for the limit on expansion of aliases just in case. <a href="https://github.com/ClickHouse/ClickHouse/pull/6442" target="_blank" rel="noopener noreferrer">#6442</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Switched from <code>boost::filesystem</code> to <code>std::filesystem</code> where appropriate. <a href="https://github.com/ClickHouse/ClickHouse/pull/6253" target="_blank" rel="noopener noreferrer">#6253</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6385" target="_blank" rel="noopener noreferrer">#6385</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added RPM packages to website. <a href="https://github.com/ClickHouse/ClickHouse/pull/6251" target="_blank" rel="noopener noreferrer">#6251</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add a test for fixed <code>Unknown identifier</code> exception in <code>IN</code> section. <a href="https://github.com/ClickHouse/ClickHouse/pull/6708" target="_blank" rel="noopener noreferrer">#6708</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Simplify <code>shared_ptr_helper</code> because people facing difficulties understanding it. <a href="https://github.com/ClickHouse/ClickHouse/pull/6675" target="_blank" rel="noopener noreferrer">#6675</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added performance tests for fixed Gorilla and DoubleDelta codec. <a href="https://github.com/ClickHouse/ClickHouse/pull/6179" target="_blank" rel="noopener noreferrer">#6179</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Split the integration test <code>test_dictionaries</code> into 4 separate tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/6776" target="_blank" rel="noopener noreferrer">#6776</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fix PVS-Studio warning in <code>PipelineExecutor</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6777" target="_blank" rel="noopener noreferrer">#6777</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Allow to use <code>library</code> dictionary source with ASan. <a href="https://github.com/ClickHouse/ClickHouse/pull/6482" target="_blank" rel="noopener noreferrer">#6482</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added option to generate changelog from a list of PRs. <a href="https://github.com/ClickHouse/ClickHouse/pull/6350" target="_blank" rel="noopener noreferrer">#6350</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Lock the <code>TinyLog</code> storage when reading. <a href="https://github.com/ClickHouse/ClickHouse/pull/6226" target="_blank" rel="noopener noreferrer">#6226</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Check for broken symlinks in CI. <a href="https://github.com/ClickHouse/ClickHouse/pull/6634" target="_blank" rel="noopener noreferrer">#6634</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Increase timeout for “stack overflow” test because it may take a long time in debug build. <a href="https://github.com/ClickHouse/ClickHouse/pull/6637" target="_blank" rel="noopener noreferrer">#6637</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added a check for double whitespaces. <a href="https://github.com/ClickHouse/ClickHouse/pull/6643" target="_blank" rel="noopener noreferrer">#6643</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix <code>new/delete</code> memory tracking when build with sanitizers. Tracking is not clear. It only prevents memory limit exceptions in tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/6450" target="_blank" rel="noopener noreferrer">#6450</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Enable back the check of undefined symbols while linking. <a href="https://github.com/ClickHouse/ClickHouse/pull/6453" target="_blank" rel="noopener noreferrer">#6453</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Avoid rebuilding <code>hyperscan</code> every day. <a href="https://github.com/ClickHouse/ClickHouse/pull/6307" target="_blank" rel="noopener noreferrer">#6307</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed UBSan report in <code>ProtobufWriter</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6163" target="_blank" rel="noopener noreferrer">#6163</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Don’t allow to use query profiler with sanitizers because it is not compatible. <a href="https://github.com/ClickHouse/ClickHouse/pull/6769" target="_blank" rel="noopener noreferrer">#6769</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add test for reloading a dictionary after fail by timer. <a href="https://github.com/ClickHouse/ClickHouse/pull/6114" target="_blank" rel="noopener noreferrer">#6114</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fix inconsistency in <code>PipelineExecutor::prepareProcessor</code> argument type. <a href="https://github.com/ClickHouse/ClickHouse/pull/6494" target="_blank" rel="noopener noreferrer">#6494</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Added a test for bad URIs. <a href="https://github.com/ClickHouse/ClickHouse/pull/6493" target="_blank" rel="noopener noreferrer">#6493</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added more checks to <code>CAST</code> function. This should get more information about segmentation fault in fuzzy test. <a href="https://github.com/ClickHouse/ClickHouse/pull/6346" target="_blank" rel="noopener noreferrer">#6346</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Added <code>gcc-9</code> support to <code>docker/builder</code> container that builds image locally. <a href="https://github.com/ClickHouse/ClickHouse/pull/6333" target="_blank" rel="noopener noreferrer">#6333</a> (<a href="https://github.com/NanoBjorn" target="_blank" rel="noopener noreferrer">Gleb Novikov</a>)</li><li>Test for primary key with <code>LowCardinality(String)</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/5044" target="_blank" rel="noopener noreferrer">#5044</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6219" target="_blank" rel="noopener noreferrer">#6219</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Fixed tests affected by slow stack traces printing. <a href="https://github.com/ClickHouse/ClickHouse/pull/6315" target="_blank" rel="noopener noreferrer">#6315</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add a test case for crash in <code>groupUniqArray</code> fixed in <a href="https://github.com/ClickHouse/ClickHouse/pull/6029" target="_blank" rel="noopener noreferrer">#6029</a>. <a href="https://github.com/ClickHouse/ClickHouse/issues/4402" target="_blank" rel="noopener noreferrer">#4402</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6129" target="_blank" rel="noopener noreferrer">#6129</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Fixed indices mutations tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/6645" target="_blank" rel="noopener noreferrer">#6645</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>In performance test, do not read query log for queries we didn’t run. <a href="https://github.com/ClickHouse/ClickHouse/pull/6427" target="_blank" rel="noopener noreferrer">#6427</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Materialized view now could be created with any low cardinality types regardless to the setting about suspicious low cardinality types. <a href="https://github.com/ClickHouse/ClickHouse/pull/6428" target="_blank" rel="noopener noreferrer">#6428</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Updated tests for <code>send_logs_level</code> setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/6207" target="_blank" rel="noopener noreferrer">#6207</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix build under gcc-8.2. <a href="https://github.com/ClickHouse/ClickHouse/pull/6196" target="_blank" rel="noopener noreferrer">#6196</a> (<a href="https://github.com/zlobober" target="_blank" rel="noopener noreferrer">Max Akhmedov</a>)</li><li>Fix build with internal libc++. <a href="https://github.com/ClickHouse/ClickHouse/pull/6724" target="_blank" rel="noopener noreferrer">#6724</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix shared build with <code>rdkafka</code> library <a href="https://github.com/ClickHouse/ClickHouse/pull/6101" target="_blank" rel="noopener noreferrer">#6101</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixes for Mac OS build (incomplete). <a href="https://github.com/ClickHouse/ClickHouse/pull/6390" target="_blank" rel="noopener noreferrer">#6390</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6429" target="_blank" rel="noopener noreferrer">#6429</a> (<a href="https://github.com/alex-zaitsev" target="_blank" rel="noopener noreferrer">alex-zaitsev</a>)</li><li>Fix “splitted” build. <a href="https://github.com/ClickHouse/ClickHouse/pull/6618" target="_blank" rel="noopener noreferrer">#6618</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Other build fixes: <a href="https://github.com/ClickHouse/ClickHouse/pull/6186" target="_blank" rel="noopener noreferrer">#6186</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6486" target="_blank" rel="noopener noreferrer">#6486</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6348" target="_blank" rel="noopener noreferrer">#6348</a> (<a href="https://github.com/Vxider" target="_blank" rel="noopener noreferrer">vxider</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6744" target="_blank" rel="noopener noreferrer">#6744</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6016" target="_blank" rel="noopener noreferrer">#6016</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6421" target="_blank" rel="noopener noreferrer">#6421</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6491" target="_blank" rel="noopener noreferrer">#6491</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-3">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-3" title="Direct link to heading">​</a></h4><ul><li>Removed rarely used table function <code>catBoostPool</code> and storage <code>CatBoostPool</code>. If you have used this table function, please write email to <code>clickhouse-feedback@yandex-team.com</code>. Note that CatBoost integration remains and will be supported. <a href="https://github.com/ClickHouse/ClickHouse/pull/6279" target="_blank" rel="noopener noreferrer">#6279</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Disable <code>ANY RIGHT JOIN</code> and <code>ANY FULL JOIN</code> by default. Set <code>any_join_distinct_right_table_keys</code> setting to enable them. <a href="https://github.com/ClickHouse/ClickHouse/issues/5126" target="_blank" rel="noopener noreferrer">#5126</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6351" target="_blank" rel="noopener noreferrer">#6351</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-13">ClickHouse Release 19.13<a class="hash-link" href="#clickhouse-release-19-13" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-13-6-51-2019-10-02">ClickHouse Release 19.13.6.51, 2019-10-02<a class="hash-link" href="#clickhouse-release-19-13-6-51-2019-10-02" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-9">Bug Fix<a class="hash-link" href="#bug-fix-9" title="Direct link to heading">​</a></h4><ul><li>This release also contains all bug fixes from 19.11.12.69.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-13-5-44-2019-09-20">ClickHouse Release 19.13.5.44, 2019-09-20<a class="hash-link" href="#clickhouse-release-19-13-5-44-2019-09-20" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-10">Bug Fix<a class="hash-link" href="#bug-fix-10" title="Direct link to heading">​</a></h4><ul><li>This release also contains all bug fixes from 19.14.6.12.</li><li>Fixed possible inconsistent state of table while executing <code>DROP</code> query for replicated table while zookeeper is not accessible. <a href="https://github.com/ClickHouse/ClickHouse/issues/6045" target="_blank" rel="noopener noreferrer">#6045</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6413" target="_blank" rel="noopener noreferrer">#6413</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>)</li><li>Fix for data race in StorageMerge <a href="https://github.com/ClickHouse/ClickHouse/pull/6717" target="_blank" rel="noopener noreferrer">#6717</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix bug introduced in query profiler which leads to endless recv from socket. <a href="https://github.com/ClickHouse/ClickHouse/pull/6386" target="_blank" rel="noopener noreferrer">#6386</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix excessive CPU usage while executing <code>JSONExtractRaw</code> function over a boolean value. <a href="https://github.com/ClickHouse/ClickHouse/pull/6208" target="_blank" rel="noopener noreferrer">#6208</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fixes the regression while pushing to materialized view. <a href="https://github.com/ClickHouse/ClickHouse/pull/6415" target="_blank" rel="noopener noreferrer">#6415</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Table function <code>url</code> had the vulnerability allowed the attacker to inject arbitrary HTTP headers in the request. This issue was found by <a href="https://github.com/NSTikhomirov" target="_blank" rel="noopener noreferrer">Nikita Tikhomirov</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6466" target="_blank" rel="noopener noreferrer">#6466</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix useless <code>AST</code> check in Set index. <a href="https://github.com/ClickHouse/ClickHouse/issues/6510" target="_blank" rel="noopener noreferrer">#6510</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6651" target="_blank" rel="noopener noreferrer">#6651</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Fixed parsing of <code>AggregateFunction</code> values embedded in query. <a href="https://github.com/ClickHouse/ClickHouse/issues/6575" target="_blank" rel="noopener noreferrer">#6575</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6773" target="_blank" rel="noopener noreferrer">#6773</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Fixed wrong behaviour of <code>trim</code> functions family. <a href="https://github.com/ClickHouse/ClickHouse/pull/6647" target="_blank" rel="noopener noreferrer">#6647</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-13-4-32-2019-09-10">ClickHouse Release 19.13.4.32, 2019-09-10<a class="hash-link" href="#clickhouse-release-19-13-4-32-2019-09-10" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-11">Bug Fix<a class="hash-link" href="#bug-fix-11" title="Direct link to heading">​</a></h4><ul><li>This release also contains all bug security fixes from 19.11.9.52 and 19.11.10.54.</li><li>Fixed data race in <code>system.parts</code> table and <code>ALTER</code> query. <a href="https://github.com/ClickHouse/ClickHouse/issues/6245" target="_blank" rel="noopener noreferrer">#6245</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6513" target="_blank" rel="noopener noreferrer">#6513</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed mismatched header in streams happened in case of reading from empty distributed table with sample and prewhere. <a href="https://github.com/ClickHouse/ClickHouse/issues/6167" target="_blank" rel="noopener noreferrer">#6167</a> (<a href="https://github.com/fancyqlx" target="_blank" rel="noopener noreferrer">Lixiang Qian</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6823" target="_blank" rel="noopener noreferrer">#6823</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fixed crash when using <code>IN</code> clause with a subquery with a tuple. <a href="https://github.com/ClickHouse/ClickHouse/issues/6125" target="_blank" rel="noopener noreferrer">#6125</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6550" target="_blank" rel="noopener noreferrer">#6550</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fix case with same column names in <code>GLOBAL JOIN ON</code> section. <a href="https://github.com/ClickHouse/ClickHouse/pull/6181" target="_blank" rel="noopener noreferrer">#6181</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix crash when casting types to <code>Decimal</code> that do not support it. Throw exception instead. <a href="https://github.com/ClickHouse/ClickHouse/pull/6297" target="_blank" rel="noopener noreferrer">#6297</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed crash in <code>extractAll()</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/6644" target="_blank" rel="noopener noreferrer">#6644</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Query transformation for <code>MySQL</code>, <code>ODBC</code>, <code>JDBC</code> table functions now works properly for <code>SELECT WHERE</code> queries with multiple <code>AND</code> expressions. <a href="https://github.com/ClickHouse/ClickHouse/issues/6381" target="_blank" rel="noopener noreferrer">#6381</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6676" target="_blank" rel="noopener noreferrer">#6676</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Added previous declaration checks for MySQL 8 integration. <a href="https://github.com/ClickHouse/ClickHouse/pull/6569" target="_blank" rel="noopener noreferrer">#6569</a> (<a href="https://github.com/rafaeldtinoco" target="_blank" rel="noopener noreferrer">Rafael David Tinoco</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="security-fix-1">Security Fix<a class="hash-link" href="#security-fix-1" title="Direct link to heading">​</a></h4><ul><li>Fix two vulnerabilities in codecs in decompression phase (malicious user can fabricate compressed data that will lead to buffer overflow in decompression). <a href="https://github.com/ClickHouse/ClickHouse/pull/6670" target="_blank" rel="noopener noreferrer">#6670</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-13-3-26-2019-08-22">ClickHouse Release 19.13.3.26, 2019-08-22<a class="hash-link" href="#clickhouse-release-19-13-3-26-2019-08-22" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-12">Bug Fix<a class="hash-link" href="#bug-fix-12" title="Direct link to heading">​</a></h4><ul><li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6543" target="_blank" rel="noopener noreferrer">#6543</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix NPE when using IN clause with a subquery with a tuple. <a href="https://github.com/ClickHouse/ClickHouse/issues/6125" target="_blank" rel="noopener noreferrer">#6125</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6550" target="_blank" rel="noopener noreferrer">#6550</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href="https://github.com/ClickHouse/ClickHouse/issues/6522" target="_blank" rel="noopener noreferrer">#6522</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6523" target="_blank" rel="noopener noreferrer">#6523</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed issue with parsing CSV <a href="https://github.com/ClickHouse/ClickHouse/issues/6426" target="_blank" rel="noopener noreferrer">#6426</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6559" target="_blank" rel="noopener noreferrer">#6559</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed data race in system.parts table and ALTER query. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6245" target="_blank" rel="noopener noreferrer">#6245</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6513" target="_blank" rel="noopener noreferrer">#6513</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href="https://github.com/ClickHouse/ClickHouse/pull/6514" target="_blank" rel="noopener noreferrer">#6514</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed possible data loss after <code>ALTER DELETE</code> query on table with skipping index. <a href="https://github.com/ClickHouse/ClickHouse/issues/6224" target="_blank" rel="noopener noreferrer">#6224</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6282" target="_blank" rel="noopener noreferrer">#6282</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="security-fix-2">Security Fix<a class="hash-link" href="#security-fix-2" title="Direct link to heading">​</a></h4><ul><li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse run, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href="https://github.com/ClickHouse/ClickHouse/pull/6247" target="_blank" rel="noopener noreferrer">#6247</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-13-2-19-2019-08-14">ClickHouse Release 19.13.2.19, 2019-08-14<a class="hash-link" href="#clickhouse-release-19-13-2-19-2019-08-14" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-5">New Feature<a class="hash-link" href="#new-feature-5" title="Direct link to heading">​</a></h4><ul><li>Sampling profiler on query level. <a href="https://gist.github.com/alexey-milovidov/92758583dd41c24c360fdb8d6a4da194" target="_blank" rel="noopener noreferrer">Example</a>. <a href="https://github.com/ClickHouse/ClickHouse/issues/4247" target="_blank" rel="noopener noreferrer">#4247</a> (<a href="https://github.com/laplab" target="_blank" rel="noopener noreferrer">laplab</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6124" target="_blank" rel="noopener noreferrer">#6124</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6250" target="_blank" rel="noopener noreferrer">#6250</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6283" target="_blank" rel="noopener noreferrer">#6283</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6386" target="_blank" rel="noopener noreferrer">#6386</a></li><li>Allow to specify a list of columns with <code>COLUMNS(&#x27;regexp&#x27;)</code> expression that works like a more sophisticated variant of <code>*</code> asterisk. <a href="https://github.com/ClickHouse/ClickHouse/pull/5951" target="_blank" rel="noopener noreferrer">#5951</a> (<a href="https://github.com/mfridental" target="_blank" rel="noopener noreferrer">mfridental</a>), (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>CREATE TABLE AS table_function()</code> is now possible <a href="https://github.com/ClickHouse/ClickHouse/pull/6057" target="_blank" rel="noopener noreferrer">#6057</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Adam optimizer for stochastic gradient descent is used by default in <code>stochasticLinearRegression()</code> and <code>stochasticLogisticRegression()</code> aggregate functions, because it shows good quality without almost any tuning. <a href="https://github.com/ClickHouse/ClickHouse/pull/6000" target="_blank" rel="noopener noreferrer">#6000</a> (<a href="https://github.com/Quid37" target="_blank" rel="noopener noreferrer">Quid37</a>)</li><li>Added functions for working with the сustom week number <a href="https://github.com/ClickHouse/ClickHouse/pull/5212" target="_blank" rel="noopener noreferrer">#5212</a> (<a href="https://github.com/andyyzh" target="_blank" rel="noopener noreferrer">Andy Yang</a>)</li><li><code>RENAME</code> queries now work with all storages. <a href="https://github.com/ClickHouse/ClickHouse/pull/5953" target="_blank" rel="noopener noreferrer">#5953</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Now client receive logs from server with any desired level by setting <code>send_logs_level</code> regardless to the log level specified in server settings. <a href="https://github.com/ClickHouse/ClickHouse/pull/5964" target="_blank" rel="noopener noreferrer">#5964</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-4">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-4" title="Direct link to heading">​</a></h4><ul><li>The setting <code>input_format_defaults_for_omitted_fields</code> is enabled by default. Inserts in Distributed tables need this setting to be the same on cluster (you need to set it before rolling update). It enables calculation of complex default expressions for omitted fields in <code>JSONEachRow</code> and <code>CSV*</code> formats. It should be the expected behavior but may lead to negligible performance difference. <a href="https://github.com/ClickHouse/ClickHouse/pull/6043" target="_blank" rel="noopener noreferrer">#6043</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>), <a href="https://github.com/ClickHouse/ClickHouse/pull/5625" target="_blank" rel="noopener noreferrer">#5625</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-features">Experimental Features<a class="hash-link" href="#experimental-features" title="Direct link to heading">​</a></h4><ul><li>New query processing pipeline. Use <code>experimental_use_processors=1</code> option to enable it. Use for your own trouble. <a href="https://github.com/ClickHouse/ClickHouse/pull/4914" target="_blank" rel="noopener noreferrer">#4914</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-13">Bug Fix<a class="hash-link" href="#bug-fix-13" title="Direct link to heading">​</a></h4><ul><li>Kafka integration has been fixed in this version.</li><li>Fixed <code>DoubleDelta</code> encoding of <code>Int64</code> for large <code>DoubleDelta</code> values, improved <code>DoubleDelta</code> encoding for random data for <code>Int32</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5998" target="_blank" rel="noopener noreferrer">#5998</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Fixed overestimation of <code>max_rows_to_read</code> if the setting <code>merge_tree_uniform_read_distribution</code> is set to 0. <a href="https://github.com/ClickHouse/ClickHouse/pull/6019" target="_blank" rel="noopener noreferrer">#6019</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-4">Improvement<a class="hash-link" href="#improvement-4" title="Direct link to heading">​</a></h4><ul><li>Throws an exception if <code>config.d</code> file does not have the corresponding root element as the config file <a href="https://github.com/ClickHouse/ClickHouse/pull/6123" target="_blank" rel="noopener noreferrer">#6123</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement-3">Performance Improvement<a class="hash-link" href="#performance-improvement-3" title="Direct link to heading">​</a></h4><ul><li>Optimize <code>count()</code>. Now it uses the smallest column (if possible). <a href="https://github.com/ClickHouse/ClickHouse/pull/6028" target="_blank" rel="noopener noreferrer">#6028</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-5">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-5" title="Direct link to heading">​</a></h4><ul><li>Report memory usage in performance tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/5899" target="_blank" rel="noopener noreferrer">#5899</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Fix build with external <code>libcxx</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/6010" target="_blank" rel="noopener noreferrer">#6010</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix shared build with <code>rdkafka</code> library <a href="https://github.com/ClickHouse/ClickHouse/pull/6101" target="_blank" rel="noopener noreferrer">#6101</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11">ClickHouse Release 19.11<a class="hash-link" href="#clickhouse-release-19-11" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-13-74-2019-11-01">ClickHouse Release 19.11.13.74, 2019-11-01<a class="hash-link" href="#clickhouse-release-19-11-13-74-2019-11-01" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-14">Bug Fix<a class="hash-link" href="#bug-fix-14" title="Direct link to heading">​</a></h4><ul><li>Fixed rare crash in <code>ALTER MODIFY COLUMN</code> and vertical merge when one of merged/altered parts is empty (0 rows). <a href="https://github.com/ClickHouse/ClickHouse/pull/6780" target="_blank" rel="noopener noreferrer">#6780</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Manual update of <code>SIMDJSON</code>. This fixes possible flooding of stderr files with bogus json diagnostic messages. <a href="https://github.com/ClickHouse/ClickHouse/pull/7548" target="_blank" rel="noopener noreferrer">#7548</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander Kazakov</a>)</li><li>Fixed bug with <code>mrk</code> file extension for mutations (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-12-69-2019-10-02">ClickHouse Release 19.11.12.69, 2019-10-02<a class="hash-link" href="#clickhouse-release-19-11-12-69-2019-10-02" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-15">Bug Fix<a class="hash-link" href="#bug-fix-15" title="Direct link to heading">​</a></h4><ul><li>Fixed performance degradation of index analysis on complex keys on large tables. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6924" target="_blank" rel="noopener noreferrer">#6924</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7075" target="_blank" rel="noopener noreferrer">#7075</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Avoid rare SIGSEGV while sending data in tables with Distributed engine (<code>Failed to send batch: file with index XXXXX is absent</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/7032" target="_blank" rel="noopener noreferrer">#7032</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Fix <code>Unknown identifier</code> with multiple joins. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5254" target="_blank" rel="noopener noreferrer">#5254</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7022" target="_blank" rel="noopener noreferrer">#7022</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-11-57-2019-09-13">ClickHouse Release 19.11.11.57, 2019-09-13<a class="hash-link" href="#clickhouse-release-19-11-11-57-2019-09-13" title="Direct link to heading">​</a></h3><ul><li>Fix logical error causing segfaults when selecting from Kafka empty topic. <a href="https://github.com/ClickHouse/ClickHouse/issues/6902" target="_blank" rel="noopener noreferrer">#6902</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6909" target="_blank" rel="noopener noreferrer">#6909</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix for function <code>АrrayEnumerateUniqRanked</code> with empty arrays in params. <a href="https://github.com/ClickHouse/ClickHouse/pull/6928" target="_blank" rel="noopener noreferrer">#6928</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-10-54-2019-09-10">ClickHouse Release 19.11.10.54, 2019-09-10<a class="hash-link" href="#clickhouse-release-19-11-10-54-2019-09-10" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-16">Bug Fix<a class="hash-link" href="#bug-fix-16" title="Direct link to heading">​</a></h4><ul><li>Do store offsets for Kafka messages manually to be able to commit them all at once for all partitions. Fixes potential duplication in “one consumer - many partitions” scenario. <a href="https://github.com/ClickHouse/ClickHouse/pull/6872" target="_blank" rel="noopener noreferrer">#6872</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-9-52-2019-09-6">ClickHouse Release 19.11.9.52, 2019-09-6<a class="hash-link" href="#clickhouse-release-19-11-9-52-2019-09-6" title="Direct link to heading">​</a></h3><ul><li>Improve error handling in cache dictionaries. <a href="https://github.com/ClickHouse/ClickHouse/pull/6737" target="_blank" rel="noopener noreferrer">#6737</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fixed bug in function <code>arrayEnumerateUniqRanked</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6779" target="_blank" rel="noopener noreferrer">#6779</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix <code>JSONExtract</code> function while extracting a <code>Tuple</code> from JSON. <a href="https://github.com/ClickHouse/ClickHouse/pull/6718" target="_blank" rel="noopener noreferrer">#6718</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fixed possible data loss after <code>ALTER DELETE</code> query on table with skipping index. <a href="https://github.com/ClickHouse/ClickHouse/issues/6224" target="_blank" rel="noopener noreferrer">#6224</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6282" target="_blank" rel="noopener noreferrer">#6282</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Fixed performance test. <a href="https://github.com/ClickHouse/ClickHouse/pull/6392" target="_blank" rel="noopener noreferrer">#6392</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Parquet: Fix reading boolean columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/6579" target="_blank" rel="noopener noreferrer">#6579</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed wrong behaviour of <code>nullIf</code> function for constant arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/6518" target="_blank" rel="noopener noreferrer">#6518</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/6580" target="_blank" rel="noopener noreferrer">#6580</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix Kafka messages duplication problem on normal server restart. <a href="https://github.com/ClickHouse/ClickHouse/pull/6597" target="_blank" rel="noopener noreferrer">#6597</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixed an issue when long <code>ALTER UPDATE</code> or <code>ALTER DELETE</code> may prevent regular merges to run. Prevent mutations from executing if there is no enough free threads available. <a href="https://github.com/ClickHouse/ClickHouse/issues/6502" target="_blank" rel="noopener noreferrer">#6502</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6617" target="_blank" rel="noopener noreferrer">#6617</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed error with processing “timezone” in server configuration file. <a href="https://github.com/ClickHouse/ClickHouse/pull/6709" target="_blank" rel="noopener noreferrer">#6709</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix kafka tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/6805" target="_blank" rel="noopener noreferrer">#6805</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="security-fix-3">Security Fix<a class="hash-link" href="#security-fix-3" title="Direct link to heading">​</a></h4><ul><li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse runs, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href="https://github.com/ClickHouse/ClickHouse/pull/6247" target="_blank" rel="noopener noreferrer">#6247</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-8-46-2019-08-22">ClickHouse Release 19.11.8.46, 2019-08-22<a class="hash-link" href="#clickhouse-release-19-11-8-46-2019-08-22" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-17">Bug Fix<a class="hash-link" href="#bug-fix-17" title="Direct link to heading">​</a></h4><ul><li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6543" target="_blank" rel="noopener noreferrer">#6543</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix NPE when using IN clause with a subquery with a tuple. <a href="https://github.com/ClickHouse/ClickHouse/issues/6125" target="_blank" rel="noopener noreferrer">#6125</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6550" target="_blank" rel="noopener noreferrer">#6550</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href="https://github.com/ClickHouse/ClickHouse/issues/6522" target="_blank" rel="noopener noreferrer">#6522</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6523" target="_blank" rel="noopener noreferrer">#6523</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed issue with parsing CSV <a href="https://github.com/ClickHouse/ClickHouse/issues/6426" target="_blank" rel="noopener noreferrer">#6426</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6559" target="_blank" rel="noopener noreferrer">#6559</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>Fixed data race in system.parts table and ALTER query. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6245" target="_blank" rel="noopener noreferrer">#6245</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6513" target="_blank" rel="noopener noreferrer">#6513</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href="https://github.com/ClickHouse/ClickHouse/pull/6514" target="_blank" rel="noopener noreferrer">#6514</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-7-40-2019-08-14">ClickHouse Release 19.11.7.40, 2019-08-14<a class="hash-link" href="#clickhouse-release-19-11-7-40-2019-08-14" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-18">Bug Fix<a class="hash-link" href="#bug-fix-18" title="Direct link to heading">​</a></h4><ul><li>Kafka integration has been fixed in this version.</li><li>Fix segfault when using <code>arrayReduce</code> for constant arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/6326" target="_blank" rel="noopener noreferrer">#6326</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed <code>toFloat()</code> monotonicity. <a href="https://github.com/ClickHouse/ClickHouse/pull/6374" target="_blank" rel="noopener noreferrer">#6374</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Fix segfault with enabled <code>optimize_skip_unused_shards</code> and missing sharding key. <a href="https://github.com/ClickHouse/ClickHouse/pull/6384" target="_blank" rel="noopener noreferrer">#6384</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">CurtizJ</a>)</li><li>Fixed logic of <code>arrayEnumerateUniqRanked</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/6423" target="_blank" rel="noopener noreferrer">#6423</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Removed extra verbose logging from MySQL handler. <a href="https://github.com/ClickHouse/ClickHouse/pull/6389" target="_blank" rel="noopener noreferrer">#6389</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix wrong behavior and possible segfaults in <code>topK</code> and <code>topKWeighted</code> aggregated functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/6404" target="_blank" rel="noopener noreferrer">#6404</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">CurtizJ</a>)</li><li>Do not expose virtual columns in <code>system.columns</code> table. This is required for backward compatibility. <a href="https://github.com/ClickHouse/ClickHouse/pull/6406" target="_blank" rel="noopener noreferrer">#6406</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix bug with memory allocation for string fields in complex key cache dictionary. <a href="https://github.com/ClickHouse/ClickHouse/pull/6447" target="_blank" rel="noopener noreferrer">#6447</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix bug with enabling adaptive granularity when creating new replica for <code>Replicated*MergeTree</code> table. <a href="https://github.com/ClickHouse/ClickHouse/pull/6452" target="_blank" rel="noopener noreferrer">#6452</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix infinite loop when reading Kafka messages. <a href="https://github.com/ClickHouse/ClickHouse/pull/6354" target="_blank" rel="noopener noreferrer">#6354</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">abyss7</a>)</li><li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser and possibility of stack overflow in <code>Merge</code> and <code>Distributed</code> tables <a href="https://github.com/ClickHouse/ClickHouse/pull/6433" target="_blank" rel="noopener noreferrer">#6433</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed Gorilla encoding error on small sequences. <a href="https://github.com/ClickHouse/ClickHouse/pull/6444" target="_blank" rel="noopener noreferrer">#6444</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Enmk</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-5">Improvement<a class="hash-link" href="#improvement-5" title="Direct link to heading">​</a></h4><ul><li>Allow user to override <code>poll_interval</code> and <code>idle_connection_timeout</code> settings on connection. <a href="https://github.com/ClickHouse/ClickHouse/pull/6230" target="_blank" rel="noopener noreferrer">#6230</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-5-28-2019-08-05">ClickHouse Release 19.11.5.28, 2019-08-05<a class="hash-link" href="#clickhouse-release-19-11-5-28-2019-08-05" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-19">Bug Fix<a class="hash-link" href="#bug-fix-19" title="Direct link to heading">​</a></h4><ul><li>Fixed the possibility of hanging queries when server is overloaded. <a href="https://github.com/ClickHouse/ClickHouse/pull/6301" target="_blank" rel="noopener noreferrer">#6301</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix FPE in yandexConsistentHash function. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6304" target="_blank" rel="noopener noreferrer">#6304</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6126" target="_blank" rel="noopener noreferrer">#6126</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed bug in conversion of <code>LowCardinality</code> types in <code>AggregateFunctionFactory</code>. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6257" target="_blank" rel="noopener noreferrer">#6257</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6281" target="_blank" rel="noopener noreferrer">#6281</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix parsing of <code>bool</code> settings from <code>true</code> and <code>false</code> strings in configuration files. <a href="https://github.com/ClickHouse/ClickHouse/pull/6278" target="_blank" rel="noopener noreferrer">#6278</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix rare bug with incompatible stream headers in queries to <code>Distributed</code> table over <code>MergeTree</code> table when part of <code>WHERE</code> moves to <code>PREWHERE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6236" target="_blank" rel="noopener noreferrer">#6236</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed overflow in integer division of signed type to unsigned type. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6214" target="_blank" rel="noopener noreferrer">#6214</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6233" target="_blank" rel="noopener noreferrer">#6233</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-5">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-5" title="Direct link to heading">​</a></h4><ul><li><code>Kafka</code> still broken.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-4-24-2019-08-01">ClickHouse Release 19.11.4.24, 2019-08-01<a class="hash-link" href="#clickhouse-release-19-11-4-24-2019-08-01" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-20">Bug Fix<a class="hash-link" href="#bug-fix-20" title="Direct link to heading">​</a></h4><ul><li>Fix bug with writing secondary indices marks with adaptive granularity. <a href="https://github.com/ClickHouse/ClickHouse/pull/6126" target="_blank" rel="noopener noreferrer">#6126</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix <code>WITH ROLLUP</code> and <code>WITH CUBE</code> modifiers of <code>GROUP BY</code> with two-level aggregation. <a href="https://github.com/ClickHouse/ClickHouse/pull/6225" target="_blank" rel="noopener noreferrer">#6225</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fixed hang in <code>JSONExtractRaw</code> function. Fixed <a href="https://github.com/ClickHouse/ClickHouse/issues/6195" target="_blank" rel="noopener noreferrer">#6195</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6198" target="_blank" rel="noopener noreferrer">#6198</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix segfault in ExternalLoader::reloadOutdated(). <a href="https://github.com/ClickHouse/ClickHouse/pull/6082" target="_blank" rel="noopener noreferrer">#6082</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fixed the case when server may close listening sockets but not shutdown and continue serving remaining queries. You may end up with two running clickhouse-server processes. Sometimes, the server may return an error <code>bad_function_call</code> for remaining queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/6231" target="_blank" rel="noopener noreferrer">#6231</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed useless and incorrect condition on update field for initial loading of external dictionaries via ODBC, MySQL, ClickHouse and HTTP. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6069" target="_blank" rel="noopener noreferrer">#6069</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6083" target="_blank" rel="noopener noreferrer">#6083</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed irrelevant exception in cast of <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it does not contain Nulls (e.g. in query like <code>SELECT CAST(CAST(&#x27;Hello&#x27; AS LowCardinality(Nullable(String))) AS String)</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/6094" target="_blank" rel="noopener noreferrer">#6094</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6119" target="_blank" rel="noopener noreferrer">#6119</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix non-deterministic result of “uniq” aggregate function in extreme rare cases. The bug was present in all ClickHouse versions. <a href="https://github.com/ClickHouse/ClickHouse/pull/6058" target="_blank" rel="noopener noreferrer">#6058</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Segfault when we set a little bit too high CIDR on the function <code>IPv6CIDRToRange</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/6068" target="_blank" rel="noopener noreferrer">#6068</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Fixed small memory leak when server throw many exceptions from many different contexts. <a href="https://github.com/ClickHouse/ClickHouse/pull/6144" target="_blank" rel="noopener noreferrer">#6144</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix the situation when consumer got paused before subscription and not resumed afterwards. <a href="https://github.com/ClickHouse/ClickHouse/pull/6075" target="_blank" rel="noopener noreferrer">#6075</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>) Note that Kafka is broken in this version.</li><li>Clearing the Kafka data buffer from the previous read operation that was completed with an error <a href="https://github.com/ClickHouse/ClickHouse/pull/6026" target="_blank" rel="noopener noreferrer">#6026</a> (<a href="https://github.com/bopohaa" target="_blank" rel="noopener noreferrer">Nikolay</a>) Note that Kafka is broken in this version.</li><li>Since <code>StorageMergeTree::background_task_handle</code> is initialized in <code>startup()</code> the <code>MergeTreeBlockOutputStream::write()</code> may try to use it before initialization. Just check if it is initialized. <a href="https://github.com/ClickHouse/ClickHouse/pull/6080" target="_blank" rel="noopener noreferrer">#6080</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-6">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-6" title="Direct link to heading">​</a></h4><ul><li>Added official <code>rpm</code> packages. <a href="https://github.com/ClickHouse/ClickHouse/pull/5740" target="_blank" rel="noopener noreferrer">#5740</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>) (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add an ability to build <code>.rpm</code> and <code>.tgz</code> packages with <code>packager</code> script. <a href="https://github.com/ClickHouse/ClickHouse/pull/5769" target="_blank" rel="noopener noreferrer">#5769</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixes for “Arcadia” build system. <a href="https://github.com/ClickHouse/ClickHouse/pull/6223" target="_blank" rel="noopener noreferrer">#6223</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-6">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-6" title="Direct link to heading">​</a></h4><ul><li><code>Kafka</code> is broken in this version.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-11-3-11-2019-07-18">ClickHouse Release 19.11.3.11, 2019-07-18<a class="hash-link" href="#clickhouse-release-19-11-3-11-2019-07-18" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-6">New Feature<a class="hash-link" href="#new-feature-6" title="Direct link to heading">​</a></h4><ul><li>Added support for prepared statements. <a href="https://github.com/ClickHouse/ClickHouse/pull/5331/" target="_blank" rel="noopener noreferrer">#5331</a> (<a href="https://github.com/sanych73" target="_blank" rel="noopener noreferrer">Alexander</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/5630" target="_blank" rel="noopener noreferrer">#5630</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>DoubleDelta</code> and <code>Gorilla</code> column codecs <a href="https://github.com/ClickHouse/ClickHouse/pull/5600" target="_blank" rel="noopener noreferrer">#5600</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Added <code>os_thread_priority</code> setting that allows to control the “nice” value of query processing threads that is used by OS to adjust dynamic scheduling priority. It requires <code>CAP_SYS_NICE</code> capabilities to work. This implements <a href="https://github.com/ClickHouse/ClickHouse/issues/5858" target="_blank" rel="noopener noreferrer">#5858</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5909" target="_blank" rel="noopener noreferrer">#5909</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Implement <code>_topic</code>, <code>_offset</code>, <code>_key</code> columns for Kafka engine <a href="https://github.com/ClickHouse/ClickHouse/pull/5382" target="_blank" rel="noopener noreferrer">#5382</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>) Note that Kafka is broken in this version.</li><li>Add aggregate function combinator <code>-Resample</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5590" target="_blank" rel="noopener noreferrer">#5590</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Aggregate functions <code>groupArrayMovingSum(win_size)(x)</code> and <code>groupArrayMovingAvg(win_size)(x)</code>, which calculate moving sum/avg with or without window-size limitation. <a href="https://github.com/ClickHouse/ClickHouse/pull/5595" target="_blank" rel="noopener noreferrer">#5595</a> (<a href="https://github.com/inv2004" target="_blank" rel="noopener noreferrer">inv2004</a>)</li><li>Add synonim <code>arrayFlatten</code> \&lt;-<!-- -->&gt;<!-- --> <code>flatten</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5764" target="_blank" rel="noopener noreferrer">#5764</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Intergate H3 function <code>geoToH3</code> from Uber. <a href="https://github.com/ClickHouse/ClickHouse/pull/4724" target="_blank" rel="noopener noreferrer">#4724</a> (<a href="https://github.com/BHYCHIK" target="_blank" rel="noopener noreferrer">Remen Ivan</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/5805" target="_blank" rel="noopener noreferrer">#5805</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-21">Bug Fix<a class="hash-link" href="#bug-fix-21" title="Direct link to heading">​</a></h4><ul><li>Implement DNS cache with asynchronous update. Separate thread resolves all hosts and updates DNS cache with period (setting <code>dns_cache_update_period</code>). It should help, when ip of hosts changes frequently. <a href="https://github.com/ClickHouse/ClickHouse/pull/5857" target="_blank" rel="noopener noreferrer">#5857</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix segfault in <code>Delta</code> codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href="https://github.com/ClickHouse/ClickHouse/pull/5786" target="_blank" rel="noopener noreferrer">#5786</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix segfault in TTL merge with non-physical columns in block. <a href="https://github.com/ClickHouse/ClickHouse/pull/5819" target="_blank" rel="noopener noreferrer">#5819</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix rare bug in checking of part with <code>LowCardinality</code> column. Previously <code>checkDataPart</code> always fails for part with <code>LowCardinality</code> column. <a href="https://github.com/ClickHouse/ClickHouse/pull/5832" target="_blank" rel="noopener noreferrer">#5832</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Avoid hanging connections when server thread pool is full. It is important for connections from <code>remote</code> table function or connections to a shard without replicas when there is long connection timeout. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5878" target="_blank" rel="noopener noreferrer">#5878</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5881" target="_blank" rel="noopener noreferrer">#5881</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Support for constant arguments to <code>evalMLModel</code> function. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5817" target="_blank" rel="noopener noreferrer">#5817</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5820" target="_blank" rel="noopener noreferrer">#5820</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed the issue when ClickHouse determines default time zone as <code>UCT</code> instead of <code>UTC</code>. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5804" target="_blank" rel="noopener noreferrer">#5804</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5828" target="_blank" rel="noopener noreferrer">#5828</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed buffer underflow in <code>visitParamExtractRaw</code>. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5901" target="_blank" rel="noopener noreferrer">#5901</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5902" target="_blank" rel="noopener noreferrer">#5902</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Now distributed <code>DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER</code> queries will be executed directly on leader replica. <a href="https://github.com/ClickHouse/ClickHouse/pull/5757" target="_blank" rel="noopener noreferrer">#5757</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix <code>coalesce</code> for <code>ColumnConst</code> with <code>ColumnNullable</code> + related changes. <a href="https://github.com/ClickHouse/ClickHouse/pull/5755" target="_blank" rel="noopener noreferrer">#5755</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix the <code>ReadBufferFromKafkaConsumer</code> so that it keeps reading new messages after <code>commit()</code> even if it was stalled before <a href="https://github.com/ClickHouse/ClickHouse/pull/5852" target="_blank" rel="noopener noreferrer">#5852</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix <code>FULL</code> and <code>RIGHT</code> JOIN results when joining on <code>Nullable</code> keys in right table. <a href="https://github.com/ClickHouse/ClickHouse/pull/5859" target="_blank" rel="noopener noreferrer">#5859</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Possible fix of infinite sleeping of low-priority queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/5842" target="_blank" rel="noopener noreferrer">#5842</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix race condition, which cause that some queries may not appear in query_log after <code>SYSTEM FLUSH LOGS</code> query. <a href="https://github.com/ClickHouse/ClickHouse/issues/5456" target="_blank" rel="noopener noreferrer">#5456</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5685" target="_blank" rel="noopener noreferrer">#5685</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fixed <code>heap-use-after-free</code> ASan warning in ClusterCopier caused by watch which try to use already removed copier object. <a href="https://github.com/ClickHouse/ClickHouse/pull/5871" target="_blank" rel="noopener noreferrer">#5871</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fixed wrong <code>StringRef</code> pointer returned by some implementations of <code>IColumn::deserializeAndInsertFromArena</code>. This bug affected only unit-tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/5973" target="_blank" rel="noopener noreferrer">#5973</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Prevent source and intermediate array join columns of masking same name columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/5941" target="_blank" rel="noopener noreferrer">#5941</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix insert and select query to MySQL engine with MySQL style identifier quoting. <a href="https://github.com/ClickHouse/ClickHouse/pull/5704" target="_blank" rel="noopener noreferrer">#5704</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Now <code>CHECK TABLE</code> query can work with MergeTree engine family. It returns check status and message if any for each part (or file in case of simplier engines). Also, fix bug in fetch of a broken part. <a href="https://github.com/ClickHouse/ClickHouse/pull/5865" target="_blank" rel="noopener noreferrer">#5865</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix SPLIT_SHARED_LIBRARIES runtime <a href="https://github.com/ClickHouse/ClickHouse/pull/5793" target="_blank" rel="noopener noreferrer">#5793</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Fixed time zone initialization when <code>/etc/localtime</code> is a relative symlink like <code>../usr/share/zoneinfo/Asia/Istanbul</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5922" target="_blank" rel="noopener noreferrer">#5922</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>clickhouse-copier: Fix use-after free on shutdown <a href="https://github.com/ClickHouse/ClickHouse/pull/5752" target="_blank" rel="noopener noreferrer">#5752</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Updated <code>simdjson</code>. Fixed the issue that some invalid JSONs with zero bytes successfully parse. <a href="https://github.com/ClickHouse/ClickHouse/pull/5938" target="_blank" rel="noopener noreferrer">#5938</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix shutdown of SystemLogs <a href="https://github.com/ClickHouse/ClickHouse/pull/5802" target="_blank" rel="noopener noreferrer">#5802</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix hanging when condition in invalidate_query depends on a dictionary. <a href="https://github.com/ClickHouse/ClickHouse/pull/6011" target="_blank" rel="noopener noreferrer">#6011</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-6">Improvement<a class="hash-link" href="#improvement-6" title="Direct link to heading">​</a></h4><ul><li>Allow unresolvable addresses in cluster configuration. They will be considered unavailable and tried to resolve at every connection attempt. This is especially useful for Kubernetes. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5714" target="_blank" rel="noopener noreferrer">#5714</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5924" target="_blank" rel="noopener noreferrer">#5924</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Close idle TCP connections (with one hour timeout by default). This is especially important for large clusters with multiple distributed tables on every server, because every server can possibly keep a connection pool to every other server, and after peak query concurrency, connections will stall. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5879" target="_blank" rel="noopener noreferrer">#5879</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5880" target="_blank" rel="noopener noreferrer">#5880</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Better quality of <code>topK</code> function. Changed the SavingSpace set behavior to remove the last element if the new element have a bigger weight. <a href="https://github.com/ClickHouse/ClickHouse/issues/5833" target="_blank" rel="noopener noreferrer">#5833</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5850" target="_blank" rel="noopener noreferrer">#5850</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>URL functions to work with domains now can work for incomplete URLs without scheme <a href="https://github.com/ClickHouse/ClickHouse/pull/5725" target="_blank" rel="noopener noreferrer">#5725</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Checksums added to the <code>system.parts_columns</code> table. <a href="https://github.com/ClickHouse/ClickHouse/pull/5874" target="_blank" rel="noopener noreferrer">#5874</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>)</li><li>Added <code>Enum</code> data type as a synonim for <code>Enum8</code> or <code>Enum16</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5886" target="_blank" rel="noopener noreferrer">#5886</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Full bit transpose variant for <code>T64</code> codec. Could lead to better compression with <code>zstd</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5742" target="_blank" rel="noopener noreferrer">#5742</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Condition on <code>startsWith</code> function now can uses primary key. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5310" target="_blank" rel="noopener noreferrer">#5310</a> and <a href="https://github.com/ClickHouse/ClickHouse/issues/5882" target="_blank" rel="noopener noreferrer">#5882</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5919" target="_blank" rel="noopener noreferrer">#5919</a> (<a href="https://github.com/dimarub2000" target="_blank" rel="noopener noreferrer">dimarub2000</a>)</li><li>Allow to use <code>clickhouse-copier</code> with cross-replication cluster topology by permitting empty database name. <a href="https://github.com/ClickHouse/ClickHouse/pull/5745" target="_blank" rel="noopener noreferrer">#5745</a> (<a href="https://github.com/nvartolomei" target="_blank" rel="noopener noreferrer">nvartolomei</a>)</li><li>Use <code>UTC</code> as default timezone on a system without <code>tzdata</code> (e.g. bare Docker container). Before this patch, error message <code>Could not determine local time zone</code> was printed and server or client refused to start. <a href="https://github.com/ClickHouse/ClickHouse/pull/5827" target="_blank" rel="noopener noreferrer">#5827</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Returned back support for floating point argument in function <code>quantileTiming</code> for backward compatibility. <a href="https://github.com/ClickHouse/ClickHouse/pull/5911" target="_blank" rel="noopener noreferrer">#5911</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Show which table is missing column in error messages. <a href="https://github.com/ClickHouse/ClickHouse/pull/5768" target="_blank" rel="noopener noreferrer">#5768</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Disallow run query with same query_id by various users <a href="https://github.com/ClickHouse/ClickHouse/pull/5430" target="_blank" rel="noopener noreferrer">#5430</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>More robust code for sending metrics to Graphite. It will work even during long multiple <code>RENAME TABLE</code> operation. <a href="https://github.com/ClickHouse/ClickHouse/pull/5875" target="_blank" rel="noopener noreferrer">#5875</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>More informative error messages will be displayed when ThreadPool cannot schedule a task for execution. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5305" target="_blank" rel="noopener noreferrer">#5305</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5801" target="_blank" rel="noopener noreferrer">#5801</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Inverting ngramSearch to be more intuitive <a href="https://github.com/ClickHouse/ClickHouse/pull/5807" target="_blank" rel="noopener noreferrer">#5807</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Add user parsing in HDFS engine builder <a href="https://github.com/ClickHouse/ClickHouse/pull/5946" target="_blank" rel="noopener noreferrer">#5946</a> (<a href="https://github.com/akonyaev90" target="_blank" rel="noopener noreferrer">akonyaev90</a>)</li><li>Update default value of <code>max_ast_elements parameter</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5933" target="_blank" rel="noopener noreferrer">#5933</a> (<a href="https://github.com/izebit" target="_blank" rel="noopener noreferrer">Artem Konovalov</a>)</li><li>Added a notion of obsolete settings. The obsolete setting <code>allow_experimental_low_cardinality_type</code> can be used with no effect. <a href="https://github.com/ClickHouse/ClickHouse/commit/0f15c01c6802f7ce1a1494c12c846be8c98944cd" target="_blank" rel="noopener noreferrer">0f15c01c6802f7ce1a1494c12c846be8c98944cd</a> <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement-4">Performance Improvement<a class="hash-link" href="#performance-improvement-4" title="Direct link to heading">​</a></h4><ul><li>Increase number of streams to SELECT from Merge table for more uniform distribution of threads. Added setting <code>max_streams_multiplier_for_merge_tables</code>. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5797" target="_blank" rel="noopener noreferrer">#5797</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5915" target="_blank" rel="noopener noreferrer">#5915</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-7">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-7" title="Direct link to heading">​</a></h4><ul><li>Add a backward compatibility test for client-server interaction with different versions of clickhouse. <a href="https://github.com/ClickHouse/ClickHouse/pull/5868" target="_blank" rel="noopener noreferrer">#5868</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Test coverage information in every commit and pull request. <a href="https://github.com/ClickHouse/ClickHouse/pull/5896" target="_blank" rel="noopener noreferrer">#5896</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Cooperate with address sanitizer to support our custom allocators (<code>Arena</code> and <code>ArenaWithFreeLists</code>) for better debugging of “use-after-free” errors. <a href="https://github.com/ClickHouse/ClickHouse/pull/5728" target="_blank" rel="noopener noreferrer">#5728</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Switch to <a href="https://github.com/llvm-mirror/libunwind" target="_blank" rel="noopener noreferrer">LLVM libunwind implementation</a> for C++ exception handling and for stack traces printing <a href="https://github.com/ClickHouse/ClickHouse/pull/4828" target="_blank" rel="noopener noreferrer">#4828</a> (<a href="https://github.com/laplab" target="_blank" rel="noopener noreferrer">Nikita Lapkov</a>)</li><li>Add two more warnings from -Weverything <a href="https://github.com/ClickHouse/ClickHouse/pull/5923" target="_blank" rel="noopener noreferrer">#5923</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Allow to build ClickHouse with Memory Sanitizer. <a href="https://github.com/ClickHouse/ClickHouse/pull/3949" target="_blank" rel="noopener noreferrer">#3949</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed ubsan report about <code>bitTest</code> function in fuzz test. <a href="https://github.com/ClickHouse/ClickHouse/pull/5943" target="_blank" rel="noopener noreferrer">#5943</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Docker: added possibility to init a ClickHouse instance which requires authentication. <a href="https://github.com/ClickHouse/ClickHouse/pull/5727" target="_blank" rel="noopener noreferrer">#5727</a> (<a href="https://github.com/shurshun" target="_blank" rel="noopener noreferrer">Korviakov Andrey</a>)</li><li>Update librdkafka to version 1.1.0 <a href="https://github.com/ClickHouse/ClickHouse/pull/5872" target="_blank" rel="noopener noreferrer">#5872</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Add global timeout for integration tests and disable some of them in tests code. <a href="https://github.com/ClickHouse/ClickHouse/pull/5741" target="_blank" rel="noopener noreferrer">#5741</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix some ThreadSanitizer failures. <a href="https://github.com/ClickHouse/ClickHouse/pull/5854" target="_blank" rel="noopener noreferrer">#5854</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>The <code>--no-undefined</code> option forces the linker to check all external names for existence while linking. It’s very useful to track real dependencies between libraries in the split build mode. <a href="https://github.com/ClickHouse/ClickHouse/pull/5855" target="_blank" rel="noopener noreferrer">#5855</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Added performance test for <a href="https://github.com/ClickHouse/ClickHouse/issues/5797" target="_blank" rel="noopener noreferrer">#5797</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5914" target="_blank" rel="noopener noreferrer">#5914</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed compatibility with gcc-7. <a href="https://github.com/ClickHouse/ClickHouse/pull/5840" target="_blank" rel="noopener noreferrer">#5840</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added support for gcc-9. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/5717" target="_blank" rel="noopener noreferrer">#5717</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5774" target="_blank" rel="noopener noreferrer">#5774</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed error when libunwind can be linked incorrectly. <a href="https://github.com/ClickHouse/ClickHouse/pull/5948" target="_blank" rel="noopener noreferrer">#5948</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed a few warnings found by PVS-Studio. <a href="https://github.com/ClickHouse/ClickHouse/pull/5921" target="_blank" rel="noopener noreferrer">#5921</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added initial support for <code>clang-tidy</code> static analyzer. <a href="https://github.com/ClickHouse/ClickHouse/pull/5806" target="_blank" rel="noopener noreferrer">#5806</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Convert BSD/Linux endian macros( ‘be64toh’ and ‘htobe64’) to the Mac OS X equivalents <a href="https://github.com/ClickHouse/ClickHouse/pull/5785" target="_blank" rel="noopener noreferrer">#5785</a> (<a href="https://github.com/fredchenbj" target="_blank" rel="noopener noreferrer">Fu Chen</a>)</li><li>Improved integration tests guide. <a href="https://github.com/ClickHouse/ClickHouse/pull/5796" target="_blank" rel="noopener noreferrer">#5796</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Fixing build at macosx + gcc9 <a href="https://github.com/ClickHouse/ClickHouse/pull/5822" target="_blank" rel="noopener noreferrer">#5822</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Fix a hard-to-spot typo: aggreAGte -<!-- -->&gt;<!-- --> aggregate. <a href="https://github.com/ClickHouse/ClickHouse/pull/5753" target="_blank" rel="noopener noreferrer">#5753</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Fix freebsd build <a href="https://github.com/ClickHouse/ClickHouse/pull/5760" target="_blank" rel="noopener noreferrer">#5760</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Add link to experimental YouTube channel to website <a href="https://github.com/ClickHouse/ClickHouse/pull/5845" target="_blank" rel="noopener noreferrer">#5845</a> (<a href="https://github.com/blinkov" target="_blank" rel="noopener noreferrer">Ivan Blinkov</a>)</li><li>CMake: add option for coverage flags: WITH_COVERAGE <a href="https://github.com/ClickHouse/ClickHouse/pull/5776" target="_blank" rel="noopener noreferrer">#5776</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix initial size of some inline PODArray’s. <a href="https://github.com/ClickHouse/ClickHouse/pull/5787" target="_blank" rel="noopener noreferrer">#5787</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>clickhouse-server.postinst: fix os detection for centos 6 <a href="https://github.com/ClickHouse/ClickHouse/pull/5788" target="_blank" rel="noopener noreferrer">#5788</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Added Arch linux package generation. <a href="https://github.com/ClickHouse/ClickHouse/pull/5719" target="_blank" rel="noopener noreferrer">#5719</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>Split Common/config.h by libs (dbms) <a href="https://github.com/ClickHouse/ClickHouse/pull/5715" target="_blank" rel="noopener noreferrer">#5715</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixes for “Arcadia” build platform <a href="https://github.com/ClickHouse/ClickHouse/pull/5795" target="_blank" rel="noopener noreferrer">#5795</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixes for unconventional build (gcc9, no submodules) <a href="https://github.com/ClickHouse/ClickHouse/pull/5792" target="_blank" rel="noopener noreferrer">#5792</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Require explicit type in unalignedStore because it was proven to be bug-prone <a href="https://github.com/ClickHouse/ClickHouse/pull/5791" target="_blank" rel="noopener noreferrer">#5791</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Fixes MacOS build <a href="https://github.com/ClickHouse/ClickHouse/pull/5830" target="_blank" rel="noopener noreferrer">#5830</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Performance test concerning the new JIT feature with bigger dataset, as requested here <a href="https://github.com/ClickHouse/ClickHouse/issues/5263" target="_blank" rel="noopener noreferrer">#5263</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5887" target="_blank" rel="noopener noreferrer">#5887</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Run stateful tests in stress test <a href="https://github.com/ClickHouse/ClickHouse/commit/12693e568722f11e19859742f56428455501fd2a" target="_blank" rel="noopener noreferrer">12693e568722f11e19859742f56428455501fd2a</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-7">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-7" title="Direct link to heading">​</a></h4><ul><li><code>Kafka</code> is broken in this version.</li><li>Enable <code>adaptive_index_granularity</code> = 10MB by default for new <code>MergeTree</code> tables. If you created new MergeTree tables on version 19.11+, downgrade to versions prior to 19.6 will be impossible. <a href="https://github.com/ClickHouse/ClickHouse/pull/5628" target="_blank" rel="noopener noreferrer">#5628</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Removed obsolete undocumented embedded dictionaries that were used by Yandex.Metrica. The functions <code>OSIn</code>, <code>SEIn</code>, <code>OSToRoot</code>, <code>SEToRoot</code>, <code>OSHierarchy</code>, <code>SEHierarchy</code> are no longer available. If you are using these functions, write email to <a href="mailto:clickhouse-feedback@yandex-team.com." target="_blank" rel="noopener noreferrer">clickhouse-feedback@yandex-team.com.</a> Note: at the last moment we decided to keep these functions for a while. <a href="https://github.com/ClickHouse/ClickHouse/pull/5780" target="_blank" rel="noopener noreferrer">#5780</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-10">ClickHouse Release 19.10<a class="hash-link" href="#clickhouse-release-19-10" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-10-1-5-2019-07-12">ClickHouse Release 19.10.1.5, 2019-07-12<a class="hash-link" href="#clickhouse-release-19-10-1-5-2019-07-12" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-7">New Feature<a class="hash-link" href="#new-feature-7" title="Direct link to heading">​</a></h4><ul><li>Add new column codec: <code>T64</code>. Made for (U)IntX/EnumX/Data(Time)/DecimalX columns. It should be good for columns with constant or small range values. Codec itself allows enlarge or shrink data type without re-compression. <a href="https://github.com/ClickHouse/ClickHouse/pull/5557" target="_blank" rel="noopener noreferrer">#5557</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Add database engine <code>MySQL</code> that allow to view all the tables in remote MySQL server <a href="https://github.com/ClickHouse/ClickHouse/pull/5599" target="_blank" rel="noopener noreferrer">#5599</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li><code>bitmapContains</code> implementation. It’s 2x faster than <code>bitmapHasAny</code> if the second bitmap contains one element. <a href="https://github.com/ClickHouse/ClickHouse/pull/5535" target="_blank" rel="noopener noreferrer">#5535</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Support for <code>crc32</code> function (with behaviour exactly as in MySQL or PHP). Do not use it if you need a hash function. <a href="https://github.com/ClickHouse/ClickHouse/pull/5661" target="_blank" rel="noopener noreferrer">#5661</a> (<a href="https://github.com/BHYCHIK" target="_blank" rel="noopener noreferrer">Remen Ivan</a>)</li><li>Implemented <code>SYSTEM START/STOP DISTRIBUTED SENDS</code> queries to control asynchronous inserts into <code>Distributed</code> tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/4935" target="_blank" rel="noopener noreferrer">#4935</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-22">Bug Fix<a class="hash-link" href="#bug-fix-22" title="Direct link to heading">​</a></h4><ul><li>Ignore query execution limits and max parts size for merge limits while executing mutations. <a href="https://github.com/ClickHouse/ClickHouse/pull/5659" target="_blank" rel="noopener noreferrer">#5659</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix bug which may lead to deduplication of normal blocks (extremely rare) and insertion of duplicate blocks (more often). <a href="https://github.com/ClickHouse/ClickHouse/pull/5549" target="_blank" rel="noopener noreferrer">#5549</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix of function <code>arrayEnumerateUniqRanked</code> for arguments with empty arrays <a href="https://github.com/ClickHouse/ClickHouse/pull/5559" target="_blank" rel="noopener noreferrer">#5559</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Don’t subscribe to Kafka topics without intent to poll any messages. <a href="https://github.com/ClickHouse/ClickHouse/pull/5698" target="_blank" rel="noopener noreferrer">#5698</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Make setting <code>join_use_nulls</code> get no effect for types that cannot be inside Nullable <a href="https://github.com/ClickHouse/ClickHouse/pull/5700" target="_blank" rel="noopener noreferrer">#5700</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Fixed <code>Incorrect size of index granularity</code> errors <a href="https://github.com/ClickHouse/ClickHouse/pull/5720" target="_blank" rel="noopener noreferrer">#5720</a> (<a href="https://github.com/coraxster" target="_blank" rel="noopener noreferrer">coraxster</a>)</li><li>Fix Float to Decimal convert overflow <a href="https://github.com/ClickHouse/ClickHouse/pull/5607" target="_blank" rel="noopener noreferrer">#5607</a> (<a href="https://github.com/coraxster" target="_blank" rel="noopener noreferrer">coraxster</a>)</li><li>Flush buffer when <code>WriteBufferFromHDFS</code>’s destructor is called. This fixes writing into <code>HDFS</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5684" target="_blank" rel="noopener noreferrer">#5684</a> (<a href="https://github.com/eejoin" target="_blank" rel="noopener noreferrer">Xindong Peng</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-7">Improvement<a class="hash-link" href="#improvement-7" title="Direct link to heading">​</a></h4><ul><li>Treat empty cells in <code>CSV</code> as default values when the setting <code>input_format_defaults_for_omitted_fields</code> is enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/5625" target="_blank" rel="noopener noreferrer">#5625</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Non-blocking loading of external dictionaries. <a href="https://github.com/ClickHouse/ClickHouse/pull/5567" target="_blank" rel="noopener noreferrer">#5567</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Network timeouts can be dynamically changed for already established connections according to the settings. <a href="https://github.com/ClickHouse/ClickHouse/pull/4558" target="_blank" rel="noopener noreferrer">#4558</a> (<a href="https://github.com/podshumok" target="_blank" rel="noopener noreferrer">Konstantin Podshumok</a>)</li><li>Using “public_suffix_list” for functions <code>firstSignificantSubdomain</code>, <code>cutToFirstSignificantSubdomain</code>. It’s using a perfect hash table generated by <code>gperf</code> with a list generated from the file: <a href="https://publicsuffix.org/list/public_suffix_list.dat" target="_blank" rel="noopener noreferrer">https://publicsuffix.org/list/public_suffix_list.dat</a>. (for example, now we recognize the domain <code>ac.uk</code> as non-significant). <a href="https://github.com/ClickHouse/ClickHouse/pull/5030" target="_blank" rel="noopener noreferrer">#5030</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Adopted <code>IPv6</code> data type in system tables; unified client info columns in <code>system.processes</code> and <code>system.query_log</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5640" target="_blank" rel="noopener noreferrer">#5640</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Using sessions for connections with MySQL compatibility protocol. #5476 <a href="https://github.com/ClickHouse/ClickHouse/pull/5646" target="_blank" rel="noopener noreferrer">#5646</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Support more <code>ALTER</code> queries <code>ON CLUSTER</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5593" target="_blank" rel="noopener noreferrer">#5593</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5613" target="_blank" rel="noopener noreferrer">#5613</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Support <code>&lt;logger&gt;</code> section in <code>clickhouse-local</code> config file. <a href="https://github.com/ClickHouse/ClickHouse/pull/5540" target="_blank" rel="noopener noreferrer">#5540</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Allow run query with <code>remote</code> table function in <code>clickhouse-local</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5627" target="_blank" rel="noopener noreferrer">#5627</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement-5">Performance Improvement<a class="hash-link" href="#performance-improvement-5" title="Direct link to heading">​</a></h4><ul><li>Add the possibility to write the final mark at the end of MergeTree columns. It allows to avoid useless reads for keys that are out of table data range. It is enabled only if adaptive index granularity is in use. <a href="https://github.com/ClickHouse/ClickHouse/pull/5624" target="_blank" rel="noopener noreferrer">#5624</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Improved performance of MergeTree tables on very slow filesystems by reducing number of <code>stat</code> syscalls. <a href="https://github.com/ClickHouse/ClickHouse/pull/5648" target="_blank" rel="noopener noreferrer">#5648</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed performance degradation in reading from MergeTree tables that was introduced in version 19.6. Fixes #5631. <a href="https://github.com/ClickHouse/ClickHouse/pull/5633" target="_blank" rel="noopener noreferrer">#5633</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-8">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-8" title="Direct link to heading">​</a></h4><ul><li>Implemented <code>TestKeeper</code> as an implementation of ZooKeeper interface used for testing <a href="https://github.com/ClickHouse/ClickHouse/pull/5643" target="_blank" rel="noopener noreferrer">#5643</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>) (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">levushkin aleksej</a>)</li><li>From now on <code>.sql</code> tests can be run isolated by server, in parallel, with random database. It allows to run them faster, add new tests with custom server configurations, and be sure that different tests does not affect each other. <a href="https://github.com/ClickHouse/ClickHouse/pull/5554" target="_blank" rel="noopener noreferrer">#5554</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Remove <code>&lt;name&gt;</code> and <code>&lt;metrics&gt;</code> from performance tests <a href="https://github.com/ClickHouse/ClickHouse/pull/5672" target="_blank" rel="noopener noreferrer">#5672</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Fixed “select_format” performance test for <code>Pretty</code> formats <a href="https://github.com/ClickHouse/ClickHouse/pull/5642" target="_blank" rel="noopener noreferrer">#5642</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-9">ClickHouse Release 19.9<a class="hash-link" href="#clickhouse-release-19-9" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-9-3-31-2019-07-05">ClickHouse Release 19.9.3.31, 2019-07-05<a class="hash-link" href="#clickhouse-release-19-9-3-31-2019-07-05" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-23">Bug Fix<a class="hash-link" href="#bug-fix-23" title="Direct link to heading">​</a></h4><ul><li>Fix segfault in Delta codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href="https://github.com/ClickHouse/ClickHouse/pull/5786" target="_blank" rel="noopener noreferrer">#5786</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix rare bug in checking of part with LowCardinality column. <a href="https://github.com/ClickHouse/ClickHouse/pull/5832" target="_blank" rel="noopener noreferrer">#5832</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix segfault in TTL merge with non-physical columns in block. <a href="https://github.com/ClickHouse/ClickHouse/pull/5819" target="_blank" rel="noopener noreferrer">#5819</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix potential infinite sleeping of low-priority queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/5842" target="_blank" rel="noopener noreferrer">#5842</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix how ClickHouse determines default time zone as UCT instead of UTC. <a href="https://github.com/ClickHouse/ClickHouse/pull/5828" target="_blank" rel="noopener noreferrer">#5828</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix bug about executing distributed DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER queries on follower replica before leader replica. Now they will be executed directly on leader replica. <a href="https://github.com/ClickHouse/ClickHouse/pull/5757" target="_blank" rel="noopener noreferrer">#5757</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix race condition, which cause that some queries may not appear in query_log instantly after SYSTEM FLUSH LOGS query. <a href="https://github.com/ClickHouse/ClickHouse/pull/5685" target="_blank" rel="noopener noreferrer">#5685</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Added missing support for constant arguments to <code>evalMLModel</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/5820" target="_blank" rel="noopener noreferrer">#5820</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-9-2-4-2019-06-24">ClickHouse Release 19.9.2.4, 2019-06-24<a class="hash-link" href="#clickhouse-release-19-9-2-4-2019-06-24" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-8">New Feature<a class="hash-link" href="#new-feature-8" title="Direct link to heading">​</a></h4><ul><li>Print information about frozen parts in <code>system.parts</code> table. <a href="https://github.com/ClickHouse/ClickHouse/pull/5471" target="_blank" rel="noopener noreferrer">#5471</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Ask client password on clickhouse-client start on tty if not set in arguments <a href="https://github.com/ClickHouse/ClickHouse/pull/5092" target="_blank" rel="noopener noreferrer">#5092</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Implement <code>dictGet</code> and <code>dictGetOrDefault</code> functions for Decimal types. <a href="https://github.com/ClickHouse/ClickHouse/pull/5394" target="_blank" rel="noopener noreferrer">#5394</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-8">Improvement<a class="hash-link" href="#improvement-8" title="Direct link to heading">​</a></h4><ul><li>Debian init: Add service stop timeout <a href="https://github.com/ClickHouse/ClickHouse/pull/5522" target="_blank" rel="noopener noreferrer">#5522</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Add setting forbidden by default to create table with suspicious types for LowCardinality <a href="https://github.com/ClickHouse/ClickHouse/pull/5448" target="_blank" rel="noopener noreferrer">#5448</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Regression functions return model weights when not used as State in function <code>evalMLMethod</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5411" target="_blank" rel="noopener noreferrer">#5411</a> (<a href="https://github.com/Quid37" target="_blank" rel="noopener noreferrer">Quid37</a>)</li><li>Rename and improve regression methods. <a href="https://github.com/ClickHouse/ClickHouse/pull/5492" target="_blank" rel="noopener noreferrer">#5492</a> (<a href="https://github.com/Quid37" target="_blank" rel="noopener noreferrer">Quid37</a>)</li><li>Clearer interfaces of string searchers. <a href="https://github.com/ClickHouse/ClickHouse/pull/5586" target="_blank" rel="noopener noreferrer">#5586</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-24">Bug Fix<a class="hash-link" href="#bug-fix-24" title="Direct link to heading">​</a></h4><ul><li>Fix potential data loss in Kafka <a href="https://github.com/ClickHouse/ClickHouse/pull/5445" target="_blank" rel="noopener noreferrer">#5445</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix potential infinite loop in <code>PrettySpace</code> format when called with zero columns <a href="https://github.com/ClickHouse/ClickHouse/pull/5560" target="_blank" rel="noopener noreferrer">#5560</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Fixed UInt32 overflow bug in linear models. Allow eval ML model for non-const model argument. <a href="https://github.com/ClickHouse/ClickHouse/pull/5516" target="_blank" rel="noopener noreferrer">#5516</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li><code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> should not raise an exception if provided index does not exist <a href="https://github.com/ClickHouse/ClickHouse/pull/5524" target="_blank" rel="noopener noreferrer">#5524</a> (<a href="https://github.com/NanoBjorn" target="_blank" rel="noopener noreferrer">Gleb Novikov</a>)</li><li>Fix segfault with <code>bitmapHasAny</code> in scalar subquery <a href="https://github.com/ClickHouse/ClickHouse/pull/5528" target="_blank" rel="noopener noreferrer">#5528</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Fixed error when replication connection pool does not retry to resolve host, even when DNS cache was dropped. <a href="https://github.com/ClickHouse/ClickHouse/pull/5534" target="_blank" rel="noopener noreferrer">#5534</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>ALTER ... MODIFY TTL</code> on ReplicatedMergeTree. <a href="https://github.com/ClickHouse/ClickHouse/pull/5539" target="_blank" rel="noopener noreferrer">#5539</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Fix INSERT into Distributed table with MATERIALIZED column <a href="https://github.com/ClickHouse/ClickHouse/pull/5429" target="_blank" rel="noopener noreferrer">#5429</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Fix bad alloc when truncate Join storage <a href="https://github.com/ClickHouse/ClickHouse/pull/5437" target="_blank" rel="noopener noreferrer">#5437</a> (<a href="https://github.com/TCeason" target="_blank" rel="noopener noreferrer">TCeason</a>)</li><li>In recent versions of package tzdata some of files are symlinks now. The current mechanism for detecting default timezone gets broken and gives wrong names for some timezones. Now at least we force the timezone name to the contents of TZ if provided. <a href="https://github.com/ClickHouse/ClickHouse/pull/5443" target="_blank" rel="noopener noreferrer">#5443</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fix some extremely rare cases with MultiVolnitsky searcher when the constant needles in sum are at least 16KB long. The algorithm missed or overwrote the previous results which can lead to the incorrect result of <code>multiSearchAny</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5588" target="_blank" rel="noopener noreferrer">#5588</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Fix the issue when settings for ExternalData requests couldn’t use ClickHouse settings. Also, for now, settings <code>date_time_input_format</code> and <code>low_cardinality_allow_in_native_format</code> cannot be used because of the ambiguity of names (in external data it can be interpreted as table format and in the query it can be a setting). <a href="https://github.com/ClickHouse/ClickHouse/pull/5455" target="_blank" rel="noopener noreferrer">#5455</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href="https://github.com/ClickHouse/ClickHouse/pull/5520" target="_blank" rel="noopener noreferrer">#5520</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Remove debug logging from MySQL protocol <a href="https://github.com/ClickHouse/ClickHouse/pull/5478" target="_blank" rel="noopener noreferrer">#5478</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Skip ZNONODE during DDL query processing <a href="https://github.com/ClickHouse/ClickHouse/pull/5489" target="_blank" rel="noopener noreferrer">#5489</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Fix mix <code>UNION ALL</code> result column type. There were cases with inconsistent data and column types of resulting columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/5503" target="_blank" rel="noopener noreferrer">#5503</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Throw an exception on wrong integers in <code>dictGetT</code> functions instead of crash. <a href="https://github.com/ClickHouse/ClickHouse/pull/5446" target="_blank" rel="noopener noreferrer">#5446</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix wrong element_count and load_factor for hashed dictionary in <code>system.dictionaries</code> table. <a href="https://github.com/ClickHouse/ClickHouse/pull/5440" target="_blank" rel="noopener noreferrer">#5440</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-9">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-9" title="Direct link to heading">​</a></h4><ul><li>Fixed build without <code>Brotli</code> HTTP compression support (<code>ENABLE_BROTLI=OFF</code> cmake variable). <a href="https://github.com/ClickHouse/ClickHouse/pull/5521" target="_blank" rel="noopener noreferrer">#5521</a> (<a href="https://github.com/citrin" target="_blank" rel="noopener noreferrer">Anton Yuzhaninov</a>)</li><li>Include roaring.h as roaring/roaring.h <a href="https://github.com/ClickHouse/ClickHouse/pull/5523" target="_blank" rel="noopener noreferrer">#5523</a> (<a href="https://github.com/orivej" target="_blank" rel="noopener noreferrer">Orivej Desh</a>)</li><li>Fix gcc9 warnings in hyperscan (#line directive is evil!) <a href="https://github.com/ClickHouse/ClickHouse/pull/5546" target="_blank" rel="noopener noreferrer">#5546</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Fix all warnings when compiling with gcc-9. Fix some contrib issues. Fix gcc9 ICE and submit it to bugzilla. <a href="https://github.com/ClickHouse/ClickHouse/pull/5498" target="_blank" rel="noopener noreferrer">#5498</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Fixed linking with lld <a href="https://github.com/ClickHouse/ClickHouse/pull/5477" target="_blank" rel="noopener noreferrer">#5477</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Remove unused specializations in dictionaries <a href="https://github.com/ClickHouse/ClickHouse/pull/5452" target="_blank" rel="noopener noreferrer">#5452</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Improvement performance tests for formatting and parsing tables for different types of files <a href="https://github.com/ClickHouse/ClickHouse/pull/5497" target="_blank" rel="noopener noreferrer">#5497</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>Fixes for parallel test run <a href="https://github.com/ClickHouse/ClickHouse/pull/5506" target="_blank" rel="noopener noreferrer">#5506</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Docker: use configs from clickhouse-test <a href="https://github.com/ClickHouse/ClickHouse/pull/5531" target="_blank" rel="noopener noreferrer">#5531</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix compile for FreeBSD <a href="https://github.com/ClickHouse/ClickHouse/pull/5447" target="_blank" rel="noopener noreferrer">#5447</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Upgrade boost to 1.70 <a href="https://github.com/ClickHouse/ClickHouse/pull/5570" target="_blank" rel="noopener noreferrer">#5570</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix build clickhouse as submodule <a href="https://github.com/ClickHouse/ClickHouse/pull/5574" target="_blank" rel="noopener noreferrer">#5574</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Improve JSONExtract performance tests <a href="https://github.com/ClickHouse/ClickHouse/pull/5444" target="_blank" rel="noopener noreferrer">#5444</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-8">ClickHouse Release 19.8<a class="hash-link" href="#clickhouse-release-19-8" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-8-3-8-2019-06-11">ClickHouse Release 19.8.3.8, 2019-06-11<a class="hash-link" href="#clickhouse-release-19-8-3-8-2019-06-11" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features">New Features<a class="hash-link" href="#new-features" title="Direct link to heading">​</a></h4><ul><li>Added functions to work with JSON <a href="https://github.com/ClickHouse/ClickHouse/pull/4686" target="_blank" rel="noopener noreferrer">#4686</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/5124" target="_blank" rel="noopener noreferrer">#5124</a>. (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Add a function basename, with a similar behaviour to a basename function, which exists in a lot of languages (<code>os.path.basename</code> in python, <code>basename</code> in PHP, etc…). Work with both an UNIX-like path or a Windows path. <a href="https://github.com/ClickHouse/ClickHouse/pull/5136" target="_blank" rel="noopener noreferrer">#5136</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Added <code>LIMIT n, m BY</code> or <code>LIMIT m OFFSET n BY</code> syntax to set offset of n for LIMIT BY clause. <a href="https://github.com/ClickHouse/ClickHouse/pull/5138" target="_blank" rel="noopener noreferrer">#5138</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Added new data type <code>SimpleAggregateFunction</code>, which allows to have columns with light aggregation in an <code>AggregatingMergeTree</code>. This can only be used with simple functions like <code>any</code>, <code>anyLast</code>, <code>sum</code>, <code>min</code>, <code>max</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4629" target="_blank" rel="noopener noreferrer">#4629</a> (<a href="https://github.com/bgranvea" target="_blank" rel="noopener noreferrer">Boris Granveaud</a>)</li><li>Added support for non-constant arguments in function <code>ngramDistance</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5198" target="_blank" rel="noopener noreferrer">#5198</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Added functions <code>skewPop</code>, <code>skewSamp</code>, <code>kurtPop</code> and <code>kurtSamp</code> to compute for sequence skewness, sample skewness, kurtosis and sample kurtosis respectively. <a href="https://github.com/ClickHouse/ClickHouse/pull/5200" target="_blank" rel="noopener noreferrer">#5200</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Support rename operation for <code>MaterializeView</code> storage. <a href="https://github.com/ClickHouse/ClickHouse/pull/5209" target="_blank" rel="noopener noreferrer">#5209</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Added server which allows connecting to ClickHouse using MySQL client. <a href="https://github.com/ClickHouse/ClickHouse/pull/4715" target="_blank" rel="noopener noreferrer">#4715</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Add <code>toDecimal*OrZero</code> and <code>toDecimal*OrNull</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/5291" target="_blank" rel="noopener noreferrer">#5291</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Support Decimal types in functions: <code>quantile</code>, <code>quantiles</code>, <code>median</code>, <code>quantileExactWeighted</code>, <code>quantilesExactWeighted</code>, medianExactWeighted. <a href="https://github.com/ClickHouse/ClickHouse/pull/5304" target="_blank" rel="noopener noreferrer">#5304</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Added <code>toValidUTF8</code> function, which replaces all invalid UTF-8 characters by replacement character � (U+FFFD). <a href="https://github.com/ClickHouse/ClickHouse/pull/5322" target="_blank" rel="noopener noreferrer">#5322</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Added <code>format</code> function. Formatting constant pattern (simplified Python format pattern) with the strings listed in the arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/5330" target="_blank" rel="noopener noreferrer">#5330</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Added <code>system.detached_parts</code> table containing information about detached parts of <code>MergeTree</code> tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/5353" target="_blank" rel="noopener noreferrer">#5353</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">akuzm</a>)</li><li>Added <code>ngramSearch</code> function to calculate the non-symmetric difference between needle and haystack. <a href="https://github.com/ClickHouse/ClickHouse/pull/5418" target="_blank" rel="noopener noreferrer">#5418</a><a href="https://github.com/ClickHouse/ClickHouse/pull/5422" target="_blank" rel="noopener noreferrer">#5422</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Implementation of basic machine learning methods (stochastic linear regression and logistic regression) using aggregate functions interface. Has different strategies for updating model weights (simple gradient descent, momentum method, Nesterov method). Also supports mini-batches of custom size. <a href="https://github.com/ClickHouse/ClickHouse/pull/4943" target="_blank" rel="noopener noreferrer">#4943</a> (<a href="https://github.com/Quid37" target="_blank" rel="noopener noreferrer">Quid37</a>)</li><li>Implementation of <code>geohashEncode</code> and <code>geohashDecode</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/5003" target="_blank" rel="noopener noreferrer">#5003</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Added aggregate function <code>timeSeriesGroupSum</code>, which can aggregate different time series that sample timestamp not alignment. It will use linear interpolation between two sample timestamp and then sum time-series together. Added aggregate function <code>timeSeriesGroupRateSum</code>, which calculates the rate of time-series and then sum rates together. <a href="https://github.com/ClickHouse/ClickHouse/pull/4542" target="_blank" rel="noopener noreferrer">#4542</a> (<a href="https://github.com/LiuYangkuan" target="_blank" rel="noopener noreferrer">Yangkuan Liu</a>)</li><li>Added functions <code>IPv4CIDRtoIPv4Range</code> and <code>IPv6CIDRtoIPv6Range</code> to calculate the lower and higher bounds for an IP in the subnet using a CIDR. <a href="https://github.com/ClickHouse/ClickHouse/pull/5095" target="_blank" rel="noopener noreferrer">#5095</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li><li>Add a X-ClickHouse-Summary header when we send a query using HTTP with enabled setting <code>send_progress_in_http_headers</code>. Return the usual information of X-ClickHouse-Progress, with additional information like how many rows and bytes were inserted in the query. <a href="https://github.com/ClickHouse/ClickHouse/pull/5116" target="_blank" rel="noopener noreferrer">#5116</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume Tassery</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvements">Improvements<a class="hash-link" href="#improvements" title="Direct link to heading">​</a></h4><ul><li>Added <code>max_parts_in_total</code> setting for MergeTree family of tables (default: 100 000) that prevents unsafe specification of partition key #5166. <a href="https://github.com/ClickHouse/ClickHouse/pull/5171" target="_blank" rel="noopener noreferrer">#5171</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>clickhouse-obfuscator</code>: derive seed for individual columns by combining initial seed with column name, not column position. This is intended to transform datasets with multiple related tables, so that tables will remain JOINable after transformation. <a href="https://github.com/ClickHouse/ClickHouse/pull/5178" target="_blank" rel="noopener noreferrer">#5178</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added functions <code>JSONExtractRaw</code>, <code>JSONExtractKeyAndValues</code>. Renamed functions <code>jsonExtract&lt;type&gt;</code> to <code>JSONExtract&lt;type&gt;</code>. When something goes wrong these functions return the correspondent values, not <code>NULL</code>. Modified function <code>JSONExtract</code>, now it gets the return type from its last parameter and does not inject nullables. Implemented fallback to RapidJSON in case AVX2 instructions are not available. Simdjson library updated to a new version. <a href="https://github.com/ClickHouse/ClickHouse/pull/5235" target="_blank" rel="noopener noreferrer">#5235</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Now <code>if</code> and <code>multiIf</code> functions do not rely on the condition’s <code>Nullable</code>, but rely on the branches for sql compatibility. <a href="https://github.com/ClickHouse/ClickHouse/pull/5238" target="_blank" rel="noopener noreferrer">#5238</a> (<a href="https://github.com/janplus" target="_blank" rel="noopener noreferrer">Jian Wu</a>)</li><li><code>In</code> predicate now generates <code>Null</code> result from <code>Null</code> input like the <code>Equal</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/5152" target="_blank" rel="noopener noreferrer">#5152</a> (<a href="https://github.com/janplus" target="_blank" rel="noopener noreferrer">Jian Wu</a>)</li><li>Check the time limit every (flush_interval / poll_timeout) number of rows from Kafka. This allows to break the reading from Kafka consumer more frequently and to check the time limits for the top-level streams <a href="https://github.com/ClickHouse/ClickHouse/pull/5249" target="_blank" rel="noopener noreferrer">#5249</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Link rdkafka with bundled SASL. It should allow to use SASL SCRAM authentication <a href="https://github.com/ClickHouse/ClickHouse/pull/5253" target="_blank" rel="noopener noreferrer">#5253</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Batched version of RowRefList for ALL JOINS. <a href="https://github.com/ClickHouse/ClickHouse/pull/5267" target="_blank" rel="noopener noreferrer">#5267</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>clickhouse-server: more informative listen error messages. <a href="https://github.com/ClickHouse/ClickHouse/pull/5268" target="_blank" rel="noopener noreferrer">#5268</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Support dictionaries in clickhouse-copier for functions in <code>&lt;sharding_key&gt;</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5270" target="_blank" rel="noopener noreferrer">#5270</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Add new setting <code>kafka_commit_every_batch</code> to regulate Kafka committing policy.
It allows to set commit mode: after every batch of messages is handled, or after the whole block is written to the storage. It’s a trade-off between losing some messages or reading them twice in some extreme situations. <a href="https://github.com/ClickHouse/ClickHouse/pull/5308" target="_blank" rel="noopener noreferrer">#5308</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Make <code>windowFunnel</code> support other Unsigned Integer Types. <a href="https://github.com/ClickHouse/ClickHouse/pull/5320" target="_blank" rel="noopener noreferrer">#5320</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Allow to shadow virtual column <code>_table</code> in Merge engine. <a href="https://github.com/ClickHouse/ClickHouse/pull/5325" target="_blank" rel="noopener noreferrer">#5325</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Make <code>sequenceMatch</code> aggregate functions support other unsigned Integer types <a href="https://github.com/ClickHouse/ClickHouse/pull/5339" target="_blank" rel="noopener noreferrer">#5339</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Better error messages if checksum mismatch is most likely caused by hardware failures. <a href="https://github.com/ClickHouse/ClickHouse/pull/5355" target="_blank" rel="noopener noreferrer">#5355</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Check that underlying tables support sampling for <code>StorageMerge</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5366" target="_blank" rel="noopener noreferrer">#5366</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Сlose MySQL connections after their usage in external dictionaries. It is related to issue #893. <a href="https://github.com/ClickHouse/ClickHouse/pull/5395" target="_blank" rel="noopener noreferrer">#5395</a> (<a href="https://github.com/clemrodriguez" target="_blank" rel="noopener noreferrer">Clément Rodriguez</a>)</li><li>Improvements of MySQL Wire Protocol. Changed name of format to MySQLWire. Using RAII for calling RSA_free. Disabling SSL if context cannot be created. <a href="https://github.com/ClickHouse/ClickHouse/pull/5419" target="_blank" rel="noopener noreferrer">#5419</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>clickhouse-client: allow to run with unaccessable history file (read-only, no disk space, file is directory, …). <a href="https://github.com/ClickHouse/ClickHouse/pull/5431" target="_blank" rel="noopener noreferrer">#5431</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Respect query settings in asynchronous INSERTs into Distributed tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/4936" target="_blank" rel="noopener noreferrer">#4936</a> (<a href="https://github.com/TCeason" target="_blank" rel="noopener noreferrer">TCeason</a>)</li><li>Renamed functions <code>leastSqr</code> to <code>simpleLinearRegression</code>, <code>LinearRegression</code> to <code>linearRegression</code>, <code>LogisticRegression</code> to <code>logisticRegression</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5391" target="_blank" rel="noopener noreferrer">#5391</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvements">Performance Improvements<a class="hash-link" href="#performance-improvements" title="Direct link to heading">​</a></h4><ul><li>Parallelize processing of parts of non-replicated MergeTree tables in ALTER MODIFY query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4639" target="_blank" rel="noopener noreferrer">#4639</a> (<a href="https://github.com/IvanKush" target="_blank" rel="noopener noreferrer">Ivan Kush</a>)</li><li>Optimizations in regular expressions extraction. <a href="https://github.com/ClickHouse/ClickHouse/pull/5193" target="_blank" rel="noopener noreferrer">#5193</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5191" target="_blank" rel="noopener noreferrer">#5191</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Do not add right join key column to join result if it’s used only in join on section. <a href="https://github.com/ClickHouse/ClickHouse/pull/5260" target="_blank" rel="noopener noreferrer">#5260</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Freeze the Kafka buffer after first empty response. It avoids multiple invokations of <code>ReadBuffer::next()</code> for empty result in some row-parsing streams. <a href="https://github.com/ClickHouse/ClickHouse/pull/5283" target="_blank" rel="noopener noreferrer">#5283</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li><code>concat</code> function optimization for multiple arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/5357" target="_blank" rel="noopener noreferrer">#5357</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Query optimisation. Allow push down IN statement while rewriting commа/cross join into inner one. <a href="https://github.com/ClickHouse/ClickHouse/pull/5396" target="_blank" rel="noopener noreferrer">#5396</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Upgrade our LZ4 implementation with reference one to have faster decompression. <a href="https://github.com/ClickHouse/ClickHouse/pull/5070" target="_blank" rel="noopener noreferrer">#5070</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Implemented MSD radix sort (based on kxsort), and partial sorting. <a href="https://github.com/ClickHouse/ClickHouse/pull/5129" target="_blank" rel="noopener noreferrer">#5129</a> (<a href="https://github.com/kvinty" target="_blank" rel="noopener noreferrer">Evgenii Pravda</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes">Bug Fixes<a class="hash-link" href="#bug-fixes" title="Direct link to heading">​</a></h4><ul><li>Fix push require columns with join <a href="https://github.com/ClickHouse/ClickHouse/pull/5192" target="_blank" rel="noopener noreferrer">#5192</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fixed bug, when ClickHouse is run by systemd, the command <code>sudo service clickhouse-server forcerestart</code> was not working as expected. <a href="https://github.com/ClickHouse/ClickHouse/pull/5204" target="_blank" rel="noopener noreferrer">#5204</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix http error codes in DataPartsExchange (interserver http server on 9009 port always returned code 200, even on errors). <a href="https://github.com/ClickHouse/ClickHouse/pull/5216" target="_blank" rel="noopener noreferrer">#5216</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix SimpleAggregateFunction for String longer than MAX_SMALL_STRING_SIZE <a href="https://github.com/ClickHouse/ClickHouse/pull/5311" target="_blank" rel="noopener noreferrer">#5311</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Fix error for <code>Decimal</code> to <code>Nullable(Decimal)</code> conversion in IN. Support other Decimal to Decimal conversions (including different scales). <a href="https://github.com/ClickHouse/ClickHouse/pull/5350" target="_blank" rel="noopener noreferrer">#5350</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed FPU clobbering in simdjson library that lead to wrong calculation of <code>uniqHLL</code> and <code>uniqCombined</code> aggregate function and math functions such as <code>log</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5354" target="_blank" rel="noopener noreferrer">#5354</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed handling mixed const/nonconst cases in JSON functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/5435" target="_blank" rel="noopener noreferrer">#5435</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fix <code>retention</code> function. Now all conditions that satisfy in a row of data are added to the data state. <a href="https://github.com/ClickHouse/ClickHouse/pull/5119" target="_blank" rel="noopener noreferrer">#5119</a> (<a href="https://github.com/nicelulu" target="_blank" rel="noopener noreferrer">小路</a>)</li><li>Fix result type for <code>quantileExact</code> with Decimals. <a href="https://github.com/ClickHouse/ClickHouse/pull/5304" target="_blank" rel="noopener noreferrer">#5304</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="documentation">Documentation<a class="hash-link" href="#documentation" title="Direct link to heading">​</a></h4><ul><li>Translate documentation for <code>CollapsingMergeTree</code> to chinese. <a href="https://github.com/ClickHouse/ClickHouse/pull/5168" target="_blank" rel="noopener noreferrer">#5168</a> (<a href="https://github.com/AlexZFX" target="_blank" rel="noopener noreferrer">张风啸</a>)</li><li>Translate some documentation about table engines to chinese.
<a href="https://github.com/ClickHouse/ClickHouse/pull/5134" target="_blank" rel="noopener noreferrer">#5134</a><a href="https://github.com/ClickHouse/ClickHouse/pull/5328" target="_blank" rel="noopener noreferrer">#5328</a>
(<a href="https://github.com/neverlee" target="_blank" rel="noopener noreferrer">never lee</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvements">Build/Testing/Packaging Improvements<a class="hash-link" href="#buildtestingpackaging-improvements" title="Direct link to heading">​</a></h4><ul><li>Fix some sanitizer reports that show probable use-after-free.<a href="https://github.com/ClickHouse/ClickHouse/pull/5139" target="_blank" rel="noopener noreferrer">#5139</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5143" target="_blank" rel="noopener noreferrer">#5143</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5393" target="_blank" rel="noopener noreferrer">#5393</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Move performance tests out of separate directories for convenience. <a href="https://github.com/ClickHouse/ClickHouse/pull/5158" target="_blank" rel="noopener noreferrer">#5158</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix incorrect performance tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/5255" target="_blank" rel="noopener noreferrer">#5255</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Added a tool to calculate checksums caused by bit flips to debug hardware issues. <a href="https://github.com/ClickHouse/ClickHouse/pull/5334" target="_blank" rel="noopener noreferrer">#5334</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Make runner script more usable. <a href="https://github.com/ClickHouse/ClickHouse/pull/5340" target="_blank" rel="noopener noreferrer">#5340</a><a href="https://github.com/ClickHouse/ClickHouse/pull/5360" target="_blank" rel="noopener noreferrer">#5360</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Add small instruction how to write performance tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/5408" target="_blank" rel="noopener noreferrer">#5408</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add ability to make substitutions in create, fill and drop query in performance tests <a href="https://github.com/ClickHouse/ClickHouse/pull/5367" target="_blank" rel="noopener noreferrer">#5367</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-7">ClickHouse Release 19.7<a class="hash-link" href="#clickhouse-release-19-7" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-7-5-29-2019-07-05">ClickHouse Release 19.7.5.29, 2019-07-05<a class="hash-link" href="#clickhouse-release-19-7-5-29-2019-07-05" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-25">Bug Fix<a class="hash-link" href="#bug-fix-25" title="Direct link to heading">​</a></h4><ul><li>Fix performance regression in some queries with JOIN. <a href="https://github.com/ClickHouse/ClickHouse/pull/5192" target="_blank" rel="noopener noreferrer">#5192</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-7-5-27-2019-06-09">ClickHouse Release 19.7.5.27, 2019-06-09<a class="hash-link" href="#clickhouse-release-19-7-5-27-2019-06-09" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features-1">New Features<a class="hash-link" href="#new-features-1" title="Direct link to heading">​</a></h4><ul><li>Added bitmap related functions <code>bitmapHasAny</code> and <code>bitmapHasAll</code> analogous to <code>hasAny</code> and <code>hasAll</code> functions for arrays. <a href="https://github.com/ClickHouse/ClickHouse/pull/5279" target="_blank" rel="noopener noreferrer">#5279</a> (<a href="https://github.com/svladykin" target="_blank" rel="noopener noreferrer">Sergi Vladykin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-1">Bug Fixes<a class="hash-link" href="#bug-fixes-1" title="Direct link to heading">​</a></h4><ul><li>Fix segfault on <code>minmax</code> INDEX with Null value. <a href="https://github.com/ClickHouse/ClickHouse/pull/5246" target="_blank" rel="noopener noreferrer">#5246</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Mark all input columns in LIMIT BY as required output. It fixes ‘Not found column’ error in some distributed queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/5407" target="_blank" rel="noopener noreferrer">#5407</a> (<a href="https://github.com/kvap" target="_blank" rel="noopener noreferrer">Constantin S. Pan</a>)</li><li>Fix “Column ‘0’ already exists” error in <code>SELECT .. PREWHERE</code> on column with DEFAULT <a href="https://github.com/ClickHouse/ClickHouse/pull/5397" target="_blank" rel="noopener noreferrer">#5397</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix <code>ALTER MODIFY TTL</code> query on <code>ReplicatedMergeTree</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5539/commits" target="_blank" rel="noopener noreferrer">#5539</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Don’t crash the server when Kafka consumers have failed to start. <a href="https://github.com/ClickHouse/ClickHouse/pull/5285" target="_blank" rel="noopener noreferrer">#5285</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixed bitmap functions produce wrong result. <a href="https://github.com/ClickHouse/ClickHouse/pull/5359" target="_blank" rel="noopener noreferrer">#5359</a> (<a href="https://github.com/andyyzh" target="_blank" rel="noopener noreferrer">Andy Yang</a>)</li><li>Fix element_count for hashed dictionary (do not include duplicates) <a href="https://github.com/ClickHouse/ClickHouse/pull/5440" target="_blank" rel="noopener noreferrer">#5440</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Use contents of environment variable TZ as the name for timezone. It helps to correctly detect default timezone in some cases.<a href="https://github.com/ClickHouse/ClickHouse/pull/5443" target="_blank" rel="noopener noreferrer">#5443</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Do not try to convert integers in <code>dictGetT</code> functions, because it does not work correctly. Throw an exception instead. <a href="https://github.com/ClickHouse/ClickHouse/pull/5446" target="_blank" rel="noopener noreferrer">#5446</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix settings in ExternalData HTTP request. <a href="https://github.com/ClickHouse/ClickHouse/pull/5455" target="_blank" rel="noopener noreferrer">#5455</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila
Kutenin</a>)</li><li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href="https://github.com/ClickHouse/ClickHouse/pull/5520" target="_blank" rel="noopener noreferrer">#5520</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix segmentation fault in <code>bitmapHasAny</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/5528" target="_blank" rel="noopener noreferrer">#5528</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">Zhichang Yu</a>)</li><li>Fixed error when replication connection pool does not retry to resolve host, even when DNS cache was dropped. <a href="https://github.com/ClickHouse/ClickHouse/pull/5534" target="_blank" rel="noopener noreferrer">#5534</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>DROP INDEX IF EXISTS</code> query. Now <code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> query does not raise an exception if provided index does not exist. <a href="https://github.com/ClickHouse/ClickHouse/pull/5524" target="_blank" rel="noopener noreferrer">#5524</a> (<a href="https://github.com/NanoBjorn" target="_blank" rel="noopener noreferrer">Gleb Novikov</a>)</li><li>Fix union all supertype column. There were cases with inconsistent data and column types of resulting columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/5503" target="_blank" rel="noopener noreferrer">#5503</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Skip ZNONODE during DDL query processing. Before if another node removes the znode in task queue, the one that
did not process it, but already get list of children, will terminate the DDLWorker thread. <a href="https://github.com/ClickHouse/ClickHouse/pull/5489" target="_blank" rel="noopener noreferrer">#5489</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>Fix INSERT into Distributed() table with MATERIALIZED column. <a href="https://github.com/ClickHouse/ClickHouse/pull/5429" target="_blank" rel="noopener noreferrer">#5429</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-7-3-9-2019-05-30">ClickHouse Release 19.7.3.9, 2019-05-30<a class="hash-link" href="#clickhouse-release-19-7-3-9-2019-05-30" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features-2">New Features<a class="hash-link" href="#new-features-2" title="Direct link to heading">​</a></h4><ul><li>Allow to limit the range of a setting that can be specified by user.
These constraints can be set up in user settings profile.
<a href="https://github.com/ClickHouse/ClickHouse/pull/4931" target="_blank" rel="noopener noreferrer">#4931</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly
Baranov</a>)</li><li>Add a second version of the function <code>groupUniqArray</code> with an optional
<code>max_size</code> parameter that limits the size of the resulting array. This
behavior is similar to <code>groupArray(max_size)(x)</code> function.
<a href="https://github.com/ClickHouse/ClickHouse/pull/5026" target="_blank" rel="noopener noreferrer">#5026</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">Guillaume
Tassery</a>)</li><li>For TSVWithNames/CSVWithNames input file formats, column order can now be
determined from file header. This is controlled by
<code>input_format_with_names_use_header</code> parameter.
<a href="https://github.com/ClickHouse/ClickHouse/pull/5081" target="_blank" rel="noopener noreferrer">#5081</a>
(<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">Alexander</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-2">Bug Fixes<a class="hash-link" href="#bug-fixes-2" title="Direct link to heading">​</a></h4><ul><li>Crash with uncompressed_cache + JOIN during merge (#5197)
<a href="https://github.com/ClickHouse/ClickHouse/pull/5133" target="_blank" rel="noopener noreferrer">#5133</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila
Kutenin</a>)</li><li>Segmentation fault on a clickhouse-client query to system tables. #5066
<a href="https://github.com/ClickHouse/ClickHouse/pull/5127" target="_blank" rel="noopener noreferrer">#5127</a>
(<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Data loss on heavy load via KafkaEngine (#4736)
<a href="https://github.com/ClickHouse/ClickHouse/pull/5080" target="_blank" rel="noopener noreferrer">#5080</a>
(<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href="https://github.com/ClickHouse/ClickHouse/pull/5189" target="_blank" rel="noopener noreferrer">#5189</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvements-1">Performance Improvements<a class="hash-link" href="#performance-improvements-1" title="Direct link to heading">​</a></h4><ul><li>Use radix sort for sorting by single numeric column in <code>ORDER BY</code> without
<code>LIMIT</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/5106" target="_blank" rel="noopener noreferrer">#5106</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/4439" target="_blank" rel="noopener noreferrer">#4439</a>
(<a href="https://github.com/kvinty" target="_blank" rel="noopener noreferrer">Evgenii Pravda</a>,
<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="documentation-1">Documentation<a class="hash-link" href="#documentation-1" title="Direct link to heading">​</a></h4><ul><li>Translate documentation for some table engines to Chinese.
<a href="https://github.com/ClickHouse/ClickHouse/pull/5107" target="_blank" rel="noopener noreferrer">#5107</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/5094" target="_blank" rel="noopener noreferrer">#5094</a>,
<a href="https://github.com/ClickHouse/ClickHouse/pull/5087" target="_blank" rel="noopener noreferrer">#5087</a>
(<a href="https://github.com/AlexZFX" target="_blank" rel="noopener noreferrer">张风啸</a>),
<a href="https://github.com/ClickHouse/ClickHouse/pull/5068" target="_blank" rel="noopener noreferrer">#5068</a> (<a href="https://github.com/neverlee" target="_blank" rel="noopener noreferrer">never
lee</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvements-1">Build/Testing/Packaging Improvements<a class="hash-link" href="#buildtestingpackaging-improvements-1" title="Direct link to heading">​</a></h4><ul><li>Print UTF-8 characters properly in <code>clickhouse-test</code>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/5084" target="_blank" rel="noopener noreferrer">#5084</a>
(<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add command line parameter for clickhouse-client to always load suggestion
data. <a href="https://github.com/ClickHouse/ClickHouse/pull/5102" target="_blank" rel="noopener noreferrer">#5102</a>
(<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Resolve some of PVS-Studio warnings.
<a href="https://github.com/ClickHouse/ClickHouse/pull/5082" target="_blank" rel="noopener noreferrer">#5082</a>
(<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Update LZ4 <a href="https://github.com/ClickHouse/ClickHouse/pull/5040" target="_blank" rel="noopener noreferrer">#5040</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila
Kutenin</a>)</li><li>Add gperf to build requirements for upcoming pull request #5030.
<a href="https://github.com/ClickHouse/ClickHouse/pull/5110" target="_blank" rel="noopener noreferrer">#5110</a>
(<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-6">ClickHouse Release 19.6<a class="hash-link" href="#clickhouse-release-19-6" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-6-3-18-2019-06-13">ClickHouse Release 19.6.3.18, 2019-06-13<a class="hash-link" href="#clickhouse-release-19-6-3-18-2019-06-13" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-3">Bug Fixes<a class="hash-link" href="#bug-fixes-3" title="Direct link to heading">​</a></h4><ul><li>Fixed IN condition pushdown for queries from table functions <code>mysql</code> and <code>odbc</code> and corresponding table engines. This fixes #3540 and #2384. <a href="https://github.com/ClickHouse/ClickHouse/pull/5313" target="_blank" rel="noopener noreferrer">#5313</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix deadlock in Zookeeper. <a href="https://github.com/ClickHouse/ClickHouse/pull/5297" target="_blank" rel="noopener noreferrer">#5297</a> (<a href="https://github.com/github1youlc" target="_blank" rel="noopener noreferrer">github1youlc</a>)</li><li>Allow quoted decimals in CSV. <a href="https://github.com/ClickHouse/ClickHouse/pull/5284" target="_blank" rel="noopener noreferrer">#5284</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a></li><li>Disallow conversion from float Inf/NaN into Decimals (throw exception). <a href="https://github.com/ClickHouse/ClickHouse/pull/5282" target="_blank" rel="noopener noreferrer">#5282</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix data race in rename query. <a href="https://github.com/ClickHouse/ClickHouse/pull/5247" target="_blank" rel="noopener noreferrer">#5247</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Temporarily disable LFAlloc. Usage of LFAlloc might lead to a lot of MAP_FAILED in allocating UncompressedCache and in a result to crashes of queries at high loaded servers. <a href="https://github.com/ClickHouse/ClickHouse/commit/cfdba938ce22f16efeec504f7f90206a515b1280" target="_blank" rel="noopener noreferrer">cfdba93</a>(<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-6-2-11-2019-05-13">ClickHouse Release 19.6.2.11, 2019-05-13<a class="hash-link" href="#clickhouse-release-19-6-2-11-2019-05-13" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features-3">New Features<a class="hash-link" href="#new-features-3" title="Direct link to heading">​</a></h4><ul><li>TTL expressions for columns and tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/4212" target="_blank" rel="noopener noreferrer">#4212</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>)</li><li>Added support for <code>brotli</code> compression for HTTP responses (Accept-Encoding: br) <a href="https://github.com/ClickHouse/ClickHouse/pull/4388" target="_blank" rel="noopener noreferrer">#4388</a> (<a href="https://github.com/fandyushin" target="_blank" rel="noopener noreferrer">Mikhail</a>)</li><li>Added new function <code>isValidUTF8</code> for checking whether a set of bytes is correctly utf-8 encoded. <a href="https://github.com/ClickHouse/ClickHouse/pull/4934" target="_blank" rel="noopener noreferrer">#4934</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Add new load balancing policy <code>first_or_random</code> which sends queries to the first specified host and if it’s inaccessible send queries to random hosts of shard. Useful for cross-replication topology setups. <a href="https://github.com/ClickHouse/ClickHouse/pull/5012" target="_blank" rel="noopener noreferrer">#5012</a> (<a href="https://github.com/nvartolomei" target="_blank" rel="noopener noreferrer">nvartolomei</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-features-1">Experimental Features<a class="hash-link" href="#experimental-features-1" title="Direct link to heading">​</a></h4><ul><li>Add setting <code>index_granularity_bytes</code> (adaptive index granularity) for MergeTree<!-- -->*<!-- --> tables family. <a href="https://github.com/ClickHouse/ClickHouse/pull/4826" target="_blank" rel="noopener noreferrer">#4826</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvements-1">Improvements<a class="hash-link" href="#improvements-1" title="Direct link to heading">​</a></h4><ul><li>Added support for non-constant and negative size and length arguments for function <code>substringUTF8</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4989" target="_blank" rel="noopener noreferrer">#4989</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Disable push-down to right table in left join, left table in right join, and both tables in full join. This fixes wrong JOIN results in some cases. <a href="https://github.com/ClickHouse/ClickHouse/pull/4846" target="_blank" rel="noopener noreferrer">#4846</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li><code>clickhouse-copier</code>: auto upload task configuration from <code>--task-file</code> option <a href="https://github.com/ClickHouse/ClickHouse/pull/4876" target="_blank" rel="noopener noreferrer">#4876</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Added typos handler for storage factory and table functions factory. <a href="https://github.com/ClickHouse/ClickHouse/pull/4891" target="_blank" rel="noopener noreferrer">#4891</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Support asterisks and qualified asterisks for multiple joins without subqueries <a href="https://github.com/ClickHouse/ClickHouse/pull/4898" target="_blank" rel="noopener noreferrer">#4898</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Make missing column error message more user friendly. <a href="https://github.com/ClickHouse/ClickHouse/pull/4915" target="_blank" rel="noopener noreferrer">#4915</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvements-2">Performance Improvements<a class="hash-link" href="#performance-improvements-2" title="Direct link to heading">​</a></h4><ul><li>Significant speedup of ASOF JOIN <a href="https://github.com/ClickHouse/ClickHouse/pull/4924" target="_blank" rel="noopener noreferrer">#4924</a> (<a href="https://github.com/Gladdy" target="_blank" rel="noopener noreferrer">Martijn Bakker</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-changes">Backward Incompatible Changes<a class="hash-link" href="#backward-incompatible-changes" title="Direct link to heading">​</a></h4><ul><li>HTTP header <code>Query-Id</code> was renamed to <code>X-ClickHouse-Query-Id</code> for consistency. <a href="https://github.com/ClickHouse/ClickHouse/pull/4972" target="_blank" rel="noopener noreferrer">#4972</a> (<a href="https://github.com/fandyushin" target="_blank" rel="noopener noreferrer">Mikhail</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-4">Bug Fixes<a class="hash-link" href="#bug-fixes-4" title="Direct link to heading">​</a></h4><ul><li>Fixed potential null pointer dereference in <code>clickhouse-copier</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4900" target="_blank" rel="noopener noreferrer">#4900</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed error on query with JOIN + ARRAY JOIN <a href="https://github.com/ClickHouse/ClickHouse/pull/4938" target="_blank" rel="noopener noreferrer">#4938</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed hanging on start of the server when a dictionary depends on another dictionary via a database with engine=Dictionary. <a href="https://github.com/ClickHouse/ClickHouse/pull/4962" target="_blank" rel="noopener noreferrer">#4962</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Partially fix distributed_product_mode = local. It’s possible to allow columns of local tables in where/having/order by/… via table aliases. Throw exception if table does not have alias. There’s not possible to access to the columns without table aliases yet. <a href="https://github.com/ClickHouse/ClickHouse/pull/4986" target="_blank" rel="noopener noreferrer">#4986</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix potentially wrong result for <code>SELECT DISTINCT</code> with <code>JOIN</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href="https://github.com/ClickHouse/ClickHouse/pull/5189" target="_blank" rel="noopener noreferrer">#5189</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvements-2">Build/Testing/Packaging Improvements<a class="hash-link" href="#buildtestingpackaging-improvements-2" title="Direct link to heading">​</a></h4><ul><li>Fixed test failures when running clickhouse-server on different host <a href="https://github.com/ClickHouse/ClickHouse/pull/4713" target="_blank" rel="noopener noreferrer">#4713</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>clickhouse-test: Disable color control sequences in non tty environment. <a href="https://github.com/ClickHouse/ClickHouse/pull/4937" target="_blank" rel="noopener noreferrer">#4937</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>clickhouse-test: Allow use any test database (remove <code>test.</code> qualification where it possible) <a href="https://github.com/ClickHouse/ClickHouse/pull/5008" target="_blank" rel="noopener noreferrer">#5008</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix ubsan errors <a href="https://github.com/ClickHouse/ClickHouse/pull/5037" target="_blank" rel="noopener noreferrer">#5037</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Yandex LFAlloc was added to ClickHouse to allocate MarkCache and UncompressedCache data in different ways to catch segfaults more reliable <a href="https://github.com/ClickHouse/ClickHouse/pull/4995" target="_blank" rel="noopener noreferrer">#4995</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Python util to help with backports and changelogs. <a href="https://github.com/ClickHouse/ClickHouse/pull/4949" target="_blank" rel="noopener noreferrer">#4949</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-5">ClickHouse Release 19.5<a class="hash-link" href="#clickhouse-release-19-5" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-5-4-22-2019-05-13">ClickHouse Release 19.5.4.22, 2019-05-13<a class="hash-link" href="#clickhouse-release-19-5-4-22-2019-05-13" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-5">Bug Fixes<a class="hash-link" href="#bug-fixes-5" title="Direct link to heading">​</a></h4><ul><li>Fixed possible crash in bitmap<!-- -->*<!-- --> functions <a href="https://github.com/ClickHouse/ClickHouse/pull/5220" target="_blank" rel="noopener noreferrer">#5220</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/5228" target="_blank" rel="noopener noreferrer">#5228</a> (<a href="https://github.com/andyyzh" target="_blank" rel="noopener noreferrer">Andy Yang</a>)</li><li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href="https://github.com/ClickHouse/ClickHouse/pull/5189" target="_blank" rel="noopener noreferrer">#5189</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed error <code>Set for IN is not created yet in case of using single LowCardinality column in the left part of IN</code>. This error happened if LowCardinality column was the part of primary key. #5031 <a href="https://github.com/ClickHouse/ClickHouse/pull/5154" target="_blank" rel="noopener noreferrer">#5154</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Modification of retention function: If a row satisfies both the first and NTH condition, only the first satisfied condition is added to the data state. Now all conditions that satisfy in a row of data are added to the data state. <a href="https://github.com/ClickHouse/ClickHouse/pull/5119" target="_blank" rel="noopener noreferrer">#5119</a> (<a href="https://github.com/nicelulu" target="_blank" rel="noopener noreferrer">小路</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-5-3-8-2019-04-18">ClickHouse Release 19.5.3.8, 2019-04-18<a class="hash-link" href="#clickhouse-release-19-5-3-8-2019-04-18" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-6">Bug Fixes<a class="hash-link" href="#bug-fixes-6" title="Direct link to heading">​</a></h4><ul><li>Fixed type of setting <code>max_partitions_per_insert_block</code> from boolean to UInt64. <a href="https://github.com/ClickHouse/ClickHouse/pull/5028" target="_blank" rel="noopener noreferrer">#5028</a> (<a href="https://github.com/mhsekhavat" target="_blank" rel="noopener noreferrer">Mohammad Hossein Sekhavat</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-5-2-6-2019-04-15">ClickHouse Release 19.5.2.6, 2019-04-15<a class="hash-link" href="#clickhouse-release-19-5-2-6-2019-04-15" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features-4">New Features<a class="hash-link" href="#new-features-4" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/intel/hyperscan" target="_blank" rel="noopener noreferrer">Hyperscan</a> multiple regular expression matching was added (functions <code>multiMatchAny</code>, <code>multiMatchAnyIndex</code>, <code>multiFuzzyMatchAny</code>, <code>multiFuzzyMatchAnyIndex</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4780" target="_blank" rel="noopener noreferrer">#4780</a>, <a href="https://github.com/ClickHouse/ClickHouse/pull/4841" target="_blank" rel="noopener noreferrer">#4841</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li><code>multiSearchFirstPosition</code> function was added. <a href="https://github.com/ClickHouse/ClickHouse/pull/4780" target="_blank" rel="noopener noreferrer">#4780</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Implement the predefined expression filter per row for tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/4792" target="_blank" rel="noopener noreferrer">#4792</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>A new type of data skipping indices based on bloom filters (can be used for <code>equal</code>, <code>in</code> and <code>like</code> functions). <a href="https://github.com/ClickHouse/ClickHouse/pull/4499" target="_blank" rel="noopener noreferrer">#4499</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Added <code>ASOF JOIN</code> which allows to run queries that join to the most recent value known. <a href="https://github.com/ClickHouse/ClickHouse/pull/4774" target="_blank" rel="noopener noreferrer">#4774</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4867" target="_blank" rel="noopener noreferrer">#4867</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4863" target="_blank" rel="noopener noreferrer">#4863</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4875" target="_blank" rel="noopener noreferrer">#4875</a> (<a href="https://github.com/Gladdy" target="_blank" rel="noopener noreferrer">Martijn Bakker</a>, <a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Rewrite multiple <code>COMMA JOIN</code> to <code>CROSS JOIN</code>. Then rewrite them to <code>INNER JOIN</code> if possible. <a href="https://github.com/ClickHouse/ClickHouse/pull/4661" target="_blank" rel="noopener noreferrer">#4661</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-9">Improvement<a class="hash-link" href="#improvement-9" title="Direct link to heading">​</a></h4><ul><li><code>topK</code> and <code>topKWeighted</code> now supports custom <code>loadFactor</code> (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/4252" target="_blank" rel="noopener noreferrer">#4252</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4634" target="_blank" rel="noopener noreferrer">#4634</a> (<a href="https://github.com/kirillDanshin" target="_blank" rel="noopener noreferrer">Kirill Danshin</a>)</li><li>Allow to use <code>parallel_replicas_count &gt; 1</code> even for tables without sampling (the setting is simply ignored for them). In previous versions it was lead to exception. <a href="https://github.com/ClickHouse/ClickHouse/pull/4637" target="_blank" rel="noopener noreferrer">#4637</a> (<a href="https://github.com/digitalist" target="_blank" rel="noopener noreferrer">Alexey Elymanov</a>)</li><li>Support for <code>CREATE OR REPLACE VIEW</code>. Allow to create a view or set a new definition in a single statement. <a href="https://github.com/ClickHouse/ClickHouse/pull/4654" target="_blank" rel="noopener noreferrer">#4654</a> (<a href="https://github.com/bgranvea" target="_blank" rel="noopener noreferrer">Boris Granveaud</a>)</li><li><code>Buffer</code> table engine now supports <code>PREWHERE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4671" target="_blank" rel="noopener noreferrer">#4671</a> (<a href="https://github.com/LiuYangkuan" target="_blank" rel="noopener noreferrer">Yangkuan Liu</a>)</li><li>Add ability to start replicated table without metadata in zookeeper in <code>readonly</code> mode. <a href="https://github.com/ClickHouse/ClickHouse/pull/4691" target="_blank" rel="noopener noreferrer">#4691</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed flicker of progress bar in clickhouse-client. The issue was most noticeable when using <code>FORMAT Null</code> with streaming queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/4811" target="_blank" rel="noopener noreferrer">#4811</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Allow to disable functions with <code>hyperscan</code> library on per user basis to limit potentially excessive and uncontrolled resource usage. <a href="https://github.com/ClickHouse/ClickHouse/pull/4816" target="_blank" rel="noopener noreferrer">#4816</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add version number logging in all errors. <a href="https://github.com/ClickHouse/ClickHouse/pull/4824" target="_blank" rel="noopener noreferrer">#4824</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Added restriction to the <code>multiMatch</code> functions which requires string size to fit into <code>unsigned int</code>. Also added the number of arguments limit to the <code>multiSearch</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/4834" target="_blank" rel="noopener noreferrer">#4834</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Improved usage of scratch space and error handling in Hyperscan. <a href="https://github.com/ClickHouse/ClickHouse/pull/4866" target="_blank" rel="noopener noreferrer">#4866</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Fill <code>system.graphite_detentions</code> from a table config of <code>*GraphiteMergeTree</code> engine tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/4584" target="_blank" rel="noopener noreferrer">#4584</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>)</li><li>Rename <code>trigramDistance</code> function to <code>ngramDistance</code> and add more functions with <code>CaseInsensitive</code> and <code>UTF</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4602" target="_blank" rel="noopener noreferrer">#4602</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Improved data skipping indices calculation. <a href="https://github.com/ClickHouse/ClickHouse/pull/4640" target="_blank" rel="noopener noreferrer">#4640</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Keep ordinary, <code>DEFAULT</code>, <code>MATERIALIZED</code> and <code>ALIAS</code> columns in a single list (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/2867" target="_blank" rel="noopener noreferrer">#2867</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4707" target="_blank" rel="noopener noreferrer">#4707</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-26">Bug Fix<a class="hash-link" href="#bug-fix-26" title="Direct link to heading">​</a></h4><ul><li>Avoid <code>std::terminate</code> in case of memory allocation failure. Now <code>std::bad_alloc</code> exception is thrown as expected. <a href="https://github.com/ClickHouse/ClickHouse/pull/4665" target="_blank" rel="noopener noreferrer">#4665</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixes capnproto reading from buffer. Sometimes files wasn’t loaded successfully by HTTP. <a href="https://github.com/ClickHouse/ClickHouse/pull/4674" target="_blank" rel="noopener noreferrer">#4674</a> (<a href="https://github.com/smirnov-vs" target="_blank" rel="noopener noreferrer">Vladislav</a>)</li><li>Fix error <code>Unknown log entry type: 0</code> after <code>OPTIMIZE TABLE FINAL</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4683" target="_blank" rel="noopener noreferrer">#4683</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Wrong arguments to <code>hasAny</code> or <code>hasAll</code> functions may lead to segfault. <a href="https://github.com/ClickHouse/ClickHouse/pull/4698" target="_blank" rel="noopener noreferrer">#4698</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Deadlock may happen while executing <code>DROP DATABASE dictionary</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4701" target="_blank" rel="noopener noreferrer">#4701</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix undefined behavior in <code>median</code> and <code>quantile</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/4702" target="_blank" rel="noopener noreferrer">#4702</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Fix compression level detection when <code>network_compression_method</code> in lowercase. Broken in v19.1. <a href="https://github.com/ClickHouse/ClickHouse/pull/4706" target="_blank" rel="noopener noreferrer">#4706</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed ignorance of <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/4658" target="_blank" rel="noopener noreferrer">#4658</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4718" target="_blank" rel="noopener noreferrer">#4718</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix <code>histogram</code> function behaviour with <code>Distributed</code> tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/4741" target="_blank" rel="noopener noreferrer">#4741</a> (<a href="https://github.com/olegkv" target="_blank" rel="noopener noreferrer">olegkv</a>)</li><li>Fixed tsan report <code>destroy of a locked mutex</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4742" target="_blank" rel="noopener noreferrer">#4742</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/4758" target="_blank" rel="noopener noreferrer">#4758</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix recheck parts in <code>ReplicatedMergeTreeAlterThread</code> in case of error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4772" target="_blank" rel="noopener noreferrer">#4772</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href="https://github.com/ClickHouse/ClickHouse/pull/4776" target="_blank" rel="noopener noreferrer">#4776</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Always backquote column names in metadata. Otherwise it’s impossible to create a table with column named <code>index</code> (server won’t restart due to malformed <code>ATTACH</code> query in metadata). <a href="https://github.com/ClickHouse/ClickHouse/pull/4782" target="_blank" rel="noopener noreferrer">#4782</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix crash in <code>ALTER ... MODIFY ORDER BY</code> on <code>Distributed</code> table. <a href="https://github.com/ClickHouse/ClickHouse/pull/4790" target="_blank" rel="noopener noreferrer">#4790</a> (<a href="https://github.com/TCeason" target="_blank" rel="noopener noreferrer">TCeason</a>)</li><li>Fix segfault in <code>JOIN ON</code> with enabled <code>enable_optimize_predicate_expression</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4794" target="_blank" rel="noopener noreferrer">#4794</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href="https://github.com/ClickHouse/ClickHouse/pull/4808" target="_blank" rel="noopener noreferrer">#4808</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fix crash of <code>JOIN</code> on not-nullable vs nullable column. Fix <code>NULLs</code> in right keys in <code>ANY JOIN</code> + <code>join_use_nulls</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4815" target="_blank" rel="noopener noreferrer">#4815</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4835" target="_blank" rel="noopener noreferrer">#4835</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed race condition in <code>SELECT</code> from <code>system.tables</code> if the table is renamed or altered concurrently. <a href="https://github.com/ClickHouse/ClickHouse/pull/4836" target="_blank" rel="noopener noreferrer">#4836</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed data race when fetching data part that is already obsolete. <a href="https://github.com/ClickHouse/ClickHouse/pull/4839" target="_blank" rel="noopener noreferrer">#4839</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed rare data race that can happen during <code>RENAME</code> table of MergeTree family. <a href="https://github.com/ClickHouse/ClickHouse/pull/4844" target="_blank" rel="noopener noreferrer">#4844</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed segmentation fault in function <code>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/4847" target="_blank" rel="noopener noreferrer">#4847</a> (<a href="https://github.com/fancyqlx" target="_blank" rel="noopener noreferrer">Lixiang Qian</a>)</li><li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href="https://github.com/ClickHouse/ClickHouse/pull/4850" target="_blank" rel="noopener noreferrer">#4850</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href="https://github.com/ClickHouse/ClickHouse/pull/4855" target="_blank" rel="noopener noreferrer">#4855</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix <code>No message received</code> exception while fetching parts between replicas. <a href="https://github.com/ClickHouse/ClickHouse/pull/4856" target="_blank" rel="noopener noreferrer">#4856</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href="https://github.com/ClickHouse/ClickHouse/pull/4871" target="_blank" rel="noopener noreferrer">#4871</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix a race condition during concurrent <code>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/3421" target="_blank" rel="noopener noreferrer">#3421</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4592" target="_blank" rel="noopener noreferrer">#4592</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Fix incorrect result in <code>FULL/RIGHT JOIN</code> with const column. <a href="https://github.com/ClickHouse/ClickHouse/pull/4723" target="_blank" rel="noopener noreferrer">#4723</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix duplicates in <code>GLOBAL JOIN</code> with asterisk. <a href="https://github.com/ClickHouse/ClickHouse/pull/4705" target="_blank" rel="noopener noreferrer">#4705</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix parameter deduction in <code>ALTER MODIFY</code> of column <code>CODEC</code> when column type is not specified. <a href="https://github.com/ClickHouse/ClickHouse/pull/4883" target="_blank" rel="noopener noreferrer">#4883</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Functions <code>cutQueryStringAndFragment()</code> and <code>queryStringAndFragment()</code> now works correctly when <code>URL</code> contains a fragment and no query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4894" target="_blank" rel="noopener noreferrer">#4894</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fix rare bug when setting <code>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href="https://github.com/ClickHouse/ClickHouse/pull/4897" target="_blank" rel="noopener noreferrer">#4897</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix wrong argument types for aggregate functions with <code>LowCardinality</code> arguments (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/4919" target="_blank" rel="noopener noreferrer">#4919</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4922" target="_blank" rel="noopener noreferrer">#4922</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix wrong name qualification in <code>GLOBAL JOIN</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4969" target="_blank" rel="noopener noreferrer">#4969</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix function <code>toISOWeek</code> result for year 1970. <a href="https://github.com/ClickHouse/ClickHouse/pull/4988" target="_blank" rel="noopener noreferrer">#4988</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix <code>DROP</code>, <code>TRUNCATE</code> and <code>OPTIMIZE</code> queries duplication, when executed on <code>ON CLUSTER</code> for <code>ReplicatedMergeTree*</code> tables family. <a href="https://github.com/ClickHouse/ClickHouse/pull/4991" target="_blank" rel="noopener noreferrer">#4991</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-8">Backward Incompatible Change<a class="hash-link" href="#backward-incompatible-change-8" title="Direct link to heading">​</a></h4><ul><li>Rename setting <code>insert_sample_with_metadata</code> to setting <code>input_format_defaults_for_omitted_fields</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4771" target="_blank" rel="noopener noreferrer">#4771</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Added setting <code>max_partitions_per_insert_block</code> (with value 100 by default). If inserted block contains larger number of partitions, an exception is thrown. Set it to 0 if you want to remove the limit (not recommended). <a href="https://github.com/ClickHouse/ClickHouse/pull/4845" target="_blank" rel="noopener noreferrer">#4845</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Multi-search functions were renamed (<code>multiPosition</code> to <code>multiSearchAllPositions</code>, <code>multiSearch</code> to <code>multiSearchAny</code>, <code>firstMatch</code> to <code>multiSearchFirstIndex</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4780" target="_blank" rel="noopener noreferrer">#4780</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement-6">Performance Improvement<a class="hash-link" href="#performance-improvement-6" title="Direct link to heading">​</a></h4><ul><li>Optimize Volnitsky searcher by inlining, giving about 5-10% search improvement for queries with many needles or many similar bigrams. <a href="https://github.com/ClickHouse/ClickHouse/pull/4862" target="_blank" rel="noopener noreferrer">#4862</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Fix performance issue when setting <code>use_uncompressed_cache</code> is greater than zero, which appeared when all read data contained in cache. <a href="https://github.com/ClickHouse/ClickHouse/pull/4913" target="_blank" rel="noopener noreferrer">#4913</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-10">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-10" title="Direct link to heading">​</a></h4><ul><li>Hardening debug build: more granular memory mappings and ASLR; add memory protection for mark cache and index. This allows to find more memory stomping bugs in case when ASan and MSan cannot do it. <a href="https://github.com/ClickHouse/ClickHouse/pull/4632" target="_blank" rel="noopener noreferrer">#4632</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add support for cmake variables <code>ENABLE_PROTOBUF</code>, <code>ENABLE_PARQUET</code> and <code>ENABLE_BROTLI</code> which allows to enable/disable the above features (same as we can do for librdkafka, mysql, etc). <a href="https://github.com/ClickHouse/ClickHouse/pull/4669" target="_blank" rel="noopener noreferrer">#4669</a> (<a href="https://github.com/silviucpp" target="_blank" rel="noopener noreferrer">Silviu Caragea</a>)</li><li>Add ability to print process list and stacktraces of all threads if some queries are hung after test run. <a href="https://github.com/ClickHouse/ClickHouse/pull/4675" target="_blank" rel="noopener noreferrer">#4675</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add retries on <code>Connection loss</code> error in <code>clickhouse-test</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4682" target="_blank" rel="noopener noreferrer">#4682</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add freebsd build with vagrant and build with thread sanitizer to packager script. <a href="https://github.com/ClickHouse/ClickHouse/pull/4712" target="_blank" rel="noopener noreferrer">#4712</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4748" target="_blank" rel="noopener noreferrer">#4748</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Now user asked for password for user <code>&#x27;default&#x27;</code> during installation. <a href="https://github.com/ClickHouse/ClickHouse/pull/4725" target="_blank" rel="noopener noreferrer">#4725</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Suppress warning in <code>rdkafka</code> library. <a href="https://github.com/ClickHouse/ClickHouse/pull/4740" target="_blank" rel="noopener noreferrer">#4740</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Allow ability to build without ssl. <a href="https://github.com/ClickHouse/ClickHouse/pull/4750" target="_blank" rel="noopener noreferrer">#4750</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Add a way to launch clickhouse-server image from a custom user. <a href="https://github.com/ClickHouse/ClickHouse/pull/4753" target="_blank" rel="noopener noreferrer">#4753</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>)</li><li>Upgrade contrib boost to 1.69. <a href="https://github.com/ClickHouse/ClickHouse/pull/4793" target="_blank" rel="noopener noreferrer">#4793</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Disable usage of <code>mremap</code> when compiled with Thread Sanitizer. Surprisingly enough, TSan does not intercept <code>mremap</code> (though it does intercept <code>mmap</code>, <code>munmap</code>) that leads to false positives. Fixed TSan report in stateful tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/4859" target="_blank" rel="noopener noreferrer">#4859</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add test checking using format schema via HTTP interface. <a href="https://github.com/ClickHouse/ClickHouse/pull/4864" target="_blank" rel="noopener noreferrer">#4864</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-4">ClickHouse Release 19.4<a class="hash-link" href="#clickhouse-release-19-4" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-4-4-33-2019-04-17">ClickHouse Release 19.4.4.33, 2019-04-17<a class="hash-link" href="#clickhouse-release-19-4-4-33-2019-04-17" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-7">Bug Fixes<a class="hash-link" href="#bug-fixes-7" title="Direct link to heading">​</a></h4><ul><li>Avoid <code>std::terminate</code> in case of memory allocation failure. Now <code>std::bad_alloc</code> exception is thrown as expected. <a href="https://github.com/ClickHouse/ClickHouse/pull/4665" target="_blank" rel="noopener noreferrer">#4665</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixes capnproto reading from buffer. Sometimes files wasn’t loaded successfully by HTTP. <a href="https://github.com/ClickHouse/ClickHouse/pull/4674" target="_blank" rel="noopener noreferrer">#4674</a> (<a href="https://github.com/smirnov-vs" target="_blank" rel="noopener noreferrer">Vladislav</a>)</li><li>Fix error <code>Unknown log entry type: 0</code> after <code>OPTIMIZE TABLE FINAL</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4683" target="_blank" rel="noopener noreferrer">#4683</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Wrong arguments to <code>hasAny</code> or <code>hasAll</code> functions may lead to segfault. <a href="https://github.com/ClickHouse/ClickHouse/pull/4698" target="_blank" rel="noopener noreferrer">#4698</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Deadlock may happen while executing <code>DROP DATABASE dictionary</code> query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4701" target="_blank" rel="noopener noreferrer">#4701</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix undefined behavior in <code>median</code> and <code>quantile</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/4702" target="_blank" rel="noopener noreferrer">#4702</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>Fix compression level detection when <code>network_compression_method</code> in lowercase. Broken in v19.1. <a href="https://github.com/ClickHouse/ClickHouse/pull/4706" target="_blank" rel="noopener noreferrer">#4706</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed ignorance of <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/4658" target="_blank" rel="noopener noreferrer">#4658</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4718" target="_blank" rel="noopener noreferrer">#4718</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fix <code>histogram</code> function behaviour with <code>Distributed</code> tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/4741" target="_blank" rel="noopener noreferrer">#4741</a> (<a href="https://github.com/olegkv" target="_blank" rel="noopener noreferrer">olegkv</a>)</li><li>Fixed tsan report <code>destroy of a locked mutex</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4742" target="_blank" rel="noopener noreferrer">#4742</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/4758" target="_blank" rel="noopener noreferrer">#4758</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix recheck parts in <code>ReplicatedMergeTreeAlterThread</code> in case of error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4772" target="_blank" rel="noopener noreferrer">#4772</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href="https://github.com/ClickHouse/ClickHouse/pull/4776" target="_blank" rel="noopener noreferrer">#4776</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Always backquote column names in metadata. Otherwise it’s impossible to create a table with column named <code>index</code> (server won’t restart due to malformed <code>ATTACH</code> query in metadata). <a href="https://github.com/ClickHouse/ClickHouse/pull/4782" target="_blank" rel="noopener noreferrer">#4782</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix crash in <code>ALTER ... MODIFY ORDER BY</code> on <code>Distributed</code> table. <a href="https://github.com/ClickHouse/ClickHouse/pull/4790" target="_blank" rel="noopener noreferrer">#4790</a> (<a href="https://github.com/TCeason" target="_blank" rel="noopener noreferrer">TCeason</a>)</li><li>Fix segfault in <code>JOIN ON</code> with enabled <code>enable_optimize_predicate_expression</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4794" target="_blank" rel="noopener noreferrer">#4794</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href="https://github.com/ClickHouse/ClickHouse/pull/4808" target="_blank" rel="noopener noreferrer">#4808</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4835" target="_blank" rel="noopener noreferrer">#4835</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed race condition in <code>SELECT</code> from <code>system.tables</code> if the table is renamed or altered concurrently. <a href="https://github.com/ClickHouse/ClickHouse/pull/4836" target="_blank" rel="noopener noreferrer">#4836</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed data race when fetching data part that is already obsolete. <a href="https://github.com/ClickHouse/ClickHouse/pull/4839" target="_blank" rel="noopener noreferrer">#4839</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed rare data race that can happen during <code>RENAME</code> table of MergeTree family. <a href="https://github.com/ClickHouse/ClickHouse/pull/4844" target="_blank" rel="noopener noreferrer">#4844</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed segmentation fault in function <code>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/4847" target="_blank" rel="noopener noreferrer">#4847</a> (<a href="https://github.com/fancyqlx" target="_blank" rel="noopener noreferrer">Lixiang Qian</a>)</li><li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href="https://github.com/ClickHouse/ClickHouse/pull/4850" target="_blank" rel="noopener noreferrer">#4850</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix <code>No message received</code> exception while fetching parts between replicas. <a href="https://github.com/ClickHouse/ClickHouse/pull/4856" target="_blank" rel="noopener noreferrer">#4856</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href="https://github.com/ClickHouse/ClickHouse/pull/4871" target="_blank" rel="noopener noreferrer">#4871</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix a race condition during concurrent <code>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/3421" target="_blank" rel="noopener noreferrer">#3421</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4592" target="_blank" rel="noopener noreferrer">#4592</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Fix parameter deduction in <code>ALTER MODIFY</code> of column <code>CODEC</code> when column type is not specified. <a href="https://github.com/ClickHouse/ClickHouse/pull/4883" target="_blank" rel="noopener noreferrer">#4883</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Functions <code>cutQueryStringAndFragment()</code> and <code>queryStringAndFragment()</code> now works correctly when <code>URL</code> contains a fragment and no query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4894" target="_blank" rel="noopener noreferrer">#4894</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Fix rare bug when setting <code>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href="https://github.com/ClickHouse/ClickHouse/pull/4897" target="_blank" rel="noopener noreferrer">#4897</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix wrong argument types for aggregate functions with <code>LowCardinality</code> arguments (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/4919" target="_blank" rel="noopener noreferrer">#4919</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4922" target="_blank" rel="noopener noreferrer">#4922</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fix function <code>toISOWeek</code> result for year 1970. <a href="https://github.com/ClickHouse/ClickHouse/pull/4988" target="_blank" rel="noopener noreferrer">#4988</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix <code>DROP</code>, <code>TRUNCATE</code> and <code>OPTIMIZE</code> queries duplication, when executed on <code>ON CLUSTER</code> for <code>ReplicatedMergeTree*</code> tables family. <a href="https://github.com/ClickHouse/ClickHouse/pull/4991" target="_blank" rel="noopener noreferrer">#4991</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvements-2">Improvements<a class="hash-link" href="#improvements-2" title="Direct link to heading">​</a></h4><ul><li>Keep ordinary, <code>DEFAULT</code>, <code>MATERIALIZED</code> and <code>ALIAS</code> columns in a single list (fixes issue <a href="https://github.com/ClickHouse/ClickHouse/issues/2867" target="_blank" rel="noopener noreferrer">#2867</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4707" target="_blank" rel="noopener noreferrer">#4707</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-4-3-11-2019-04-02">ClickHouse Release 19.4.3.11, 2019-04-02<a class="hash-link" href="#clickhouse-release-19-4-3-11-2019-04-02" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-8">Bug Fixes<a class="hash-link" href="#bug-fixes-8" title="Direct link to heading">​</a></h4><ul><li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href="https://github.com/ClickHouse/ClickHouse/pull/4855" target="_blank" rel="noopener noreferrer">#4855</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4835" target="_blank" rel="noopener noreferrer">#4835</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-11">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-11" title="Direct link to heading">​</a></h4><ul><li>Add a way to launch clickhouse-server image from a custom user. <a href="https://github.com/ClickHouse/ClickHouse/pull/4753" target="_blank" rel="noopener noreferrer">#4753</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-4-2-7-2019-03-30">ClickHouse Release 19.4.2.7, 2019-03-30<a class="hash-link" href="#clickhouse-release-19-4-2-7-2019-03-30" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-9">Bug Fixes<a class="hash-link" href="#bug-fixes-9" title="Direct link to heading">​</a></h4><ul><li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href="https://github.com/ClickHouse/ClickHouse/pull/4850" target="_blank" rel="noopener noreferrer">#4850</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-4-1-3-2019-03-19">ClickHouse Release 19.4.1.3, 2019-03-19<a class="hash-link" href="#clickhouse-release-19-4-1-3-2019-03-19" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-10">Bug Fixes<a class="hash-link" href="#bug-fixes-10" title="Direct link to heading">​</a></h4><ul><li>Fixed remote queries which contain both <code>LIMIT BY</code> and <code>LIMIT</code>. Previously, if <code>LIMIT BY</code> and <code>LIMIT</code> were used for remote query, <code>LIMIT</code> could happen before <code>LIMIT BY</code>, which led to too filtered result. <a href="https://github.com/ClickHouse/ClickHouse/pull/4708" target="_blank" rel="noopener noreferrer">#4708</a> (<a href="https://github.com/kvap" target="_blank" rel="noopener noreferrer">Constantin S. Pan</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-4-0-49-2019-03-09">ClickHouse Release 19.4.0.49, 2019-03-09<a class="hash-link" href="#clickhouse-release-19-4-0-49-2019-03-09" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features-5">New Features<a class="hash-link" href="#new-features-5" title="Direct link to heading">​</a></h4><ul><li>Added full support for <code>Protobuf</code> format (input and output, nested data structures). <a href="https://github.com/ClickHouse/ClickHouse/pull/4174" target="_blank" rel="noopener noreferrer">#4174</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4493" target="_blank" rel="noopener noreferrer">#4493</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Added bitmap functions with Roaring Bitmaps. <a href="https://github.com/ClickHouse/ClickHouse/pull/4207" target="_blank" rel="noopener noreferrer">#4207</a> (<a href="https://github.com/andyyzh" target="_blank" rel="noopener noreferrer">Andy Yang</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/4568" target="_blank" rel="noopener noreferrer">#4568</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Parquet format support. <a href="https://github.com/ClickHouse/ClickHouse/pull/4448" target="_blank" rel="noopener noreferrer">#4448</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>N-gram distance was added for fuzzy string comparison. It is similar to q-gram metrics in R language. <a href="https://github.com/ClickHouse/ClickHouse/pull/4466" target="_blank" rel="noopener noreferrer">#4466</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Combine rules for graphite rollup from dedicated aggregation and retention patterns. <a href="https://github.com/ClickHouse/ClickHouse/pull/4426" target="_blank" rel="noopener noreferrer">#4426</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>)</li><li>Added <code>max_execution_speed</code> and <code>max_execution_speed_bytes</code> to limit resource usage. Added <code>min_execution_speed_bytes</code> setting to complement the <code>min_execution_speed</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4430" target="_blank" rel="noopener noreferrer">#4430</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Implemented function <code>flatten</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4555" target="_blank" rel="noopener noreferrer">#4555</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4409" target="_blank" rel="noopener noreferrer">#4409</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>, <a href="https://github.com/kzon" target="_blank" rel="noopener noreferrer">kzon</a>)</li><li>Added functions <code>arrayEnumerateDenseRanked</code> and <code>arrayEnumerateUniqRanked</code> (it’s like <code>arrayEnumerateUniq</code> but allows to fine tune array depth to look inside multidimensional arrays). <a href="https://github.com/ClickHouse/ClickHouse/pull/4475" target="_blank" rel="noopener noreferrer">#4475</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/4601" target="_blank" rel="noopener noreferrer">#4601</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Multiple JOINS with some restrictions: no asterisks, no complex aliases in ON/WHERE/GROUP BY/… <a href="https://github.com/ClickHouse/ClickHouse/pull/4462" target="_blank" rel="noopener noreferrer">#4462</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-11">Bug Fixes<a class="hash-link" href="#bug-fixes-11" title="Direct link to heading">​</a></h4><ul><li>This release also contains all bug fixes from 19.3 and 19.1.</li><li>Fixed bug in data skipping indices: order of granules after INSERT was incorrect. <a href="https://github.com/ClickHouse/ClickHouse/pull/4407" target="_blank" rel="noopener noreferrer">#4407</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Fixed <code>set</code> index for <code>Nullable</code> and <code>LowCardinality</code> columns. Before it, <code>set</code> index with <code>Nullable</code> or <code>LowCardinality</code> column led to error <code>Data type must be deserialized with multiple streams</code> while selecting. <a href="https://github.com/ClickHouse/ClickHouse/pull/4594" target="_blank" rel="noopener noreferrer">#4594</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Correctly set update_time on full <code>executable</code> dictionary update. <a href="https://github.com/ClickHouse/ClickHouse/pull/4551" target="_blank" rel="noopener noreferrer">#4551</a> (<a href="https://github.com/temoon" target="_blank" rel="noopener noreferrer">Tema Novikov</a>)</li><li>Fix broken progress bar in 19.3. <a href="https://github.com/ClickHouse/ClickHouse/pull/4627" target="_blank" rel="noopener noreferrer">#4627</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Fixed inconsistent values of MemoryTracker when memory region was shrinked, in certain cases. <a href="https://github.com/ClickHouse/ClickHouse/pull/4619" target="_blank" rel="noopener noreferrer">#4619</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed undefined behaviour in ThreadPool. <a href="https://github.com/ClickHouse/ClickHouse/pull/4612" target="_blank" rel="noopener noreferrer">#4612</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed a very rare crash with the message <code>mutex lock failed: Invalid argument</code> that could happen when a MergeTree table was dropped concurrently with a SELECT. <a href="https://github.com/ClickHouse/ClickHouse/pull/4608" target="_blank" rel="noopener noreferrer">#4608</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>ODBC driver compatibility with <code>LowCardinality</code> data type. <a href="https://github.com/ClickHouse/ClickHouse/pull/4381" target="_blank" rel="noopener noreferrer">#4381</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>FreeBSD: Fixup for <code>AIOcontextPool: Found io_event with unknown id 0</code> error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4438" target="_blank" rel="noopener noreferrer">#4438</a> (<a href="https://github.com/urgordeadbeef" target="_blank" rel="noopener noreferrer">urgordeadbeef</a>)</li><li><code>system.part_log</code> table was created regardless to configuration. <a href="https://github.com/ClickHouse/ClickHouse/pull/4483" target="_blank" rel="noopener noreferrer">#4483</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix undefined behaviour in <code>dictIsIn</code> function for cache dictionaries. <a href="https://github.com/ClickHouse/ClickHouse/pull/4515" target="_blank" rel="noopener noreferrer">#4515</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed a deadlock when a SELECT query locks the same table multiple times (e.g. from different threads or when executing multiple subqueries) and there is a concurrent DDL query. <a href="https://github.com/ClickHouse/ClickHouse/pull/4535" target="_blank" rel="noopener noreferrer">#4535</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Disable compile_expressions by default until we get own <code>llvm</code> contrib and can test it with <code>clang</code> and <code>asan</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4579" target="_blank" rel="noopener noreferrer">#4579</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Prevent <code>std::terminate</code> when <code>invalidate_query</code> for <code>clickhouse</code> external dictionary source has returned wrong resultset (empty or more than one row or more than one column). Fixed issue when the <code>invalidate_query</code> was performed every five seconds regardless to the <code>lifetime</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4583" target="_blank" rel="noopener noreferrer">#4583</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Avoid deadlock when the <code>invalidate_query</code> for a dictionary with <code>clickhouse</code> source was involving <code>system.dictionaries</code> table or <code>Dictionaries</code> database (rare case). <a href="https://github.com/ClickHouse/ClickHouse/pull/4599" target="_blank" rel="noopener noreferrer">#4599</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixes for CROSS JOIN with empty WHERE. <a href="https://github.com/ClickHouse/ClickHouse/pull/4598" target="_blank" rel="noopener noreferrer">#4598</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed segfault in function “replicate” when constant argument is passed. <a href="https://github.com/ClickHouse/ClickHouse/pull/4603" target="_blank" rel="noopener noreferrer">#4603</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix lambda function with predicate optimizer. <a href="https://github.com/ClickHouse/ClickHouse/pull/4408" target="_blank" rel="noopener noreferrer">#4408</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Multiple JOINs multiple fixes. <a href="https://github.com/ClickHouse/ClickHouse/pull/4595" target="_blank" rel="noopener noreferrer">#4595</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvements-3">Improvements<a class="hash-link" href="#improvements-3" title="Direct link to heading">​</a></h4><ul><li>Support aliases in JOIN ON section for right table columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/4412" target="_blank" rel="noopener noreferrer">#4412</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Result of multiple JOINs need correct result names to be used in subselects. Replace flat aliases with source names in result. <a href="https://github.com/ClickHouse/ClickHouse/pull/4474" target="_blank" rel="noopener noreferrer">#4474</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Improve push-down logic for joined statements. <a href="https://github.com/ClickHouse/ClickHouse/pull/4387" target="_blank" rel="noopener noreferrer">#4387</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvements-3">Performance Improvements<a class="hash-link" href="#performance-improvements-3" title="Direct link to heading">​</a></h4><ul><li>Improved heuristics of “move to PREWHERE” optimization. <a href="https://github.com/ClickHouse/ClickHouse/pull/4405" target="_blank" rel="noopener noreferrer">#4405</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Use proper lookup tables that uses HashTable’s API for 8-bit and 16-bit keys. <a href="https://github.com/ClickHouse/ClickHouse/pull/4536" target="_blank" rel="noopener noreferrer">#4536</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Improved performance of string comparison. <a href="https://github.com/ClickHouse/ClickHouse/pull/4564" target="_blank" rel="noopener noreferrer">#4564</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Cleanup distributed DDL queue in a separate thread so that it does not slow down the main loop that processes distributed DDL tasks. <a href="https://github.com/ClickHouse/ClickHouse/pull/4502" target="_blank" rel="noopener noreferrer">#4502</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>When <code>min_bytes_to_use_direct_io</code> is set to 1, not every file was opened with O_DIRECT mode because the data size to read was sometimes underestimated by the size of one compressed block. <a href="https://github.com/ClickHouse/ClickHouse/pull/4526" target="_blank" rel="noopener noreferrer">#4526</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-12">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-12" title="Direct link to heading">​</a></h4><ul><li>Added support for clang-9 <a href="https://github.com/ClickHouse/ClickHouse/pull/4604" target="_blank" rel="noopener noreferrer">#4604</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix wrong <code>__asm__</code> instructions (again) <a href="https://github.com/ClickHouse/ClickHouse/pull/4621" target="_blank" rel="noopener noreferrer">#4621</a> (<a href="https://github.com/podshumok" target="_blank" rel="noopener noreferrer">Konstantin Podshumok</a>)</li><li>Add ability to specify settings for <code>clickhouse-performance-test</code> from command line. <a href="https://github.com/ClickHouse/ClickHouse/pull/4437" target="_blank" rel="noopener noreferrer">#4437</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add dictionaries tests to integration tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/4477" target="_blank" rel="noopener noreferrer">#4477</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Added queries from the benchmark on the website to automated performance tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/4496" target="_blank" rel="noopener noreferrer">#4496</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>xxhash.h</code> does not exist in external lz4 because it is an implementation detail and its symbols are namespaced with <code>XXH_NAMESPACE</code> macro. When lz4 is external, xxHash has to be external too, and the dependents have to link to it. <a href="https://github.com/ClickHouse/ClickHouse/pull/4495" target="_blank" rel="noopener noreferrer">#4495</a> (<a href="https://github.com/orivej" target="_blank" rel="noopener noreferrer">Orivej Desh</a>)</li><li>Fixed a case when <code>quantileTiming</code> aggregate function can be called with negative or floating point argument (this fixes fuzz test with undefined behaviour sanitizer). <a href="https://github.com/ClickHouse/ClickHouse/pull/4506" target="_blank" rel="noopener noreferrer">#4506</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Spelling error correction. <a href="https://github.com/ClickHouse/ClickHouse/pull/4531" target="_blank" rel="noopener noreferrer">#4531</a> (<a href="https://github.com/sdk2" target="_blank" rel="noopener noreferrer">sdk2</a>)</li><li>Fix compilation on Mac. <a href="https://github.com/ClickHouse/ClickHouse/pull/4371" target="_blank" rel="noopener noreferrer">#4371</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Build fixes for FreeBSD and various unusual build configurations. <a href="https://github.com/ClickHouse/ClickHouse/pull/4444" target="_blank" rel="noopener noreferrer">#4444</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-3">ClickHouse Release 19.3<a class="hash-link" href="#clickhouse-release-19-3" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-3-9-1-2019-04-02">ClickHouse Release 19.3.9.1, 2019-04-02<a class="hash-link" href="#clickhouse-release-19-3-9-1-2019-04-02" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-12">Bug Fixes<a class="hash-link" href="#bug-fixes-12" title="Direct link to heading">​</a></h4><ul><li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href="https://github.com/ClickHouse/ClickHouse/pull/4855" target="_blank" rel="noopener noreferrer">#4855</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4835" target="_blank" rel="noopener noreferrer">#4835</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href="https://github.com/ClickHouse/ClickHouse/pull/4850" target="_blank" rel="noopener noreferrer">#4850</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-13">Build/Testing/Packaging Improvement<a class="hash-link" href="#buildtestingpackaging-improvement-13" title="Direct link to heading">​</a></h4><ul><li>Add a way to launch clickhouse-server image from a custom user <a href="https://github.com/ClickHouse/ClickHouse/pull/4753" target="_blank" rel="noopener noreferrer">#4753</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-3-7-2019-03-12">ClickHouse Release 19.3.7, 2019-03-12<a class="hash-link" href="#clickhouse-release-19-3-7-2019-03-12" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-13">Bug Fixes<a class="hash-link" href="#bug-fixes-13" title="Direct link to heading">​</a></h4><ul><li>Fixed error in #3920. This error manifests itself as random cache corruption (messages <code>Unknown codec family code</code>, <code>Cannot seek through file</code>) and segfaults. This bug first appeared in version 19.1 and is present in versions up to 19.1.10 and 19.3.6. <a href="https://github.com/ClickHouse/ClickHouse/pull/4623" target="_blank" rel="noopener noreferrer">#4623</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-3-6-2019-03-02">ClickHouse Release 19.3.6, 2019-03-02<a class="hash-link" href="#clickhouse-release-19-3-6-2019-03-02" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-14">Bug Fixes<a class="hash-link" href="#bug-fixes-14" title="Direct link to heading">​</a></h4><ul><li>When there are more than 1000 threads in a thread pool, <code>std::terminate</code> may happen on thread exit. <a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4485" target="_blank" rel="noopener noreferrer">#4485</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4505" target="_blank" rel="noopener noreferrer">#4505</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Now it’s possible to create <code>ReplicatedMergeTree*</code> tables with comments on columns without defaults and tables with columns codecs without comments and defaults. Also fix comparison of codecs. <a href="https://github.com/ClickHouse/ClickHouse/pull/4523" target="_blank" rel="noopener noreferrer">#4523</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed crash on JOIN with array or tuple. <a href="https://github.com/ClickHouse/ClickHouse/pull/4552" target="_blank" rel="noopener noreferrer">#4552</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed crash in clickhouse-copier with the message <code>ThreadStatus not created</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4540" target="_blank" rel="noopener noreferrer">#4540</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed hangup on server shutdown if distributed DDLs were used. <a href="https://github.com/ClickHouse/ClickHouse/pull/4472" target="_blank" rel="noopener noreferrer">#4472</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Incorrect column numbers were printed in error message about text format parsing for columns with number greater than 10. <a href="https://github.com/ClickHouse/ClickHouse/pull/4484" target="_blank" rel="noopener noreferrer">#4484</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvements-3">Build/Testing/Packaging Improvements<a class="hash-link" href="#buildtestingpackaging-improvements-3" title="Direct link to heading">​</a></h4><ul><li>Fixed build with AVX enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/4527" target="_blank" rel="noopener noreferrer">#4527</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Enable extended accounting and IO accounting based on good known version instead of kernel under which it is compiled. <a href="https://github.com/ClickHouse/ClickHouse/pull/4541" target="_blank" rel="noopener noreferrer">#4541</a> (<a href="https://github.com/nvartolomei" target="_blank" rel="noopener noreferrer">nvartolomei</a>)</li><li>Allow to skip setting of core_dump.size_limit, warning instead of throw if limit set fail. <a href="https://github.com/ClickHouse/ClickHouse/pull/4473" target="_blank" rel="noopener noreferrer">#4473</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Removed the <code>inline</code> tags of <code>void readBinary(...)</code> in <code>Field.cpp</code>. Also merged redundant <code>namespace DB</code> blocks. <a href="https://github.com/ClickHouse/ClickHouse/pull/4530" target="_blank" rel="noopener noreferrer">#4530</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-3-5-2019-02-21">ClickHouse Release 19.3.5, 2019-02-21<a class="hash-link" href="#clickhouse-release-19-3-5-2019-02-21" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-15">Bug Fixes<a class="hash-link" href="#bug-fixes-15" title="Direct link to heading">​</a></h4><ul><li>Fixed bug with large http insert queries processing. <a href="https://github.com/ClickHouse/ClickHouse/pull/4454" target="_blank" rel="noopener noreferrer">#4454</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed backward incompatibility with old versions due to wrong implementation of <code>send_logs_level</code> setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/4445" target="_blank" rel="noopener noreferrer">#4445</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed backward incompatibility of table function <code>remote</code> introduced with column comments. <a href="https://github.com/ClickHouse/ClickHouse/pull/4446" target="_blank" rel="noopener noreferrer">#4446</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-3-4-2019-02-16">ClickHouse Release 19.3.4, 2019-02-16<a class="hash-link" href="#clickhouse-release-19-3-4-2019-02-16" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvements-4">Improvements<a class="hash-link" href="#improvements-4" title="Direct link to heading">​</a></h4><ul><li>Table index size is not accounted for memory limits when doing <code>ATTACH TABLE</code> query. Avoided the possibility that a table cannot be attached after being detached. <a href="https://github.com/ClickHouse/ClickHouse/pull/4396" target="_blank" rel="noopener noreferrer">#4396</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Slightly raised up the limit on max string and array size received from ZooKeeper. It allows to continue to work with increased size of <code>CLIENT_JVMFLAGS=-Djute.maxbuffer=...</code> on ZooKeeper. <a href="https://github.com/ClickHouse/ClickHouse/pull/4398" target="_blank" rel="noopener noreferrer">#4398</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Allow to repair abandoned replica even if it already has huge number of nodes in its queue. <a href="https://github.com/ClickHouse/ClickHouse/pull/4399" target="_blank" rel="noopener noreferrer">#4399</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Add one required argument to <code>SET</code> index (max stored rows number). <a href="https://github.com/ClickHouse/ClickHouse/pull/4386" target="_blank" rel="noopener noreferrer">#4386</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-16">Bug Fixes<a class="hash-link" href="#bug-fixes-16" title="Direct link to heading">​</a></h4><ul><li>Fixed <code>WITH ROLLUP</code> result for group by single <code>LowCardinality</code> key. <a href="https://github.com/ClickHouse/ClickHouse/pull/4384" target="_blank" rel="noopener noreferrer">#4384</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Fixed bug in the set index (dropping a granule if it contains more than <code>max_rows</code> rows). <a href="https://github.com/ClickHouse/ClickHouse/pull/4386" target="_blank" rel="noopener noreferrer">#4386</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>A lot of FreeBSD build fixes. <a href="https://github.com/ClickHouse/ClickHouse/pull/4397" target="_blank" rel="noopener noreferrer">#4397</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed aliases substitution in queries with subquery containing same alias (issue <a href="https://github.com/ClickHouse/ClickHouse/issues/4110" target="_blank" rel="noopener noreferrer">#4110</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/4351" target="_blank" rel="noopener noreferrer">#4351</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvements-4">Build/Testing/Packaging Improvements<a class="hash-link" href="#buildtestingpackaging-improvements-4" title="Direct link to heading">​</a></h4><ul><li>Add ability to run <code>clickhouse-server</code> for stateless tests in docker image. <a href="https://github.com/ClickHouse/ClickHouse/pull/4347" target="_blank" rel="noopener noreferrer">#4347</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-3-3-2019-02-13">ClickHouse Release 19.3.3, 2019-02-13<a class="hash-link" href="#clickhouse-release-19-3-3-2019-02-13" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features-6">New Features<a class="hash-link" href="#new-features-6" title="Direct link to heading">​</a></h4><ul><li>Added the <code>KILL MUTATION</code> statement that allows removing mutations that are for some reasons stuck. Added <code>latest_failed_part</code>, <code>latest_fail_time</code>, <code>latest_fail_reason</code> fields to the <code>system.mutations</code> table for easier troubleshooting. <a href="https://github.com/ClickHouse/ClickHouse/pull/4287" target="_blank" rel="noopener noreferrer">#4287</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Added aggregate function <code>entropy</code> which computes Shannon entropy. <a href="https://github.com/ClickHouse/ClickHouse/pull/4238" target="_blank" rel="noopener noreferrer">#4238</a> (<a href="https://github.com/Quid37" target="_blank" rel="noopener noreferrer">Quid37</a>)</li><li>Added ability to send queries <code>INSERT INTO tbl VALUES (....</code> to server without splitting on <code>query</code> and <code>data</code> parts. <a href="https://github.com/ClickHouse/ClickHouse/pull/4301" target="_blank" rel="noopener noreferrer">#4301</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Generic implementation of <code>arrayWithConstant</code> function was added. <a href="https://github.com/ClickHouse/ClickHouse/pull/4322" target="_blank" rel="noopener noreferrer">#4322</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Implemented <code>NOT BETWEEN</code> comparison operator. <a href="https://github.com/ClickHouse/ClickHouse/pull/4228" target="_blank" rel="noopener noreferrer">#4228</a> (<a href="https://github.com/nezed" target="_blank" rel="noopener noreferrer">Dmitry Naumov</a>)</li><li>Implement <code>sumMapFiltered</code> in order to be able to limit the number of keys for which values will be summed by <code>sumMap</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4129" target="_blank" rel="noopener noreferrer">#4129</a> (<a href="https://github.com/ercolanelli-leo" target="_blank" rel="noopener noreferrer">Léo Ercolanelli</a>)</li><li>Added support of <code>Nullable</code> types in <code>mysql</code> table function. <a href="https://github.com/ClickHouse/ClickHouse/pull/4198" target="_blank" rel="noopener noreferrer">#4198</a> (<a href="https://github.com/edonin" target="_blank" rel="noopener noreferrer">Emmanuel Donin de Rosière</a>)</li><li>Support for arbitrary constant expressions in <code>LIMIT</code> clause. <a href="https://github.com/ClickHouse/ClickHouse/pull/4246" target="_blank" rel="noopener noreferrer">#4246</a> (<a href="https://github.com/k3box" target="_blank" rel="noopener noreferrer">k3box</a>)</li><li>Added <code>topKWeighted</code> aggregate function that takes additional argument with (unsigned integer) weight. <a href="https://github.com/ClickHouse/ClickHouse/pull/4245" target="_blank" rel="noopener noreferrer">#4245</a> (<a href="https://github.com/andrewgolman" target="_blank" rel="noopener noreferrer">Andrew Golman</a>)</li><li><code>StorageJoin</code> now supports <code>join_any_take_last_row</code> setting that allows overwriting existing values of the same key. <a href="https://github.com/ClickHouse/ClickHouse/pull/3973" target="_blank" rel="noopener noreferrer">#3973</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a></li><li>Added function <code>toStartOfInterval</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4304" target="_blank" rel="noopener noreferrer">#4304</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Added <code>RowBinaryWithNamesAndTypes</code> format. <a href="https://github.com/ClickHouse/ClickHouse/pull/4200" target="_blank" rel="noopener noreferrer">#4200</a> (<a href="https://github.com/DarkWanderer" target="_blank" rel="noopener noreferrer">Oleg V. Kozlyuk</a>)</li><li>Added <code>IPv4</code> and <code>IPv6</code> data types. More effective implementations of <code>IPv*</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/3669" target="_blank" rel="noopener noreferrer">#3669</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">Vasily Nemkov</a>)</li><li>Added function <code>toStartOfTenMinutes()</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4298" target="_blank" rel="noopener noreferrer">#4298</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Added <code>Protobuf</code> output format. <a href="https://github.com/ClickHouse/ClickHouse/pull/4005" target="_blank" rel="noopener noreferrer">#4005</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4158" target="_blank" rel="noopener noreferrer">#4158</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>)</li><li>Added brotli support for HTTP interface for data import (INSERTs). <a href="https://github.com/ClickHouse/ClickHouse/pull/4235" target="_blank" rel="noopener noreferrer">#4235</a> (<a href="https://github.com/fandyushin" target="_blank" rel="noopener noreferrer">Mikhail</a>)</li><li>Added hints while user make typo in function name or type in command line client. <a href="https://github.com/ClickHouse/ClickHouse/pull/4239" target="_blank" rel="noopener noreferrer">#4239</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Added <code>Query-Id</code> to Server’s HTTP Response header. <a href="https://github.com/ClickHouse/ClickHouse/pull/4231" target="_blank" rel="noopener noreferrer">#4231</a> (<a href="https://github.com/fandyushin" target="_blank" rel="noopener noreferrer">Mikhail</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-features-2">Experimental Features<a class="hash-link" href="#experimental-features-2" title="Direct link to heading">​</a></h4><ul><li>Added <code>minmax</code> and <code>set</code> data skipping indices for MergeTree table engines family. <a href="https://github.com/ClickHouse/ClickHouse/pull/4143" target="_blank" rel="noopener noreferrer">#4143</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li>Added conversion of <code>CROSS JOIN</code> to <code>INNER JOIN</code> if possible. <a href="https://github.com/ClickHouse/ClickHouse/pull/4221" target="_blank" rel="noopener noreferrer">#4221</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4266" target="_blank" rel="noopener noreferrer">#4266</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-17">Bug Fixes<a class="hash-link" href="#bug-fixes-17" title="Direct link to heading">​</a></h4><ul><li>Fixed <code>Not found column</code> for duplicate columns in <code>JOIN ON</code> section. <a href="https://github.com/ClickHouse/ClickHouse/pull/4279" target="_blank" rel="noopener noreferrer">#4279</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Make <code>START REPLICATED SENDS</code> command start replicated sends. <a href="https://github.com/ClickHouse/ClickHouse/pull/4229" target="_blank" rel="noopener noreferrer">#4229</a> (<a href="https://github.com/nvartolomei" target="_blank" rel="noopener noreferrer">nvartolomei</a>)</li><li>Fixed aggregate functions execution with <code>Array(LowCardinality)</code> arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/4055" target="_blank" rel="noopener noreferrer">#4055</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Fixed wrong behaviour when doing <code>INSERT ... SELECT ... FROM file(...)</code> query and file has <code>CSVWithNames</code> or <code>TSVWIthNames</code> format and the first data row is missing. <a href="https://github.com/ClickHouse/ClickHouse/pull/4297" target="_blank" rel="noopener noreferrer">#4297</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed crash on dictionary reload if dictionary not available. This bug was appeared in 19.1.6. <a href="https://github.com/ClickHouse/ClickHouse/pull/4188" target="_blank" rel="noopener noreferrer">#4188</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed <code>ALL JOIN</code> with duplicates in right table. <a href="https://github.com/ClickHouse/ClickHouse/pull/4184" target="_blank" rel="noopener noreferrer">#4184</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed segmentation fault with <code>use_uncompressed_cache=1</code> and exception with wrong uncompressed size. This bug was appeared in 19.1.6. <a href="https://github.com/ClickHouse/ClickHouse/pull/4186" target="_blank" rel="noopener noreferrer">#4186</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href="https://github.com/ClickHouse/ClickHouse/pull/4341" target="_blank" rel="noopener noreferrer">#4341</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed infinite loop when selecting from table function <code>numbers(0)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4280" target="_blank" rel="noopener noreferrer">#4280</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Temporarily disable predicate optimization for <code>ORDER BY</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3890" target="_blank" rel="noopener noreferrer">#3890</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fixed <code>Illegal instruction</code> error when using base64 functions on old CPUs. This error has been reproduced only when ClickHouse was compiled with gcc-8. <a href="https://github.com/ClickHouse/ClickHouse/pull/4275" target="_blank" rel="noopener noreferrer">#4275</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed <code>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href="https://github.com/ClickHouse/ClickHouse/pull/4170" target="_blank" rel="noopener noreferrer">#4170</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed incorrect result when <code>Date</code> and <code>DateTime</code> arguments are used in branches of conditional operator (function <code>if</code>). Added generic case for function <code>if</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4243" target="_blank" rel="noopener noreferrer">#4243</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>ClickHouse dictionaries now load within <code>clickhouse</code> process. <a href="https://github.com/ClickHouse/ClickHouse/pull/4166" target="_blank" rel="noopener noreferrer">#4166</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed deadlock when <code>SELECT</code> from a table with <code>File</code> engine was retried after <code>No such file or directory</code> error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4161" target="_blank" rel="noopener noreferrer">#4161</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed race condition when selecting from <code>system.tables</code> may give <code>table does not exist</code> error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4313" target="_blank" rel="noopener noreferrer">#4313</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href="https://github.com/ClickHouse/ClickHouse/pull/4317" target="_blank" rel="noopener noreferrer">#4317</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed a bug when the execution of mutations containing <code>IN</code> operators was producing incorrect results. <a href="https://github.com/ClickHouse/ClickHouse/pull/4099" target="_blank" rel="noopener noreferrer">#4099</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Fixed error: if there is a database with <code>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href="https://github.com/ClickHouse/ClickHouse/pull/4255" target="_blank" rel="noopener noreferrer">#4255</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed error when system logs are tried to create again at server shutdown. <a href="https://github.com/ClickHouse/ClickHouse/pull/4254" target="_blank" rel="noopener noreferrer">#4254</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Correctly return the right type and properly handle locks in <code>joinGet</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/4153" target="_blank" rel="noopener noreferrer">#4153</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Added <code>sumMapWithOverflow</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/4151" target="_blank" rel="noopener noreferrer">#4151</a> (<a href="https://github.com/ercolanelli-leo" target="_blank" rel="noopener noreferrer">Léo Ercolanelli</a>)</li><li>Fixed segfault with <code>allow_experimental_multiple_joins_emulation</code>. <a href="https://github.com/ClickHouse/ClickHouse/commit/52de2cd927f7b5257dd67e175f0a5560a48840d0" target="_blank" rel="noopener noreferrer">52de2c</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed bug with incorrect <code>Date</code> and <code>DateTime</code> comparison. <a href="https://github.com/ClickHouse/ClickHouse/pull/4237" target="_blank" rel="noopener noreferrer">#4237</a> (<a href="https://github.com/valexey" target="_blank" rel="noopener noreferrer">valexey</a>)</li><li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code>quantile*Weighted</code> family of functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/4145" target="_blank" rel="noopener noreferrer">#4145</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed rare race condition when removing of old data parts can fail with <code>File not found</code> error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4378" target="_blank" rel="noopener noreferrer">#4378</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href="https://github.com/ClickHouse/ClickHouse/pull/4343" target="_blank" rel="noopener noreferrer">#4343</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvements-5">Build/Testing/Packaging Improvements<a class="hash-link" href="#buildtestingpackaging-improvements-5" title="Direct link to heading">​</a></h4><ul><li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href="https://github.com/ClickHouse/ClickHouse/pull/4205" target="_blank" rel="noopener noreferrer">#4205</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Various build fixes for FreeBSD. <a href="https://github.com/ClickHouse/ClickHouse/pull/4225" target="_blank" rel="noopener noreferrer">#4225</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Added ability to create, fill and drop tables in perftest. <a href="https://github.com/ClickHouse/ClickHouse/pull/4220" target="_blank" rel="noopener noreferrer">#4220</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Added a script to check for duplicate includes. <a href="https://github.com/ClickHouse/ClickHouse/pull/4326" target="_blank" rel="noopener noreferrer">#4326</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added ability to run queries by index in performance test. <a href="https://github.com/ClickHouse/ClickHouse/pull/4264" target="_blank" rel="noopener noreferrer">#4264</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Package with debug symbols is suggested to be installed. <a href="https://github.com/ClickHouse/ClickHouse/pull/4274" target="_blank" rel="noopener noreferrer">#4274</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Refactoring of performance-test. Better logging and signals handling. <a href="https://github.com/ClickHouse/ClickHouse/pull/4171" target="_blank" rel="noopener noreferrer">#4171</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Added docs to anonymized Yandex.Metrika datasets. <a href="https://github.com/ClickHouse/ClickHouse/pull/4164" target="_blank" rel="noopener noreferrer">#4164</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Аdded tool for converting an old month-partitioned part to the custom-partitioned format. <a href="https://github.com/ClickHouse/ClickHouse/pull/4195" target="_blank" rel="noopener noreferrer">#4195</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Added docs about two datasets in s3. <a href="https://github.com/ClickHouse/ClickHouse/pull/4144" target="_blank" rel="noopener noreferrer">#4144</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Added script which creates changelog from pull requests description. <a href="https://github.com/ClickHouse/ClickHouse/pull/4169" target="_blank" rel="noopener noreferrer">#4169</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4173" target="_blank" rel="noopener noreferrer">#4173</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>) (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Added puppet module for ClickHouse. <a href="https://github.com/ClickHouse/ClickHouse/pull/4182" target="_blank" rel="noopener noreferrer">#4182</a> (<a href="https://github.com/MaxFedotov" target="_blank" rel="noopener noreferrer">Maxim Fedotov</a>)</li><li>Added docs for a group of undocumented functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/4168" target="_blank" rel="noopener noreferrer">#4168</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>ARM build fixes. <a href="https://github.com/ClickHouse/ClickHouse/pull/4210" target="_blank" rel="noopener noreferrer">#4210</a><a href="https://github.com/ClickHouse/ClickHouse/pull/4306" target="_blank" rel="noopener noreferrer">#4306</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4291" target="_blank" rel="noopener noreferrer">#4291</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>) (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Dictionary tests now able to run from <code>ctest</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4189" target="_blank" rel="noopener noreferrer">#4189</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Now <code>/etc/ssl</code> is used as default directory with SSL certificates. <a href="https://github.com/ClickHouse/ClickHouse/pull/4167" target="_blank" rel="noopener noreferrer">#4167</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added checking SSE and AVX instruction at start. <a href="https://github.com/ClickHouse/ClickHouse/pull/4234" target="_blank" rel="noopener noreferrer">#4234</a> (<a href="https://github.com/igron99" target="_blank" rel="noopener noreferrer">Igr</a>)</li><li>Init script will wait server until start. <a href="https://github.com/ClickHouse/ClickHouse/pull/4281" target="_blank" rel="noopener noreferrer">#4281</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-changes-1">Backward Incompatible Changes<a class="hash-link" href="#backward-incompatible-changes-1" title="Direct link to heading">​</a></h4><ul><li>Removed <code>allow_experimental_low_cardinality_type</code> setting. <code>LowCardinality</code> data types are production ready. <a href="https://github.com/ClickHouse/ClickHouse/pull/4323" target="_blank" rel="noopener noreferrer">#4323</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Reduce mark cache size and uncompressed cache size accordingly to available memory amount. <a href="https://github.com/ClickHouse/ClickHouse/pull/4240" target="_blank" rel="noopener noreferrer">#4240</a> (<a href="https://github.com/k-lopatin" target="_blank" rel="noopener noreferrer">Lopatin Konstantin</a></li><li>Added keyword <code>INDEX</code> in <code>CREATE TABLE</code> query. A column with name <code>index</code> must be quoted with backticks or double quotes: <code>`index`</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4143" target="_blank" rel="noopener noreferrer">#4143</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">Nikita Vasilev</a>)</li><li><code>sumMap</code> now promote result type instead of overflow. The old <code>sumMap</code> behavior can be obtained by using <code>sumMapWithOverflow</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/4151" target="_blank" rel="noopener noreferrer">#4151</a> (<a href="https://github.com/ercolanelli-leo" target="_blank" rel="noopener noreferrer">Léo Ercolanelli</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvements-4">Performance Improvements<a class="hash-link" href="#performance-improvements-4" title="Direct link to heading">​</a></h4><ul><li><code>std::sort</code> replaced by <code>pdqsort</code> for queries without <code>LIMIT</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4236" target="_blank" rel="noopener noreferrer">#4236</a> (<a href="https://github.com/kvinty" target="_blank" rel="noopener noreferrer">Evgenii Pravda</a>)</li><li>Now server reuse threads from global thread pool. This affects performance in some corner cases. <a href="https://github.com/ClickHouse/ClickHouse/pull/4150" target="_blank" rel="noopener noreferrer">#4150</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvements-5">Improvements<a class="hash-link" href="#improvements-5" title="Direct link to heading">​</a></h4><ul><li>Implemented AIO support for FreeBSD. <a href="https://github.com/ClickHouse/ClickHouse/pull/4305" target="_blank" rel="noopener noreferrer">#4305</a> (<a href="https://github.com/urgordeadbeef" target="_blank" rel="noopener noreferrer">urgordeadbeef</a>)</li><li><code>SELECT * FROM a JOIN b USING a, b</code> now return <code>a</code> and <code>b</code> columns only from the left table. <a href="https://github.com/ClickHouse/ClickHouse/pull/4141" target="_blank" rel="noopener noreferrer">#4141</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Allow <code>-C</code> option of client to work as <code>-c</code> option. <a href="https://github.com/ClickHouse/ClickHouse/pull/4232" target="_blank" rel="noopener noreferrer">#4232</a> (<a href="https://github.com/syominsergey" target="_blank" rel="noopener noreferrer">syominsergey</a>)</li><li>Now option <code>--password</code> used without value requires password from stdin. <a href="https://github.com/ClickHouse/ClickHouse/pull/4230" target="_blank" rel="noopener noreferrer">#4230</a> (<a href="https://github.com/bsd-conqueror" target="_blank" rel="noopener noreferrer">BSD_Conqueror</a>)</li><li>Added highlighting of unescaped metacharacters in string literals that contain <code>LIKE</code> expressions or regexps. <a href="https://github.com/ClickHouse/ClickHouse/pull/4327" target="_blank" rel="noopener noreferrer">#4327</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added cancelling of HTTP read only queries if client socket goes away. <a href="https://github.com/ClickHouse/ClickHouse/pull/4213" target="_blank" rel="noopener noreferrer">#4213</a> (<a href="https://github.com/nvartolomei" target="_blank" rel="noopener noreferrer">nvartolomei</a>)</li><li>Now server reports progress to keep client connections alive. <a href="https://github.com/ClickHouse/ClickHouse/pull/4215" target="_blank" rel="noopener noreferrer">#4215</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Slightly better message with reason for OPTIMIZE query with <code>optimize_throw_if_noop</code> setting enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/4294" target="_blank" rel="noopener noreferrer">#4294</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added support of <code>--version</code> option for clickhouse server. <a href="https://github.com/ClickHouse/ClickHouse/pull/4251" target="_blank" rel="noopener noreferrer">#4251</a> (<a href="https://github.com/k-lopatin" target="_blank" rel="noopener noreferrer">Lopatin Konstantin</a>)</li><li>Added <code>--help/-h</code> option to <code>clickhouse-server</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4233" target="_blank" rel="noopener noreferrer">#4233</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">Yuriy Baranov</a>)</li><li>Added support for scalar subqueries with aggregate function state result. <a href="https://github.com/ClickHouse/ClickHouse/pull/4348" target="_blank" rel="noopener noreferrer">#4348</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>)</li><li>Improved server shutdown time and ALTERs waiting time. <a href="https://github.com/ClickHouse/ClickHouse/pull/4372" target="_blank" rel="noopener noreferrer">#4372</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added info about the replicated_can_become_leader setting to system.replicas and add logging if the replica won’t try to become leader. <a href="https://github.com/ClickHouse/ClickHouse/pull/4379" target="_blank" rel="noopener noreferrer">#4379</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1">ClickHouse Release 19.1<a class="hash-link" href="#clickhouse-release-19-1" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-14-2019-03-14">ClickHouse Release 19.1.14, 2019-03-14<a class="hash-link" href="#clickhouse-release-19-1-14-2019-03-14" title="Direct link to heading">​</a></h3><ul><li>Fixed error <code>Column ... queried more than once</code> that may happen if the setting <code>asterisk_left_columns_only</code> is set to 1 in case of using <code>GLOBAL JOIN</code> with <code>SELECT *</code> (rare case). The issue does not exist in 19.3 and newer. <a href="https://github.com/ClickHouse/ClickHouse/pull/4692/commits/6bac7d8d11a9b0d6de0b32b53c47eb2f6f8e7062" target="_blank" rel="noopener noreferrer">6bac7d8d</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-13-2019-03-12">ClickHouse Release 19.1.13, 2019-03-12<a class="hash-link" href="#clickhouse-release-19-1-13-2019-03-12" title="Direct link to heading">​</a></h3><p>This release contains exactly the same set of patches as 19.3.7.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-10-2019-03-03">ClickHouse Release 19.1.10, 2019-03-03<a class="hash-link" href="#clickhouse-release-19-1-10-2019-03-03" title="Direct link to heading">​</a></h3><p>This release contains exactly the same set of patches as 19.3.6.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-1">ClickHouse Release 19.1<a class="hash-link" href="#clickhouse-release-19-1-1" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-9-2019-02-21">ClickHouse Release 19.1.9, 2019-02-21<a class="hash-link" href="#clickhouse-release-19-1-9-2019-02-21" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-18">Bug Fixes<a class="hash-link" href="#bug-fixes-18" title="Direct link to heading">​</a></h4><ul><li>Fixed backward incompatibility with old versions due to wrong implementation of <code>send_logs_level</code> setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/4445" target="_blank" rel="noopener noreferrer">#4445</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed backward incompatibility of table function <code>remote</code> introduced with column comments. <a href="https://github.com/ClickHouse/ClickHouse/pull/4446" target="_blank" rel="noopener noreferrer">#4446</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-8-2019-02-16">ClickHouse Release 19.1.8, 2019-02-16<a class="hash-link" href="#clickhouse-release-19-1-8-2019-02-16" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-19">Bug Fixes<a class="hash-link" href="#bug-fixes-19" title="Direct link to heading">​</a></h4><ul><li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href="https://github.com/ClickHouse/ClickHouse/pull/4343" target="_blank" rel="noopener noreferrer">#4343</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-2">ClickHouse Release 19.1<a class="hash-link" href="#clickhouse-release-19-1-2" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-7-2019-02-15">ClickHouse Release 19.1.7, 2019-02-15<a class="hash-link" href="#clickhouse-release-19-1-7-2019-02-15" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-20">Bug Fixes<a class="hash-link" href="#bug-fixes-20" title="Direct link to heading">​</a></h4><ul><li>Correctly return the right type and properly handle locks in <code>joinGet</code> function. <a href="https://github.com/ClickHouse/ClickHouse/pull/4153" target="_blank" rel="noopener noreferrer">#4153</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Fixed error when system logs are tried to create again at server shutdown. <a href="https://github.com/ClickHouse/ClickHouse/pull/4254" target="_blank" rel="noopener noreferrer">#4254</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed error: if there is a database with <code>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href="https://github.com/ClickHouse/ClickHouse/pull/4255" target="_blank" rel="noopener noreferrer">#4255</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed a bug when the execution of mutations containing <code>IN</code> operators was producing incorrect results. <a href="https://github.com/ClickHouse/ClickHouse/pull/4099" target="_blank" rel="noopener noreferrer">#4099</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li><code>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href="https://github.com/ClickHouse/ClickHouse/pull/4317" target="_blank" rel="noopener noreferrer">#4317</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed race condition when selecting from <code>system.tables</code> may give <code>table does not exist</code> error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4313" target="_blank" rel="noopener noreferrer">#4313</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed deadlock when <code>SELECT</code> from a table with <code>File</code> engine was retried after <code>No such file or directory</code> error. <a href="https://github.com/ClickHouse/ClickHouse/pull/4161" target="_blank" rel="noopener noreferrer">#4161</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed an issue: local ClickHouse dictionaries are loaded via TCP, but should load within process. <a href="https://github.com/ClickHouse/ClickHouse/pull/4166" target="_blank" rel="noopener noreferrer">#4166</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed <code>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href="https://github.com/ClickHouse/ClickHouse/pull/4170" target="_blank" rel="noopener noreferrer">#4170</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Temporarily disable predicate optimization for <code>ORDER BY</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3890" target="_blank" rel="noopener noreferrer">#3890</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fixed infinite loop when selecting from table function <code>numbers(0)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4280" target="_blank" rel="noopener noreferrer">#4280</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed <code>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href="https://github.com/ClickHouse/ClickHouse/pull/4341" target="_blank" rel="noopener noreferrer">#4341</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed segmentation fault with <code>uncompressed_cache=1</code> and exception with wrong uncompressed size. <a href="https://github.com/ClickHouse/ClickHouse/pull/4186" target="_blank" rel="noopener noreferrer">#4186</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed <code>ALL JOIN</code> with duplicates in right table. <a href="https://github.com/ClickHouse/ClickHouse/pull/4184" target="_blank" rel="noopener noreferrer">#4184</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Fixed wrong behaviour when doing <code>INSERT ... SELECT ... FROM file(...)</code> query and file has <code>CSVWithNames</code> or <code>TSVWIthNames</code> format and the first data row is missing. <a href="https://github.com/ClickHouse/ClickHouse/pull/4297" target="_blank" rel="noopener noreferrer">#4297</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed aggregate functions execution with <code>Array(LowCardinality)</code> arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/4055" target="_blank" rel="noopener noreferrer">#4055</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href="https://github.com/ClickHouse/ClickHouse/pull/4205" target="_blank" rel="noopener noreferrer">#4205</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code>quantile*Weighted</code> family of functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/4145" target="_blank" rel="noopener noreferrer">#4145</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Make <code>START REPLICATED SENDS</code> command start replicated sends. <a href="https://github.com/ClickHouse/ClickHouse/pull/4229" target="_blank" rel="noopener noreferrer">#4229</a> (<a href="https://github.com/nvartolomei" target="_blank" rel="noopener noreferrer">nvartolomei</a>)</li><li>Fixed <code>Not found column</code> for duplicate columns in JOIN ON section. <a href="https://github.com/ClickHouse/ClickHouse/pull/4279" target="_blank" rel="noopener noreferrer">#4279</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Now <code>/etc/ssl</code> is used as default directory with SSL certificates. <a href="https://github.com/ClickHouse/ClickHouse/pull/4167" target="_blank" rel="noopener noreferrer">#4167</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed crash on dictionary reload if dictionary not available. <a href="https://github.com/ClickHouse/ClickHouse/pull/4188" target="_blank" rel="noopener noreferrer">#4188</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Fixed bug with incorrect <code>Date</code> and <code>DateTime</code> comparison. <a href="https://github.com/ClickHouse/ClickHouse/pull/4237" target="_blank" rel="noopener noreferrer">#4237</a> (<a href="https://github.com/valexey" target="_blank" rel="noopener noreferrer">valexey</a>)</li><li>Fixed incorrect result when <code>Date</code> and <code>DateTime</code> arguments are used in branches of conditional operator (function <code>if</code>). Added generic case for function <code>if</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4243" target="_blank" rel="noopener noreferrer">#4243</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-19-1-6-2019-01-24">ClickHouse Release 19.1.6, 2019-01-24<a class="hash-link" href="#clickhouse-release-19-1-6-2019-01-24" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-features-7">New Features<a class="hash-link" href="#new-features-7" title="Direct link to heading">​</a></h4><ul><li>Custom per column compression codecs for tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/3899" target="_blank" rel="noopener noreferrer">#3899</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4111" target="_blank" rel="noopener noreferrer">#4111</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>, <a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>, <a href="https://github.com/Sindbag" target="_blank" rel="noopener noreferrer">Anatoly</a>)</li><li>Added compression codec <code>Delta</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4052" target="_blank" rel="noopener noreferrer">#4052</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Allow to <code>ALTER</code> compression codecs. <a href="https://github.com/ClickHouse/ClickHouse/pull/4054" target="_blank" rel="noopener noreferrer">#4054</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Added functions <code>left</code>, <code>right</code>, <code>trim</code>, <code>ltrim</code>, <code>rtrim</code>, <code>timestampadd</code>, <code>timestampsub</code> for SQL standard compatibility. <a href="https://github.com/ClickHouse/ClickHouse/pull/3826" target="_blank" rel="noopener noreferrer">#3826</a> (<a href="https://github.com/blinkov" target="_blank" rel="noopener noreferrer">Ivan Blinkov</a>)</li><li>Support for write in <code>HDFS</code> tables and <code>hdfs</code> table function. <a href="https://github.com/ClickHouse/ClickHouse/pull/4084" target="_blank" rel="noopener noreferrer">#4084</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Added functions to search for multiple constant strings from big haystack: <code>multiPosition</code>, <code>multiSearch</code> ,<code>firstMatch</code> also with <code>-UTF8</code>, <code>-CaseInsensitive</code>, and <code>-CaseInsensitiveUTF8</code> variants. <a href="https://github.com/ClickHouse/ClickHouse/pull/4053" target="_blank" rel="noopener noreferrer">#4053</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Pruning of unused shards if <code>SELECT</code> query filters by sharding key (setting <code>optimize_skip_unused_shards</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/3851" target="_blank" rel="noopener noreferrer">#3851</a> (<a href="https://github.com/kanterov" target="_blank" rel="noopener noreferrer">Gleb Kanterov</a>, <a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Allow <code>Kafka</code> engine to ignore some number of parsing errors per block. <a href="https://github.com/ClickHouse/ClickHouse/pull/4094" target="_blank" rel="noopener noreferrer">#4094</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Added support for <code>CatBoost</code> multiclass models evaluation. Function <code>modelEvaluate</code> returns tuple with per-class raw predictions for multiclass models. <code>libcatboostmodel.so</code> should be built with <a href="https://github.com/catboost/catboost/pull/607" target="_blank" rel="noopener noreferrer">#607</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3959" target="_blank" rel="noopener noreferrer">#3959</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Added functions <code>filesystemAvailable</code>, <code>filesystemFree</code>, <code>filesystemCapacity</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4097" target="_blank" rel="noopener noreferrer">#4097</a> (<a href="https://github.com/bgranvea" target="_blank" rel="noopener noreferrer">Boris Granveaud</a>)</li><li>Added hashing functions <code>xxHash64</code> and <code>xxHash32</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3905" target="_blank" rel="noopener noreferrer">#3905</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Added <code>gccMurmurHash</code> hashing function (GCC flavoured Murmur hash) which uses the same hash seed as <a href="https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/functional_hash.h#L191" target="_blank" rel="noopener noreferrer">gcc</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4000" target="_blank" rel="noopener noreferrer">#4000</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>Added hashing functions <code>javaHash</code>, <code>hiveHash</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3811" target="_blank" rel="noopener noreferrer">#3811</a> (<a href="https://github.com/shangshujie365" target="_blank" rel="noopener noreferrer">shangshujie365</a>)</li><li>Added table function <code>remoteSecure</code>. Function works as <code>remote</code>, but uses secure connection. <a href="https://github.com/ClickHouse/ClickHouse/pull/4088" target="_blank" rel="noopener noreferrer">#4088</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-features-3">Experimental Features<a class="hash-link" href="#experimental-features-3" title="Direct link to heading">​</a></h4><ul><li>Added multiple JOINs emulation (<code>allow_experimental_multiple_joins_emulation</code> setting). <a href="https://github.com/ClickHouse/ClickHouse/pull/3946" target="_blank" rel="noopener noreferrer">#3946</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fixes-21">Bug Fixes<a class="hash-link" href="#bug-fixes-21" title="Direct link to heading">​</a></h4><ul><li>Make <code>compiled_expression_cache_size</code> setting limited by default to lower memory consumption. <a href="https://github.com/ClickHouse/ClickHouse/pull/4041" target="_blank" rel="noopener noreferrer">#4041</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix a bug that led to hangups in threads that perform ALTERs of Replicated tables and in the thread that updates configuration from ZooKeeper. <a href="https://github.com/ClickHouse/ClickHouse/issues/2947" target="_blank" rel="noopener noreferrer">#2947</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/3891" target="_blank" rel="noopener noreferrer">#3891</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/3934" target="_blank" rel="noopener noreferrer">#3934</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Fixed a race condition when executing a distributed ALTER task. The race condition led to more than one replica trying to execute the task and all replicas except one failing with a ZooKeeper error. <a href="https://github.com/ClickHouse/ClickHouse/pull/3904" target="_blank" rel="noopener noreferrer">#3904</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Fix a bug when <code>from_zk</code> config elements weren’t refreshed after a request to ZooKeeper timed out. <a href="https://github.com/ClickHouse/ClickHouse/issues/2947" target="_blank" rel="noopener noreferrer">#2947</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/3947" target="_blank" rel="noopener noreferrer">#3947</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Fix bug with wrong prefix for IPv4 subnet masks. <a href="https://github.com/ClickHouse/ClickHouse/pull/3945" target="_blank" rel="noopener noreferrer">#3945</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed crash (<code>std::terminate</code>) in rare cases when a new thread cannot be created due to exhausted resources. <a href="https://github.com/ClickHouse/ClickHouse/pull/3956" target="_blank" rel="noopener noreferrer">#3956</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix bug when in <code>remote</code> table function execution when wrong restrictions were used for in <code>getStructureOfRemoteTable</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4009" target="_blank" rel="noopener noreferrer">#4009</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fix a leak of netlink sockets. They were placed in a pool where they were never deleted and new sockets were created at the start of a new thread when all current sockets were in use. <a href="https://github.com/ClickHouse/ClickHouse/pull/4017" target="_blank" rel="noopener noreferrer">#4017</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Fix bug with closing <code>/proc/self/fd</code> directory earlier than all fds were read from <code>/proc</code> after forking <code>odbc-bridge</code> subprocess. <a href="https://github.com/ClickHouse/ClickHouse/pull/4120" target="_blank" rel="noopener noreferrer">#4120</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed String to UInt monotonic conversion in case of usage String in primary key. <a href="https://github.com/ClickHouse/ClickHouse/pull/3870" target="_blank" rel="noopener noreferrer">#3870</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fixed error in calculation of integer conversion function monotonicity. <a href="https://github.com/ClickHouse/ClickHouse/pull/3921" target="_blank" rel="noopener noreferrer">#3921</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed segfault in <code>arrayEnumerateUniq</code>, <code>arrayEnumerateDense</code> functions in case of some invalid arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/3909" target="_blank" rel="noopener noreferrer">#3909</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fix UB in StorageMerge. <a href="https://github.com/ClickHouse/ClickHouse/pull/3910" target="_blank" rel="noopener noreferrer">#3910</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Fixed segfault in functions <code>addDays</code>, <code>subtractDays</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3913" target="_blank" rel="noopener noreferrer">#3913</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed error: functions <code>round</code>, <code>floor</code>, <code>trunc</code>, <code>ceil</code> may return bogus result when executed on integer argument and large negative scale. <a href="https://github.com/ClickHouse/ClickHouse/pull/3914" target="_blank" rel="noopener noreferrer">#3914</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed a bug induced by ‘kill query sync’ which leads to a core dump. <a href="https://github.com/ClickHouse/ClickHouse/pull/3916" target="_blank" rel="noopener noreferrer">#3916</a> (<a href="https://github.com/fancyqlx" target="_blank" rel="noopener noreferrer">muVulDeePecker</a>)</li><li>Fix bug with long delay after empty replication queue. <a href="https://github.com/ClickHouse/ClickHouse/pull/3928" target="_blank" rel="noopener noreferrer">#3928</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/3932" target="_blank" rel="noopener noreferrer">#3932</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Fixed excessive memory usage in case of inserting into table with <code>LowCardinality</code> primary key. <a href="https://github.com/ClickHouse/ClickHouse/pull/3955" target="_blank" rel="noopener noreferrer">#3955</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Fixed <code>LowCardinality</code> serialization for <code>Native</code> format in case of empty arrays. <a href="https://github.com/ClickHouse/ClickHouse/issues/3907" target="_blank" rel="noopener noreferrer">#3907</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4011" target="_blank" rel="noopener noreferrer">#4011</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Fixed incorrect result while using distinct by single LowCardinality numeric column. <a href="https://github.com/ClickHouse/ClickHouse/issues/3895" target="_blank" rel="noopener noreferrer">#3895</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/4012" target="_blank" rel="noopener noreferrer">#4012</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Fixed specialized aggregation with LowCardinality key (in case when <code>compile</code> setting is enabled). <a href="https://github.com/ClickHouse/ClickHouse/pull/3886" target="_blank" rel="noopener noreferrer">#3886</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Fix user and password forwarding for replicated tables queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/3957" target="_blank" rel="noopener noreferrer">#3957</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>) (<a href="https://github.com/nicelulu" target="_blank" rel="noopener noreferrer">小路</a>)</li><li>Fixed very rare race condition that can happen when listing tables in Dictionary database while reloading dictionaries. <a href="https://github.com/ClickHouse/ClickHouse/pull/3970" target="_blank" rel="noopener noreferrer">#3970</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed incorrect result when HAVING was used with ROLLUP or CUBE. <a href="https://github.com/ClickHouse/ClickHouse/issues/3756" target="_blank" rel="noopener noreferrer">#3756</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/3837" target="_blank" rel="noopener noreferrer">#3837</a> (<a href="https://github.com/reflection" target="_blank" rel="noopener noreferrer">Sam Chou</a>)</li><li>Fixed column aliases for query with <code>JOIN ON</code> syntax and distributed tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/3980" target="_blank" rel="noopener noreferrer">#3980</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Fixed error in internal implementation of <code>quantileTDigest</code> (found by Artem Vakhrushev). This error never happens in ClickHouse and was relevant only for those who use ClickHouse codebase as a library directly. <a href="https://github.com/ClickHouse/ClickHouse/pull/3935" target="_blank" rel="noopener noreferrer">#3935</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvements-6">Improvements<a class="hash-link" href="#improvements-6" title="Direct link to heading">​</a></h4><ul><li>Support for <code>IF NOT EXISTS</code> in <code>ALTER TABLE ADD COLUMN</code> statements along with <code>IF EXISTS</code> in <code>DROP/MODIFY/CLEAR/COMMENT COLUMN</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3900" target="_blank" rel="noopener noreferrer">#3900</a> (<a href="https://github.com/bgranvea" target="_blank" rel="noopener noreferrer">Boris Granveaud</a>)</li><li>Function <code>parseDateTimeBestEffort</code>: support for formats <code>DD.MM.YYYY</code>, <code>DD.MM.YY</code>, <code>DD-MM-YYYY</code>, <code>DD-Mon-YYYY</code>, <code>DD/Month/YYYY</code> and similar. <a href="https://github.com/ClickHouse/ClickHouse/pull/3922" target="_blank" rel="noopener noreferrer">#3922</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li><code>CapnProtoInputStream</code> now support jagged structures. <a href="https://github.com/ClickHouse/ClickHouse/pull/4063" target="_blank" rel="noopener noreferrer">#4063</a> (<a href="https://github.com/Miniwoffer" target="_blank" rel="noopener noreferrer">Odin Hultgren Van Der Horst</a>)</li><li>Usability improvement: added a check that server process is started from the data directory’s owner. Do not allow to start server from root if the data belongs to non-root user. <a href="https://github.com/ClickHouse/ClickHouse/pull/3785" target="_blank" rel="noopener noreferrer">#3785</a> (<a href="https://github.com/sergey-v-galtsev" target="_blank" rel="noopener noreferrer">sergey-v-galtsev</a>)</li><li>Better logic of checking required columns during analysis of queries with JOINs. <a href="https://github.com/ClickHouse/ClickHouse/pull/3930" target="_blank" rel="noopener noreferrer">#3930</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Decreased the number of connections in case of large number of Distributed tables in a single server. <a href="https://github.com/ClickHouse/ClickHouse/pull/3726" target="_blank" rel="noopener noreferrer">#3726</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li><li>Supported totals row for <code>WITH TOTALS</code> query for ODBC driver. <a href="https://github.com/ClickHouse/ClickHouse/pull/3836" target="_blank" rel="noopener noreferrer">#3836</a> (<a href="https://github.com/nightweb" target="_blank" rel="noopener noreferrer">Maksim Koritckiy</a>)</li><li>Allowed to use <code>Enum</code>s as integers inside if function. <a href="https://github.com/ClickHouse/ClickHouse/pull/3875" target="_blank" rel="noopener noreferrer">#3875</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Added <code>low_cardinality_allow_in_native_format</code> setting. If disabled, do not use <code>LowCadrinality</code> type in <code>Native</code> format. <a href="https://github.com/ClickHouse/ClickHouse/pull/3879" target="_blank" rel="noopener noreferrer">#3879</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">KochetovNicolai</a>)</li><li>Removed some redundant objects from compiled expressions cache to lower memory usage. <a href="https://github.com/ClickHouse/ClickHouse/pull/4042" target="_blank" rel="noopener noreferrer">#4042</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add check that <code>SET send_logs_level = &#x27;value&#x27;</code> query accept appropriate value. <a href="https://github.com/ClickHouse/ClickHouse/pull/3873" target="_blank" rel="noopener noreferrer">#3873</a> (<a href="https://github.com/s-mx" target="_blank" rel="noopener noreferrer">Sabyanin Maxim</a>)</li><li>Fixed data type check in type conversion functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/3896" target="_blank" rel="noopener noreferrer">#3896</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">Winter Zhang</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvements-5">Performance Improvements<a class="hash-link" href="#performance-improvements-5" title="Direct link to heading">​</a></h4><ul><li>Add a MergeTree setting <code>use_minimalistic_part_header_in_zookeeper</code>. If enabled, Replicated tables will store compact part metadata in a single part znode. This can dramatically reduce ZooKeeper snapshot size (especially if the tables have a lot of columns). Note that after enabling this setting you will not be able to downgrade to a version that does not support it. <a href="https://github.com/ClickHouse/ClickHouse/pull/3960" target="_blank" rel="noopener noreferrer">#3960</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Add an DFA-based implementation for functions <code>sequenceMatch</code> and <code>sequenceCount</code> in case pattern does not contain time. <a href="https://github.com/ClickHouse/ClickHouse/pull/4004" target="_blank" rel="noopener noreferrer">#4004</a> (<a href="https://github.com/ercolanelli-leo" target="_blank" rel="noopener noreferrer">Léo Ercolanelli</a>)</li><li>Performance improvement for integer numbers serialization. <a href="https://github.com/ClickHouse/ClickHouse/pull/3968" target="_blank" rel="noopener noreferrer">#3968</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Zero left padding PODArray so that -1 element is always valid and zeroed. It’s used for branchless calculation of offsets. <a href="https://github.com/ClickHouse/ClickHouse/pull/3920" target="_blank" rel="noopener noreferrer">#3920</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>)</li><li>Reverted <code>jemalloc</code> version which lead to performance degradation. <a href="https://github.com/ClickHouse/ClickHouse/pull/4018" target="_blank" rel="noopener noreferrer">#4018</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-changes-2">Backward Incompatible Changes<a class="hash-link" href="#backward-incompatible-changes-2" title="Direct link to heading">​</a></h4><ul><li>Removed undocumented feature <code>ALTER MODIFY PRIMARY KEY</code> because it was superseded by the <code>ALTER MODIFY ORDER BY</code> command. <a href="https://github.com/ClickHouse/ClickHouse/pull/3887" target="_blank" rel="noopener noreferrer">#3887</a> (<a href="https://github.com/ztlpn" target="_blank" rel="noopener noreferrer">Alex Zatelepin</a>)</li><li>Removed function <code>shardByHash</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3833" target="_blank" rel="noopener noreferrer">#3833</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Forbid using scalar subqueries with result of type <code>AggregateFunction</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3865" target="_blank" rel="noopener noreferrer">#3865</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvements-6">Build/Testing/Packaging Improvements<a class="hash-link" href="#buildtestingpackaging-improvements-6" title="Direct link to heading">​</a></h4><ul><li>Added support for PowerPC (<code>ppc64le</code>) build. <a href="https://github.com/ClickHouse/ClickHouse/pull/4132" target="_blank" rel="noopener noreferrer">#4132</a> (<a href="https://github.com/danlark1" target="_blank" rel="noopener noreferrer">Danila Kutenin</a>)</li><li>Stateful functional tests are run on public available dataset. <a href="https://github.com/ClickHouse/ClickHouse/pull/3969" target="_blank" rel="noopener noreferrer">#3969</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed error when the server cannot start with the <code>bash: /usr/bin/clickhouse-extract-from-config: Operation not permitted</code> message within Docker or systemd-nspawn. <a href="https://github.com/ClickHouse/ClickHouse/pull/4136" target="_blank" rel="noopener noreferrer">#4136</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Updated <code>rdkafka</code> library to v1.0.0-RC5. Used cppkafka instead of raw C interface. <a href="https://github.com/ClickHouse/ClickHouse/pull/4025" target="_blank" rel="noopener noreferrer">#4025</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">Ivan</a>)</li><li>Updated <code>mariadb-client</code> library. Fixed one of issues found by UBSan. <a href="https://github.com/ClickHouse/ClickHouse/pull/3924" target="_blank" rel="noopener noreferrer">#3924</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Some fixes for UBSan builds. <a href="https://github.com/ClickHouse/ClickHouse/pull/3926" target="_blank" rel="noopener noreferrer">#3926</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/3021" target="_blank" rel="noopener noreferrer">#3021</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/3948" target="_blank" rel="noopener noreferrer">#3948</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added per-commit runs of tests with UBSan build.</li><li>Added per-commit runs of PVS-Studio static analyzer.</li><li>Fixed bugs found by PVS-Studio. <a href="https://github.com/ClickHouse/ClickHouse/pull/4013" target="_blank" rel="noopener noreferrer">#4013</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed glibc compatibility issues. <a href="https://github.com/ClickHouse/ClickHouse/pull/4100" target="_blank" rel="noopener noreferrer">#4100</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Move Docker images to 18.10 and add compatibility file for glibc <!-- -->&gt;<!-- -->= 2.28 <a href="https://github.com/ClickHouse/ClickHouse/pull/3965" target="_blank" rel="noopener noreferrer">#3965</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Add env variable if user do not want to chown directories in server Docker image. <a href="https://github.com/ClickHouse/ClickHouse/pull/3967" target="_blank" rel="noopener noreferrer">#3967</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li>Enabled most of the warnings from <code>-Weverything</code> in clang. Enabled <code>-Wpedantic</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/3986" target="_blank" rel="noopener noreferrer">#3986</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Added a few more warnings that are available only in clang 8. <a href="https://github.com/ClickHouse/ClickHouse/pull/3993" target="_blank" rel="noopener noreferrer">#3993</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Link to <code>libLLVM</code> rather than to individual LLVM libs when using shared linking. <a href="https://github.com/ClickHouse/ClickHouse/pull/3989" target="_blank" rel="noopener noreferrer">#3989</a> (<a href="https://github.com/orivej" target="_blank" rel="noopener noreferrer">Orivej Desh</a>)</li><li>Added sanitizer variables for test images. <a href="https://github.com/ClickHouse/ClickHouse/pull/4072" target="_blank" rel="noopener noreferrer">#4072</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>)</li><li><code>clickhouse-server</code> debian package will recommend <code>libcap2-bin</code> package to use <code>setcap</code> tool for setting capabilities. This is optional. <a href="https://github.com/ClickHouse/ClickHouse/pull/4093" target="_blank" rel="noopener noreferrer">#4093</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Improved compilation time, fixed includes. <a href="https://github.com/ClickHouse/ClickHouse/pull/3898" target="_blank" rel="noopener noreferrer">#3898</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Added performance tests for hash functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/3918" target="_blank" rel="noopener noreferrer">#3918</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>Fixed cyclic library dependences. <a href="https://github.com/ClickHouse/ClickHouse/pull/3958" target="_blank" rel="noopener noreferrer">#3958</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Improved compilation with low available memory. <a href="https://github.com/ClickHouse/ClickHouse/pull/4030" target="_blank" rel="noopener noreferrer">#4030</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>Added test script to reproduce performance degradation in <code>jemalloc</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4036" target="_blank" rel="noopener noreferrer">#4036</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">alexey-milovidov</a>)</li><li>Fixed misspells in comments and string literals under <code>dbms</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/4122" target="_blank" rel="noopener noreferrer">#4122</a> (<a href="https://github.com/maiha" target="_blank" rel="noopener noreferrer">maiha</a>)</li><li>Fixed typos in comments. <a href="https://github.com/ClickHouse/ClickHouse/pull/4089" target="_blank" rel="noopener noreferrer">#4089</a> (<a href="https://github.com/kvinty" target="_blank" rel="noopener noreferrer">Evgenii Pravda</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="changelog-for-2018"><a href="/docs/testing/docs/en/whats-new/changelog/2018#clickhouse-release-18-16">Changelog for 2018</a><a class="hash-link" href="#changelog-for-2018" title="Direct link to heading">​</a></h2></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/testing/docs/en/whats-new/changelog/2020"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">2020</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/testing/docs/en/whats-new/changelog/2018"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">2018</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#clickhouse-release-v19-17" class="table-of-contents__link toc-highlight">ClickHouse Release 19.17</a><ul><li><a href="#clickhouse-release-v19-17-6-36-2019-12-27" class="table-of-contents__link toc-highlight">ClickHouse Release 19.17.6.36, 2019-12-27</a></li><li><a href="#clickhouse-release-v19-17-4-11-2019-11-22" class="table-of-contents__link toc-highlight">ClickHouse Release 19.17.4.11, 2019-11-22</a></li></ul></li><li><a href="#clickhouse-release-v19-16" class="table-of-contents__link toc-highlight">ClickHouse Release 19.16</a><ul><li><a href="#clickhouse-release-v19-16-2-2-2019-10-30" class="table-of-contents__link toc-highlight">ClickHouse Release 19.16.2.2, 2019-10-30</a></li></ul></li><li><a href="#clickhouse-release-19-15" class="table-of-contents__link toc-highlight">ClickHouse Release 19.15</a><ul><li><a href="#clickhouse-release-19-15-4-10-2019-10-31" class="table-of-contents__link toc-highlight">ClickHouse Release 19.15.4.10, 2019-10-31</a></li><li><a href="#clickhouse-release-19-15-3-6-2019-10-09" class="table-of-contents__link toc-highlight">ClickHouse Release 19.15.3.6, 2019-10-09</a></li><li><a href="#clickhouse-release-19-15-2-2-2019-10-01" class="table-of-contents__link toc-highlight">ClickHouse Release 19.15.2.2, 2019-10-01</a></li></ul></li><li><a href="#clickhouse-release-19-14" class="table-of-contents__link toc-highlight">ClickHouse Release 19.14</a><ul><li><a href="#clickhouse-release-19-14-7-15-2019-10-02" class="table-of-contents__link toc-highlight">ClickHouse Release 19.14.7.15, 2019-10-02</a></li><li><a href="#clickhouse-release-19-14-6-12-2019-09-19" class="table-of-contents__link toc-highlight">ClickHouse Release 19.14.6.12, 2019-09-19</a></li><li><a href="#clickhouse-release-19-14-3-3-2019-09-10" class="table-of-contents__link toc-highlight">ClickHouse Release 19.14.3.3, 2019-09-10</a></li></ul></li><li><a href="#clickhouse-release-19-13" class="table-of-contents__link toc-highlight">ClickHouse Release 19.13</a><ul><li><a href="#clickhouse-release-19-13-6-51-2019-10-02" class="table-of-contents__link toc-highlight">ClickHouse Release 19.13.6.51, 2019-10-02</a></li><li><a href="#clickhouse-release-19-13-5-44-2019-09-20" class="table-of-contents__link toc-highlight">ClickHouse Release 19.13.5.44, 2019-09-20</a></li><li><a href="#clickhouse-release-19-13-4-32-2019-09-10" class="table-of-contents__link toc-highlight">ClickHouse Release 19.13.4.32, 2019-09-10</a></li><li><a href="#clickhouse-release-19-13-3-26-2019-08-22" class="table-of-contents__link toc-highlight">ClickHouse Release 19.13.3.26, 2019-08-22</a></li><li><a href="#clickhouse-release-19-13-2-19-2019-08-14" class="table-of-contents__link toc-highlight">ClickHouse Release 19.13.2.19, 2019-08-14</a></li></ul></li><li><a href="#clickhouse-release-19-11" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11</a><ul><li><a href="#clickhouse-release-19-11-13-74-2019-11-01" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.13.74, 2019-11-01</a></li><li><a href="#clickhouse-release-19-11-12-69-2019-10-02" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.12.69, 2019-10-02</a></li><li><a href="#clickhouse-release-19-11-11-57-2019-09-13" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.11.57, 2019-09-13</a></li><li><a href="#clickhouse-release-19-11-10-54-2019-09-10" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.10.54, 2019-09-10</a></li><li><a href="#clickhouse-release-19-11-9-52-2019-09-6" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.9.52, 2019-09-6</a></li><li><a href="#clickhouse-release-19-11-8-46-2019-08-22" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.8.46, 2019-08-22</a></li><li><a href="#clickhouse-release-19-11-7-40-2019-08-14" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.7.40, 2019-08-14</a></li><li><a href="#clickhouse-release-19-11-5-28-2019-08-05" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.5.28, 2019-08-05</a></li><li><a href="#clickhouse-release-19-11-4-24-2019-08-01" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.4.24, 2019-08-01</a></li><li><a href="#clickhouse-release-19-11-3-11-2019-07-18" class="table-of-contents__link toc-highlight">ClickHouse Release 19.11.3.11, 2019-07-18</a></li></ul></li><li><a href="#clickhouse-release-19-10" class="table-of-contents__link toc-highlight">ClickHouse Release 19.10</a><ul><li><a href="#clickhouse-release-19-10-1-5-2019-07-12" class="table-of-contents__link toc-highlight">ClickHouse Release 19.10.1.5, 2019-07-12</a></li></ul></li><li><a href="#clickhouse-release-19-9" class="table-of-contents__link toc-highlight">ClickHouse Release 19.9</a><ul><li><a href="#clickhouse-release-19-9-3-31-2019-07-05" class="table-of-contents__link toc-highlight">ClickHouse Release 19.9.3.31, 2019-07-05</a></li><li><a href="#clickhouse-release-19-9-2-4-2019-06-24" class="table-of-contents__link toc-highlight">ClickHouse Release 19.9.2.4, 2019-06-24</a></li></ul></li><li><a href="#clickhouse-release-19-8" class="table-of-contents__link toc-highlight">ClickHouse Release 19.8</a><ul><li><a href="#clickhouse-release-19-8-3-8-2019-06-11" class="table-of-contents__link toc-highlight">ClickHouse Release 19.8.3.8, 2019-06-11</a></li></ul></li><li><a href="#clickhouse-release-19-7" class="table-of-contents__link toc-highlight">ClickHouse Release 19.7</a><ul><li><a href="#clickhouse-release-19-7-5-29-2019-07-05" class="table-of-contents__link toc-highlight">ClickHouse Release 19.7.5.29, 2019-07-05</a></li><li><a href="#clickhouse-release-19-7-5-27-2019-06-09" class="table-of-contents__link toc-highlight">ClickHouse Release 19.7.5.27, 2019-06-09</a></li><li><a href="#clickhouse-release-19-7-3-9-2019-05-30" class="table-of-contents__link toc-highlight">ClickHouse Release 19.7.3.9, 2019-05-30</a></li></ul></li><li><a href="#clickhouse-release-19-6" class="table-of-contents__link toc-highlight">ClickHouse Release 19.6</a><ul><li><a href="#clickhouse-release-19-6-3-18-2019-06-13" class="table-of-contents__link toc-highlight">ClickHouse Release 19.6.3.18, 2019-06-13</a></li><li><a href="#clickhouse-release-19-6-2-11-2019-05-13" class="table-of-contents__link toc-highlight">ClickHouse Release 19.6.2.11, 2019-05-13</a></li></ul></li><li><a href="#clickhouse-release-19-5" class="table-of-contents__link toc-highlight">ClickHouse Release 19.5</a><ul><li><a href="#clickhouse-release-19-5-4-22-2019-05-13" class="table-of-contents__link toc-highlight">ClickHouse Release 19.5.4.22, 2019-05-13</a></li><li><a href="#clickhouse-release-19-5-3-8-2019-04-18" class="table-of-contents__link toc-highlight">ClickHouse Release 19.5.3.8, 2019-04-18</a></li><li><a href="#clickhouse-release-19-5-2-6-2019-04-15" class="table-of-contents__link toc-highlight">ClickHouse Release 19.5.2.6, 2019-04-15</a></li></ul></li><li><a href="#clickhouse-release-19-4" class="table-of-contents__link toc-highlight">ClickHouse Release 19.4</a><ul><li><a href="#clickhouse-release-19-4-4-33-2019-04-17" class="table-of-contents__link toc-highlight">ClickHouse Release 19.4.4.33, 2019-04-17</a></li><li><a href="#clickhouse-release-19-4-3-11-2019-04-02" class="table-of-contents__link toc-highlight">ClickHouse Release 19.4.3.11, 2019-04-02</a></li><li><a href="#clickhouse-release-19-4-2-7-2019-03-30" class="table-of-contents__link toc-highlight">ClickHouse Release 19.4.2.7, 2019-03-30</a></li><li><a href="#clickhouse-release-19-4-1-3-2019-03-19" class="table-of-contents__link toc-highlight">ClickHouse Release 19.4.1.3, 2019-03-19</a></li><li><a href="#clickhouse-release-19-4-0-49-2019-03-09" class="table-of-contents__link toc-highlight">ClickHouse Release 19.4.0.49, 2019-03-09</a></li></ul></li><li><a href="#clickhouse-release-19-3" class="table-of-contents__link toc-highlight">ClickHouse Release 19.3</a><ul><li><a href="#clickhouse-release-19-3-9-1-2019-04-02" class="table-of-contents__link toc-highlight">ClickHouse Release 19.3.9.1, 2019-04-02</a></li><li><a href="#clickhouse-release-19-3-7-2019-03-12" class="table-of-contents__link toc-highlight">ClickHouse Release 19.3.7, 2019-03-12</a></li><li><a href="#clickhouse-release-19-3-6-2019-03-02" class="table-of-contents__link toc-highlight">ClickHouse Release 19.3.6, 2019-03-02</a></li><li><a href="#clickhouse-release-19-3-5-2019-02-21" class="table-of-contents__link toc-highlight">ClickHouse Release 19.3.5, 2019-02-21</a></li><li><a href="#clickhouse-release-19-3-4-2019-02-16" class="table-of-contents__link toc-highlight">ClickHouse Release 19.3.4, 2019-02-16</a></li><li><a href="#clickhouse-release-19-3-3-2019-02-13" class="table-of-contents__link toc-highlight">ClickHouse Release 19.3.3, 2019-02-13</a></li></ul></li><li><a href="#clickhouse-release-19-1" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1</a><ul><li><a href="#clickhouse-release-19-1-14-2019-03-14" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1.14, 2019-03-14</a></li><li><a href="#clickhouse-release-19-1-13-2019-03-12" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1.13, 2019-03-12</a></li><li><a href="#clickhouse-release-19-1-10-2019-03-03" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1.10, 2019-03-03</a></li></ul></li><li><a href="#clickhouse-release-19-1-1" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1</a><ul><li><a href="#clickhouse-release-19-1-9-2019-02-21" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1.9, 2019-02-21</a></li><li><a href="#clickhouse-release-19-1-8-2019-02-16" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1.8, 2019-02-16</a></li></ul></li><li><a href="#clickhouse-release-19-1-2" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1</a><ul><li><a href="#clickhouse-release-19-1-7-2019-02-15" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1.7, 2019-02-15</a></li><li><a href="#clickhouse-release-19-1-6-2019-01-24" class="table-of-contents__link toc-highlight">ClickHouse Release 19.1.6, 2019-01-24</a></li></ul></li><li><a href="#changelog-for-2018" class="table-of-contents__link toc-highlight">Changelog for 2018</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ClickHouse</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://clickhouse.com/cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ClickHouse as a Service</a></li><li class="footer__item"><a href="https://clickhouse.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://clickhouse.com/learn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn ClickHouse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://clickhouse.com/blog/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/clickhousedb/shared_invite/zt-rxm3rdrk-lIUmhLC3V8WTaL0TGxsOmg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Policies</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/legal/trademark-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/docs/testing/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/docs/testing/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></div><div class="footer__copyright">Copyright © 2016 - 2022 ClickHouse, Inc. ClickHouse Docs provided under the Creative Commons CC BY-NC-SA license. ClickHouse is a registered trademark of ClickHouse, Inc.</div></div></div></footer></div>
<script src="/docs/testing/assets/js/runtime~main.6602212c.js"></script>
<script src="/docs/testing/assets/js/main.b12ab45e.js"></script>
</body>
</html>